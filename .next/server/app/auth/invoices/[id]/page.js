(()=>{var e={};e.id=852,e.ids=[852],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},34117:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>r.a,__next_app__:()=>o,pages:()=>p,routeModule:()=>x,tree:()=>c});var t=a(70260),l=a(28203),i=a(25155),r=a.n(i),n=a(67292),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["auth",{children:["invoices",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,54115)),"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/invoices/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,95521)),"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,71354)),"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,50042)),"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/not-found.tsx"]}],p=["/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/invoices/[id]/page.tsx"],o={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/auth/invoices/[id]/page",pathname:"/auth/invoices/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},15320:(e,s,a)=>{"use strict";a.r(s),a.d(s,{"00bcebb40af748360d3173b1776dfd0799709ea208":()=>t.C,"406c9a399a5dfcec52fe686dba0e6828ffa2c4c058":()=>h,"600d8c447bc60900237d76adaf3e2917fcd0507ef8":()=>f,"60445e01d6a067fdf6ea66b9e9e56d711fd10033db":()=>u,"605b65ca41235cba380fa2425f8a6273be12d9bf85":()=>t.J});var t=a(7939),l=a(21590);a(70376);var i=a(99184),r=a(16500);let n=r.z.object({title:r.z.string().min(3,{message:"Title should be at least 3 characters"}),deadline:r.z.string().min(3,{message:"Deadline should be at least 3 characters"}),details:r.z.string().min(3,{message:"Details should be at least 3 characters"}),status:r.z.string(),type:r.z.string(),netPrice:r.z.string().min(3,{message:"Net price should be at least 3 characters"}),tax:r.z.string().min(2,{message:"Tax should be at least 3 characters"}),price:r.z.string().min(3,{message:"Price should be at least 3 characters"})});var d=a(42385),c=a(53332),p=a(47735),o=a(99344);let x=process.env.BASE_URL;async function u(e,s){let{isAuth:a}=await (0,c.g)();if(!a)return;let t=await (0,d.UL)(),l=t.get("session")?.value,r=n.safeParse({title:s.get("title"),deadline:s.get("deadline"),details:s.get("details"),status:s.get("status"),type:s.get("type"),netPrice:s.get("netPrice"),tax:s.get("tax"),price:s.get("price")});return r.success?(await fetch(x+"/api/invoices",{method:"POST",body:JSON.stringify(r.data),headers:{"Content-Type":"application/json",Authorization:`${l}`}})).ok?((0,p.revalidatePath)("/auth/invoices"),(0,i.redirect)("/auth/invoices")):{message:"Error creaing an invoice"}:{errors:r.error?.flatten().fieldErrors}}async function f(e,s){let{isAuth:a}=await (0,c.g)();if(!a)return;let t=await (0,d.UL)(),l=t.get("session")?.value,i=n.safeParse({title:e.get("title"),deadline:e.get("deadline"),details:e.get("details"),status:e.get("status"),type:e.get("type"),netPrice:e.get("netPrice"),tax:e.get("tax"),price:e.get("price")});return i.success?(await fetch(x+`/api/invoices/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`${l}`},body:JSON.stringify(i.data)})).ok?void(0,p.revalidatePath)("/auth/invoices"):{message:"Enter valid data"}:{errors:i.error?.flatten().fieldErrors}}async function h(e){let{isAuth:s}=await (0,c.g)();if(!s)return;let a=await (0,d.UL)(),t=a.get("session")?.value;return(await fetch(x+`/api/invoices/${e}`,{method:"DELETE",headers:{Authorization:`${t}`}})).ok?((0,p.revalidatePath)("/auth/invoices"),(0,i.redirect)("/auth/invoices")):{message:"Error deleting invoice"}}(0,o.D)([u,f,h]),(0,l.A)(u,"60445e01d6a067fdf6ea66b9e9e56d711fd10033db",null),(0,l.A)(f,"600d8c447bc60900237d76adaf3e2917fcd0507ef8",null),(0,l.A)(h,"406c9a399a5dfcec52fe686dba0e6828ffa2c4c058",null)},13045:(e,s,a)=>{Promise.resolve().then(a.bind(a,38529))},3317:(e,s,a)=>{Promise.resolve().then(a.bind(a,86161))},86161:(e,s,a)=>{"use strict";a.d(s,{default:()=>p});var t=a(45512),l=a(26248);let i=(0,l.createServerReference)("600d8c447bc60900237d76adaf3e2917fcd0507ef8",l.callServer,void 0,l.findSourceMapURL,"updateInvoice");var r=a(58009);let n=(0,l.createServerReference)("406c9a399a5dfcec52fe686dba0e6828ffa2c4c058",l.callServer,void 0,l.findSourceMapURL,"deleteInvoice");var d=a(19936);function c({id:e}){let[s,a]=(0,r.useTransition)();return(0,t.jsxs)("div",{className:"h-full w-[50%] flex items-center justify-center",children:[(0,t.jsx)("form",{action:()=>{a(async()=>{await n(e)})},children:(0,t.jsx)("button",{className:"text-red-600",children:"Delete"})}),s&&(0,t.jsx)(d.A,{message:"Deleting invoice..."})]})}function p({invoice:e}){let[s,a]=(0,r.useState)({title:e.title,deadline:e.deadline,details:e.details,status:e.status,type:e.type,netPrice:e.netPrice,tax:e.tax,price:e.price}),[l,n]=(0,r.useState)(),[d,p]=(0,r.useTransition)();function o(e){let{name:t,value:l}=e.target;switch(t){case"title":a({...s,title:l});break;case"deadline":a({...s,deadline:l});break;case"details":a({...s,details:l});break;case"status":a({...s,status:l});break;case"type":a({...s,type:l});break;case"netPrice":a({...s,netPrice:l});break;case"tax":a({...s,tax:l});break;case"price":a({...s,price:l})}}return(0,t.jsxs)("div",{className:"w-full h-full",children:[(0,t.jsxs)("div",{className:"w-full h-full flex",children:[(0,t.jsx)("div",{className:"h-full w-[50%] flex justify-center items-center",children:(0,t.jsxs)("div",{className:"w-[80%] h-[90%] p-[30px] flex flex-col gap-[30px]",children:[(0,t.jsx)("span",{className:"text-[25px]",children:"Invoice Details"}),(0,t.jsxs)("form",{id:"updateInvoiceForm",action:()=>{let a=new FormData;a.append("title",s.title),a.append("deadline",s.deadline),a.append("details",s.details),a.append("status",s.status),a.append("type",s.type),a.append("netPrice",s.netPrice),a.append("tax",s.tax),a.append("price",s.price),p(async()=>{let s=await i(a,e.id);n({errors:s?.errors?{title:s.errors.title||[],details:s.errors.details||[],deadline:s.errors.deadline||[],status:s.errors.status||[],netPrice:s.errors.netPrice||[],tax:s.errors.tax||[],price:s.errors.price||[]}:void 0})})},className:"w-full h-fit flex flex-col gap-[20px]",children:[(0,t.jsxs)("div",{className:"w-full h-[80px] flex gap-[20px]",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-[10px] w-[50%] items-start",children:[(0,t.jsx)("span",{children:"Title"}),(0,t.jsx)("input",{value:s.title,onChange:o,className:"w-full h-[50px] border-[1px] rounded-[10px] outline-none pl-[10px]",type:"text",name:"title"}),l?.errors?.title&&(0,t.jsx)("p",{children:l.errors.title})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-[10px] w-[50%] items-start",children:[(0,t.jsx)("span",{children:"Deadline"}),(0,t.jsx)("input",{value:s.deadline,onChange:o,className:"w-full h-[50px] border-[1px] rounded-[10px] outline-none pl-[10px]",type:"text",name:"deadline"}),l?.errors?.deadline&&(0,t.jsx)("p",{children:l.errors.deadline})]})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Details"}),(0,t.jsx)("input",{value:s.details,onChange:o,type:"text",name:"details",className:"h-full border-[1px] rounded-[10px] outline-none pl-[10px]"}),l?.errors?.details&&(0,t.jsx)("p",{children:l.errors.details})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex gap-[20px]",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-[10px] w-[50%] items-start",children:[(0,t.jsx)("span",{children:"Status"}),(0,t.jsxs)("select",{name:"status",defaultValue:s.status,onChange:o,className:"w-full outline-none border-[1px] rounded-[10px] h-full",children:[(0,t.jsx)("option",{value:"Unpaid",children:"Unpaid"}),(0,t.jsx)("option",{value:"Paid",children:"Paid"}),(0,t.jsx)("option",{value:"Pending",children:"Pending"}),(0,t.jsx)("option",{value:"Rejected",children:"Rejected"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-[10px] w-[50%] items-start",children:[(0,t.jsx)("span",{children:"Type"}),(0,t.jsxs)("select",{name:"type",defaultValue:s.type,onChange:o,className:"w-full outline-none border-[1px] rounded-[10px] h-full",children:[(0,t.jsx)("option",{value:"Sales Invoice",children:"Sales invoice"}),(0,t.jsx)("option",{value:"Cost Invoice",children:"Cost Invoice"})]})]})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Net price"}),(0,t.jsx)("input",{onChange:o,value:s.netPrice,type:"text",name:"netPrice",className:"h-full border-[1px] rounded-[10px] outline-none pl-[10px]"}),l?.errors?.netPrice&&(0,t.jsx)("p",{children:l.errors.netPrice})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Tax"}),(0,t.jsx)("input",{value:s.tax,onChange:o,type:"text",name:"tax",className:"h-full border-[1px] rounded-[10px] outline-none pl-[10px]"}),l?.errors?.tax&&(0,t.jsx)("p",{children:l.errors.tax})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Price"}),(0,t.jsx)("input",{value:s.price,onChange:o,type:"text",name:"price",className:"h-full border-[1px] rounded-[10px] outline-none pl-[10px]"}),l?.errors?.price&&(0,t.jsx)("p",{children:l.errors.price})]})]}),(0,t.jsxs)("div",{className:"w-full h-[50px] flex gap-[20px] mt-[20px]",children:[(0,t.jsx)("button",{type:"submit",disabled:d,form:"updateInvoiceForm",className:"bg-[#2d2d2d] text-white w-[50%] rounded-[10px]",children:"Update invoice"}),(0,t.jsx)(c,{id:e.id})]})]})}),(0,t.jsx)("div",{className:"h-full w-[50%] bg-[#fbfbfb] flex items-center justify-center",children:(0,t.jsxs)("div",{className:"h-[90%] w-[75%] bg-white rounded-[10px] shadow-xl p-[30px] flex flex-col gap-[30px]",children:[(0,t.jsx)("span",{className:"text-[25px] font-[600]",children:"Invoice"}),(0,t.jsxs)("div",{className:"w-full flex flex-col gap-[20px]",children:[(0,t.jsxs)("div",{className:"w-full h-[80px] flex gap-[20px]",children:[(0,t.jsxs)("div",{className:"w-[50%] h-full flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Title"}),(0,t.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,t.jsx)("p",{className:"pl-[10px]",children:s.title})})]}),(0,t.jsxs)("div",{className:"w-[50%] h-full flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Deadline"}),(0,t.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,t.jsx)("p",{className:"pl-[10px]",children:s.deadline})})]})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Details"}),(0,t.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,t.jsx)("p",{className:"pl-[10px]",children:s.details})})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex gap-[20px]",children:[(0,t.jsxs)("div",{className:"w-[50%] h-full flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Status"}),(0,t.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,t.jsx)("p",{className:"pl-[10px]",children:s.status})})]}),(0,t.jsxs)("div",{className:"w-[50%] h-full flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Type"}),(0,t.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,t.jsx)("p",{className:"pl-[10px]",children:s.type})})]})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Net Price"}),(0,t.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,t.jsx)("p",{className:"pl-[10px]",children:s.netPrice})})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Tax"}),(0,t.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,t.jsx)("p",{className:"pl-[10px]",children:s.tax})})]}),(0,t.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,t.jsx)("span",{children:"Price"}),(0,t.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,t.jsx)("p",{className:"pl-[10px]",children:s.price})})]})]})]})})]}),d&&(0,t.jsx)("div",{className:"h-screen w-screen bg-white top-0 left-0 fixed flex items-center justify-center font-[500] text-[20px]",children:(0,t.jsx)("p",{children:"Updating..."})})]})}},19936:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(45512),l=a(91680),i=a.n(l);function r({message:e}){return(0,t.jsx)("div",{className:i().loading,children:(0,t.jsx)("p",{children:e})})}},91680:e=>{e.exports={loading:"styles_loading__o4T_w"}},38529:(e,s,a)=>{"use strict";a.d(s,{default:()=>t});let t=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/invoices/[id]/Invoice/Invoice.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/invoices/[id]/Invoice/Invoice.tsx","default")},54115:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var t=a(62740),l=a(71444),i=a(38529),r=a(44512);async function n({params:e}){let s=await (0,r.UL)(),a=s.get("session")?.value,n=(await e).id,d=await (0,l.Y4)(a,n);return(0,t.jsx)("div",{className:"h-screen w-screen pt-[100px]",children:(0,t.jsx)(i.default,{invoice:d})})}},53332:(e,s,a)=>{"use strict";a.d(s,{g:()=>r});var t=a(42385),l=a(6439),i=a(99184);let r=async()=>{let e=(await t.UL()).get("session")?.value,s=await (0,l.Yc)(e);return s?.userId||(0,i.redirect)("/login"),{isAuth:!0,userId:s?.userId,organizationId:s?.organizationId}}}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[989,405,892,155,200,735,476],()=>a(34117));module.exports=t})();