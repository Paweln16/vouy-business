(()=>{var e={};e.id=852,e.ids=[852],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},34117:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>o,pages:()=>p,routeModule:()=>x,tree:()=>c});var a=t(70260),l=t(28203),r=t(25155),i=t.n(r),n=t(67292),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["auth",{children:["invoices",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,54115)),"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/invoices/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,95521)),"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,50042)),"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/not-found.tsx"]}],p=["/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/invoices/[id]/page.tsx"],o={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/auth/invoices/[id]/page",pathname:"/auth/invoices/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},15320:(e,s,t)=>{"use strict";t.r(s),t.d(s,{"00bcebb40af748360d3173b1776dfd0799709ea208":()=>a.C,"406c9a399a5dfcec52fe686dba0e6828ffa2c4c058":()=>f,"600d8c447bc60900237d76adaf3e2917fcd0507ef8":()=>u,"60445e01d6a067fdf6ea66b9e9e56d711fd10033db":()=>x,"605b65ca41235cba380fa2425f8a6273be12d9bf85":()=>a.J});var a=t(7939),l=t(21590);t(70376);var r=t(99184),i=t(16500);let n=i.z.object({title:i.z.string().min(3,{message:"Title should be at least 3 characters"}),deadline:i.z.string().min(3,{message:"Deadline should be at least 3 characters"}),details:i.z.string().min(3,{message:"Details should be at least 3 characters"}),status:i.z.string(),type:i.z.string(),netPrice:i.z.string().min(3,{message:"Net price should be at least 3 characters"}),tax:i.z.string().min(2,{message:"Tax should be at least 3 characters"}),price:i.z.string().min(3,{message:"Price should be at least 3 characters"})});var d=t(42385),c=t(53332),p=t(99344);let o=process.env.BASE_URL;async function x(e,s){let{isAuth:t}=await (0,c.g)();if(!t)return;let a=await (0,d.UL)(),l=a.get("session")?.value,i=n.safeParse({title:s.get("title"),deadline:s.get("deadline"),details:s.get("details"),status:s.get("status"),type:s.get("type"),netPrice:s.get("netPrice"),tax:s.get("tax"),price:s.get("price")});return i.success?(await fetch(o+"/api/invoices",{method:"POST",body:JSON.stringify(i.data),headers:{"Content-Type":"application/json",Authorization:`${l}`}})).ok?(0,r.redirect)("/auth/invoices"):{message:"Error creaing an invoice"}:{errors:i.error?.flatten().fieldErrors}}async function u(e,s){let{isAuth:t}=await (0,c.g)();if(!t)return;let a=await (0,d.UL)(),l=a.get("session")?.value,r=n.safeParse({title:e.get("title"),deadline:e.get("deadline"),details:e.get("details"),status:e.get("status"),type:e.get("type"),netPrice:e.get("netPrice"),tax:e.get("tax"),price:e.get("price")});return r.success?(await fetch(o+`/api/invoices/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`${l}`},body:JSON.stringify(r.data)})).ok?void 0:{message:"Enter valid data"}:{errors:r.error?.flatten().fieldErrors}}async function f(e){let{isAuth:s}=await (0,c.g)();if(!s)return;let t=await (0,d.UL)(),a=t.get("session")?.value;return(await fetch(o+`/api/invoices/${e}`,{method:"DELETE",headers:{Authorization:`${a}`}})).ok?(0,r.redirect)("/auth/invoices"):{message:"Error deleting invoice"}}(0,p.D)([x,u,f]),(0,l.A)(x,"60445e01d6a067fdf6ea66b9e9e56d711fd10033db",null),(0,l.A)(u,"600d8c447bc60900237d76adaf3e2917fcd0507ef8",null),(0,l.A)(f,"406c9a399a5dfcec52fe686dba0e6828ffa2c4c058",null)},13045:(e,s,t)=>{Promise.resolve().then(t.bind(t,38529))},3317:(e,s,t)=>{Promise.resolve().then(t.bind(t,86161))},86161:(e,s,t)=>{"use strict";t.d(s,{default:()=>p});var a=t(45512),l=t(26248);let r=(0,l.createServerReference)("600d8c447bc60900237d76adaf3e2917fcd0507ef8",l.callServer,void 0,l.findSourceMapURL,"updateInvoice");var i=t(58009);let n=(0,l.createServerReference)("406c9a399a5dfcec52fe686dba0e6828ffa2c4c058",l.callServer,void 0,l.findSourceMapURL,"deleteInvoice");var d=t(19936);function c({id:e}){let[s,t]=(0,i.useTransition)();return(0,a.jsxs)("div",{className:"h-full w-[50%] flex items-center justify-center",children:[(0,a.jsx)("form",{action:()=>{t(async()=>{await n(e)})},children:(0,a.jsx)("button",{className:"text-red-600",children:"Delete"})}),s&&(0,a.jsx)(d.A,{message:"Deleting invoice..."})]})}function p({invoice:e}){let[s,t]=(0,i.useState)({title:e.title,deadline:e.deadline,details:e.details,status:e.status,type:e.type,netPrice:e.netPrice,tax:e.tax,price:e.price}),[l,n]=(0,i.useState)(),[d,p]=(0,i.useTransition)();function o(e){let{name:a,value:l}=e.target;switch(a){case"title":t({...s,title:l});break;case"deadline":t({...s,deadline:l});break;case"details":t({...s,details:l});break;case"status":t({...s,status:l});break;case"type":t({...s,type:l});break;case"netPrice":t({...s,netPrice:l});break;case"tax":t({...s,tax:l});break;case"price":t({...s,price:l})}}return(0,a.jsxs)("div",{className:"w-full h-full",children:[(0,a.jsxs)("div",{className:"w-full h-full flex",children:[(0,a.jsx)("div",{className:"h-full w-[50%] flex justify-center items-center",children:(0,a.jsxs)("div",{className:"w-[80%] h-[90%] p-[30px] flex flex-col gap-[30px]",children:[(0,a.jsx)("span",{className:"text-[25px]",children:"Invoice Details"}),(0,a.jsxs)("form",{id:"updateInvoiceForm",action:()=>{let t=new FormData;t.append("title",s.title),t.append("deadline",s.deadline),t.append("details",s.details),t.append("status",s.status),t.append("type",s.type),t.append("netPrice",s.netPrice),t.append("tax",s.tax),t.append("price",s.price),p(async()=>{let s=await r(t,e.id);n({errors:s?.errors?{title:s.errors.title||[],details:s.errors.details||[],deadline:s.errors.deadline||[],status:s.errors.status||[],netPrice:s.errors.netPrice||[],tax:s.errors.tax||[],price:s.errors.price||[]}:void 0})})},className:"w-full h-fit flex flex-col gap-[20px]",children:[(0,a.jsxs)("div",{className:"w-full h-[80px] flex gap-[20px]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-[10px] w-[50%] items-start",children:[(0,a.jsx)("span",{children:"Title"}),(0,a.jsx)("input",{value:s.title,onChange:o,className:"w-full h-[50px] border-[1px] rounded-[10px] outline-none pl-[10px]",type:"text",name:"title"}),l?.errors?.title&&(0,a.jsx)("p",{children:l.errors.title})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-[10px] w-[50%] items-start",children:[(0,a.jsx)("span",{children:"Deadline"}),(0,a.jsx)("input",{value:s.deadline,onChange:o,className:"w-full h-[50px] border-[1px] rounded-[10px] outline-none pl-[10px]",type:"text",name:"deadline"}),l?.errors?.deadline&&(0,a.jsx)("p",{children:l.errors.deadline})]})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Details"}),(0,a.jsx)("input",{value:s.details,onChange:o,type:"text",name:"details",className:"h-full border-[1px] rounded-[10px] outline-none pl-[10px]"}),l?.errors?.details&&(0,a.jsx)("p",{children:l.errors.details})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex gap-[20px]",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-[10px] w-[50%] items-start",children:[(0,a.jsx)("span",{children:"Status"}),(0,a.jsxs)("select",{name:"status",defaultValue:s.status,onChange:o,className:"w-full outline-none border-[1px] rounded-[10px] h-full",children:[(0,a.jsx)("option",{value:"Unpaid",children:"Unpaid"}),(0,a.jsx)("option",{value:"Paid",children:"Paid"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"Rejected",children:"Rejected"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-[10px] w-[50%] items-start",children:[(0,a.jsx)("span",{children:"Type"}),(0,a.jsxs)("select",{name:"type",defaultValue:s.type,onChange:o,className:"w-full outline-none border-[1px] rounded-[10px] h-full",children:[(0,a.jsx)("option",{value:"Sales Invoice",children:"Sales invoice"}),(0,a.jsx)("option",{value:"Cost Invoice",children:"Cost Invoice"})]})]})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Net price"}),(0,a.jsx)("input",{onChange:o,value:s.netPrice,type:"text",name:"netPrice",className:"h-full border-[1px] rounded-[10px] outline-none pl-[10px]"}),l?.errors?.netPrice&&(0,a.jsx)("p",{children:l.errors.netPrice})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Tax"}),(0,a.jsx)("input",{value:s.tax,onChange:o,type:"text",name:"tax",className:"h-full border-[1px] rounded-[10px] outline-none pl-[10px]"}),l?.errors?.tax&&(0,a.jsx)("p",{children:l.errors.tax})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Price"}),(0,a.jsx)("input",{value:s.price,onChange:o,type:"text",name:"price",className:"h-full border-[1px] rounded-[10px] outline-none pl-[10px]"}),l?.errors?.price&&(0,a.jsx)("p",{children:l.errors.price})]})]}),(0,a.jsxs)("div",{className:"w-full h-[50px] flex gap-[20px] mt-[20px]",children:[(0,a.jsx)("button",{type:"submit",disabled:d,form:"updateInvoiceForm",className:"bg-[#2d2d2d] text-white w-[50%] rounded-[10px]",children:"Update invoice"}),(0,a.jsx)(c,{id:e.id})]})]})}),(0,a.jsx)("div",{className:"h-full w-[50%] bg-[#fbfbfb] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"h-[90%] w-[75%] bg-white rounded-[10px] shadow-xl p-[30px] flex flex-col gap-[30px]",children:[(0,a.jsx)("span",{className:"text-[25px] font-[600]",children:"Invoice"}),(0,a.jsxs)("div",{className:"w-full flex flex-col gap-[20px]",children:[(0,a.jsxs)("div",{className:"w-full h-[80px] flex gap-[20px]",children:[(0,a.jsxs)("div",{className:"w-[50%] h-full flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Title"}),(0,a.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,a.jsx)("p",{className:"pl-[10px]",children:s.title})})]}),(0,a.jsxs)("div",{className:"w-[50%] h-full flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Deadline"}),(0,a.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,a.jsx)("p",{className:"pl-[10px]",children:s.deadline})})]})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Details"}),(0,a.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,a.jsx)("p",{className:"pl-[10px]",children:s.details})})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex gap-[20px]",children:[(0,a.jsxs)("div",{className:"w-[50%] h-full flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Status"}),(0,a.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,a.jsx)("p",{className:"pl-[10px]",children:s.status})})]}),(0,a.jsxs)("div",{className:"w-[50%] h-full flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Type"}),(0,a.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,a.jsx)("p",{className:"pl-[10px]",children:s.type})})]})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Net Price"}),(0,a.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,a.jsx)("p",{className:"pl-[10px]",children:s.netPrice})})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Tax"}),(0,a.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,a.jsx)("p",{className:"pl-[10px]",children:s.tax})})]}),(0,a.jsxs)("div",{className:"w-full h-[80px] flex flex-col gap-[10px]",children:[(0,a.jsx)("span",{children:"Price"}),(0,a.jsx)("div",{className:"w-full h-full flex items-center border-[1px] rounded-[10px]",children:(0,a.jsx)("p",{className:"pl-[10px]",children:s.price})})]})]})]})})]}),d&&(0,a.jsx)("div",{className:"h-screen w-screen bg-white top-0 left-0 fixed flex items-center justify-center font-[500] text-[20px]",children:(0,a.jsx)("p",{children:"Updating..."})})]})}},19936:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(45512);function l({message:e}){return(0,a.jsx)("div",{className:"h-screen w-screen bg-white flex items-center justify-center fixed top-0 left-0 text-black font-[500] text-[20px]",children:(0,a.jsx)("p",{children:e})})}},38529:(e,s,t)=>{"use strict";t.d(s,{default:()=>a});let a=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/invoices/[id]/Invoice/Invoice.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/auth/invoices/[id]/Invoice/Invoice.tsx","default")},54115:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(62740),l=t(71444),r=t(38529),i=t(44512);async function n({params:e}){let s=await (0,i.UL)(),t=s.get("session")?.value,n=(await e).id,d=await (0,l.Y4)(t,n);return(0,a.jsx)("div",{className:"h-screen w-screen pt-[100px]",children:(0,a.jsx)(r.default,{invoice:d})})}},53332:(e,s,t)=>{"use strict";t.d(s,{g:()=>i});var a=t(42385),l=t(6439),r=t(99184);let i=async()=>{let e=(await a.UL()).get("session")?.value,s=await (0,l.Yc)(e);return s?.userId||(0,r.redirect)("/login"),{isAuth:!0,userId:s?.userId,organizationId:s?.organizationId}}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[989,405,892,155,987,476],()=>t(34117));module.exports=a})();