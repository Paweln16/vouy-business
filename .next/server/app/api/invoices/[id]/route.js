(()=>{var e={};e.id=684,e.ids=[684],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},92858:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>f,serverHooks:()=>y,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>w});var n={};r.r(n),r.d(n,{DELETE:()=>l,GET:()=>p,PUT:()=>d});var s=r(42706),i=r(28203),o=r(45994),a=r(65233),u=r(3930),c=r(39187);async function p(e,{params:t}){let{id:r}=await t,n=e.headers.get("authorization"),s=await (0,u.Yc)(n);if(!n||!s)return c.NextResponse.json({message:"Unauthorized"},{status:401});let i=s.organizationId;try{let e=await a.A.invoice.findUnique({where:{id:r,organizationId:i}});return c.NextResponse.json(e,{status:200})}catch(e){return c.NextResponse.json({error:e},{status:500})}}async function d(e,{params:t}){let r=e.headers.get("authorization"),n=await (0,u.Yc)(r);if(!r||!n)return c.NextResponse.json({message:"Unauthorized"},{status:401});let s=(await t).id,i=n.organizationId,{title:o,deadline:p,details:d,status:l,type:f,netPrice:v,tax:w,price:y}=await e.json();try{return await a.A.invoice.update({where:{id:s,organizationId:i},data:{title:o,deadline:p,details:d,status:l,type:f,netPrice:v,tax:w,price:y}}),c.NextResponse.json({message:"Invoice updated"},{status:200})}catch(e){return c.NextResponse.json({error:e},{status:400})}}async function l(e,{params:t}){let r=e.headers.get("authorization"),n=await (0,u.Yc)(r);if(!r||!n)return c.NextResponse.json({message:"Unauthorized"},{status:401});let s=(await t).id,i=n.organizationId;try{return await a.A.invoice.delete({where:{id:s,organizationId:i}}),c.NextResponse.json({message:"Invoice deleted"},{status:200})}catch(e){return c.NextResponse.json({error:e},{status:500})}}let f=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/invoices/[id]/route",pathname:"/api/invoices/[id]",filename:"route",bundlePath:"app/api/invoices/[id]/route"},resolvedPagePath:"/Users/pawelniedzwiedz/Desktop/vouy-business/src/app/api/invoices/[id]/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:v,workUnitAsyncStorage:w,serverHooks:y}=f;function g(){return(0,o.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:w})}},96487:()=>{},78335:()=>{},37301:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return u}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(void 0);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(76301));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}let i={current:null},o="function"==typeof n.cache?n.cache:e=>e,a=console.warn;function u(e){return function(...t){a(e(...t))}}o(e=>{try{a(i.current)}finally{i.current=null}})},65233:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=new(require("@prisma/client")).PrismaClient},3930:(e,t,r)=>{"use strict";r.d(t,{Yc:()=>o}),r(44512);var n=r(89888);let s=process.env.AUTH_SECRET,i=new TextEncoder().encode(s);async function o(e=""){try{let{payload:t}=await (0,n.V)(e,i,{algorithms:["HS256"]});return t}catch(e){console.log("Failed to verify session")}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[989,155,452],()=>r(92858));module.exports=n})();