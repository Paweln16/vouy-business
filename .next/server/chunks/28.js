"use strict";exports.id=28,exports.ids=[28],exports.modules={18028:(t,e,i)=>{i.d(e,{ui:()=>yc});var a=i(58009),s=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=(t,e)=>{for(var i in e)s(t,i,{get:e[i],enumerable:!0})},o=(t,e,i,a)=>{for(var n,o=a>1?void 0:a?r(e,i):e,l=t.length-1;l>=0;l--)(n=t[l])&&(o=(a?n(e,i,o):n(o))||o);return a&&o&&s(e,i,o),o},l={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsColor:"Color",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}"},h=["delete-legacy","disjoint-channel","disjoint-channel-legacy","horizontal-line-legacy","line-color-legacy","lock","lock-legacy","pan-end-legacy","pan-left-legacy","pan-right-legacy","pan-start-legacy","parallel-channel","parallel-channel-legacy","reset-legacy","trend-line","trend-line-legacy","unlock","unlock-legacy","vertical-line","vertical-line-legacy","zoom-in-legacy","zoom-in-alt","zoom-in-alt-legacy","zoom-out-legacy","zoom-out-alt","zoom-out-alt-legacy"],d=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(d||{});n({},{TimeInterval:()=>m,day:()=>N,friday:()=>E,hour:()=>S,millisecond:()=>x,minute:()=>I,monday:()=>w,month:()=>j,saturday:()=>O,second:()=>b,sunday:()=>A,thursday:()=>k,tuesday:()=>C,utcDay:()=>B,utcHour:()=>P,utcMinute:()=>z,utcMonth:()=>G,utcYear:()=>F,wednesday:()=>T,year:()=>R});var u=new Map;function c(t,e){u.has(e)||(u.set(e,!0),t())}function p(t){return t}function g(t,e=0,i){let a,s;let{leading:r=!0,trailing:n=!0}=i??{},o=!1;function l(){n&&s?(a=setTimeout(l,e),t(...s)):o=!1,s=null}return Object.assign(function(...i){o?s=i:(o=!0,a=setTimeout(l,e),r?t(...i):s=i)},{cancel(){clearTimeout(a),o=!1,s=null}})}c.clear=()=>u.clear();var y={log(...t){console.log(...t)},warn(t,...e){console.warn(`AG Charts - ${t}`,...e)},error(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error(`AG Charts - ${t}`,...e)},table(...t){console.table(...t)},warnOnce(t,...e){c(()=>y.warn(t,...e),`Logger.warn: ${t}`)},errorOnce(t,...e){c(()=>y.error(t,...e),`Logger.error: ${t}`)}},m=class{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){let e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){let e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){let a=this._rangeCallback?.(t,e),s=this._encode(i?this.floor(t):this.ceil(t)),r=this._encode(i?this.ceil(e):this.floor(e));if(r<s)return[];let n=[];for(let t=s;t<=r;t++){let e=this._decode(t);n.push(e)}return a?.(),n}},f=class extends m{getOffset(t,e){return Math.floor("number"==typeof t||t instanceof Date?this._encode(new Date(t)):0)%e}every(t,e){let i,a=0,s=t;s!==(t=Math.max(1,Math.round(t)))&&y.warnOnce(`interval step of [${s}] rounded to [${t}].`);let{snapTo:r="start"}=e??{};if("string"==typeof r){let e=a;i=(i,s)=>(a=this.getOffset("start"===r?i:s,t),()=>a=e)}else"number"==typeof r?a=this.getOffset(new Date(r),t):r instanceof Date&&(a=this.getOffset(r,t));return new m(e=>Math.floor((this._encode(e)-a)/t),e=>this._decode(e*t+a),i)}},x=new f(function(t){return t.getTime()},function(t){return new Date(t)});new Date(0).getFullYear();var M=6e4*new Date().getTimezoneOffset(),b=new f(function(t){return Math.floor((t.getTime()-M)/1e3)},function(t){return new Date(M+1e3*t)}),v=6e4*new Date().getTimezoneOffset(),I=new f(function(t){return Math.floor((t.getTime()-v)/6e4)},function(t){return new Date(v+6e4*t)}),D=6e4*new Date().getTimezoneOffset(),S=new f(function(t){return Math.floor((t.getTime()-D)/36e5)},function(t){return new Date(D+36e5*t)}),N=new f(function(t){let e=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-e)/864e5)},function(t){let e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e});function L(t){let e=(7+t-4)%7;return new f(function(t){let i=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-i)/6048e5-e/7)},function(t){let i=new Date(1970,0,1);return i.setDate(i.getDate()+7*t+e),i})}var A=L(0),w=L(1),C=L(2),T=L(3),k=L(4),E=L(5),O=L(6),j=new f(function(t){return 12*t.getFullYear()+t.getMonth()},function(t){let e=Math.floor(t/12);return new Date(e,t-12*e,1)}),R=new f(function(t){return t.getFullYear()},function(t){let e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}),z=new f(function(t){return Math.floor(t.getTime()/6e4)},function(t){return new Date(6e4*t)}),P=new f(function(t){return Math.floor(t.getTime()/36e5)},function(t){return new Date(36e5*t)}),B=new f(function(t){return Math.floor(t.getTime()/864e5)},function(t){let e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}),G=new f(function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()},function(t){let e=Math.floor(t/12);return new Date(Date.UTC(e,t-12*e,1))}),F=new f(function(t){return t.getUTCFullYear()},function(t){let e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}),U={};n(U,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>eb,fromToMotion:()=>ev,staticFromToMotion:()=>eI});var Y=new Map;function Z(){Y.clear()}function _(t){let e=t.constructor,i=Object.hasOwn(e,"className")?e.className:e.name;if(!i)throw Error(`The ${e} is missing the 'className' property.`);let a=(Y.get(i)??0)+1;return Y.set(i,a),`${i}-${a}`}function V(){return crypto.randomUUID?.()??function(){let t=new Uint8Array(16);crypto.getRandomValues(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;let e="";for(let i=0;i<t.length;i++)(4===i||6===i||8===i||10===i)&&(e+="-"),e+=t[i].toString(16).padStart(2,"0");return e}()}function*W(...t){for(let e of t)yield*e}function H(t){return null!=t&&"object"==typeof t&&Symbol.iterator in t?t:[t]}var $=Symbol("interpolate"),Q=t=>null!=t[$];function X(t,e,i,a=1/0){let s={nearest:void 0,distanceSquared:a};for(let a of i){let i=a.distanceSquared(t,e);if(0===i)return{nearest:a,distanceSquared:0};i<s.distanceSquared&&(s.nearest=a,s.distanceSquared=i)}return s}function K(t,e,i,a=1/0){let{x:s=t,y:r=e}=i.transformPoint?.(t,e)??{},n={nearest:void 0,distanceSquared:a};for(let t of i.children){let{nearest:e,distanceSquared:i}=t.nearestSquared(s,r,n.distanceSquared);if(0===i)return{nearest:e,distanceSquared:i};i<n.distanceSquared&&(n.nearest=e,n.distanceSquared=i)}return n}var J={};function q(t){return t?J.document?.[t]:J.document}function tt(t){return t?J.window?.[t]:J.window}function te(t,e,i){let a=q().createElement(t);if("object"==typeof e&&(i=e,e=void 0),e)for(let t of e.split(" "))a.classList.add(t);return i&&Object.assign(a.style,i),a}function ti(t,e){return q().createElementNS(t,e)}function ta(t,e){let{body:i}=q(),a=te("a",{display:"none"});a.href=t,a.download=e,i.appendChild(a),a.click(),setTimeout(()=>i.removeChild(a))}function ts(t){J.document=t}function tr(t){J.window=t}function tn(t,e){t&&(t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.left=`${e.x}px`,t.style.top=`${e.y}px`)}function to(t){if(t.focus({preventScroll:!0}),t.lastChild?.textContent==null)return;let e=q().createRange();e.setStart(t.lastChild,t.lastChild.textContent.length),e.setEnd(t.lastChild,t.lastChild.textContent.length);let i=tt().getSelection();i?.removeAllRanges(),i?.addRange(e)}"undefined"!=typeof window?J.window=window:"undefined"!=typeof global&&(J.window=global.window),"undefined"!=typeof document?J.document=document:"undefined"!=typeof global&&(J.document=global.document);var tl=0;function th(t){return`${t??"ag-charts-element"}-${tl++}`}function td(t,e,i){return Math.min(i,Math.max(t,e))}function tu(t,e){let[i,a]=tc(e);return td(i,t,a)}function tc(t){if(0===t.length)return[];let e=[1/0,-1/0];for(let i of t)i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i);return e}function tp(t){let[e,i]=tc(t);return i-e}function tg(t,e,i=1e-10){return Math.abs(t-e)<i}function ty(t){return -1===Math.sign(t)||Object.is(t,-0)}function tm(t,e=2){let i=10**e;return Math.round(t*i)/i}function tf(t,e=2){let i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function tx(t,e){return Math.floor(t%e+(t<0?e:0))}function tM(t){if(Math.floor(t)===t)return 0;let e=String(t),i=0;if(t<1e-6||t>=1e21){let t;[e,t]=e.split("e"),null!=t&&(i=Number(t))}return Math.max((e.split(".")[1]?.length??0)-i,0)}function tb(t,e){return e=e??tt("navigator").language,new Intl.NumberFormat(e,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function tv(t,e){return tb(t/100,e)}var tI=class t{constructor(t,e,i,a){this.x=t,this.y=e,this.width=i,this.height=a}static fromDOMRect({x:e,y:i,width:a,height:s}){return new t(e,i,a,s)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON:()=>({})}}clone(){let{x:e,y:i,width:a,height:s}=this;return new t(e,i,a,s)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}intersection(e){if(!this.collidesBBox(e))return;let i=td(e.x,this.x,e.x+e.width),a=td(e.y,this.y,e.y+e.height);return new t(i,a,td(e.x,this.x+this.width,e.x+e.width)-i,td(e.y,this.y+this.height,e.y+e.height)-a)}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,e){if(this.containsPoint(t,e))return 0;let i=t-td(this.x,t,this.x+this.width),a=e-td(this.y,e,this.y+this.height);return i*i+a*a}static nearestBox(t,e,i){return X(t,e,i)}clip(t){if(void 0===t)return this;let e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),a=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.y=i,this.width=Math.max(0,a-e),this.height=Math.max(0,s-i),this}shrink(t,e){let i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):"object"==typeof t&&Object.entries(t).forEach(([t,e])=>i(t,e)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{let e={...t};for(let t in e)e[t]*=-1;this.shrink(e)}return this}translate(t,e){return this.x+=t,this.y+=e,this}combine(t){let{x:e,y:i,width:a,height:s}=this;this.x=Math.min(e,t.x),this.y=Math.min(i,t.y),this.width=Math.max(e+a,t.x+t.width)-this.x,this.height=Math.max(i+s,t.y+t.height)-this.y}static merge(e){let i=1/0,a=1/0,s=-1/0,r=-1/0;for(let t of e)t.x<i&&(i=t.x),t.y<a&&(a=t.y),t.x+t.width>s&&(s=t.x+t.width),t.y+t.height>r&&(r=t.y+t.height);return new t(i,a,s-i,r-a)}[$](e,i){return new t(this.x*(1-i)+e.x*i,this.y*(1-i)+e.y*i,this.width*(1-i)+e.width*i,this.height*(1-i)+e.height*i)}};tI.zero=Object.freeze(new tI(0,0,0,0)),tI.NaN=Object.freeze(new tI(NaN,NaN,NaN,NaN));var tD=(t=>(t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR",t))(tD||{});function tS(t){return function(e,i){let a=`__${i}`;e[i]||function(t,e,i,a){let s;let{redraw:r=1,type:n="normal",changeCb:o,convertor:l,checkDirtyOnAssignment:h=!1}=a??{},d={redraw:r,type:n,changeCb:o,checkDirtyOnAssignment:h,convertor:l};switch(n){case"normal":s=function(t,e){let{redraw:i=1,changeCb:a}=e;return function(e){return e!==this[t]?(this[t]=e,this.markDirty(i),a?.(this),e):tN}}(i,d);break;case"transform":s=function(t,e){let{redraw:i=1}=e;return function(e){return e!==this[t]?(this[t]=e,this.markDirtyTransform(i),e):tN}}(i,d);break;case"path":s=function(t,e){let{redraw:i=1}=e;return function(e){return e!==this[t]?(this[t]=e,this._dirtyPath||(this._dirtyPath=!0,this.markDirty(i)),e):tN}}(i,d)}Object.defineProperty(t,e,{set:s=function(t,e){let{checkDirtyOnAssignment:i}=e;return i?function(e){let i=t.call(this,e);return i!==tN&&null!=e&&e._dirty>0&&this.markDirty(e._dirty),i}:t}(function(t,e){let{changeCb:i}=e;return i?function(e){let a=t.call(this,e);return a!==tN&&i.call(this,this),a}:t}(function(t,e){let{convertor:i}=e;return i?function(e){t.call(this,i(e))}:t}(s,d),d),d),get:function(){return this[i]},enumerable:!0,configurable:!0})}(e,i,a,t)}}var tN=Symbol("no-change"),tL=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(tL||{}),tA=class t{constructor(e){this.serialNumber=t._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0},this.id=_(this),this.pointerEvents=0,this._dirty=3,this.dirtyZIndex=!1,this.virtualChildrenCount=0,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.zIndexSubOrder=void 0,this.name=e?.name,this.isVirtual=e?.isVirtual??!1,this.tag=e?.tag??NaN,this.zIndex=e?.zIndex??0}static*extractBBoxes(t,e){for(let i of t)if(!e||i.visible&&!i.transitionOut){let t=i.getBBox();t&&(yield t)}}get datum(){return this._datum??this.parentNode?.datum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum,this._datum=t)}get previousDatum(){return this._previousDatum}get layerManager(){return this._layerManager}get dirty(){return this._dirty}preRender(){for(let t of(this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.children())){let e=t.preRender();this.childNodeCounts.groups+=e.groups,this.childNodeCounts.nonGroups+=e.nonGroups}return this.childNodeCounts}render(t){let{stats:e}=t;if(this._dirty=0,t.debugNodeSearch){let e=this.name??this.id;t.debugNodeSearch.some(t=>"string"==typeof t?t===e:t.test(e))&&(t.debugNodes[this.name??this.id]=this)}e&&e.nodesRendered++}_setLayerManager(t){for(let e of(this._layerManager=t,this._debug=t?.debug,this.children(!1)))e._setLayerManager(t)}sortChildren(t){if(this.dirtyZIndex=!1,!this.childNodes||this.hasVirtualChildren())return;let e=[...this.childNodes].sort(t);for(let t of(this.childNodes.clear(),e))this.childNodes.add(t)}*traverseUp(t){let e=this;for(t&&(yield e);e=e.parentNode;)yield e}*children(t=!0){if(!this.childNodes)return;let e=[];for(let i of this.childNodes)t&&i.isVirtual?e.push(i.children()):yield i;for(let t of e)yield*t}*virtualChildren(){if(this.childNodes&&this.virtualChildrenCount)for(let t of this.childNodes)t.isVirtual&&(yield t)}hasVirtualChildren(){return this.virtualChildrenCount>0}isLeaf(){return!this.childNodes?.size}isRoot(){return!this.parentNode}append(t){for(let e of(this.childNodes??(this.childNodes=new Set),H(t)))e.parentNode?.removeChild(e),this.childNodes.add(e),e.parentNode=this,e._setLayerManager(this.layerManager),e.isVirtual&&this.virtualChildrenCount++;this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(3)}appendChild(t){return this.append(t),t}removeChild(t){return!!this.childNodes?.delete(t)&&(delete t.parentNode,t._setLayerManager(),t.isVirtual&&this.virtualChildrenCount--,this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(3),!0)}remove(){return this.parentNode?.removeChild(this)??!1}clear(){for(let t of this.children(!1))delete t.parentNode,t._setLayerManager();this.childNodes?.clear(),this.invalidateCachedBBox(),this.virtualChildrenCount=0}destroy(){this.parentNode?.removeChild(this)}setProperties(t,e){if(e)for(let i of e)this[i]=t[i];else Object.assign(this,t);return this}containsPoint(t,e){return!1}pickNode(t,e,i=!1){if(!this.visible||1===this.pointerEvents||!this.containsPoint(t,e))return;let a=[...this.children()];if(a.length>1e3)for(let i=a.length-1;i>=0;i--){let s=a[i],r=s.containsPoint(t,e)?s.pickNode(t,e):void 0;if(r)return r}else if(a.length)for(let i=a.length-1;i>=0;i--){let s=a[i].pickNode(t,e);if(s)return s}else if(!this.isContainerNode)return this}invalidateCachedBBox(){this.cachedBBox=void 0,this.parentNode?.invalidateCachedBBox()}getBBox(){return null==this.cachedBBox&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}markDirty(t=1,e=t){let{_dirty:i}=this,a=i>t||i===t&&t===e;(null!=this.cachedBBox||!a)&&(this.invalidateCachedBBox(),this._dirty=Math.max(i,t),this.parentNode?this.parentNode.markDirty(e):this.layerManager&&this.layerManager.markDirty())}markClean(t){let{force:e=!1,recursive:i=!0}=t??{};if(0!==this._dirty||e)for(let t of(this._dirty=0,this.children(!1)))(t.isVirtual?!1!==i:!0===i)&&t.markClean({force:e})}onVisibleChange(){}onZIndexChange(){this.parentNode&&(this.parentNode.dirtyZIndex=!0)}toSVG(){}};tA._nextSerialNumber=0,o([tS({redraw:3,changeCb:t=>t.onVisibleChange()})],tA.prototype,"visible",2),o([tS({redraw:1,changeCb:t=>t.onZIndexChange()})],tA.prototype,"zIndex",2),o([tS({redraw:1,changeCb:t=>t.onZIndexChange()})],tA.prototype,"zIndexSubOrder",2);var tw=tA,tC=(t,e,i)=>t*(1-i)+e*i,tT=t=>{let e=Math.abs(t);return e<=.04045?t/12.92:(t<0?-1:1)*((e+.055)/1.055)**2.4},tk=t=>{let e=Math.abs(t);return e>.0031308?(t<0?-1:1)*(1.055*e**(1/2.4)-.055):12.92*t},tE=class t{constructor(t,e,i,a=1){this.r=td(0,t||0,1),this.g=td(0,e||0,1),this.b=td(0,i||0,1),this.a=td(0,a||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!t.parseHex(e):e.indexOf("rgb")>=0?!!t.stringToRgba(e):!!t.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return t.fromHexString(e);let i=t.nameToHex[e.toLowerCase()];if(i)return t.fromHexString(i);if(e.indexOf("rgb")>=0)return t.fromRgbaString(e);throw Error(`Invalid color string: '${e}'`)}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(t=>parseInt(t,16)).map(t=>t+16*t)}if(e?.length>=3&&e.every(t=>t>=0))return 3===e.length&&e.push(255),e}static fromHexString(e){let i=t.parseHex(e);if(i){let[e,a,s,r]=i;return new t(e/255,a/255,s/255,r/255)}throw Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(t){let e=-1,i=-1;for(let a=0;a<t.length;a++){let s=t[a];if(-1===e&&"("===s)e=a;else if(")"===s){i=a;break}}if(-1===e||-1===i)return;let a=t.substring(e+1,i).split(","),s=[];for(let t=0;t<a.length;t++){let e=a[t],i=parseFloat(e);if(!Number.isFinite(i))return;i=e.indexOf("%")>=0?td(0,i,100)/100:3===t?td(0,i,1):td(0,i,255)/255,s.push(i)}return s}static fromRgbaString(e){let i=t.stringToRgba(e);if(i){if(3===i.length)return new t(i[0],i[1],i[2]);if(4===i.length)return new t(i[0],i[1],i[2],i[3])}throw Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(4===e.length)return new t(e[0],e[1],e[2],e[3]);if(3===e.length)return new t(e[0],e[1],e[2]);throw Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,a,s=1){let r=t.HSBtoRGB(e,i,a);return new t(r[0],r[1],r[2],s)}static fromHSL(e,i,a,s=1){let r=t.HSLtoRGB(e,i,a);return new t(r[0],r[1],r[2],s)}static fromOKLCH(e,i,a,s=1){let r=t.OKLCHtoRGB(e,i,a);return new t(r[0],r[1],r[2],s)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let e="#"+t.padHex(Math.round(255*this.r).toString(16))+t.padHex(Math.round(255*this.g).toString(16))+t.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=t.padHex(Math.round(255*this.a).toString(16))),e}toRgbaString(t=3){let e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return t.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,e,i){let a=tT(t),s=tT(e),r=tT(i),n=Math.cbrt(.4122214708*a+.5363325363*s+.0514459929*r),o=Math.cbrt(.2119034982*a+.6806995451*s+.1073969566*r),l=Math.cbrt(.0883024619*a+.2817188376*s+.6299787005*r),h=1.9779984951*n-2.428592205*o+.4505937099*l,d=.0259040371*n+.7827717662*o-.808675766*l,u=180*Math.atan2(d,h)/Math.PI;return[.2104542553*n+.793617785*o-.0040720468*l,Math.hypot(h,d),u>=0?u:u+360]}static OKLCHtoRGB(t,e,i){let a=e*Math.cos(i*Math.PI/180),s=e*Math.sin(i*Math.PI/180),r=(t+.3963377774*a+.2158037573*s)**3,n=(t-.1055613458*a-.0638541728*s)**3,o=(t-.0894841775*a-1.291485548*s)**3;return[tk(4.0767416621*r-3.3077115913*n+.2309699292*o),tk(-1.2684380046*r+2.6097574011*n-.3413193965*o),tk(-.0041960863*r-.7034186147*n+1.707614701*o)]}static RGBtoHSL(t,e,i){let a,s;let r=Math.min(t,e,i),n=Math.max(t,e,i),o=(n+r)/2;if(n===r)a=0,s=0;else{let l=n-r;s=o>.5?l/(2-n-r):l/(n+r),a=(n===t?(e-i)/l+(e<i?6:0):n===e?(i-t)/l+2:(t-e)/l+4)*60}return[a,s,o]}static HSLtoRGB(t,e,i){if(t=(t%360+360)%360,0===e)return[i,i,i];let a=i<.5?i*(1+e):i+e-i*e,s=2*i-a;function r(t){return(t<0&&(t+=1),t>1&&(t-=1),t<1/6)?s+(a-s)*6*t:t<.5?a:t<2/3?s+(a-s)*(2/3-t)*6:s}return[r(t/360+1/3),r(t/360),r(t/360-1/3)]}static RGBtoHSB(t,e,i){let a=Math.min(t,e,i),s=Math.max(t,e,i),r=0;if(a!==s){let n=s-a,o=(s-t)/n,l=(s-e)/n,h=(s-i)/n;(r=(t===s?h-l:e===s?2+o-h:4+l-o)/6)<0&&(r+=1)}return[360*r,0===s?0:(s-a)/s,s]}static HSBtoRGB(t,e,i){t=(t%360+360)%360/360;let a=0,s=0,r=0;if(0===e)a=s=r=i;else{let n=(t-Math.floor(t))*6,o=n-Math.floor(n),l=i*(1-e),h=i*(1-e*o),d=i*(1-e*(1-o));switch(n>>0){case 0:a=i,s=d,r=l;break;case 1:a=h,s=i,r=l;break;case 2:a=l,s=i,r=d;break;case 3:a=l,s=h,r=i;break;case 4:a=d,s=l,r=i;break;case 5:a=i,s=l,r=h}}return[a,s,r]}static mix(e,i,a){return new t(tC(e.r,i.r,a),tC(e.g,i.g,a),tC(e.b,i.b,a),tC(e.a,i.a,a))}};function tO(t,e){return i=>Number(t)*(1-i)+Number(e)*i}function tj(t,e){if("string"==typeof t)try{t=tE.fromString(t)}catch(e){t=tE.fromArray([0,0,0])}if("string"==typeof e)try{e=tE.fromString(e)}catch(t){e=tE.fromArray([0,0,0])}return i=>tE.mix(t,e,i).toRgbaString()}tE.nameToHex={__proto__:null,aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};var tR=Symbol("BREAK"),tz="__decorator_config";function tP(t,e){null==Object.getOwnPropertyDescriptor(t,tz)&&Object.defineProperty(t,tz,{value:{}});let i=t[tz],a=e.toString();if(void 0!==i[a])return i[a];let s=new WeakMap;i[a]={setters:[],getters:[],observers:[],valuesMap:s};let r=Object.getOwnPropertyDescriptor(t,e),n=r?.set,o=r?.get;return Object.defineProperty(t,e,{set:function(t){let r;let{setters:l,observers:h}=i[a];for(let i of(l.some(t=>t.length>2)&&(r=o?o.call(this):s.get(this)),l))if((t=i(this,e,t,r))===tR)return;for(let e of(n?n.call(this,t):s.set(this,t),h))e(this,t,r)},get:function(){let t=o?o.call(this):s.get(this);for(let s of i[a].getters)if((t=s(this,e,t))===tR)return;return t},enumerable:!0,configurable:!1}),i[a]}function tB(t,e,i){return(a,s)=>{let r=tP(a,s);r.setters.push(t),e&&r.getters.unshift(e),i&&Object.assign(r,i)}}function tG(t){return void 0!==t&&tz in t}function tF(t){let e=new Set;for(;tG(t);)e.add(t?.[tz]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap(t=>Object.keys(t))}function tU(t){return tF(t).reduce((e,i)=>(e[i]=t[i]??null,e),{})}function tY(t){return null!=t}function tZ(t){return Array.isArray(t)}function t_(t){return"boolean"==typeof t}function tV(t){return t instanceof Date}function tW(t){return tV(t)&&!isNaN(Number(t))}function tH(t){return t instanceof RegExp}function t$(t){return"function"==typeof t}function tQ(t){return"object"==typeof t&&null!==t&&!tZ(t)}function tX(t){return tZ(t)||tK(t)}function tK(t){return"object"==typeof t&&null!==t&&Object.getPrototypeOf(t)===Object.prototype}function tJ(t){return"string"==typeof t}function tq(t){return"number"==typeof t}function t0(t){return Number.isFinite(t)}function t1(t){return"undefined"!=typeof window&&t instanceof HTMLElement}function t2(t,e){return tJ(e)&&Object.keys(t).includes(e)}function t4(t,e){return Object.values(t).includes(e)}function t3(t){return"symbol"==typeof t}function t5(t,e){return t.type!==e}function t9(t,e,i){for(let i in e)if(!(i in t))return!1;for(let a in t)if(!(a in e)||!i(t[a],e[a]))return!1;return!0}function t6(...t){return t8(...t.reverse())}function t8(...t){let e={};for(let i of t)if(tQ(i))for(let t of tG(i)?tF(i):Object.keys(i))tK(e[t])&&tK(i[t])?e[t]=t8(e[t],i[t]):e[t]??(e[t]=i[t]);return e}function t7(t,...e){return e&&tZ(t)?t.map(t=>t8(t,...e)):t}function et(t,e){return Object.entries(t).reduce((i,[a,s])=>(i[a]=e(s,a,t),i),{})}function ee(t,e){let i={...t};for(let t of e)delete i[t];return i}function ei(t,e){return(tZ(e)?e:e.split(".")).reduce((t,e)=>t[e],t)}var ea=new Set(["__proto__","constructor","prototype"]);function es(t,e,i){let a=tZ(e)?e.slice():e.split("."),s=a.pop();if(a.some(t=>ea.has(t)))return;let r=a.reduce((t,e)=>t[e],t);return r[s]=i,r[s]}function er(t,e,i){if(void 0===i)return e;for(let a of t){let t=i[a];void 0!==t&&(e[a]=t)}return e}var en={};n(en,{easeIn:()=>el,easeInOut:()=>ed,easeInOutQuad:()=>ep,easeInQuad:()=>eu,easeOut:()=>eh,easeOutQuad:()=>ec,inverseEaseOut:()=>eg,linear:()=>eo});var eo=t=>t,el=t=>1-Math.cos(t*Math.PI/2),eh=t=>Math.sin(t*Math.PI/2),ed=t=>-(Math.cos(t*Math.PI)-1)/2,eu=t=>t*t,ec=t=>1-(1-t)**2,ep=t=>t<.5?2*t*t:1-(-2*t+2)**2/2,eg=t=>2*Math.asin(t)/Math.PI,ey=["initial","remove","update","add","trailing","end","none"],em={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:.2,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},ef=(t=>(t.Loop="loop",t.Reverse="reverse",t))(ef||{});function ex(t){return t.every(t=>t instanceof tw)?{nodes:t,selections:[]}:{nodes:[],selections:t}}var eM=class{constructor(t){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=t.autoplay??!0,this.ease=t.ease??eo,this.phase=t.phase;let e=t.duration??em[this.phase].animationDuration;this.duration=e*t.defaultDuration,this.delay=(t.delay??0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,!0===t.skip&&(this.onUpdate?.(t.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),!1!==t.collapsable&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){return!function t(e,i){return e===i||(Array.isArray(e)&&Array.isArray(i)?e.length===i.length&&e.every((e,a)=>t(e,i[a])):Q(e)&&Q(i)?e.equals(i):!!(tK(e)&&tK(i))&&t9(e,i,t))}(t.from,t.to)?e:0}play(t=!1){!this.isPlaying&&!this.isComplete&&(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,t&&this.onUpdate?.(this.from,!0,this)))}pause(){this.isPlaying=!1}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(t){if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);let e=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;let i=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(i,!1,this);let a=this.delay+this.duration;return this.elapsed>=a?(this.stop(),this.isComplete=!0,this.onComplete?.(this),t-(a-e)):0}get delta(){return this.ease(td(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!=typeof e||Q(e))return this.interpolateValue(t,e);let i=[];for(let a in e){let s=this.interpolateValue(t[a],e[a]);null!=s&&i.push([a,s])}return t=>{let e={};for(let[a,s]of i)e[a]=s(t);return e}}interpolateValue(t,e){if(null!=t&&null!=e){if(Q(t))return i=>t[$](e,i);try{switch(typeof t){case"number":return tO(t,e);case"string":return tj(t,e);case"boolean":if(t===e)return()=>t}}catch(t){}throw Error(`Unable to interpolate values: ${t}, ${e}`)}}},eb={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function ev(t,e,i,a,s,r,n){let{fromFn:o,toFn:l,applyFn:h=(t,e)=>t.setProperties(e)}=s,{nodes:d,selections:u}=ex(a),c=(a,s)=>{let d;let u=0,c=0;for(let p of s){let g=a[u]===p,y={last:c>=s.length-1,lastLive:u>=a.length-1,prev:s[c-1],prevFromProps:d,prevLive:a[u-1],next:s[c+1],nextLive:a[u+(g?1:0)]},m=`${t}_${e}_${p.id}`;i.stopByAnimationId(m);let f="unknown";g?r&&n&&(f=function(t,e,i,a){let s=i(t,e);return a.added.has(s)?"added":a.removed.has(s)?"removed":"updated"}(p,p.datum,r,n)):f="removed",p.transitionOut="removed"===f;let{phase:x,start:M,finish:b,delay:v,duration:I,...D}=o(p,p.datum,f,y),{phase:S,start:N,finish:L,delay:A,duration:w,...C}=l(p,p.datum,f,y),T=null==b;i.animate({id:m,groupId:t,phase:x??S??"update",duration:I??w,delay:v??A,from:D,to:C,ease:eh,collapsable:T,onPlay:()=>{h(p,{...M,...N,...D})},onUpdate(t){h(p,t)},onStop:()=>{h(p,{...M,...N,...D,...C,...b,...L})}}),g&&u++,c++,d=D}},p=0;for(let a of u){let s=a.nodes();c(s.filter(t=>!a.isGarbage(t)),s),i.animate({id:`${t}_${e}_selection_${p}`,groupId:t,phase:"end",from:0,to:1,ease:eh,onStop(){a.cleanup()}}),p++}c(d,d)}function eI(t,e,i,a,s,r,n){let{nodes:o,selections:l}=ex(a),{start:h,finish:d,phase:u}=n;i.animate({id:`${t}_${e}`,groupId:t,phase:u??"update",from:s,to:r,ease:eh,onPlay:()=>{if(h){for(let t of o)t.setProperties(h);for(let t of l)for(let e of t.nodes())e.setProperties(h)}},onUpdate(t){for(let e of o)e.setProperties(t);for(let e of l)for(let i of e.nodes())i.setProperties(t)},onStop:()=>{for(let t of o)t.setProperties({...r,...d});for(let t of l){for(let e of t.nodes())e.setProperties({...r,...d});t.cleanup()}}})}var eD=(t,e)=>{let i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(t){this[i]!==t&&(this[i]=t,this.invalid=!0)},enumerable:!0,configurable:!1})},eS=class t{constructor(e,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=t.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=e,this.range=i}static is(e){return e instanceof t}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){let e=this.getDomain(),i=this.getPixelRange(),a=Math.min(Math.abs(e[1]-e[0])/t+1,Math.floor(i));return i/Math.max(1,a)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,e){let i=e?.clampMode??this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();let a=this.getDomain().map(t=>this.transform(t)),[s,r]=a,{range:n}=this,[o,l]=n;if(t=this.transform(t),"clamped"===i){let[e,i]=tc(a.map(Number));if(Number(t)<e)return o;if(Number(t)>i)return l}return s===r?(o+l)/2:t===s?o:t===r?l:o+(Number(t)-Number(s))/(Number(r)-Number(s))*(l-o)}invert(t){let e;this.refresh();let[i,a]=this.getDomain().map(t=>this.transform(t)),{range:s}=this,[r,n]=s,o=r>n;return t<(o?n:r)?o?a:i:t>(o?r:n)?o?i:a:(e=r===n?this.toDomain((Number(i)+Number(a))/2):this.toDomain(Number(i)+(t-r)/(n-r)*(Number(a)-Number(i))),this.transformInvert(e))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&y.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){let[t,e]=this.range;return Math.abs(e-t)}};eS.defaultTickCount=5,eS.defaultMaxTickCount=6,o([eD],eS.prototype,"domain",2),o([eD],eS.prototype,"range",2),o([eD],eS.prototype,"nice",2),o([eD],eS.prototype,"interval",2),o([eD],eS.prototype,"tickCount",2),o([eD],eS.prototype,"minTickCount",2),o([eD],eS.prototype,"maxTickCount",2);var eN=eS;function eL(t){if(0===t.length)return null;let e=1/0,i=-1/0;for(let a of t)a instanceof Date&&(a=a.getTime()),"number"==typeof a&&(a<e&&(e=a),a>i&&(i=a));let a=[e,i];return a.every(isFinite)?a:null}function eA(t,e,i){let a=!1;return t.length>2&&(t=eL(t)??[NaN,NaN]),isNaN(e)||(a||(a=e>t[0]),t=[e,t[1]]),isNaN(i)||(a||(a=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:a}}function ew(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!ew(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function eC(t){return void 0===t?[]:Array.isArray(t)?t:[t]}function eT(t){return Array.from(new Set(t))}function ek(t,e){return t.reduce((t,i)=>{let a=e(i);return t[a]??(t[a]=[]),t[a].push(i),t},{})}function eE(t,e,i=0){if(0===t.length)return[];let a=[];for(let s=0;s<e;s++)a.push(t.at((s+i)%t.length));return a}function eO(t,e){let i=new Map;return e.forEach((t,e)=>{i.set(t,e)}),t.sort((t,e)=>(i.get(t)??1/0)-(i.get(e)??1/0))}var ej={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function eR(t,e=new Date(t.getFullYear(),0,1)){let i=t.getTimezoneOffset()-e.getTimezoneOffset();return Math.floor((t.getTime()-e.getTime()+6e4*i)/(36e5*24))}function ez(t,e){let i=new Date(t.getFullYear(),0,1).getDay(),a=new Date(t.getFullYear(),0,(e-i+7)%7+1);return a<=t?Math.floor(eR(t,a)/7)+1:0}var eP={a:t=>ej.shortDays[t.getDay()],A:t=>ej.days[t.getDay()],b:t=>ej.shortMonths[t.getMonth()],B:t=>ej.months[t.getMonth()],c:"%x, %X",d:(t,e)=>eG(t.getDate(),2,e??"0"),e:"%_d",f:(t,e)=>eG(1e3*t.getMilliseconds(),6,e??"0"),H:(t,e)=>eG(t.getHours(),2,e??"0"),I:(t,e)=>{let i=t.getHours()%12;return 0===i?"12":eG(i,2,e??"0")},j:(t,e)=>eG(eR(t)+1,3,e??"0"),m:(t,e)=>eG(t.getMonth()+1,2,e??"0"),M:(t,e)=>eG(t.getMinutes(),2,e??"0"),L:(t,e)=>eG(t.getMilliseconds(),3,e??"0"),p:t=>12>t.getHours()?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>eG(t.getSeconds(),2,e??"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>eG(ez(t,0),2,e??"0"),V:(t,e)=>eG(function t(e,i=e.getFullYear()){let a=new Date(i,0,1).getDay(),s=new Date(i,0,(4-a+7)%7-3+1);return s<=e?Math.floor(eR(e,s)/7)+1:t(e,i-1)}(t),2,e??"0"),w:(t,e)=>eG(t.getDay(),2,e??"0"),W:(t,e)=>eG(ez(t,1),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>eG(t.getFullYear()%100,2,e??"0"),Y:(t,e)=>eG(t.getFullYear(),4,e??"0"),Z:t=>(function(t){let e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${eG(Math.floor(i/60),2,"0")}${eG(Math.floor(i%60),2,"0")}`})(t),"%":()=>"%"},eB={_:" ",0:"0","-":""};function eG(t,e,i){let a=String(Math.floor(t));return a.length>=e?a:`${i.repeat(e-a.length)}${a}`}function eF(t){let e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){let a=i>0?t.substring(0,i):t;e.push(a)}if(i<0)break;let a=eB[t[i+1]];null!=a&&i++;let s=t[i+1],r=eP[s];if("function"==typeof r)e.push([r,a]);else if("string"==typeof r){let t=eF(r);e.push([t,a])}else e.push(`${a??""}${s}`);t=t.substring(i+2)}return t=>{let i="number"==typeof t?new Date(t):t;return e.map(t=>"string"==typeof t?t:t[0](i,t[1])).join("")}}function eU(t){return t instanceof Date?t.getTime():t}function eY(t,e,i){let a=eF(eZ(t,e,i));return t=>a(t)}function eZ(t=[],e=t,i=0){var a;let s=1/0;for(let e=1;e<t.length;e++)s=Math.min(s,Math.abs(t[e]-t[e-1]));let r=new Date(e[0]).getFullYear(),n=new Date(e.at(-1)).getFullYear();return function(t,e,i){let a=eU(i[0]),s=Math.abs(eU(i.at(-1))-a),r=[["hour",216e5,12096e5,3,"%I %p"],["hour",6e4,216e5,3,"%I:%M"],["second",1e3,216e5,1,":%S"],["ms",0,216e5,0,".%L"],["am/pm",6e4,216e5,3,"%p"]," ",["day",864e5,6048e5,4,"%a"],["month",0===s?0:6048e5,314496e5,5,"%b %d"],["month",3024e6,31536e7,6,"%B"]," ",["year",e||7===t?0:31536e6,1/0,7,"%Y"]].filter(e=>{if("string"==typeof e)return!0;let[i,a,r,n]=e;return n>=t&&a<=s&&s<r}).reduce((t,e)=>("string"==typeof e?t.result.push(e):t.used.has(e[0])||(t.result.push(e),t.used.add(e[0])),t),{result:[],used:new Set}).result,n=r.findIndex(t=>"string"!=typeof t),o=r.findLastIndex(t=>"string"!=typeof t);return r.slice(n,o+1).map(t=>"string"==typeof t?t:t[4]).join("").replaceAll(/\s+/g," ").trim()}(Math.max((isFinite(s)?function(t,e){if(t<1e3)return 0;if(t<6e4)return 1;if(t<36e5)return 2;if(t<864e5)return 3;if(t<6048e5)return 4;if(t<24192e5||t<26784e5&&function(t){let e=new Date(t[0]).getMonth();for(let i=1;i<t.length;i++){let a=new Date(t[i]).getMonth();if(e===a)return!0;e=a}return!1}(e))return 5;if(t<31536e6)return 6;return 7}(s,t):(a=t[0],b.floor(a)<a?0:I.floor(a)<a?1:S.floor(a)<a?2:N.floor(a)<a?3:j.floor(a)<a?A.floor(a)<a?4:5:R.floor(a)<a?6:7))-i,0),n-r>0,t)}var e_=class t{constructor(){this.type="band",this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this.index=new Map,this.ordinalRange=[],this._domain=[],this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(e){return e instanceof t}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&y.warnOnce("Expected update to not invalidate scale"))}set domain(t){for(let e of(this.index=new Map,this.invalid=!0,this._domain=[],t)){let t=eU(e);void 0===this.getIndex(t)&&this.index.set(t,this._domain.push(e)-1)}}get domain(){return this._domain}getDomain(){return this._domain}ticks(){return this.refresh(),this._domain}convert(t){this.refresh();let e=this.getIndex(t);return null==e?NaN:this.ordinalRange[e]??NaN}invert(t){this.refresh();let e=this.ordinalRange.findIndex(e=>e===t);return this.domain[e]}invertNearest(t){this.refresh();let e=-1,i=1/0,a=this.ordinalRange.findIndex((a,s)=>{if(a===t)return!0;let r=Math.abs(t-a);return r<i&&(i=r,e=s),!1});return this.domain[a]??this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=td(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=td(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=td(0,t,1)}get paddingOuter(){return this._paddingOuter}update(){let t;let e=this._domain.length;if(0===e)return;let[i,a]=this.range,{_paddingInner:s}=this,{_paddingOuter:r,round:n}=this,o=a-i;1===e?(s=0,t=o*(1-2*r)):t=o/Math.max(1,e-s+2*r);let l=n?Math.floor(t):t,h=i+(o-l*(e-s))/2,d=l*(1-s);n&&(h=Math.round(h),d=Math.round(d)),this._step=l,this._inset=h,this._bandwidth=d,this._rawBandwidth=t*(1-s),this.ordinalRange=this._domain.map((t,e)=>h+l*e)}getIndex(t){return this.index.get(t instanceof Date?t.getTime():t)}};o([eD],e_.prototype,"range",2),o([eD],e_.prototype,"round",2),o([eD],e_.prototype,"interval",2);var eV=e_,eW=class{set(t){let{className:e=this.constructor.name}=this.constructor;if("object"!=typeof t)return y.warn(`unable to set ${e} - expecting a properties object`),this;let i=new Set(Object.keys(t));for(let e of tF(this))if(i.has(e)){let a=t[e];if(e$(this[e])){if(this[e]instanceof eH){let t=this[e].reset(a);null!=t?this[e]=t:y.warn(`unable to set [${e}] - expecting a properties array`)}else this[e].set(a)}else this[e]=a;i.delete(e)}for(let t of i)y.warn(`unable to set [${t}] in ${e} - property is unknown`);return this}isValid(t){return tF(this).every(e=>{let{optional:i}=function(t,e){let i=e.toString();for(;tG(t);){let e=t[tz];if(Object.hasOwn(e,i))return e[i];t=Object.getPrototypeOf(t)}}(this,e),a=!0===i||void 0!==this[e];return a||y.warnOnce(`${t??""}[${e}] is required.`),a})}toJson(){return tF(this).reduce((t,e)=>{let i=this[e];return t[e]=e$(i)?i.toJson():i,t},{})}},eH=class t extends Array{constructor(t,...e){super(e.length),Object.defineProperty(this,"itemFactory",{value:t?.prototype?.constructor?.name?e=>new t().set(e):t,enumerable:!1,configurable:!1}),this.set(e)}set(t){if(tZ(t)){this.length=t.length;for(let e=0;e<t.length;e++)this[e]=this.itemFactory(t[e])}return this}reset(e){if(Array.isArray(e))return new t(this.itemFactory,...e)}toJson(){return this.map(t=>t?.toJson?.()??t)}};function e$(t){return t instanceof eW||t instanceof eH}function eQ(t,e={}){let{optional:i=!1,property:a}=e;return tB((s,r,n)=>{let o={...e,target:s,property:r};if(i&&void 0===n||t(n,o))return e$(s[r])&&!e$(n)?(s[r].set(n),s[r]):n;let l=a??String(r).replace(/^_*/,""),h=s.constructor.className??s.constructor.name.replace(/Properties$/,""),d=iB(n);if(null!=d&&d.length>50){let t=d.length-50;d=d.slice(0,50)+`... (+${t} characters)`}return y.warn(`Property [${l}] of [${h}] cannot be set to [${d}]${t.message?`; expecting ${iz(t,o)}`:""}, ignoring.`),tR},void 0,{optional:i})}var eX=(...t)=>{let e=[];return iR((i,a)=>(e.length=0,t.every(t=>{let s=t(i,a);return s||e.push(iz(t,a)),s})),()=>e.filter(Boolean).join(" AND "))},eK=(...t)=>iR((e,i)=>t.some(t=>t(e,i)),e=>t.map(t=>iz(t,e)).filter(Boolean).join(" OR ")),eJ=iP(iR((t,e)=>e$(t)||tQ(t)&&e$(e.target[e.property]),"a properties object")),eq=iP(iR(t=>tQ(t),"an object")),e0=iR(t_,"a boolean"),e1=iR(t$,"a function"),e2=iR(tJ,"a string"),e4=Object.assign(iR(t0,"a number"),{restrict({min:t,max:e}={}){let i=["a number"],a=tq(t),s=tq(e);return a&&s?i.push(`between ${t} and ${e} inclusive`):a?i.push(`greater than or equal to ${t}`):s&&i.push(`less than or equal to ${e}`),iR(i=>t0(i)&&(!a||i>=t)&&(!s||i<=e),i.join(" "))}}),e3=iR(t=>tq(t)&&!isNaN(t),"a real number"),e5=iR(t=>tq(t)&&isNaN(t),"NaN"),e9=e4.restrict({min:0}),e6=e4.restrict({min:0,max:1}),e8=e4.restrict({min:-360,max:360}),e7=eK(e4,e5),it=Object.assign(iR(tZ,"an array"),{restrict({length:t,minLength:e}={}){let i="an array";return tq(e)&&e>0?i="a non-empty array":tq(t)&&(i=`an array of length ${t}`),iR(i=>tZ(i)&&(!tq(t)||i.length===t)&&(!tq(e)||i.length>=e),i)}}),ie=(t,e)=>iR((e,i)=>tZ(e)&&e.every(e=>t(e,i)),t=>{let i=iz(it,t)??"";return e?`${i} of ${e}`:i}),ii=t=>t0(t)||tW(t),ia=t=>iR((e,i)=>!ii(e)||!ii(i.target[t])||e<i.target[t],`to be less than ${t}`),is=t=>iR((e,i)=>!ii(e)||!ii(i.target[t])||e>i.target[t],`to be greater than ${t}`),ir=iR(tW,"Date object"),io=eK(ir,e9),il="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",ih=iR(t=>tJ(t)&&tE.validColorString(t),`color String. ${il}`),id=iR(ie(ih),`color strings. ${il}`),iu=ie(e0,"boolean values"),ic=ie(e4,"numbers"),ip=ie(e2,"strings"),ig=iR(ie(ir),"Date objects"),iy=iR(ie(eJ),"objects"),im=iE(["butt","round","square"],"a line cap"),ix=iE(["round","bevel","miter"],"a line join"),iM=iE(["solid","dashed","dotted"],"a line style"),ib=iR(ie(e9),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),iv=iE(["top","right","bottom","left"],"a position"),iI=iE(["normal","italic","oblique"],"a font style"),iD=eK(iE(["normal","bold","bolder","lighter"],"a font weight"),e4.restrict({min:1,max:1e3})),iS=iE(["never","always","hyphenate","on-space"],"a text wrap strategy"),iN=iE(["left","center","right"],"a text align"),iL=iE(["top","middle","bottom"],"a vertical align"),iA=iE(["ellipsis","hide"],"an overflow strategy"),iw=iE(["horizontal","vertical"],"a direction"),iC=iE(["inside","outside"],"a placement"),iT=eK(iE(["exact","nearest"],"interaction range"),e4),ik=iE(["top","bottom","left","right"]);function iE(t,e="a"){return iR((e,i)=>{let a=t.find(t=>e===("string"==typeof t?t:t.value));if(null==a)return!1;if("string"!=typeof a&&(!0===a.deprecated||null!=a.deprecatedTo)){let t=[`Property [%s] with value '${a.value}' is deprecated.`];a.deprecatedTo&&t.push(`Use ${a.deprecatedTo} instead.`),y.warnOnce(t.join(" "),i.property)}return!0},`${e} keyword such as ${function(t){let e=t.filter(t=>"string"==typeof t||!0!==t.undocumented).map(t=>`'${"string"==typeof t?t:t.value}'`);if(1===e.length)return e[0];let i=e.pop();return`${e.join(", ")} or ${i}`}(t)}`)}var iO=eK(eX(e4.restrict({min:1}),ia("maxSpacing")),e5),ij=eK(eX(e4.restrict({min:1}),is("minSpacing")),e5);function iR(t,e){return t.message=e,t}function iz(t,e){return t$(t.message)?t.message(e):t.message}function iP(t){return Object.assign(t,{restrict:e=>iR(t=>t instanceof e,i=>iz(t,i)??`an instance of ${e.name}`)})}function iB(t){if("number"==typeof t){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}return JSON.stringify(t)}var iG=(t=>(t.X="x",t.Y="y",t))(iG||{}),iF=class{constructor(){this.moduleMap=new Map}*modules(){for(let t of this.moduleMap.values())yield t.moduleInstance}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw Error(`AG Charts - module already initialised: ${t.optionsKey}`);this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){let e=tJ(t)?t:t.optionsKey;this.moduleMap.get(e)?.moduleInstance.destroy(),this.moduleMap.delete(e)}getModule(t){return this.moduleMap.get(tJ(t)?t:t.optionsKey)?.moduleInstance}isEnabled(t){return this.moduleMap.has(tJ(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),(e,i)=>t(e.moduleInstance,i))}destroy(){for(let t of this.moduleMap.keys())this.moduleMap.get(t)?.moduleInstance.destroy();this.moduleMap.clear()}},iU={};function iY(t,e){let{nodes:i,selections:a}=ex(t);for(let t of a){for(let i of t.nodes()){let t=e(i,i.datum);i.setProperties(t)}t.cleanup()}for(let t of i){let i=e(t,t.datum);t.setProperties(i)}}function iZ(t){let e,i;let a=iW.exec(t);a&&([,e,t,i]=a);let s=iV.exec(t);if(!s)throw Error(`The number formatter is invalid: ${t}`);let[,r,n,o,l,h,d,u,c,p,g]=s;return{fill:r,align:n,sign:o,symbol:l,zero:h,width:parseInt(d),comma:u,precision:parseInt(c),trim:!!p,type:g,prefix:e,suffix:i}}function i_(t){let e,i;let a="string"==typeof t?iZ(t):t,{fill:s,align:r,sign:n="-",symbol:o,zero:l,width:h,comma:d,type:u,prefix:c="",suffix:p="",precision:g}=a,{trim:y}=a,m=null==g||isNaN(g);if(u){if(u in i$&&u in iH)e=m?iH[u]:i$[u];else if(u in i$)e=i$[u];else if(u in iH)e=iH[u];else throw Error(`The number formatter type is invalid: ${u}`)}else e=i$.g,y=!0;return i=null==g||m?u?6:12:g,t=>{let a=e(t,i);return y&&(a=a.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),d&&(a=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);let a=t.substring(0,i).split(""),s=t.substring(i);for(let t=a.length-3;t>0;t-=3)a.splice(t,0,e);return`${a.join("")}${s}`}(a,d)),a=function(t,e,i=""){return"("===i?t>=0?e:`(${e})`:`${t>=0?"+"===i?"+":"":"−"}${e}`}(t,a,n),o&&"#"!==o&&(a=`${o}${a}`),"#"===o&&"x"===u&&(a=`0x${a}`),"s"===u&&(a=`${a}${iQ[iK(t)]}`),("%"===u||"p"===u)&&(a=`${a}%`),null==h||isNaN(h)||(a=function(t,e,i=" ",a=">"){let s=t;if(">"!==a&&a){if("<"===a)s=s.padEnd(e,i);else if("^"===a){let t=Math.max(0,e-s.length),a=Math.ceil(t/2),r=Math.floor(t/2);s=(s=s.padStart(a+s.length,i)).padEnd(r+s.length,i)}}else s=s.padStart(e,i);return s}(a,h,s??l,r)),a=`${c}${a}${p}`}}n(iU,{resetMotion:()=>iY});var iV=/^(?:(.)?([<>=^]))?([+\-( ])?([$€£¥₣₹#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,iW=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,iH={b:t=>iX(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>iX(t).toString(8),x:t=>iX(t).toString(16),X:t=>iH.x(t).toUpperCase(),n:t=>iH.d(t),"%":t=>`${iX(100*t).toFixed(0)}`},i$={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>i$.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>i$.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";let i=Math.abs(t),a=Math.floor(Math.log10(i));return a>=-4&&a<e?i.toFixed(e-1-a):i.toExponential(e-1)},G:(t,e)=>i$.g(t,e).toUpperCase(),n:(t,e)=>i$.g(t,e),p:(t,e)=>i$.r(100*t,e),r:(t,e)=>{if(0===t)return"0";let i=Math.abs(t),a=Math.floor(Math.log10(i))-(e-1);if(a<=0)return i.toFixed(-a);let s=10**a;return(Math.round(i/s)*s).toFixed()},s:(t,e)=>{let i=iK(t);return i$.r(t/10**i,e)},"%":(t,e)=>i$.f(100*t,e)},iQ={[-24]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y"};function iX(t){return Math.floor(Math.abs(t))}function iK(t){return td(-24,t?3*Math.floor(Math.log10(Math.abs(t))/3):0,24)}var iJ=(t,e,i)=>({duration:e*i,timeInterval:t,step:i}),iq=[iJ(b,1e3,1),iJ(b,1e3,5),iJ(b,1e3,15),iJ(b,1e3,30),iJ(I,6e4,1),iJ(I,6e4,5),iJ(I,6e4,15),iJ(I,6e4,30),iJ(S,36e5,1),iJ(S,36e5,3),iJ(S,36e5,6),iJ(S,36e5,12),iJ(N,864e5,1),iJ(N,864e5,2),iJ(A,6048e5,1),iJ(A,6048e5,2),iJ(A,6048e5,3),iJ(j,2592e6,1),iJ(j,2592e6,2),iJ(j,2592e6,3),iJ(j,2592e6,4),iJ(j,2592e6,6),iJ(R,31536e6,1)],i0=[1,2,5,10];function i1(t,e){return Math.abs(Math.round(t)-t)<e}function i2(t,e,i,a,s){if(i<2)return[t,e];let r=i3(t,e,i,a,s);return Number.isFinite(r)?(i1(t/r,1e-12)||(t=Math.ceil(t/r)*r),i1(e/r,1e-12)||(e=Math.floor(e/r)*r),i6(t,e,r)):[]}function i4(t,e,i,a,s,r){let n=r??Math.abs(e-t)/Math.max(i,1),o=0;for(let t of iq){if(n<=t.duration)break;o++}if(0===o){let r=Math.max(i3(t,e,i,a,s),1);return x.every(r)}if(o===iq.length){let n=null==r?i3(t/31536e6,e/31536e6,i,a,s):1;return R.every(n)}let l=iq[o-1],h=iq[o],{timeInterval:d,step:u}=n-l.duration<h.duration-n?l:h;return d.every(u)}function i3(t,e,i,a=0,s=1/0){if(t===e)return td(1,a,s);if(i<1)return NaN;let r=Math.abs(e-t),n=10**Math.floor(Math.log10(r/i)),o=NaN,l=1/0,h=!1;for(let t of i0){let e=Math.ceil(r/(t*n)),d=e>=a&&e<=s;if(h&&!d)continue;let u=Math.abs(e-i);(l>u||h!==d)&&(h||(h=d),l=u,o=t)}return o*n}function i5(t){for(let e=t.length-1;e>=0;e-=1)if("0"!==t[e])return e+1;return 0}function i9(t,e){let i=iZ(e??",f");(null==i.precision||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...t.map(t=>{if(!Number.isFinite(t))return 0;let[e,a]=t.toExponential((i.type?6:12)-1).split(/\.|e/g);return("1"!==e&&"-1"!==e?1:0)+i5(a)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...t.map(t=>{if(!Number.isFinite(t)||0===t)return 0;let e=Math.floor(Math.log10(Math.abs(t))),a=i.type?6:12;return Math.max(0,i5(t.toExponential(a-1).split(/\.|e/g)[1])-e)}))));let a=i_(i);return t=>a(Number(t))}function i6(t,e,i){if(!Number.isFinite(i)||i<=0)return[];let a=10**tM(i),s=Math.min(t,e),r=Math.max(t,e),n=[];for(let t=0;;t+=1){let e=Math.round((s+i*t)*a)/a;if(e<=r)n.push(e);else break}return n}function i8(t,e){return t>=e&&(y.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}var i7=class t extends eN{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=p,this.basePow=p,this.log=t=>Math.min(...this.domain)>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>Math.min(...this.domain)>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return Math.min(...this.domain)>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return Math.min(...this.domain)>=0?Math.exp(t):-Math.exp(-t)}refresh(){this.base<=0&&(this.base=0,y.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){this.domain&&!(this.domain.length<2)&&(this.baseLog=t.getBaseLogMethod(this.base),this.basePow=t.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){let[t,e]=this.domain,i=t>e?Math.ceil:Math.floor,a=t>e?Math.floor:Math.ceil,s=this.pow(i(this.log(t))),r=this.pow(a(this.log(e)));this.niceDomain=[s,r]}ticks(){let t=this.tickCount??10;if(!this.domain||this.domain.length<2||t<1)return[];this.refresh();let e=this.base,[i,a]=this.getDomain(),s=Math.min(i,a),r=Math.max(i,a),n=this.log(s),o=this.log(r);if(this.interval){let t=Math.min(Math.abs(this.interval),Math.abs(o-n)),e=i6(n,o,t).map(this.pow).filter(t=>t>=s&&t<=r);if(!i8(e.length,this.getPixelRange()))return e}let l=o-n>=t;if(e%1!=0||l)return i2(n,o,Math.min(o-n,t)).map(this.pow);let h=[],d=s>0;n=Math.floor(n)-1,o=Math.round(o)+1;let u=tp(this.range)/t,c=1/0;for(let t=n;t<=o;t++){let i=this.convert(this.pow(t+1));for(let a=1;a<e;a++){let n=d?a:e-a+1,o=this.pow(t)*n,l=this.convert(o),p=Math.abs(c-l),g=Math.abs(l-i),y=p>=u&&g>=u;o>=s&&o<=r&&(1===a||y||0===h.length)&&(h.push(o),c=l)}}return h}tickFormat({count:t,ticks:e,specifier:i}){return t!==1/0&&null==e&&this.ticks(),i??(i=10===this.base?".0e":","),tJ(i)?i_(i):i}static getBaseLogMethod(t){switch(t){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:return e=>Math.log(e)/Math.log(t)}}static getBasePowerMethod(t){switch(t){case 10:return t=>t>=0?10**t:1/10**-t;case Math.E:return Math.exp;default:return e=>t**e}}};o([eD],i7.prototype,"base",2);var at=class t extends eN{constructor(){super([],[0,1]),this.type="time"}toDomain(t){return new Date(t)}convert(t,e){return super.convert(new Date(t),e)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();let{interval:e,nice:i,tickCount:a,minTickCount:s,maxTickCount:r}=this,[n,o]=tc(this.getDomain().map(eU));return null!=e?t.getTicksForInterval({start:n,stop:o,interval:e,availableRange:this.getPixelRange()})??t.getDefaultTicks({start:n,stop:o,tickCount:a,minTickCount:s,maxTickCount:r}):i&&2===a?this.niceDomain:i&&1===a?this.niceDomain.slice(0,1):t.getDefaultTicks({start:n,stop:o,tickCount:a,minTickCount:s,maxTickCount:r})}static getDefaultTicks({start:t,stop:e,tickCount:i,minTickCount:a,maxTickCount:s}){let r=i4(t,e,i,a,s);return r?r.range(new Date(t),new Date(e)):[]}static getTicksForInterval({start:t,stop:e,interval:i,availableRange:a}){if(!i)return[];if(i instanceof m){let s=i.range(new Date(t),new Date(e));if(i8(s.length,a))return;return s}let s=Math.abs(i);if(i8((e-t)/s,a))return;let r=iq.findLast(t=>s%t.duration==0);if(r)return r.timeInterval.every(s/(r.duration/r.step)).range(new Date(t),new Date(e));let n=new Date(t),o=new Date(e),l=[];for(;n<=o;)l.push(n),(n=new Date(n)).setMilliseconds(n.getMilliseconds()+s);return l}tickFormat({ticks:t,domain:e,specifier:i,formatOffset:a}){return null==i?eY(t,e,a):eF(i)}update(){this.domain&&!(this.domain.length<2)&&this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);let[i,a]=this.niceDomain;if(eU(t)===eU(i)&&eU(e)===eU(a))break;t=i,e=a}}updateNiceDomainIteration(t,e){let i;let a=Math.min(eU(t),eU(e)),s=Math.max(eU(t),eU(e)),r=t>e,{interval:n}=this;if(n instanceof m)i=n;else{let t="number"==typeof n?(s-a)/Math.max(n,1):this.tickCount;i=i4(a,s,t,this.minTickCount,this.maxTickCount)}if(i){let t=i.range(new Date(a),new Date(s),!0),e=r?[...t].reverse():t,n=e[0],o=e.at(-1);this.niceDomain=[n,o]}}};function ae(t,e){return t-e}var ai=class t extends eV{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=eN.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this._domain=[],this.timestamps=[],this.sortedTimestamps=[],this.visibleRange=[0,1]}static is(e){return e instanceof t}setVisibleRange(t){this.visibleRange=t}set domain(t){if(this.invalid=!0,0===t.length){this._domain=[];return}this._domain=t,this.timestamps=eT(t.map(eU)),this.sortedTimestamps=this.timestamps.slice().sort(ae)}get domain(){return this._domain}ticks(){let t;this.refresh();let[e,i]=[this.timestamps[0],this.timestamps.at(-1)],a=Math.min(e,i),s=Math.max(e,i);if(null==this.interval)t=this.getDefaultTicks(this.maxTickCount,e>i);else{let[e,i]=this.range,r=Math.abs(i-e);t=at.getTicksForInterval({start:a,stop:s,interval:this.interval,availableRange:r})??[]}let r=new Set;return t.filter(t=>{let e=this.convert(t);return!(isNaN(e)||r.has(e))&&(r.add(e),!0)})}getDefaultTicks(t,e){let i=[],a=this.timestamps.length,s=Math.ceil(a*(this.visibleRange[1]-this.visibleRange[0])/t),r=Math.floor(s/2);for(let[t,n]of this.timestamps.entries())s>0&&(t+r)%s||(e?i.push(new Date(this.timestamps[a-t-1])):i.push(new Date(n)));return i}convert(t){this.refresh();let e=Number(t);if(e<this.sortedTimestamps[0])return NaN;let i=this.findInterval(e);return this.timestamps[0]!==this.sortedTimestamps[0]&&(i=this.timestamps.length-i-1),this.ordinalRange[i]??NaN}findInterval(t){let{sortedTimestamps:e}=this,i=0,a=e.length-1;for(;i<=a;){let s=Math.floor((i+a)/2);if(e[s]===t)return s;e[s]<t?i=s+1:a=s-1}return i}tickFormat({ticks:t,domain:e,specifier:i}){return null==i?eY(t,e):eF(i)}invert(t){this.refresh();let e=this.ordinalRange.findIndex(e=>t<=e);return this.domain[e]}invertNearest(t){return new Date(super.invertNearest(t))}};function aa(t,e){return"number"==typeof t&&"number"==typeof e?t-e:"string"==typeof t&&"string"==typeof e?t.localeCompare(e):null==t&&null==e?0:null==t?-1:null==e?1:String(t).localeCompare(String(e))}function as(t){return"function"==typeof t?t():t}function ar(t,e,i){for(let a in t){let s=i(as(t[a]),as(e[a]));if(0!==s)return s}return 0}function an(t){let e=1,i=t.visible?1:0,a=t.dirty>0?1:0;for(let s of t.children(!1)){let t=an(s);e+=t.count,a+=t.dirtyCount,i+=t.visibleCount}return{count:e,visibleCount:i,dirtyCount:a}}o([eD],ai.prototype,"tickCount",2),o([eD],ai.prototype,"minTickCount",2),o([eD],ai.prototype,"maxTickCount",2),o([eD],ai.prototype,"interval",2);var ao=Object.freeze([1,0,0,1,0,0]);function al(t,e,i=1e-8){return t===e||Math.abs(e-t)<i}var ah=class t{get e(){return[...this.elements]}constructor(t=[...ao]){this.elements=t}setElements(t){let e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){let t=this.elements;return al(t[0],1)&&al(t[1],0)&&al(t[2],0)&&al(t[3],1)&&al(t[4],0)&&al(t[5],0)}AxB(t,e,i){let a=t[0]*e[0]+t[2]*e[1],s=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],n=t[1]*e[2]+t[3]*e[3],o=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=i??t)[0]=a,i[1]=s,i[2]=r,i[3]=n,i[4]=o,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(e){let i=Array(6);return e instanceof t?this.AxB(this.elements,e.elements,i):this.AxB(this.elements,[e.a,e.b,e.c,e.d,e.e,e.f],i),new t(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){let e=this.elements,i=e[0],a=e[1],s=e[2],r=e[3],n=e[4],o=e[5],l=1/(i*r-a*s);return i*=l,a*=l,s*=l,new t([r*=l,-a,-s,i,s*o-r*n,a*n-i*o])}inverseTo(t){let e=this.elements,i=e[0],a=e[1],s=e[2],r=e[3],n=e[4],o=e[5],l=1/(i*r-a*s);return i*=l,a*=l,s*=l,r*=l,t.setElements([r,-a,-s,i,s*o-r*n,a*n-i*o]),this}invertSelf(){let t=this.elements,e=t[0],i=t[1],a=t[2],s=t[3],r=t[4],n=t[5],o=1/(e*s-i*a);return e*=o,i*=o,a*=o,s*=o,t[0]=s,t[1]=-i,t[2]=-a,t[3]=e,t[4]=a*n-s*r,t[5]=i*r-e*n,this}transformPoint(t,e){let i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){let i=this.elements,a=i[0],s=i[1],r=i[2],n=i[3],o=.5*t.width,l=.5*t.height,h=t.x+o,d=t.y+l,u=Math.abs(o*a)+Math.abs(l*r),c=Math.abs(o*s)+Math.abs(l*n);return e??(e=new tI(0,0,0,0)),e.x=h*a+d*r+i[4]-u,e.y=h*s+d*n+i[5]-c,e.width=u+u,e.height=c+c,e}toContext(t){if(this.identity)return;let e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(e){return t.instance.setElements(e.elements)}static updateTransformMatrix(t,e,i,a,s,r,n){let o,l,h,d;1===e&&1===i?(o=0,l=0):(o=n?.scalingCenterX??0,l=n?.scalingCenterY??0);let u=Math.cos(a),c=Math.sin(a);0===a?(h=0,d=0):(h=n?.rotationCenterX??0,d=n?.rotationCenterY??0);let p=o*(1-e)-h,g=l*(1-i)-d;return t.setElements([u*e,c*e,-c*i,u*i,u*p-c*g+h+s,c*p+u*g+d+r]),t}static fromContext(e){let i=e.getTransform();return new t([i.a,i.b,i.c,i.d,i.e,i.f])}};function ad(t){return!0===t.constructor[au]}ah.instance=new ah;var au=Symbol("isMatrixTransform");function ac(t){var e;let i=t;if(!0===t[au])return t;let a=Symbol("matrix_combined_transform");class s extends i{constructor(){super(...arguments),this[e]=new ah,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty(3)}updateMatrix(t){}computeTransformMatrix(){this._dirtyTransform&&(this[a].setElements(ao),this.updateMatrix(this[a]),this._dirtyTransform=!1)}toParent(t){return(this.computeTransformMatrix(),this[a].identity)?t.clone():this[a].transformBBox(t)}toParentPoint(t,e){return(this.computeTransformMatrix(),this[a].identity)?{x:t,y:e}:this[a].transformPoint(t,e)}fromParent(t){return(this.computeTransformMatrix(),this[a].identity)?t.clone():this[a].inverse().transformBBox(t)}fromParentPoint(t,e){return(this.computeTransformMatrix(),this[a].identity)?{x:t,y:e}:this[a].inverse().transformPoint(t,e)}computeBBox(){let t=super.computeBBox();return t?this.toParent(t):t}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(t,e,i=!1){return i||({x:t,y:e}=this.fromParentPoint(t,e)),super.pickNode(t,e)}render(t){this._dirtyTransform&&(this.computeTransformMatrix(),t.forceRender||(t={...t,forceRender:"dirtyTransform"}));let e=this[a],i=!1;e.identity||(t.ctx.save(),i=!0,e.toContext(t.ctx)),super.render(t),i&&t.ctx.restore()}toSVG(){let t=super.toSVG(),e=this[a];if(e.identity||null==t)return t;let i=document.createElementNS("http://www.w3.org/2000/svg","g");i.append(...t.elements);let[s,r,n,o,l,h]=e.e;return i.setAttribute("transform",`matrix(${s} ${r} ${n} ${o} ${l} ${h})`),{elements:[i],defs:t.defs}}}return e=a,s[au]=!0,s}function ap(t){var e;let i=t,a=Symbol("matrix_rotation");class s extends ac(i){constructor(){super(...arguments),this[e]=new ah,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0}updateMatrix(t){super.updateMatrix(t);let{rotation:e,rotationCenterX:i,rotationCenterY:s}=this;0!==e&&(ah.updateTransformMatrix(this[a],1,1,e,0,0,{rotationCenterX:i,rotationCenterY:s}),t.multiplySelf(this[a]))}}return e=a,o([tS({type:"transform"})],s.prototype,"rotationCenterX",2),o([tS({type:"transform"})],s.prototype,"rotationCenterY",2),o([tS({type:"transform"})],s.prototype,"rotation",2),s}function ag(t){var e;let i=t,a=Symbol("matrix_scale");class s extends ac(i){constructor(){super(...arguments),this[e]=new ah,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null}updateMatrix(t){super.updateMatrix(t);let{scalingX:e,scalingY:i,scalingCenterX:s,scalingCenterY:r}=this;(1!==e||1!==i)&&(ah.updateTransformMatrix(this[a],e,i,0,0,0,{scalingCenterX:s,scalingCenterY:r}),t.multiplySelf(this[a]))}}return e=a,o([tS({type:"transform"})],s.prototype,"scalingX",2),o([tS({type:"transform"})],s.prototype,"scalingY",2),o([tS({type:"transform"})],s.prototype,"scalingCenterX",2),o([tS({type:"transform"})],s.prototype,"scalingCenterY",2),s}function ay(t){var e;let i=t,a=Symbol("matrix_translation");class s extends ac(i){constructor(){super(...arguments),this[e]=new ah,this.translationX=0,this.translationY=0}updateMatrix(t){super.updateMatrix(t);let{translationX:e,translationY:i}=this;(0!==e||0!==i)&&(ah.updateTransformMatrix(this[a],1,1,0,e,i),t.multiplySelf(this[a]))}}return e=a,o([tS({type:"transform"})],s.prototype,"translationX",2),o([tS({type:"transform"})],s.prototype,"translationY",2),s}var am=class{static fromCanvas(t,e){let i=[];for(let e of t.traverseUp())ad(e)&&i.unshift(e);for(let t of i)e=t.fromParent(e);return ad(t)&&(e=t.fromParent(e)),e}static toCanvas(t,e){for(let i of(null==e?e=t.getBBox():ad(t)&&(e=t.toParent(e)),t.traverseUp()))ad(i)&&(e=i.toParent(e));return e}static fromCanvasPoint(t,e,i){let a=[];for(let e of t.traverseUp())ad(e)&&a.unshift(e);for(let t of a)({x:e,y:i}=t.fromParentPoint(e,i));return ad(t)&&({x:e,y:i}=t.fromParentPoint(e,i)),{x:e,y:i}}static toCanvasPoint(t,e,i){for(let a of(ad(t)&&({x:e,y:i}=t.toParentPoint(e,i)),t.traverseUp()))ad(a)&&({x:e,y:i}=a.toParentPoint(e,i));return{x:e,y:i}}},af=class t extends tw{constructor(t){super(t),this.opts=t,this.opacity=1,this.isContainerNode=!0,this.zIndexSubOrder=t?.zIndexSubOrder}static is(e){return e instanceof t}static computeChildrenBBox(t,e=!0){return tI.merge(tw.extractBBoxes(t,e))}static compareChildren(t,e){return ar([t.zIndex,...t.zIndexSubOrder??[void 0,void 0],t.serialNumber],[e.zIndex,...e.zIndexSubOrder??[void 0,void 0],e.serialNumber],aa)}containsPoint(t,e){return!0}computeBBox(){return t.computeChildrenBBox(this.children())}preRender(){let t=super.preRender();return t.groups+=1,t.nonGroups-=1,t}isDirty(t){let{resized:e}=t,{dirty:i,dirtyZIndex:a}=this,s=i>=2||a||e,r=s,n=!1;for(let t of this.children())if(r||(r=null==t.layerManager&&t.dirty>=1),n||(n=null!=t.layerManager&&t.dirty>=1),r)break;return this.opts?.name&&this._debug?.({name:this.opts.name,group:this,isDirty:s,isChildDirty:r,renderCtx:t}),{isDirty:s,isChildDirty:r,isChildLayerDirty:n}}debugSkip(t){t.stats&&this.opts?.name&&this._debug?.({name:this.opts.name,group:this,result:"skipping",counts:an(this),renderCtx:t})}render(e,i){if(i)return super.render(e);let{opts:{name:a}={},_debug:s}=this,{isDirty:r,isChildDirty:n,isChildLayerDirty:o}=this.isDirty(e),{ctx:l,stats:h}=e,{forceRender:d}=e;if(!r&&!n&&!o&&!d){this.debugSkip(e),this.markClean({recursive:!1});return}"dirtyTransform"!==d&&(d||(d=this.dirtyZIndex)),l.globalAlpha*=this.opacity,this.dirtyZIndex&&this.sortChildren(t.compareChildren);let u=this.sortedChildren(),c=this.renderClip(e)??e.clipBBox,p=d!==e.forceRender||c!==e.clipBBox;for(let t of(this.renderChildren(u,p?{...e,forceRender:d,clipBBox:c}:e),super.render(e),this.clipRect&&l.restore(),this.virtualChildren()))t.markClean({recursive:"virtual"});a&&h&&s?.({name:a,renderCtx:e,result:"rendered",skipped:h.nodesSkipped,counts:an(this),group:this})}sortedChildren(){let e=this.children();return this.hasVirtualChildren()&&(e=[...e].sort(t.compareChildren)),e}renderClip(t){if(!this.clipRect)return;let{x:e,y:i,width:a,height:s}=this.clipRect,{ctx:r}=t;return r.save(),r.beginPath(),r.rect(e,i,a,s),r.clip(),this._debug?.(()=>({name:this.opts?.name,clipRect:this.clipRect,ctxTransform:r.getTransform(),renderCtx:t,group:this})),am.toCanvas(this,this.clipRect)}renderChildren(t,e){let{ctx:i,forceRender:a,stats:s}=e;for(let r of t){if(!r.visible||!this.visible){r.markClean(),s&&(s.nodesSkipped+=an(r).count);continue}if(!a&&0===r.dirty){s&&(s.nodesSkipped+=an(r).count);continue}i.save(),r.render(e),i.restore()}}setClipRect(t){this.clipRect=t?am.fromCanvas(this,t):void 0}setClipRectCanvasSpace(t){this.clipRect=t}toSVG(){if(!this.visible)return;let t=[],e=[];for(let i of this.sortedChildren()){let a=i.toSVG();null!=a&&(e.push(...a.elements),null!=a.defs&&t.push(...a.defs))}return{elements:e,defs:t}}};af.className="Group",o([tS({redraw:3,convertor:t=>td(0,t,1)})],af.prototype,"opacity",2);var ax=af,aM=class extends ag(ax){},ab=class extends ap(ax){},av=class extends ay(ax){},aI=class extends ap(ay(ax)){},aD=Date.now(),aS=()=>{let t=Date.now()-aD;if(t>2e3){let e=(Math.floor(t/100)/10).toFixed(1);y.log(`**** ${e}s since last log message ****`)}aD=Date.now()},aN={create:(...t)=>Object.assign((...e)=>{aN.check(...t)&&("function"==typeof e[0]&&(e=eC(e[0]())),aS(),y.log(...e))},{check:()=>aN.check(...t)}),check:(...t)=>(0===t.length&&t.push(!0),eC(tt("agChartsDebug")).some(e=>t.includes(e)))},aL=class t{constructor(t,e,i=!0){this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=aN.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(tw,e)?()=>new e:e}static select(e,i,a=!0){return new t(e,i,a)}static selectAll(t,e){let i=[],a=t=>{for(let s of(e(t)&&i.push(t),t.children()))a(s)};return a(t),i}static selectByClass(e,...i){return t.selectAll(e,t=>i.some(e=>t instanceof e))}static selectByTag(e,i){return t.selectAll(e,t=>t.tag===i)}createNode(t,e,i){let a=this.nodeFactory(t);return a.datum=t,e?.(a),null==i?this._nodes.push(a):this._nodes.splice(i,0,a),this.parentNode.appendChild(a),a}update(t,e,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${t}`),i){let a=new Map(t.map((t,e)=>[i(t),[t,e]]));for(let[t,e]of this._nodesMap.entries())if(a.has(e)){let[i]=a.get(e);t.datum=i,this.garbageBin.delete(t),a.delete(e)}else this.garbageBin.add(t);for(let[t,[i,s]]of a.entries())this._nodesMap.set(this.createNode(i,e,s),t)}else{let i=Math.max(t.length,this.data.length);for(let a=0;a<i;a++)a>=t.length?this.garbageBin.add(this._nodes[a]):a>=this._nodes.length?this.createNode(t[a],e):(this._nodes[a].datum=t[a],this.garbageBin.delete(this._nodes[a]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),t.destroy(),!1))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){for(let e of this._nodes.entries())t(e[1],e[1].datum,e[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){let e=this._nodes[t];yield{node:e,datum:e.datum,index:t}}}select(e){return t.selectAll(this.parentNode,e)}selectByClass(e){return t.selectByClass(this.parentNode,e)}selectByTag(e){return t.selectByTag(this.parentNode,e)}nodes(){return this._nodes}at(t){return this._nodes.at(t)}},aA=2*Math.PI;function aw(t){return t%=aA,t+=aA,t%=aA}function aC(t){return t%=aA,(t+=aA)!==aA&&(t%=aA),t}function aT(t){return(t%=aA)<-Math.PI?t+=aA:t>=Math.PI&&(t-=aA),t}function ak(t,e,i){let a=aw(t),s=aw(e),r=aw(i);return s<r?s<=a&&a<=r:!(s>r)||s<=a||a<=r}function aE(t){return t/180*Math.PI}function aO(t){return t/Math.PI*180}function aj(t,e,i){i&&([t,e]=[e,t]);let a=aw(t);return(aw(e)+aA-a)%aA}function aR(t,e){return t=aw(t),(e=aw(e))-t+(t>e?2*Math.PI:0)}function az(t,e,i,a){return{x:t+i*Math.cos(a),y:e+i*Math.sin(a)}}function aP(t,e){return 1e-6>aR(t,e)?e:aw(t-e)+e}function aB(t,e,i=0){let a=Math.abs(e-t)>=2*Math.PI?2*Math.PI:aw(e-t);return e=(t=aP(t,i))+a,{startAngle:t,endAngle:e}}function aG(t,e,i,a){let s=t-i,r=e-a;return s*s+r*r}function aF(t,e,i,a,s,r,n){if(i===s&&a===r)return Math.min(n,aG(t,e,i,a));let o=s-i,l=r-a,h=Math.max(0,Math.min(1,((t-i)*o+(e-a)*l)/(o*o+l*l)));return Math.min(n,aG(t,e,i+h*o,a+h*l))}function aU(t,e,i,a,s,r,n,o,l){if(o&&([n,r]=[r,n]),!ak(Math.atan2(e-a,t-i),r,n)){let n=i+Math.cos(r)*s,o=a+Math.sin(r)*s,h=i+Math.cos(r)*s,d=a+Math.sin(r)*s;return Math.min(l,aG(t,e,n,o),aG(t,e,h,d))}let h=s-Math.sqrt(aG(t,e,i,a));return Math.min(l,h*h)}var aY=t=>{let e=tE.fromString(t),[i,a,s]=tE.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:a,h:s,a:e.a}},aZ=t=>t.c<1e-6||t.l<1e-6||t.l>.999999,a_=(t,e,i)=>{let a;if(i=td(0,i,1),aZ(t))a=e.h;else if(aZ(e))a=t.h;else{let s=t.h,r=e.h,n=e.h-t.h;n>180?r-=360:n<-180&&(r+=360),a=s*(1-i)+r*i}let s=t.c*(1-i)+e.c*i,r=t.l*(1-i)+e.l*i,n=t.a*(1-i)+e.a*i;return tE.fromOKLCH(r,s,a,n)},aV=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(aY)}update(){let{domain:t,range:e}=this;t.length<2&&(y.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let e=1;e<t.length;e++)if(t[e-1]>=t[e]){y.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((t,e)=>t-e);break}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(aY)}convert(t){let e,i;this.refresh();let{domain:a,range:s,parsedRange:r}=this,n=a[0],o=a.at(-1),l=s[0],h=s[s.length-1];if(t<=n)return l;if(t>=o)return h;if(2===a.length){let a=(t-n)/(o-n),r=1/(s.length-1);e=s.length<=2?0:Math.min(Math.floor(a*(s.length-1)),s.length-2),i=(a-e*r)/r}else{for(e=0;e<a.length-2&&!(t<a[e+1]);e++);let s=a[e];i=(t-s)/(a[e+1]-s)}return a_(r[e],r[e+1],i).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&y.warnOnce("Expected update to not invalidate scale"))}};o([eD],aV.prototype,"domain",2),o([eD],aV.prototype,"range",2);var aW=class{constructor(t,e=[],i){this.colorSpace=t,this.stops=e,this.bbox=i,this._cache=void 0}createGradient(t,e){let i=this.bbox??e;if(null!=this._cache&&this._cache.ctx===t&&this._cache.bbox.equals(i))return this._cache.gradient;let{stops:a,colorSpace:s}=this;if(0===a.length)return;if(1===a.length)return a[0].color;let r=this.createCanvasGradient(t,i);if(null==r)return;let n="oklch"===s,o=a[0];r.addColorStop(o.offset,o.color);for(let t=1;t<a.length;t+=1){let e=a[t];if(n){let t=new aV;t.domain=[o.offset,e.offset],t.range=[o.color,e.color];for(let i=o.offset+.05;i<e.offset;i+=.05)r.addColorStop(i,t.convert(i))}r.addColorStop(e.offset,e.color),o=e}return"createPattern"in r&&(r=r.createPattern()),this._cache={ctx:t,bbox:i,gradient:r},r}},aH=class extends aW{constructor(t,e,i=0,a){super(t,e,a),this.angle=i}createCanvasGradient(t,e){let{angle:i}=this,a=aw(aE(i+90)),s=Math.cos(a),r=Math.sin(a),n=e.width,o=e.height,l=e.x+.5*n,h=e.y+.5*o,d=Math.sqrt(o*o+n*n)/2*Math.abs(Math.cos((a<Math.PI/2?a:a<Math.PI?Math.PI-a:a<1.5*Math.PI?a-Math.PI:2*Math.PI-a)-Math.atan2(o,n)));return t.createLinearGradient(l+s*d,h+r*d,l-s*d,h-r*d)}},a$=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,aQ=class t extends tw{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=t.defaultStyles.fill,this.stroke=t.defaultStyles.stroke,this.strokeWidth=t.defaultStyles.strokeWidth,this.lineDash=t.defaultStyles.lineDash,this.lineDashOffset=t.defaultStyles.lineDashOffset,this.lineCap=t.defaultStyles.lineCap,this.lineJoin=t.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=t.defaultStyles.opacity,this.fillShadow=t.defaultStyles.fillShadow}restoreOwnStyles(){let{defaultStyles:t}=this.constructor;Object.assign(this,t)}onFillChange(){let t;let{fill:e}=this;if(e instanceof aW)this.gradient=e;else if(e?.startsWith("linear-gradient")&&(t=a$.exec(e))){let e;let i=parseFloat(t[1]),a=[],s=t[2],r=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;for(;e=r.exec(s);)a.push(e[0]);this.gradient=new aH("rgb",a.map((t,e)=>({color:t,offset:e/(a.length-1)})),i)}else this.gradient=void 0}align(t,e){let i=this.layerManager?.canvas?.pixelRatio??1,a=Math.round(t*i)/i;return null==e?a:0===e?0:e<1?Math.ceil(e*i)/i:Math.round((e+t)*i)/i-a}fillStroke(t,e){this.renderFill(t,e),this.renderStroke(t,e)}renderFill(t,e){if(this.fill){let{globalAlpha:i}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),this.executeFill(t,e),t.globalAlpha=i}t.shadowColor="rgba(0, 0, 0, 0)"}executeFill(t,e){e?t.fill(e):t.fill()}applyFill(t){t.fillStyle=this.gradient?.createGradient(t,this.getBBox())??("string"==typeof this.fill?this.fill:void 0)??"black"}applyFillAlpha(t){t.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(t){let e=this.layerManager?.canvas.pixelRatio??1,i=this.fillShadow;i?.enabled&&(t.shadowColor=i.color,t.shadowOffsetX=i.xOffset*e,t.shadowOffsetY=i.yOffset*e,t.shadowBlur=i.blur*e)}renderStroke(t,e){if(this.stroke&&this.strokeWidth){let{globalAlpha:i}=t;t.strokeStyle=this.stroke,t.globalAlpha*=this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),null!=this.miterLimit&&(t.miterLimit=this.miterLimit),this.executeStroke(t,e),t.globalAlpha=i}}executeStroke(t,e){e?t.stroke(e):t.stroke()}containsPoint(t,e){return this.isPointInPath(t,e)}};aQ.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},o([tS({redraw:2})],aQ.prototype,"fillOpacity",2),o([tS({redraw:2})],aQ.prototype,"strokeOpacity",2),o([tS({redraw:2,changeCb:t=>t.onFillChange()})],aQ.prototype,"fill",2),o([tS({redraw:2})],aQ.prototype,"stroke",2),o([tS({redraw:2})],aQ.prototype,"strokeWidth",2),o([tS({redraw:2})],aQ.prototype,"lineDash",2),o([tS({redraw:2})],aQ.prototype,"lineDashOffset",2),o([tS({redraw:2})],aQ.prototype,"lineCap",2),o([tS({redraw:2})],aQ.prototype,"lineJoin",2),o([tS({redraw:2})],aQ.prototype,"miterLimit",2),o([tS({redraw:2,convertor:t=>td(0,t,1)})],aQ.prototype,"opacity",2),o([tS({redraw:2,checkDirtyOnAssignment:!0})],aQ.prototype,"fillShadow",2);var aX=aQ,aK=class extends aX{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new tI(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){return(this.x1===this.x2||this.y1===this.y2)&&this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(t,e)}distanceSquared(t,e){let{x1:i,y1:a,x2:s,y2:r}=this;return aF(t,e,i,a,s,r,1/0)}render(t){let{ctx:e,forceRender:i,stats:a,devicePixelRatio:s}=t;if(0===this.dirty&&!i){a&&(a.nodesSkipped+=an(this).count);return}let{x1:r,y1:n,x2:o,y2:l}=this;if(r===o){let{strokeWidth:t}=this,e=Math.round(r*s)/s+Math.trunc(t*s)%2/(2*s);r=e,o=e}else if(n===l){let{strokeWidth:t}=this,e=Math.round(n*s)/s+Math.trunc(t*s)%2/(2*s);n=e,l=e}e.beginPath(),e.moveTo(r,n),e.lineTo(o,l),this.fillStroke(e),this.fillShadow?.markClean(),super.render(t)}toSVG(){if(!this.visible)return;let t=document.createElementNS("http://www.w3.org/2000/svg","line");return t.setAttribute("x1",String(this.x1)),t.setAttribute("y1",String(this.y1)),t.setAttribute("x2",String(this.x2)),t.setAttribute("y2",String(this.y2)),t.setAttribute("stroke",this.stroke??"none"),t.setAttribute("stroke-opacity",String(this.strokeOpacity)),t.setAttribute("stroke-width",String(this.strokeWidth)),{elements:[t]}}};aK.className="Line",aK.defaultStyles={...aX.defaultStyles,fill:void 0,strokeWidth:1},o([tS({redraw:3})],aK.prototype,"x1",2),o([tS({redraw:3})],aK.prototype,"y1",2),o([tS({redraw:3})],aK.prototype,"x2",2),o([tS({redraw:3})],aK.prototype,"y2",2);var aJ=class{constructor(t=5){this.maxCacheSize=t,this.store=new Map}get(t){if(!this.store.has(t))return;let e=this.store.get(t);return this.store.delete(t),this.store.set(t,e),e}has(t){return this.store.has(t)}set(t,e){if(this.store.set(t,e),this.store.size>this.maxCacheSize){let t=this.store.keys(),e=this.store.size-this.maxCacheSize;for(;e>0;){let i=t.next();i.done||this.store.delete(i.value),e--}}return e}clear(){this.store.clear()}},aq=class{static measureText(t,e){return this.getMeasurer(e).measureText(t)}static measureLines(t,e){return this.getMeasurer(e).measureLines(t)}static getMeasurer(t){let e="string"==typeof t.font?t.font:a1.toFontString(t.font),i=`${e}-${t.textAlign??"start"}-${t.textBaseline??"alphabetic"}`;return this.instanceMap.get(i)??this.createFontMeasurer(e,t,i)}static createFontMeasurer(t,e,i){let a=function(t=0,e=0){let i=te("canvas");return i.style.display="block",i.style.width=t+"px",i.style.height=e+"px",i.getContext("2d")}();a.font=t,a.textAlign=e.textAlign??"start",a.textBaseline=e.textBaseline??"alphabetic";let s=new a0(a,e);return this.instanceMap.set(i,s),s}};aq.instanceMap=new aJ(10);var a0=class{constructor(t,e){this.ctx=t,this.measureMap=new aJ(100),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline),t.font="string"==typeof e.font?e.font:a1.toFontString(e.font),this.textMeasurer=new a2(t=>this.cachedCtxMeasureText(t),e.textBaseline??"alphabetic")}textWidth(t,e){return this.textMeasurer.textWidth(t,e)}measureText(t){return this.textMeasurer.measureText(t)}measureLines(t){return this.textMeasurer.measureLines(t)}cachedCtxMeasureText(t){if(!this.measureMap.has(t)){let e=this.ctx.measureText(t);this.measureMap.set(t,{actualBoundingBoxAscent:e.actualBoundingBoxAscent,emHeightAscent:e.emHeightAscent,emHeightDescent:e.emHeightDescent,actualBoundingBoxDescent:e.actualBoundingBoxDescent,actualBoundingBoxLeft:e.actualBoundingBoxLeft,actualBoundingBoxRight:e.actualBoundingBoxRight,alphabeticBaseline:e.alphabeticBaseline,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent,hangingBaseline:e.hangingBaseline,ideographicBaseline:e.ideographicBaseline,width:e.width})}return this.measureMap.get(t)}},a1=class{static toFontString({fontSize:t=10,fontStyle:e,fontWeight:i,fontFamily:a,lineHeight:s}){let r="";return e&&(r+=`${e} `),i&&(r+=`${i} `),r+=`${t}px`,s&&(r+=`/${s}px`),(r+=` ${a}`).trim()}static getLineHeight(t){return Math.ceil(t*this.defaultLineHeight)}static getVerticalModifier(t){switch(t){case"hanging":case"top":return 0;case"middle":return .5;default:return 1}}};a1.EllipsisChar="…",a1.defaultLineHeight=1.15,a1.lineSplitter=/\r?\n/g;var a2=class{constructor(t,e="alphabetic"){this.measureTextFn=t,this.textBaseline=e,this.charMap=new Map}getMetrics(t){let e=this.measureTextFn(t);return e.fontBoundingBoxAscent??(e.fontBoundingBoxAscent=e.emHeightAscent),e.fontBoundingBoxDescent??(e.fontBoundingBoxDescent=e.emHeightDescent),{width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,lineHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,offsetTop:e.actualBoundingBoxAscent,offsetLeft:e.actualBoundingBoxLeft}}getMultilineMetrics(t){let e=0,i=0,a=0,s=0,r=0,n=a1.getVerticalModifier(this.textBaseline),o=[],l=0,h=t.length;for(let n of t){let t=this.measureTextFn(n);t.fontBoundingBoxAscent??(t.fontBoundingBoxAscent=t.emHeightAscent),t.fontBoundingBoxDescent??(t.fontBoundingBoxDescent=t.emHeightDescent),e<t.width&&(e=t.width),s<t.actualBoundingBoxLeft&&(s=t.actualBoundingBoxLeft),0===l?(i+=t.actualBoundingBoxAscent,a+=t.actualBoundingBoxAscent):r+=t.fontBoundingBoxAscent,l===h-1?i+=t.actualBoundingBoxDescent:r+=t.fontBoundingBoxDescent,o.push({text:n,width:t.width,height:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,lineHeight:t.fontBoundingBoxAscent+t.fontBoundingBoxDescent,offsetTop:t.actualBoundingBoxAscent,offsetLeft:t.actualBoundingBoxLeft}),l++}return{width:e,height:i+=r,offsetTop:a+=r*n,offsetLeft:s,lineMetrics:o}}textWidth(t,e){if(e){let e=0;for(let i=0;i<t.length;i++)e+=this.textWidth(t.charAt(i));return e}return t.length>1?this.measureTextFn(t).width:this.charMap.get(t)??this.charWidth(t)}measureText(t){return this.getMetrics(t)}measureLines(t){let e="string"==typeof t?t.split(a1.lineSplitter):t;return this.getMultilineMetrics(e)}charWidth(t){let{width:e}=this.measureTextFn(t);return this.charMap.set(t,e),e}},a4=class t extends aX{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=t.defaultStyles.textAlign,this.textBaseline=t.defaultStyles.textBaseline}onTextChange(){this.lines=this.text?.split("\n").map(t=>t.trim())??[]}static computeBBox(t,e,i,a){let{offsetTop:s,offsetLeft:r,width:n,height:o}=aq.measureLines(t,a);return new tI(e-r,i-s,n,o)}computeBBox(){let{x:e,y:i,lines:a,textBaseline:s,textAlign:r}=this;return t.computeBBox(a,e,i,{font:this,textBaseline:s,textAlign:r})}isPointInPath(t,e){let i=this.getBBox();return!!i&&i.containsPoint(t,e)}render(t){let{ctx:e,forceRender:i,stats:a}=t;if(0===this.dirty&&!i||!this.lines.length||!this.layerManager){a&&(a.nodesSkipped+=an(this).count);return}let{fill:s,stroke:r,strokeWidth:n}=this,{pixelRatio:o}=this.layerManager.canvas;if(e.font=a1.toFontString(this),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,s){this.applyFill(e),e.globalAlpha*=this.opacity*this.fillOpacity;let{fillShadow:t}=this;t?.enabled&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*o,e.shadowOffsetY=t.yOffset*o,e.shadowBlur=t.blur*o),this.renderLines((t,i,a)=>e.fillText(t,i,a))}if(r&&n){e.strokeStyle=r,e.lineWidth=n,e.globalAlpha*=this.opacity*this.strokeOpacity;let{lineDash:t,lineDashOffset:i,lineCap:a,lineJoin:s}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),a&&(e.lineCap=a),s&&(e.lineJoin=s),this.renderLines((t,i,a)=>e.strokeText(t,i,a))}super.render(t)}renderLines(t){let{lines:e,x:i,y:a}=this,s=this.lineHeight??a1.getLineHeight(this.fontSize),r=(s-s*e.length)*a1.getVerticalModifier(this.textBaseline);for(let n of e)t(n,i,a+r),r+=s}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}toSVG(){if(!this.visible||!this.text)return;let t=document.createElementNS("http://www.w3.org/2000/svg","text");return t.setAttribute("font-family",this.fontFamily?.split(",")[0]??""),t.setAttribute("font-size",String(this.fontSize)),t.setAttribute("font-style",this.fontStyle??""),t.setAttribute("font-weight",String(this.fontWeight??"")),t.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),t.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),t.setAttribute("x",String(this.x)),t.setAttribute("y",String(this.y)),t.textContent=this.text??"",{elements:[t]}}};a4.className="Text",a4.defaultStyles={...aX.defaultStyles,textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"},o([tS({redraw:3})],a4.prototype,"x",2),o([tS({redraw:3})],a4.prototype,"y",2),o([tS({redraw:3,changeCb:t=>t.onTextChange()})],a4.prototype,"text",2),o([tS()],a4.prototype,"fontStyle",2),o([tS()],a4.prototype,"fontWeight",2),o([tS()],a4.prototype,"fontSize",2),o([tS()],a4.prototype,"fontFamily",2),o([tS({redraw:3})],a4.prototype,"textAlign",2),o([tS({redraw:3})],a4.prototype,"textBaseline",2),o([tS({redraw:3})],a4.prototype,"lineHeight",2);var a3=a4,a5=class extends ap(a3){},a9=class extends ap(ay(a3)){};function a6(t,e,i,a,s){let r=t.x+t.width>e&&t.x<e+a,n=t.y+t.height>i&&t.y<i+s;return r&&n}var a8={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function a7(t,e){return t.length===e.length&&t.every((t,i)=>Number(t)===Number(e[i]))}var st="class-instance";function se(t,e,i){if(tZ(e)){if(!tZ(t)||t.length!==e.length||e.some((e,i)=>null!=se(t[i],e)))return e}else if(tK(e)){if(!tK(t))return e;let a={};for(let s of new Set([...Object.keys(t),...Object.keys(e)]))if(!(t[s]===e[s]||i?.includes(s))){if(typeof t[s]==typeof e[s]){let i=se(t[s],e[s]);null!==i&&(a[s]=i)}else a[s]=e[s]}return Object.keys(a).length?a:null}else if(t!==e)return e;return null}function si(t,e){return tZ(t)?t.map(t=>si(t,e)):tK(t)?et(t,(t,i)=>e?.shallow?.includes(i)?sa(t):si(t,e)):t instanceof Map?new Map(si(Array.from(t))):sa(t)}function sa(t){return tZ(t)?[...t]:tK(t)?{...t}:tV(t)?new Date(t):tH(t)?new RegExp(t.source,t.flags):t}function ss(t,e,i,...a){if(tZ(t))e(t,...a),t.forEach((t,s)=>{ss(t,e,i,...sn(a,s))});else if(tK(t))for(let s of(e(t,...a),Object.keys(t))){if(i?.skip?.includes(s))continue;let r=t[s];(tZ(r)||tK(r))&&ss(r,e,i,...sn(a,s))}}function sr(t,e,i={}){let{path:a,matcherPath:s=a?.replace(/(\[[0-9+]+])/i,"[]"),skip:r=[]}=i;if(null==t)throw Error(`AG Charts - target is uninitialised: ${a??"<root>"}`);if(null==e)return t;if(e$(t))return t.set(e);let n=so(t);for(let o in e){if(ea.has(o))continue;let l=`${s?s+".":""}${o}`;if(r.includes(l))continue;let h=e[o],d=`${a?a+".":""}${o}`,u=t.constructor,c=t[o];try{let e=so(c),a=so(h);if(n===st&&!(o in t)){y.warn(`unable to set [${d}] in ${u?.name} - property is unknown`);continue}if(null!=e&&null!=a&&a!==e&&(e!==st||"object"!==a)){y.warn(`unable to set [${d}] in ${u?.name} - can't apply type of [${a}], allowed types are: [${e}]`);continue}e$(c)?t[o].set(h):"object"===a?(null==c&&(t[o]={}),sr(c??t[o],h,{...i,path:d,matcherPath:l})):t[o]=h}catch(t){y.warn(`unable to set [${d}] in [${u?.name}]; nested error is: ${t.message}`)}}return t}function sn(t,e){return t.map(t=>t?.[e])}function so(t){return null==t?null:t1(t)||tV(t)?"primitive":tZ(t)?"array":tQ(t)?tK(t)?"object":st:t$(t)?"function":"primitive"}function sl(t,e){let i=tZ(t)?t:t.split(".");if(1===i.length){let[t]=i;return tB((e,i,a)=>e[t]=a,e=>e[t],e)}return tB((t,e,a)=>es(t,i,a),t=>ei(t,i),e)}function sh(t){return tB((e,i,a)=>e[t]=a)}function sd(t,e){return tB((i,a,s)=>i[t][e??a]=s)}function su(t){let{newValue:e,oldValue:i,changeValue:a}=t;return tB((t,s,r,n)=>(r!==n&&(void 0!==n&&i?.call(t,n),void 0!==r&&e?.call(t,r),a?.call(t,r,n)),r))}function sc(t){return(e,i)=>{tP(e,i).observers.push(t)}}var sp="color: green",sg="color: grey",sy=class t{constructor(t,e,i){this.defaultState=t,this.states=e,this.enterEach=i,this.debug=aN.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,sp)}transition(e,i){if(!this.transitionChild(e,i)||this.state===t.child||this.state===t.parent)return;let a=this.state,s=this.states[this.state],r=s[e],n=`%c${this.constructor.name} | ${this.state} -> ${e} ->`;if(Array.isArray(r))r=r.find(t=>{if(!t.guard)return!0;let e=t.guard(i);return e||this.debug(`${n} ${t.target} (guarded)`,sg),e});else if("object"==typeof r&&!(r instanceof t)&&r.guard&&!r.guard(i)){this.debug(`${n} ${r.target} (guarded)`,sg);return}if(!r){this.debug(`${n} ${this.state}`,sg);return}let o=this.getDestinationState(r),l=o===this.state?void 0:s.onExit;this.debug(`${n} ${o}`,sp),this.state=o,"function"==typeof r?r(i):"object"!=typeof r||r instanceof t||r.action?.(i),l?.(),this.enterEach?.(a,o),o!==a&&o!==t.child&&o!==t.parent&&this.states[o].onEnter?.(a,i)}transitionAsync(t,e){setTimeout(()=>{this.transition(t,e)},0)}is(e){return this.state===t.child&&this.childState?this.childState.is(e):this.state===e}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(e,i){return this.state!==t.child||!this.childState||(this.childState.transition(e,i),!this.childState.is(t.parent)||(this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.defaultState}`,sp),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1))}getDestinationState(e){let i=this.state;return"string"==typeof e?i=e:e instanceof t?(this.childState=e,i=t.child):"object"==typeof e&&(e.target instanceof t?(this.childState=e.target,i=t.child):null!=e.target&&(i=e.target)),i}};sy.child="__child",sy.parent="__parent";var sm=class{static wrapText(t,e){return this.wrapLines(t,e).join("\n")}static wrapLines(t,e){let i=this.textWrap(t,e);return"hide"===e.overflow&&i.some(t=>t.endsWith(a1.EllipsisChar))?[]:i}static appendEllipsis(t){return t.replace(/[.,]{1,5}$/,"")+a1.EllipsisChar}static truncateLine(t,e,i,a){let s=e.textWidth(a1.EllipsisChar),r=0,n=0;for(;n<t.length;n++){let a=e.textWidth(t.charAt(n));if(r+a>i)break;r+=a}if(t.length===n&&(!a||r+s<=i))return a?t+a1.EllipsisChar:t;for(t=t.slice(0,n).trimEnd();t.length&&e.textWidth(t)+s>i;)t=t.slice(0,-1).trimEnd();return t+a1.EllipsisChar}static textWrap(t,e){let i=t.split(a1.lineSplitter),a=aq.getMeasurer(e);if("never"===e.textWrap)return i.map(t=>this.truncateLine(t.trimEnd(),a,e.maxWidth));let s=[],r="hyphenate"===e.textWrap,n=null==e.textWrap||"on-space"===e.textWrap;for(let t of i){if(""===(t=t.trimEnd())){s.push(t);continue}for(let i=0,o=0,l=0;i<t.length;i++){let h=t.charAt(i);if(o+=a.textWidth(h)," "===h&&(l=i),o>e.maxWidth){if(0===i)break;let h=a.textWidth(t.slice(0,i+1));if(h<=e.maxWidth){o=h;continue}if(l){let r=this.getWordAt(t,l+1),h=a.textWidth(r);if(h<=e.maxWidth){s.push(t.slice(0,l).trimEnd()),t=t.slice(l).trimStart(),i=-1,o=0,l=0;continue}n&&h>e.maxWidth&&s.push(t.slice(0,l).trimEnd(),this.truncateLine(t.slice(l).trimStart(),a,e.maxWidth,!0))}else n&&s.push(this.truncateLine(t,a,e.maxWidth,!0));if(n){t="";break}let d=r?"-":"",u=t.slice(0,i).trim();for(;u.length&&a.textWidth(u+d)>e.maxWidth;)u=u.slice(0,-1).trimEnd();if(s.push(u+d),!u.length){t="";break}t=t.slice(u.length).trimStart(),i=-1,o=0,l=0}}t&&s.push(t)}return this.avoidOrphans(s,a,e),this.clipLines(s,a,e)}static getWordAt(t,e){let i=t.indexOf(" ",e);return -1===i?t.slice(e):t.slice(e,i)}static clipLines(t,e,i){if(!i.maxHeight)return t;let{height:a,lineMetrics:s}=e.measureLines(t);if(a<=i.maxHeight)return t;for(let a=0,r=0;a<s.length;a++){let{lineHeight:n}=s[a];if((r+=n)>i.maxHeight){if("hide"===i.overflow)return[];let s=t.slice(0,a||1),r=s.pop();return s.concat(this.truncateLine(r,e,i.maxWidth,!0))}}return t}static avoidOrphans(t,e,i){if(!1===i.avoidOrphans||t.length<2)return;let{length:a}=t,s=t[a-1],r=t[a-2];if(r.length<s.length)return;let n=r.lastIndexOf(" ");if(-1===n||n===r.indexOf(" ")||s.includes(" "))return;let o=r.slice(n+1);e.textWidth(s+o)<=i.maxWidth&&(t[a-2]=r.slice(0,n),t[a-1]=o+" "+s)}},sf={isEnterprise:!1};function sx(t,e,i){void 0===i||""===i?t?.removeAttribute(e):t?.setAttribute(e,i.toString())}function sM(t,e){let i;if(null!=e)for(i in e)"class"!==i&&sx(t,i,e[i])}function sb(t,e,i){if(!(t instanceof HTMLElement))return;let a=t.getAttribute(e);if(null===a)return i;let s=typeof({})[e];return"boolean"===s?"true"===a:"number"===s?Number(a):"string"===s?a:void 0}function sv(t,e,i){null!=t&&(null==i?t.style.removeProperty(e):t.style.setProperty(e,i))}function sI(t,e,i,a){let{top:s,right:r,bottom:n,left:o,width:l,height:h}=a;return null!=o?null!=l?r=i.width-o+l:null!=r&&(l=i.width-o-r):null!=r&&null!=l&&(o=i.width-r-l),null!=s?null!=h?n=i.height-s-h:null!=n&&(h=i.height-n-s):null!=n&&null!=h&&(s=i.height-n-h),null==l?null==h?(l=t,h=e):l=Math.ceil(t*h/e):null==h&&(h=Math.ceil(e*l/t)),null==o&&(o=null==r?Math.floor((i.width-l)/2):i.width-r-l),null==s&&(s=null==n?Math.floor((i.height-h)/2):i.height-h-n),{x:o,y:s,width:l,height:h}}var sD="ag-chart-tooltip",sS="ag-chart-dark-tooltip",sN={html:"",ariaLabel:""};function sL(t,e){if("string"==typeof t)return{html:t,ariaLabel:t};let{content:i=e?.content??"",title:a=e?.title,color:s=e?.color??"white",backgroundColor:r=e?.backgroundColor??"#888"}=t,n=a?`<div class="${sD}-title"
        style="color: ${s}; background-color: ${r}">${a}</div>`:"",o=a?`${a}: `:"",l=i?`<div class="${sD}-content">${i}</div>`:"";return{html:`${n}${l}`,ariaLabel:function(t){let e=(t,e,i)=>0===e||"."!==i[e-1]?". ":" ";return t.replace(/<br\s*\/?>/g,e).replace(/<\/p\s+>/g,e).replace(/<\/li\s*>/g,e).replace(/<[^<>]+>/g,"").replace(/\n+/g," ").replace(/\s+/g," ")}(`${o}${i}`)}}var sA=class extends eW{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};o([eQ(iE(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left",{value:"sparkline",undocumented:!0}],"a position type"))],sA.prototype,"type",2),o([eQ(e4)],sA.prototype,"xOffset",2),o([eQ(e4)],sA.prototype,"yOffset",2);var sw=class extends eW{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new sA,this.darkTheme=!1,this.bounds="extended",this.enableInteraction=!1,this.lastVisibilityChange=Date.now(),this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0}get interactive(){return this.enableInteraction}setup(t){this.element=t.addChild("canvas-overlay",sD),this.element.classList.add(sD)}destroy(t){t.removeChild("canvas-overlay",sD)}isVisible(){return!this.element?.classList.contains(sD+"-hidden")}show(t,e,i,a,s=!1){let{element:r}=this,n=r?.getBoundingClientRect();if(null!=a&&null!=r)r.innerHTML=a.html;else if(!r?.innerHTML){this.toggle(!1);return}let o=i.position?.type??this.position.type,l=i.position?.xOffset??0,h=i.position?.yOffset??0,d=this.getTooltipBounds({positionType:o,meta:i,yOffset:h,xOffset:l,canvasRect:e}),u={x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height},c=sI(r.clientWidth,r.clientHeight,u,d),p=u.x,g=u.y,y=u.width-r.clientWidth-1+p,m=u.height-r.clientHeight+g,f=td(p,c.x,y),x=td(g,c.y,m),M=!1;if(null!=n){let t=u.width-n.width-1+p,e=u.height-n.height+g;M=t>y||e>m}let b=f!==c.x||x!==c.y,v=i.showArrow??this.showArrow??(("node"===o||"pointer"===o||"sparkline"===o)&&!b&&!l&&!h);this.updateShowArrow(v),M&&(r.style.transition="none"),r.style.transform=`translate(${Math.round(f)}px, ${Math.round(x)}px)`,M&&(r.style.transition=""),i.enableInteraction?(this.enableInteraction=!0,r.style.pointerEvents="auto",sx(r,"aria-hidden",void 0)):(this.enableInteraction=!1,r.style.pointerEvents="none",sx(r,"aria-hidden",!0)),this.delay>0&&!s?(this.toggle(!1),this.showTimeout=setTimeout(()=>{this.toggle(!0)},this.delay)):this.toggle(!0)}toggle(t){if(!this.element)return;let{classList:e}=this.element,i=(t,i)=>e.toggle(`${sD}-${t}`,i),a=this.isVisible(),s=1/0;if(t||clearTimeout(this.showTimeout),a!==t){let t=Date.now();s=t-this.lastVisibilityChange,this.lastVisibilityChange=t}let r=!a&&t&&s>100;for(let a of(s>5&&i("no-animation",r),i("no-interaction",!this.enableInteraction),i("hidden",!t),i("arrow",this._showArrow),e.toggle(sS,this.darkTheme),this.wrapTypes))e.toggle(`${sD}-wrap-${a}`,a===this.wrapping)}updateShowArrow(t){this._showArrow=t}getTooltipBounds(t){if(!this.element)return{};let{positionType:e,meta:i,yOffset:a,xOffset:s,canvasRect:r}=t,{clientWidth:n,clientHeight:o}=this.element,l={width:n,height:o};switch(e){case"node":case"pointer":return l.top=i.offsetY+a-o-8,l.left=i.offsetX+s-n/2,l;case"top":return l.top=a,l.left=r.width/2-n/2+s,l;case"right":return l.top=r.height/2-o/2+a,l.left=r.width-n/2+s,l;case"left":return l.top=r.height/2-o/2+a,l.left=s,l;case"bottom":return l.top=r.height-o+a,l.left=r.width/2-n/2+s,l;case"top-left":return l.top=a,l.left=s,l;case"top-right":return l.top=a,l.left=r.width-n+s,l;case"bottom-right":return l.top=r.height-o+a,l.left=r.width-n+s,l;case"bottom-left":return l.top=r.height-o+a,l.left=s,l;case"sparkline":return sf.isEnterprise?l.top=a-o-8:l.top=i.offsetY+a-o-8,l.left=i.offsetX+s-n/2,l}}};o([eQ(e0)],sw.prototype,"enabled",2),o([eQ(e0,{optional:!0})],sw.prototype,"showArrow",2),o([sc((t,e,i)=>{e&&t.element?.classList.add(e),i&&t.element?.classList.remove(i)}),eQ(e2,{optional:!0})],sw.prototype,"class",2),o([eQ(e9)],sw.prototype,"delay",2),o([eQ(iT,{optional:!0})],sw.prototype,"range",2),o([eQ(iS)],sw.prototype,"wrapping",2),o([eQ(eJ)],sw.prototype,"position",2),o([eQ(e0)],sw.prototype,"darkTheme",2),o([eQ(iE(["extended","canvas"]))],sw.prototype,"bounds",2);var sC=class extends eW{constructor(){super(...arguments),this.id=_(this),this.node=new a5({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(t,e){let{regionManager:i,proxyInteractionService:a,layoutManager:s}=t,r=i.getRegion("root");return function(...t){return()=>{for(let e of t)e()}}(s.addListener("layout:complete",()=>this.updateA11yText(a,e)),r.addListener("hover",e=>this.handleMouseMove(t,e)),r.addListener("leave",e=>this.handleMouseLeave(t,e)))}computeTextWrap(t,e){let{text:i,padding:a,wrapping:s}=this,r=Math.min(this.maxWidth??1/0,t)-2*a,n=this.maxHeight??e-2*a;if(!isFinite(r)&&!isFinite(n)){this.node.text=i;return}let o=sm.wrapText(i??"",{maxWidth:r,maxHeight:n,font:this,textWrap:s});this.node.text=o,this.truncated=o.includes(a1.EllipsisChar)}updateA11yText(t,e){if(this.enabled&&this.text){let i=am.toCanvas(this.node);if(i){let{id:a}=this;this.proxyText??(this.proxyText=t.createProxyElement({type:"text",id:a,parent:e})),this.proxyText.textContent=this.text,this.proxyText.updateBounds(i)}}else this.proxyText?.remove(),this.proxyText=void 0}handleMouseMove(t,e){if(void 0!==e&&this.enabled&&this.node.visible&&this.truncated){let{offsetX:i,offsetY:a}=e;t.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:a,lastPointerEvent:e,showArrow:!1},sL({content:this.text}))}}handleMouseLeave(t,e){t.tooltipManager.removeTooltip(this.id)}};sC.SMALL_PADDING=10,sC.LARGE_PADDING=20,o([eQ(e0),sd("node","visible")],sC.prototype,"enabled",2),o([eQ(e2,{optional:!0}),sd("node")],sC.prototype,"text",2),o([eQ(iN,{optional:!0}),sd("node")],sC.prototype,"textAlign",2),o([eQ(iI,{optional:!0}),sd("node")],sC.prototype,"fontStyle",2),o([eQ(iD,{optional:!0}),sd("node")],sC.prototype,"fontWeight",2),o([eQ(e9),sd("node")],sC.prototype,"fontSize",2),o([eQ(e2),sd("node")],sC.prototype,"fontFamily",2),o([eQ(ih,{optional:!0}),sd("node","fill")],sC.prototype,"color",2),o([eQ(e9,{optional:!0})],sC.prototype,"spacing",2),o([eQ(e9,{optional:!0})],sC.prototype,"maxWidth",2),o([eQ(e9,{optional:!0})],sC.prototype,"maxHeight",2),o([eQ(iS)],sC.prototype,"wrapping",2),o([eQ(e9)],sC.prototype,"padding",2),o([eQ(e2)],sC.prototype,"layoutStyle",2);var sT=class t extends ax{constructor(t){super(t),this.opts=t,this.lastBBox=void 0}static is(e){return e instanceof t}markDirty(t=1){super.markDirty(t,1)}preRender(){let t=super.preRender();return t.nonGroups>0&&(this.layer??(this.layer=this._layerManager?.addLayer({name:this.name,zIndex:this.zIndex,zIndexSubOrder:this.zIndexSubOrder,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()})),this.opts?.deriveZIndexFromChildren&&this.deriveZIndexFromChildren()),t}debugSkip(t){super.debugSkip(t);let{stats:e}=t;e&&(e.layersSkipped++,e.nodesSkipped+=an(this).count)}render(t){if(!this.layer)return super.render(t);let{opts:{name:e}={},_debug:i,clipRect:a}=this,{isDirty:s,isChildDirty:r,isChildLayerDirty:n}=this.isDirty(t),{stats:o}=t,{forceRender:l,clipBBox:h}=t,d=this.getBBox();if(this.lastBBox?.equals(d)||(l="dirtyTransform",this.lastBBox=d),!s&&!r&&!n&&!l){this.debugSkip(t),this.markClean({recursive:!1});return}"dirtyTransform"!==l&&(l=r||this.dirtyZIndex),l&&this.layer.clear(),this.dirtyZIndex&&this.sortChildren(ax.compareChildren);let u=this.sortedChildren(),c=t.ctx.getTransform(),{context:p}=this.layer;if(p.save(),h){let{width:a,height:s,x:r,y:n}=h;p.beginPath(),p.rect(r,n,a,s),p.clip(),i?.(()=>({name:e,clipBBox:h,renderCtx:t,group:this,ctxTransform:p.getTransform()}))}for(let e of(p.setTransform(c),this.clipRect&&(h=this.renderClip({...t,ctx:p})),this.renderChildren(u,{...t,ctx:p,forceRender:l,clipBBox:h}),super.render(t,!0),a&&p.restore(),this.virtualChildren()))e.markClean({recursive:"virtual"});o&&o.layersRendered++,p.restore(),p.verifyDepthZero?.(),e&&o&&i?.({name:e,renderCtx:t,result:"rendered",skipped:o.nodesSkipped,counts:an(this),group:this})}deriveZIndexFromChildren(){let t;for(let e of this.children())e.childNodeCounts.nonGroups&&(!t||0>ax.compareChildren(t,e))&&(t=e);this.zIndex=t?.zIndex??-1/0,this.zIndexSubOrder=t?.zIndexSubOrder}_setLayerManager(t){this.layer&&(this._layerManager?.removeLayer(this.layer),this.layer=void 0),super._setLayerManager(t)}getComputedOpacity(){let t=1;for(let e of this.traverseUp(!0))e instanceof ax&&(t*=e.opacity);return t}getVisibility(){for(let t of this.traverseUp(!0))if(!t.visible)return!1;return!0}onVisibleChange(){this.layer&&(this.layer.enabled=this.visible)}onZIndexChange(){super.onZIndexChange(),this.layer&&this._layerManager?.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder)}};sT.className="Layer";var sk=sT,sE=class extends ay(sk){},sO=class extends aX{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new tI(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){let{ctx:e,forceRender:i,stats:a}=t;if(0===this.dirty&&!i){a&&(a.nodesSkipped+=an(this).count);return}let{x1:s,y1:r,x2:n,y2:o}=this;s=this.align(s),r=this.align(r),n=this.align(n),o=this.align(o);let{fill:l,opacity:h,isRange:d}=this;if(d&&l){let{fillOpacity:t}=this;this.applyFill(e),e.globalAlpha=h*t,e.beginPath(),e.moveTo(s,r),e.lineTo(n,r),e.lineTo(n,o),e.lineTo(s,o),e.closePath(),e.fill()}let{stroke:u,strokeWidth:c,startLine:p,endLine:g}=this;if((p||g)&&u&&c){let{strokeOpacity:t,lineDash:i,lineDashOffset:a,lineCap:l,lineJoin:d}=this;e.strokeStyle=u,e.globalAlpha=h*t,e.lineWidth=c,i&&e.setLineDash(i),a&&(e.lineDashOffset=a),l&&(e.lineCap=l),d&&(e.lineJoin=d),e.beginPath(),p&&(e.moveTo(s,r),e.lineTo(n,r)),g&&(e.moveTo(n,o),e.lineTo(s,o)),e.stroke()}this.fillShadow?.markClean(),super.render(t)}};sO.className="Range",sO.defaultStyles={...aX.defaultStyles,strokeWidth:1},o([tS({redraw:2})],sO.prototype,"x1",2),o([tS({redraw:2})],sO.prototype,"y1",2),o([tS({redraw:2})],sO.prototype,"x2",2),o([tS({redraw:2})],sO.prototype,"y2",2),o([tS({redraw:2})],sO.prototype,"startLine",2),o([tS({redraw:2})],sO.prototype,"endLine",2),o([tS({redraw:2})],sO.prototype,"isRange",2);var sj=class extends eW{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return a1.toFontString(this)}};function sR(t){let{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,a=t.rotation?aw(aE(t.rotation)):0,s=!a&&e>=0&&e<=Math.PI?-1:1,r=!a&&i>=0&&i<=Math.PI?-1:1,n=0;return t.parallel?n=s*Math.PI/2:-1===r&&(n=Math.PI),{configuredRotation:a,defaultRotation:n,parallelFlipFlag:s,regularFlipFlag:r}}function sz(t,e,i,a,s){let r=e>0&&e<=Math.PI,n=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(a*(r||n?-1:1)==-1)return"end"}else if(a*s==-1)return"end";return"start"}o([eQ(e0)],sj.prototype,"enabled",2),o([eQ(ih,{optional:!0})],sj.prototype,"color",2),o([eQ(iI,{optional:!0})],sj.prototype,"fontStyle",2),o([eQ(iD,{optional:!0})],sj.prototype,"fontWeight",2),o([eQ(e9)],sj.prototype,"fontSize",2),o([eQ(e2)],sj.prototype,"fontFamily",2),o([eQ(e1,{optional:!0})],sj.prototype,"formatter",2);var sP=(t=>(t[t.SERIES_BACKGROUND=0]="SERIES_BACKGROUND",t[t.AXIS_GRID=1]="AXIS_GRID",t[t.AXIS=2]="AXIS",t[t.SERIES_CROSSLINE_RANGE=3]="SERIES_CROSSLINE_RANGE",t[t.SERIES_LAYER=4]="SERIES_LAYER",t[t.SERIES_HIGHLIGHT=5]="SERIES_HIGHLIGHT",t[t.AXIS_FOREGROUND=6]="AXIS_FOREGROUND",t[t.SERIES_CROSSHAIR=7]="SERIES_CROSSHAIR",t[t.CHART_OVERLAY=8]="CHART_OVERLAY",t[t.SERIES_CROSSLINE_LINE=9]="SERIES_CROSSLINE_LINE",t[t.SERIES_ANNOTATION=10]="SERIES_ANNOTATION",t[t.CHART_ANNOTATION=11]="CHART_ANNOTATION",t[t.CHART_ANNOTATION_FOCUSED=12]="CHART_ANNOTATION_FOCUSED",t[t.STATUS_BAR=13]="STATUS_BAR",t[t.SERIES_LABEL=14]="SERIES_LABEL",t[t.LEGEND=15]="LEGEND",t[t.NAVIGATOR=16]="NAVIGATOR",t[t.FOREGROUND=17]="FOREGROUND",t))(sP||{});function sB(t){return null!=t&&Object.hasOwn(t,"toString")&&tJ(t.toString())}function sG(t){return null!=t&&Object.hasOwn(t,"valueOf")&&t0(t.valueOf())}function sF(t){return t0(t)||tW(t)||sG(t)}function sU(t,e){return null!=t&&(!e||sF(t))}function sY(t){return sB(t)&&Object.hasOwn(t,"id")?t.id:t}var sZ=t=>"value"===t?iR((t,e)=>"line"===e.target.type,t=>"range"===t.target.type?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):iR((t,e)=>"range"===e.target.type,t=>"line"===t.target.type?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),s_=(t,e,i,a,s)=>{let r="line"===t&&void 0!==e,n="range"===t&&void 0!==i;if(!r&&!n)return!0;let[o,l]=i??[e,void 0],h=eN.is(a)||ai.is(a),d=sU(o,h)&&!isNaN(a.convert(o)),u=sU(l,h)&&!isNaN(a.convert(l));if(r&&d||n&&d&&u)return s?.()??!0;let c=["Expecting crossLine"];return n?(d||c.push(`range start ${iB(o)}`),u||c.push(`${d?"":"and "}range end ${iB(l)}`)):c.push(`value ${iB(o)}`),c.push("to match the axis scale domain."),y.warnOnce(c.join(" ")),!1},sV={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},sW={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function sH({yDirection:t,padding:e=0,position:i="top",bbox:a}){let{xTranslationDirection:s,yTranslationDirection:r}=(t?sV:sW)[i];return{xTranslation:s*(e+a.width/2),yTranslation:r*(e+a.height/2)}}function s$({yDirection:t,bbox:e,padding:i=0,position:a="top"}){let s={};return a.startsWith("inside")||("top"!==a||t?"bottom"!==a||t?"left"===a&&t?s.left=i+e.width:"right"===a&&t&&(s.right=i+e.width):s.bottom=i+e.height:s.top=i+e.height),s}var sQ=({direction:t,xEnd:e,yStart:i,yEnd:a})=>"y"===t?{x:e/2,y:i}:{x:e,y:isNaN(a)?i:(i+a)/2},sX=({direction:t,xStart:e,xEnd:i,yStart:a,yEnd:s})=>"y"===t?{x:e,y:isNaN(s)?a:(a+s)/2}:{x:i/2,y:a},sK=({direction:t,xEnd:e,yStart:i,yEnd:a})=>"y"===t?{x:e,y:isNaN(a)?i:(i+a)/2}:{x:e/2,y:isNaN(a)?i:a},sJ=({direction:t,xStart:e,xEnd:i,yStart:a,yEnd:s})=>"y"===t?{x:i/2,y:isNaN(s)?a:s}:{x:e,y:isNaN(s)?a:(a+s)/2},sq=({direction:t,xStart:e,xEnd:i,yStart:a})=>"y"===t?{x:e/2,y:a}:{x:i,y:a},s0=({direction:t,xStart:e,yStart:i,yEnd:a})=>"y"===t?{x:e,y:isNaN(a)?i:a}:{x:e,y:i},s1=({direction:t,xEnd:e,yStart:i,yEnd:a})=>"y"===t?{x:e,y:i}:{x:e,y:isNaN(a)?i:a},s2=({direction:t,xStart:e,xEnd:i,yStart:a,yEnd:s})=>"y"===t?{x:i,y:isNaN(s)?a:s}:{x:e,y:isNaN(s)?a:s},s4={top:{c:sQ},bottom:{c:sJ},left:{c:sX},right:{c:sK},topLeft:{c:sq},topRight:{c:s1},bottomLeft:{c:s0},bottomRight:{c:s2},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},insideLeft:{c:sX},insideRight:{c:sK},insideTop:{c:sQ},insideBottom:{c:sJ},insideTopLeft:{c:sq},insideBottomLeft:{c:s0},insideTopRight:{c:s1},insideBottomRight:{c:s2}},s3=iE(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),s5=class extends eW{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};o([eQ(e0,{optional:!0})],s5.prototype,"enabled",2),o([eQ(e2,{optional:!0})],s5.prototype,"text",2),o([eQ(iI,{optional:!0})],s5.prototype,"fontStyle",2),o([eQ(iD,{optional:!0})],s5.prototype,"fontWeight",2),o([eQ(e9)],s5.prototype,"fontSize",2),o([eQ(e2)],s5.prototype,"fontFamily",2),o([eQ(e4)],s5.prototype,"padding",2),o([eQ(ih,{optional:!0})],s5.prototype,"color",2),o([eQ(s3,{optional:!0})],s5.prototype,"position",2),o([eQ(e8,{optional:!0})],s5.prototype,"rotation",2),o([eQ(e0,{optional:!0})],s5.prototype,"parallel",2);var s9=class t extends eW{constructor(){super(),this.id=_(this),this.label=new s5,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new sk({name:this.id,zIndex:t.LINE_LAYER_ZINDEX}),this.labelGroup=new sk({name:this.id,zIndex:t.LABEL_LAYER_ZINDEX}),this.crossLineRange=new sO,this.crossLineLabel=new a9,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1,this.group.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}update(t){let{enabled:e,data:i,type:a,value:s,range:r,scale:n}=this;if(!a||!n||!e||!t||!s_(a,s,r,n)||0===i.length){this.group.visible=!1,this.labelGroup.visible=!1;return}this.group.visible=t,this.labelGroup.visible=t,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(t,e){if(!t)return;let{scale:i,gridLength:a,sideFlag:s,direction:r,label:{position:n="top"},clippedRange:o,strokeWidth:l=0}=this;if(this.data=[],!i)return;let h=i.bandwidth??0,d=i.step??0,u=(e?-1:1)*(i instanceof eV?(d-h)/2:0),[c,p]=[0,s*a],[g,y]=this.getRange(),m=void 0===y&&ai.is(i)?h/2+u:0,[f,x]=[Number(i.convert(g,{clampMode:"clamped"}))-u+m,i.convert(y,{clampMode:"clamped"})+h+u];f=tu(f,o),x=tu(x,o),[g,y]=[Number(i.convert(g))+m,i.convert(y)+h];let M=(g===f||y===x||f!==x)&&Math.abs(x-f)>0;if(M&&f>x&&([f,x]=[x,f],[g,y]=[y,g]),g-u>=f&&(g-=u),y+u<=x&&(y+=u),this.isRange=M,this.startLine=l>0&&g>=f&&g<=f+u,this.endLine=l>0&&y>=x-h-u&&y<=x,!M&&!this.startLine&&!this.endLine||(this.data=[f,x],!this.label.enabled))return;let{c:b=sQ}=s4[n]??{},{x:v,y:I}=b({direction:r,xStart:c,xEnd:p,yStart:f,yEnd:x});this.labelPoint={x:v,y:I}}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}updateRangeNode(){let{crossLineRange:t,sideFlag:e,gridLength:i,data:a,startLine:s,endLine:r,isRange:n,fill:o,fillOpacity:l,stroke:h,strokeWidth:d,lineDash:u}=this;t.x1=0,t.x2=e*i,t.y1=a[0],t.y2=a[1],t.startLine=s,t.endLine=r,t.isRange=n,t.fill=o,t.fillOpacity=l??1,t.stroke=h,t.strokeWidth=d??1,t.strokeOpacity=this.strokeOpacity??1,t.lineDash=u}updateLabel(){let{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){let{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:a,rotation:s,position:r="top",padding:n=0},direction:o,parallelFlipRotation:l,regularFlipRotation:h}=this;if(void 0===e||void 0===i)return;let{defaultRotation:d,configuredRotation:u}=sR({rotation:s,parallel:a,regularFlipRotation:h,parallelFlipRotation:l});t.rotation=d+u,t.textBaseline="middle",t.textAlign="center";let c=t.getBBox();if(!c)return;let{xTranslation:p,yTranslation:g}=sH({yDirection:"y"===o,padding:n,position:r,bbox:c});t.translationX=e+p,t.translationY=i+g}getZIndex(e=!1){return e?t.RANGE_LAYER_ZINDEX:t.LINE_LAYER_ZINDEX}getRange(){let{value:t,range:e,scale:i}=this,a=eN.is(i)||ai.is(i),s=e?.[0]??t,r=e?.[1];return a||void 0!==r||(r=s),a&&s===r&&(r=void 0),[s,r]}computeLabelBBox(){let{label:t}=this;if(!t.enabled)return;let e=new a9;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;let{labelPoint:{x:i,y:a}={},label:{parallel:s,rotation:r,position:n="top",padding:o=0},direction:l,parallelFlipRotation:h,regularFlipRotation:d}=this;if(void 0===i||void 0===a)return;let{configuredRotation:u}=sR({rotation:r,parallel:s,regularFlipRotation:d,parallelFlipRotation:h});e.rotation=u,e.textBaseline="middle",e.textAlign="center";let c=e.getBBox();if(!c)return;let{xTranslation:p,yTranslation:g}=sH({yDirection:"y"===l,padding:o,position:n,bbox:c});return e.x=i+p,e.y=a+g,e.getBBox()}calculatePadding(t){let{isRange:e,startLine:i,endLine:a,direction:s,label:{padding:r=0,position:n="top"}}=this;if(!e&&!i&&!a)return;let o=this.computeLabelBBox();if(o?.x==null||o?.y==null)return;let l=s$({yDirection:"y"===s,padding:r,position:n,bbox:o});t.left=Math.max(t.left??0,l.left??0),t.right=Math.max(t.right??0,l.right??0),t.top=Math.max(t.top??0,l.top??0),t.bottom=Math.max(t.bottom??0,l.bottom??0)}};s9.LINE_LAYER_ZINDEX=9,s9.RANGE_LAYER_ZINDEX=3,s9.LABEL_LAYER_ZINDEX=14,s9.className="CrossLine",o([eQ(e0,{optional:!0})],s9.prototype,"enabled",2),o([eQ(iE(["range","line"],"a crossLine type"),{optional:!0})],s9.prototype,"type",2),o([eQ(eX(sZ("range"),it.restrict({length:2})),{optional:!0})],s9.prototype,"range",2),o([eQ(sZ("value"),{optional:!0})],s9.prototype,"value",2),o([eQ(ih,{optional:!0})],s9.prototype,"fill",2),o([eQ(e6,{optional:!0})],s9.prototype,"fillOpacity",2),o([eQ(ih,{optional:!0})],s9.prototype,"stroke",2),o([eQ(e4,{optional:!0})],s9.prototype,"strokeWidth",2),o([eQ(e6,{optional:!0})],s9.prototype,"strokeOpacity",2),o([eQ(ib,{optional:!0})],s9.prototype,"lineDash",2),o([eQ(eJ)],s9.prototype,"label",2);var s6=["stroke","lineDash"],s8=ie(t=>tQ(t)&&Object.keys(t).every(t=>s6.includes(t)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),s7=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};function rt(t,e=[void 0]){return tB((i,a,s)=>e.includes(s)?t$(t)?t(s):t:s)}o([eQ(e0)],s7.prototype,"enabled",2),o([eQ(e9)],s7.prototype,"width",2),o([eQ(s8)],s7.prototype,"style",2);var re=iR(t=>t0(t)&&t>0||t instanceof m,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),ri=class extends eW{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};o([eQ(re,{optional:!0})],ri.prototype,"step",2),o([eQ(it,{optional:!0})],ri.prototype,"values",2),o([eQ(iO),rt(NaN)],ri.prototype,"minSpacing",2),o([eQ(ij),rt(NaN)],ri.prototype,"maxSpacing",2);var ra=class extends eW{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};o([eQ(e0)],ra.prototype,"enabled",2),o([eQ(iI,{optional:!0})],ra.prototype,"fontStyle",2),o([eQ(iD,{optional:!0})],ra.prototype,"fontWeight",2),o([eQ(e4.restrict({min:1}))],ra.prototype,"fontSize",2),o([eQ(e2)],ra.prototype,"fontFamily",2),o([eQ(e9)],ra.prototype,"padding",2),o([eQ(e7),rt(NaN)],ra.prototype,"minSpacing",2),o([eQ(ih,{optional:!0})],ra.prototype,"color",2),o([eQ(e8,{optional:!0})],ra.prototype,"rotation",2),o([eQ(e0)],ra.prototype,"avoidCollisions",2),o([eQ(e0)],ra.prototype,"mirrored",2),o([eQ(e0)],ra.prototype,"parallel",2),o([eQ(e1,{optional:!0})],ra.prototype,"formatter",2),o([eQ(e2,{optional:!0})],ra.prototype,"format",2);var rs=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};o([eQ(e0)],rs.prototype,"enabled",2),o([eQ(e9)],rs.prototype,"width",2),o([eQ(ih,{optional:!0})],rs.prototype,"stroke",2);var rr=class extends eW{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};o([eQ(e0)],rr.prototype,"enabled",2),o([eQ(e9)],rr.prototype,"width",2),o([eQ(e9)],rr.prototype,"size",2),o([eQ(ih,{optional:!0})],rr.prototype,"stroke",2);var rn=class extends eW{constructor(){super(...arguments),this.caption=new sC,this.enabled=!1,this.spacing=sC.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};function ro(t){let[e,i]=tc(t.range),a=Math.floor(e),s=Math.ceil(i);return{min:a,max:s,visible:a!==s}}o([eQ(e0)],rn.prototype,"enabled",2),o([eQ(e2,{optional:!0})],rn.prototype,"text",2),o([eQ(e9,{optional:!0})],rn.prototype,"spacing",2),o([eQ(iI,{optional:!0})],rn.prototype,"fontStyle",2),o([eQ(iD,{optional:!0})],rn.prototype,"fontWeight",2),o([eQ(e9)],rn.prototype,"fontSize",2),o([eQ(e2)],rn.prototype,"fontFamily",2),o([eQ(ih,{optional:!0})],rn.prototype,"color",2),o([eQ(iS)],rn.prototype,"wrapping",2),o([eQ(e1,{optional:!0})],rn.prototype,"formatter",2);var rl=2*Math.PI,rh=rl/2;function rd(t){let e=(e,i)=>{let[a=t.min,s=t.max]=tc(i??[]);return e<a||e>s};return{tick:{fromFn(t,i,a){let s=t.y1+t.translationY,r=t.opacity;return("added"===a||e(t.datum.translationY,t.datum.range))&&(s=i.translationY,r=0),{y:0,translationY:s,opacity:r,phase:eb[a]}},toFn(t,e,i){let a=e.translationY,s=1;return"removed"===i&&(s=0),{y:0,translationY:a,opacity:s,finish:{y:a,translationY:0}}},applyFn(t,i){t.setProperties(i),t.visible=!e(t.y)}},line:{fromFn:(t,e)=>({...t.previousDatum??e,phase:eb.updated}),toFn:(t,e)=>({...e})},label:{fromFn(t,i,a){let s=t.previousDatum??i,r=s.x,n=s.y,o=s.rotationCenterX,l=Math.round(t.translationY),h=s.rotation,d=t.opacity;return"removed"===a||e(s.y,s.range)?h=i.rotation:("added"===a||e(t.datum.y,t.datum.range))&&(l=Math.round(s.translationY),d=0,h=i.rotation),{x:r,y:n,rotationCenterX:o,translationY:l,rotation:h,opacity:d,phase:eb[a]}},toFn(t,e,i){let a=e.x,s=e.y,r=e.rotationCenterX,n=Math.round(e.translationY),o=0,l=1;if("added"===i)l=1,o=e.rotation;else if("removed"===i)l=0,o=e.rotation;else{var h,d;h=t.previousDatum?.rotation??e.rotation,o=Math.abs((d=e.rotation)-h)<rh?d:h>d?d+rl:d-rl}return{x:a,y:s,rotationCenterX:r,translationY:n,rotation:o,opacity:l,finish:{rotation:e.rotation}}}},group:{fromFn(t,e){let{rotation:i,translationX:a,translationY:s}=t;return{rotation:i,translationX:a,translationY:s,phase:eb.updated}},toFn(t,e){let{rotation:i,translationX:a,translationY:s}=e;return{rotation:i,translationX:a,translationY:s}}}}}function ru(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function rc(t){let{visible:e,min:i,max:a}=t;return(t,s)=>{let r=s.translationY;return{y:r,translationY:0,opacity:1,visible:e&&r>=i&&r<=a}}}function rp(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function rg(){return(t,e)=>({...e})}var ry=class extends ay(aK){},rm=class t{constructor(e,i){let a;this.moduleCtx=e,this.scale=i,this.id=_(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new ri,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new aI({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new ry({name:`${this.id}-Axis-line`})),this.tickLineGroup=this.axisGroup.appendChild(new ax({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new ax({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new aI({name:`${this.id}-CrossLines`}),this.labelGroup=new ax({name:`${this.id}-Labels`,zIndex:10}),this.gridGroup=new aI({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new ax({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=aL.select(this.tickLineGroup,ry,!1),this.tickLabelGroupSelection=aL.select(this.tickLabelGroup,a9,!1),this.gridLineGroupSelection=aL.select(this.gridLineGroup,ry,!1),this._crossLines=[],this.line=new rs,this.tick=new rr,this.gridLine=new s7,this.label=this.createLabel(),this.defaultTickMinSpacing=t.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new rn,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.moduleMap=new iF,this.range=this.scale.range.slice(),this.crossLines.forEach(t=>this.initCrossLine(t)),this.axisGroup.appendChild(this.title.caption.node),this.animationManager=e.animationManager,this.animationState=new sy("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"),e.layoutManager.addListener("layout:complete",t=>{null!=a&&null!=se(t.chart,a)&&this.animationState.transition("resize"),a={...t.chart}}))}get type(){return this.constructor.type??""}set crossLines(t){let{CrossLineConstructor:e}=this.constructor;this._crossLines.forEach(t=>this.detachCrossLine(t)),this._crossLines=t.map(t=>{let i=new e;return i.set(t),i}),this._crossLines.forEach(t=>{this.attachCrossLine(t),this.initCrossLine(t)})}get crossLines(){return this._crossLines}resetAnimation(t){"initial"===t&&this.animationState.transition("reset")}attachCrossLine(t){this.crossLineGroup.appendChild(t.group),this.crossLineGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group),this.crossLineGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}updateRange(){let{range:t,visibleRange:e,scale:i}=this,a=(t[1]-t[0])/(e[1]-e[0]),s=a*e[0],r=t[0]-s;i.setVisibleRange?.(e),i.range=[r,r+a],this.crossLines.forEach(e=>{e.clippedRange=[t[0],t[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup),t.appendChild(this.labelGroup)}attachLabel(t){this.labelGroup.append(t)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup),t.removeChild(this.labelGroup)}inRange(t,e=0){let[i,a]=tc(this.range);return t>=i-e&&t<=a+e}onFormatChange(t,e,i,a){let{scale:s}=this,r=s instanceof i7,n=t=>r?String:i=>"number"==typeof i?i.toFixed(e+t):String(i);if(a&&s&&s.tickFormat)try{let e=s.tickFormat({ticks:t,specifier:a});this.labelFormatter=e,this.datumFormatter=e}catch(t){this.labelFormatter=n(0),this.datumFormatter=n(1),y.warnOnce(`the axis label format string ${a} is invalid. No formatting will be applied`)}else this.labelFormatter=n(0),this.datumFormatter=n(1)}onGridLengthChange(t,e){e^t&&this.onGridVisibilityChange(),this.crossLines.forEach(t=>this.initCrossLine(t))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new ra}update(t=!0){if(!this.tickGenerationResult)return;let{rotation:e,parallelFlipRotation:i,regularFlipRotation:a}=this.calculateRotations(),s=this.label.getSideFlag();this.updatePosition();let r=this.getAxisLineCoordinates(),{tickData:n,combinedRotation:o,textBaseline:l,textAlign:h,primaryTickCount:d}=this.tickGenerationResult,u=this.tickLabelGroupSelection.nodes().map(t=>t.datum.tickId);if(this.updateSelections(r,n.ticks,{combinedRotation:o,textAlign:h,textBaseline:l,range:this.scale.range}),!t||this.animationManager.isSkipped())this.resetSelectionNodes();else{let t=this.calculateUpdateDiff(u,n);this.animationState.transition("update",t)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(s),this.updateTickLines(),this.updateTitle({anyTickVisible:n.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:a}),this.updateLayoutState(n.fractionDigits),d}getAxisLineCoordinates(){let[t,e]=tc(this.range);return{x:0,y1:t,y2:e}}getTickLineCoordinates(t){let e=this.label.getSideFlag()*this.getTickSize(),i=Math.min(0,e),a=i+Math.abs(e);return{x1:i,x2:a,y:t.translationY}}getTickLabelProps(t,e){let{label:i}=this,{combinedRotation:a,textBaseline:s,textAlign:r,range:n}=e,o=t.tickLabel,l=i.getSideFlag()*(this.getTickSize()+i.padding+this.seriesAreaPadding);return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:a,rotationCenterX:l,text:o,textAlign:r,textBaseline:s,visible:""!==o&&null!=o,x:l,y:0,range:n}}getTickSize(){return this.tick.enabled?this.tick.size:6}setTitleProps(t,e){let{title:i}=this;if(!i.enabled){t.enabled=!1,t.node.visible=!1;return}t.color=i.color,t.fontFamily=i.fontFamily,t.fontSize=i.fontSize,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.enabled=i.enabled,t.wrapping=i.wrapping;let a=t.node,s=(i.spacing??0)+e.spacing,r=this.label.getSideFlag(),n=aw(this.rotation),o=-1===r&&n>Math.PI&&n<2*Math.PI?-1:1,l=o*r*Math.PI/2,{range:h}=this,d=Math.floor(o*r*(h[0]+h[1])/2),u=-1===r?Math.floor(-(o*s)):Math.floor(-s),{callbackCache:c}=this.moduleCtx,{formatter:p=t=>t.defaultValue}=i,g=c.call(p,this.getTitleFormatterParams());t.text=g,a.setProperties({visible:!0,text:g,textBaseline:1===o?"bottom":"top",x:d,y:u,rotation:l})}calculateLayout(t,e){let{rotation:i,parallelFlipRotation:a,regularFlipRotation:s}=this.calculateRotations(),r=this.label.getSideFlag(),n=r*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(t),this.tickGenerationResult=this.generateTicks({primaryTickCount:e,parallelFlipRotation:a,regularFlipRotation:s,labelX:n,sideFlag:r});let{tickData:o,combinedRotation:l,textBaseline:h,textAlign:d,...u}=this.tickGenerationResult;this.updateLayoutState(o.fractionDigits);let c=[],{x:p,y1:g,y2:y}=this.getAxisLineCoordinates(),m=new tI(p+Math.min(r*this.seriesAreaPadding,0),g,this.seriesAreaPadding,y-g);if(c.push(m),this.tick.enabled&&o.ticks.forEach(t=>{let{x1:e,x2:i,y:a}=this.getTickLineCoordinates(t),s=new tI(e,a,i-e,0);c.push(s)}),this.label.enabled){let t=new a9;o.ticks.forEach(e=>{let i=this.getTickLabelProps(e,{combinedRotation:l,textAlign:d,textBaseline:h,range:this.scale.range});if(!i.visible)return;t.setProperties({...i,translationY:Math.round(e.translationY)});let a=t.getBBox();a&&c.push(a)})}if(this.title?.enabled){let t=new sC,e=tI.merge(c).width;this.setTitleProps(t,{spacing:e});let i=t.node.getBBox();i&&c.push(i)}let f=tI.merge(c),x=this.getTransformBox(f),M=this.isAnySeriesActive();return this.crossLines.forEach(t=>{var e;t.sideFlag=-r,t.direction=i===-Math.PI/2?"x":"y",t instanceof s9&&((e=t.label).parallel??(e.parallel=this.label.parallel)),t.parallelFlipRotation=a,t.regularFlipRotation=s,t.calculateLayout?.(M,this.reverse)}),{primaryTickCount:u.primaryTickCount,bbox:x}}updateLayoutState(t){this.layout.label={fractionDigits:t,padding:this.label.padding,format:this.label.format}}getTransformBox(t){let e=new ah,{rotation:i,translationX:a,translationY:s}=this.getAxisTransform();return ah.updateTransformMatrix(e,1,1,i,a,s),e.transformBBox(t)}setDomain(t){this.dataDomain=this.normaliseDataDomain(t),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(t){t?this.setDomain(t):this.calculateDomain(),this.updateRange(),this.scale.interval=this.interval.step,eN.is(this.scale)&&(this.scale.nice=this.nice,this.scale.update())}calculateRotations(){let t=aE(this.rotation),e=aw(t),i=aw(t-Math.PI/2);return{rotation:t,parallelFlipRotation:e,regularFlipRotation:i}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:a,sideFlag:s}){var r;let{scale:n,interval:{minSpacing:o,maxSpacing:l},label:{parallel:h,rotation:d,fontFamily:u,fontSize:c,fontStyle:p,fontWeight:g}}=this,y=void 0!==t,{defaultRotation:m,configuredRotation:f,parallelFlipFlag:x,regularFlipFlag:M}=sR({rotation:d,parallel:h,regularFlipRotation:i,parallelFlipRotation:e}),b=f+m,v=new ah,{maxTickCount:I}=this.estimateTickCount({minSpacing:o,maxSpacing:l}),D=!(eN.is(n)||ai.is(n))||isNaN(I)?10:I,S=sz(h,f,0,s,M),N=h&&!f?s*x==-1?"hanging":"bottom":"middle",L=a1.toFontString({fontFamily:u,fontSize:c,fontStyle:p,fontWeight:g}),A=aq.getMeasurer({font:L}),w={fontFamily:u,fontSize:c,fontStyle:p,fontWeight:g,textBaseline:N,textAlign:S},C={rawTicks:[],fractionDigits:0,ticks:[],labelCount:0},T=0,k=0,E=!0,O=[],j=!1;for(;E&&T<=D&&!j;)for(let e of(k=0,S=sz(h,f,0,s,M),this.getTickStrategies({secondaryAxis:y,index:T}))){({tickData:C,index:T,autoRotation:k,terminate:j}=e({index:T,tickData:C,textProps:w,labelOverlap:E,terminate:j,primaryTickCount:t}));let i=0!==f||0!==k,n=b+k,o=isNaN(r=this.label.minSpacing)?i?0:10:r;ah.updateTransformMatrix(v,1,1,n,0,0),S=sz(h,f,k,s,M),O=this.createLabelData(C.ticks,a,v,A),E=!!this.label.avoidCollisions&&function(t,e=0){let i=[];for(let a=0;a<t.length;a++){let s=t[a],{point:{x:r,y:n},label:{text:o}}=s,{width:l,height:h}=s.label;if(l+=e,h+=e,i.some(t=>a6(t,r,n,l,h)))return!0;i.push({index:a,text:o,x:r,y:n,width:l,height:h,datum:s})}return!1}(O,o)}let R=m+f+k;return!y&&C.rawTicks.length>0&&(t=C.rawTicks.length),{tickData:C,primaryTickCount:t,combinedRotation:R,textBaseline:N,textAlign:S,labelData:O}}getTickStrategies({index:t,secondaryAxis:e}){let i;let{scale:a,label:s}=this,{minSpacing:r}=this.interval,n=eN.is(a)||ai.is(a),o=s.enabled&&s.avoidCollisions,l=!0===s.autoRotate&&void 0===s.rotation,h=[];return i=this.interval.values?3:e?1:!n&&0!==t&&o?2:0,h.push(({index:t,tickData:e,primaryTickCount:a,terminate:s})=>this.createTickData(i,t,e,s,a)),n||isNaN(r)||h.push(({index:t,tickData:e,primaryTickCount:i,terminate:a})=>this.createTickData(2,t,e,a,i)),o&&l&&h.push(({index:t,tickData:e,labelOverlap:i,terminate:a})=>({index:t,tickData:e,autoRotation:this.getAutoRotation(i),terminate:a})),h}createTickData(t,e,i,a,s){let{scale:r}=this,{step:n,values:o,minSpacing:l,maxSpacing:h}=this.interval,{maxTickCount:d,minTickCount:u,defaultTickCount:c}=this.estimateTickCount({minSpacing:l,maxSpacing:h}),p=eN.is(r)||ai.is(r),g=!p||isNaN(d)?10:d,y=p?Math.max(c-e,u):d,m=void 0===n&&void 0===o&&y>u&&(p||2===t),f=!0;for(;f&&e<=g;){let a=i.rawTicks;y=p?Math.max(c-e,u):d;let{rawTicks:r,fractionDigits:n,ticks:o,labelCount:l}=this.getTicks({tickGenerationType:t,previousTicks:a,tickCount:y,minTickCount:u,maxTickCount:d,primaryTickCount:s});i.rawTicks=r,i.fractionDigits=n,i.ticks=o,i.labelCount=l,f=!!m&&a7(r,a),e++}return a||(a=void 0!==n||void 0!==o),{tickData:i,index:e,autoRotation:0,terminate:a}}createLabelData(t,e,i,a){let s=[];for(let{tickLabel:r,translationY:n}of t){if(!r)continue;let{width:t,height:o}=a.measureLines(r),l=function(t,e,i){let{x:a,y:s,width:r,height:n}=e,o=new tI(a,s,0,0);i.transformBBox(o,e);let{x:l,y:h}=e;return{point:{x:l,y:h},label:{text:t,width:r,height:n}}}(r,new tI(e,n,t,o),i);s.push(l)}return s}getAutoRotation(t){return t?aw(aE(this.label.autoRotateAngle??0)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:a,maxTickCount:s,primaryTickCount:r}){let n;let{range:o,scale:l,visibleRange:h}=this;switch(t){case 3:if(n=this.interval.values,eN.is(l)){let[t,e]=tc(l.getDomain().map(Number));n=n.filter(i=>i>=t&&i<=e).sort((t,e)=>t-e)}break;case 1:n=eN.is(l)?this.updateSecondaryAxisTicks(r):this.createTicks(i,a,s);break;case 2:n=this.filterTicks(e,i);break;default:n=this.createTicks(i,a,s)}let d=n.reduce((t,e)=>Math.max(t,"number"==typeof e?tM(e):0),0),u=(l.bandwidth??0)/2,c=[],p=0,g=new Map,y=Math.max(0,Math.floor(h[0]*n.length)),m=Math.min(n.length,Math.ceil(h[1]*n.length)),f=n.slice(y,m);this.onFormatChange(f,d,n,this.label.format);for(let t=0;t<f.length;t++){let e=f[t],i=l.convert(e)+u;if(o.length>0&&!this.inRange(i,.001))continue;let a=this.formatTick(e,d,y+t),s=a;if(g.has(s)){let t=g.get(s);g.set(s,t+1),s=`${s}_${t}`}else g.set(s,1);c.push({tick:e,tickId:s,tickLabel:a,translationY:Math.floor(i)}),""!==a&&null!=a&&p++}return{rawTicks:n,fractionDigits:d,ticks:c,labelCount:p}}filterTicks(t,e){let{minSpacing:i,maxSpacing:a}=this.interval,s=isNaN(i)&&isNaN(a)?2:Math.ceil(t.length/e);return t.filter((t,e)=>e%s==0)}createTicks(t,e,i){let{scale:a}=this;return t&&(eN.is(a)||ai.is(a))&&(a.tickCount=t,a.minTickCount=e??0,a.maxTickCount=i??1/0),a.ticks?.()??[]}estimateTickCount({minSpacing:t,maxSpacing:e}){if(!this.label.avoidCollisions)return{minTickCount:eN.defaultMaxTickCount,maxTickCount:eN.defaultMaxTickCount,defaultTickCount:eN.defaultMaxTickCount};let i=this.calculateRangeWithBleed(),a=Math.max(this.defaultTickMinSpacing,i/eN.defaultMaxTickCount),s=!isNaN(e);isNaN(t)&&(t=a),isNaN(e)&&(e=i),t>e&&(t===a?t=e:e=t),s&&(s=2<a);let r=td(1,Math.floor(i/t),s?Math.min(Math.floor(i/2),100):100),n=Math.min(r,Math.ceil(i/e)),o=td(n,eN.defaultTickCount,r);return{minTickCount:n,maxTickCount:r,defaultTickCount:o}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i}){let a=this.label.getSideFlag(),s=this.isAnySeriesActive();this.crossLines.forEach(r=>{var n;r.sideFlag=-a,r.direction=t===-Math.PI/2?"x":"y",r instanceof s9&&((n=r.label).parallel??(n.parallel=this.label.parallel)),r.parallelFlipRotation=e,r.regularFlipRotation=i,r.update(s)})}updateTickLines(){let{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each(e=>{e.strokeWidth=t.width,e.stroke=t.stroke,e.x1=i*this.getTickSize(),e.x2=0})}calculateAvailableRange(){return tp(this.range)}calculateRangeWithBleed(){let t=1/tp(this.visibleRange);return tm(this.calculateAvailableRange()*t,2)}calculateDomain(){let t=this.boundSeries.filter(t=>this.includeInvisibleDomains||t.isEnabled()).flatMap(t=>t.getDomain(this.direction));this.setDomain(t)}getAxisTransform(){return{rotation:aE(this.rotation),translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){let{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:a}=this,{rotation:s}=this.calculateRotations(),r=Math.floor(a.x),n=Math.floor(a.y);t.setProperties({rotation:s,translationX:r,translationY:n}),i.setProperties({rotation:s,translationX:r,translationY:n}),e.datum=this.getAxisTransform()}updateSecondaryAxisTicks(t){throw Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){let a=t=>t.tickId,s=e.map(t=>this.getTickLabelProps(t,i));this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],void 0,a),this.tickLineGroupSelection.update(e,void 0,a),this.tickLabelGroupSelection.update(s,void 0,a)}updateAxisLine(){let{enabled:t,stroke:e,width:i}=this.line;this.lineNode.setProperties({stroke:e,strokeWidth:t?i:0})}updateGridLines(t){let{gridLine:{style:e,width:i},gridPadding:a,gridLength:s}=this;0!==s&&0!==e.length&&this.gridLineGroupSelection.each((r,n,o)=>{let{stroke:l,lineDash:h}=e[o%e.length];r.setProperties({x1:a,x2:-t*s+a,stroke:l,strokeWidth:i,lineDash:h})})}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((t,e)=>{t.setProperties(e,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}updateTitle(t){let{title:e,lineNode:i,tickLineGroup:a,tickLabelGroup:s}=this,r=0;e.enabled&&t.anyTickVisible&&(r+=ax.computeChildrenBBox([a,s,i]).width+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)),this.setTitleProps(e.caption,{spacing:r})}formatTick(t,e,i){return String(this.getFormatter(i,!0)(t,e))}formatDatum(t){return String(this.getFormatter()(t))}getFormatter(t=0,e){let{label:i,labelFormatter:a,datumFormatter:s,moduleCtx:{callbackCache:r}}=this;return i.formatter?(e,a)=>r.call(i.formatter,{value:e,index:t,fractionDigits:a})??e:!e&&s?t=>r.call(s,t)??String(t):a?t=>r.call(a,t)??String(t):t=>String(t)}getBBox(){return this.axisGroup.getBBox()}getRegionNode(){}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,e,i,a){this.tickLineGroup.setClipRect(new tI(t,e,i,a))}clipGrid(t,e,i,a){this.gridGroup.setClipRect(new tI(t,e,i,a))}getTitleFormatterParams(){let{direction:t}=this,e=[];for(let i of this.boundSeries){let a=i.getKeys(t),s=i.getNames(t);for(let t=0;t<a.length;t++)e.push({key:a[t],name:s[t]})}return{direction:t,boundSeries:e,defaultValue:this.title?.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){let{scale:t}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:eN.is(t)||ai.is(t),keys:()=>this.boundSeries.flatMap(t=>t.getKeys(this.direction)),seriesKeyProperties:()=>this.boundSeries.reduce((t,e)=>(e.getKeyProperties(this.direction).forEach(e=>{0>t.indexOf(e)&&t.push(e)}),t),[]),scaleValueFormatter:t=>this.getScaleValueFormatter(t),scaleBandwidth:()=>t.bandwidth??0,scaleDomain:()=>t.getDomain?.(),scaleConvert:e=>t.convert(e),scaleInvert:ai.is(t)?e=>t.invertNearest?.(e):e=>t.invert?.(e),scaleInvertNearest:e=>t.invertNearest?.(e),scaleStep:()=>t.step??0,attachLabel:t=>this.attachLabel(t),inRange:(t,e)=>this.inRange(t,e)}}getScaleValueFormatter(t){let{scale:e}=this;if(t&&e&&e.tickFormat)try{return e.tickFormat({specifier:t})}catch(e){y.warnOnce(`the format string ${t} is invalid, ignoring.`)}return this.getFormatter()}animateReadyUpdate(t){let{animationManager:e}=this.moduleCtx,i=rd(ro(this));ev(this.id,"axis-group",e,[this.axisGroup],i.group),ev(this.id,"line",e,[this.lineNode],i.line),ev(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,(t,e)=>e.tickId,t),ev(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,(t,e)=>e.tickId,t)}resetSelectionNodes(){let{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:a}=this,s=ro(this);iY([this.axisGroup],ru()),iY([t,e],rc(s)),iY([i],rp()),iY([a],rg())}calculateUpdateDiff(t,e){let i=new Set,a=new Set,s={},r=Math.max(t.length,e.ticks.length);for(let n=0;n<r;n++){let r=e.ticks[n],o=t[n],l=r?.tickId;s[l??o]=r,o!==l&&(a.has(l)?a.delete(l):l&&i.add(l),i.has(o)?i.delete(o):o&&a.add(o))}return{changed:i.size>0||a.size>0,added:i,removed:a}}isReversed(){return this.reverse}};rm.defaultTickMinSpacing=50,rm.CrossLineConstructor=s9,o([eQ(e0)],rm.prototype,"nice",2),o([eQ(e0)],rm.prototype,"reverse",2),o([eQ(ip)],rm.prototype,"keys",2),o([eQ(eJ)],rm.prototype,"interval",2),o([eQ(eJ)],rm.prototype,"title",2),o([sc((t,e,i)=>t.onGridLengthChange(e,i))],rm.prototype,"gridLength",2);var rf=rm,rx=class extends ra{constructor(){super(...arguments),this.autoRotateAngle=335}};o([eQ(e0,{optional:!0})],rx.prototype,"autoRotate",2),o([eQ(e8)],rx.prototype,"autoRotateAngle",2);var rM=class t extends rf{constructor(){super(...arguments),this.thickness=0}static is(e){return e instanceof t}get direction(){return"top"===this.position||"bottom"===this.position?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){return this.updateDirection(),super.update(t)}calculateLayout(t,e){return this.updateDirection(),super.calculateLayout(t,e)}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new rx}getRegionNode(){return this.axisGroup}};o([eQ(e9)],rM.prototype,"thickness",2),o([eQ(iv)],rM.prototype,"position",2);var rb=rM,rv=class t extends rb{constructor(t,e=new eV){super(t,e),this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}static is(e){return e instanceof t}normaliseDataDomain(t){let e=[],i=new Set;for(let a of t){let t=a instanceof Date?a.getTime():a;i.has(t)||(i.add(t),e.push(a))}return{domain:e,clipped:!1}}updateScale(t){let{paddingInner:e,paddingOuter:i}=this;if(!t0(e)||!t0(i)){let t=this.reduceBandScalePadding();e??(e=t.inner),i??(i=t.outer)}this.scale.paddingInner=e??0,this.scale.paddingOuter=i??0,super.updateScale(t)}reduceBandScalePadding(){return this.boundSeries.reduce((t,e)=>{let i=e.getBandScalePadding?.();return i&&(t.inner>i.inner&&(t.inner=i.inner),t.outer<i.outer&&(t.outer=i.outer)),t},{inner:1/0,outer:-1/0})}};rv.className="CategoryAxis",rv.type="category",o([eQ(e6)],rv.prototype,"groupPaddingInner",2),o([eQ(e6,{optional:!0})],rv.prototype,"paddingInner",2),o([eQ(e6,{optional:!0})],rv.prototype,"paddingOuter",2);var rI=class{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}},rD=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){let{x:i,y:a}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),a>this.bottom&&(this.bottom=a),a<this.top&&(this.top=a)}},rS=class{constructor(){this.dimensions=new rD,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,t=>({x:t.x,y:t.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,a=0,s=!1){let r=this.leafCount-1,n=this.depth,o=this.dimensions,l=1,h=1;if(t>0&&r){let e=(o.right-o.left)/r;l=t/r/e,s&&(l=-l)}if(e>0&&n){let t=(o.bottom-o.top)/n;h=e/n/t}let d=new rD;this.nodes.forEach(t=>{t.screenX=t.x*l,t.screenY=t.y*h,d.update(t,t=>({x:t.screenX,y:t.screenY}))});let u=-d.left,c=-d.top;this.nodes.forEach(t=>{t.screenX+=u+i,t.screenY+=c+a})}},rN=class extends ra{constructor(){super(...arguments),this.grid=!1}};o([eQ(e0)],rN.prototype,"grid",2);var rL=class extends rb{constructor(t){let e=new eV;e.paddingOuter=.1,e.paddingInner=2*e.paddingOuter,super(t,e),this.tickScale=new eV,this.line=new rs,this.label=new rN,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;let{tickLineGroup:i,tickLabelGroup:a,gridLineGroup:s,tickScale:r}=this;r.paddingInner=1,r.paddingOuter=0,this.gridLineSelection=aL.select(s,aK),this.axisLineSelection=aL.select(i,aK),this.separatorSelection=aL.select(i,aK),this.labelSelection=aL.select(a,a9),this.lineNode.visible=!1}updateRange(){let{range:t,visibleRange:e,scale:i}=this,a=(t[1]-t[0])/(e[1]-e[0]),s=a*e[0],r=t[0]-s;this.tickScale.range=i.range=[r,r+a],this.resizeTickTree()}resizeTickTree(){let t=this.scale,e=t.domain.length?[t.convert(t.domain[0]),t.convert(t.domain[t.domain.length-1])]:t.range,i=this.tickTreeLayout,a=this.lineHeight;i&&i.resize(Math.abs(e[1]-e[0]),i.depth*a,(Math.min(e[0],e[1])||0)+(t.bandwidth??0)/2,-i.depth*a,e[1]-e[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}calculateDomain(){let{direction:t}=this,e=null,i=this.boundSeries.filter(t=>t.visible).flatMap(i=>{if("y"===t||e)return i.getDomain(t);if(null===e){let a=i.getDomain(t);return e=tq(a[0]),a}return[]});this.setDomain(eL(i)??eT(i));let{domain:a}=this.dataDomain;this.tickTreeLayout=function(t){let e=new rS;return function t(e,i){let a=e.children;if(a.length){let s=a[0];a.forEach(e=>{t(e,i),s=function(t,e,i){let a=t.getLeftSibling();if(a){let n=t,o=t,l=a,h=o.getLeftmostSibling(),d=o.mod,u=n.mod,c=l.mod,p=h.mod;for(;l.nextRight()&&o.nextLeft();){l=l.nextRight(),o=o.nextLeft(),h=h.nextLeft(),(n=n.nextRight()).ancestor=t;let a=l.prelim+c-(o.prelim+d)+i;if(a>0){var s,r;(function(t,e,i){let a=i/(e.number-t.number);e.change-=a,e.shift+=i,t.change+=a,e.prelim+=i,e.mod+=i})((s=l,r=e,t.getSiblings().indexOf(s.ancestor)>=0?s.ancestor:r),t,a),d+=a,u+=a}c+=l.mod,d+=o.mod,p+=h.mod,u+=n.mod}l.nextRight()&&!n.nextRight()?(n.thread=l.nextRight(),n.mod+=c-u):(o.nextLeft()&&!h.nextLeft()&&(h.thread=o.nextLeft(),h.mod+=d-p),e=t)}return e}(e,s,i)}),function(t){let e=t.children;if(e){let t=0,i=0;for(let a=e.length-1;a>=0;a--){let s=e[a];s.prelim+=t,s.mod+=t,i+=s.change,t+=s.shift+i}}}(e);let r=(a[0].prelim+a.at(-1).prelim)/2,n=e.getLeftSibling();n?(e.prelim=n.prelim+i,e.mod=e.prelim-r):e.prelim=r}else{let t=e.getLeftSibling();e.prelim=t?t.prelim+i:0}}(t,1),function t(e,i,a){e.x=e.prelim+i,e.y=e.depth,a.update(e),e.children.forEach(s=>t(s,i+e.mod,a))}(t,-t.prelim,e),function t(e){let i=e.children,a=0;i.forEach(e=>{t(e),e.children.length?a+=e.leafCount:a++}),e.leafCount=a,i.length?(e.subtreeLeft=i[0].subtreeLeft,e.subtreeRight=i[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}(function(t,e=!0){let i=new rI,a=0;return e&&t.forEach(t=>a=Math.max(a,t.labels.length)),t.forEach(t=>{if(e)for(;t.labels.length<a;)t.labels.unshift("");(function(t,e){let i=e.labels.slice().reverse(),a=i.length-1;i.forEach((e,i)=>{let s=t.children,r=s.find(t=>t.label===e),n=i!==a;if(r&&n)t=r;else{let i=new rI(e,t);i.number=s.length,s.push(i),n&&(t=i)}})})(i,t)}),i}(a)),this.tickScale.domain=a.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){this.title.caption.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;let{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each((t,e)=>{t.setProperties(e)})}updateSeparators(){if(!this.computedLayout)return;let{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each((t,i)=>{t.x1=i.x1,t.x2=i.x2,t.y1=i.y,t.y2=i.y,t.visible=this.tick.enabled&&i.y>=e[0]-1e-7&&i.y<=e[1]+1e-7,t.stroke=this.tick.stroke,t.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;let{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each((t,e)=>{t.setProperties(e),t.stroke=this.line.stroke,t.strokeWidth=this.line.width})}updateCategoryGridLines(){let{gridLength:t,gridLine:e,label:i,range:a,tickScale:s}=this,r=s.ticks(),n=i.getSideFlag(),o=this.gridLineSelection.update(t?r:[]);if(t){let{width:i,style:r}=e,l=r.length;o.each((o,h,d)=>{let u=Math.round(s.convert(h)),{stroke:c,lineDash:p}=r[d%l];o.visible=e.enabled&&u>=a[0]&&u<=a[1],o.x1=0,o.x2=-n*t,o.y1=u,o.y2=u,o.stroke=c,o.strokeWidth=i,o.lineDash=p})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();let{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:a},range:s,title:r,title:{formatter:n=t=>t.defaultValue}={}}=this,o=t.range[0],l=t.range[1],h=Math.abs(l-o)/t.domain.length||0,d=Math.ceil(e.fontSize/h),u=aE(this.rotation),c=1e-8>Math.abs(Math.cos(u)),p=e.getSideFlag(),g=this.lineHeight,y=this.tickTreeLayout,m=t.ticks(),f=y?y.nodes:[],x=!!y&&y.depth>1,M=r?.enabled&&m.length>0,{defaultRotation:b,configuredRotation:v,parallelFlipFlag:I}=sR({rotation:e.rotation,parallel:i,regularFlipRotation:aw(u-Math.PI/2),parallelFlipRotation:aw(u)}),D=[],S=t=>({fill:t.fill,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,text:t.text,textAlign:t.textAlign,textBaseline:t.textBaseline,translationX:t.translationX,translationY:t.translationY,visible:t.visible,x:t.x,y:t.y}),N=new Map,L=0,A=new a9,w=(t,i)=>{if(0===i){if(M){let e=a.call(n,this.getTitleFormatterParams());return A.setProperties({text:e,fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,textAlign:"center",textBaseline:"hanging",translationX:t.screenY-.25*r.fontSize,translationY:t.screenX}),!0}return!1}return A.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===I?"bottom":"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX}),i%d==0&&!(t.screenX<s[0])&&!(t.screenX>s[1])&&(e.formatter?A.text=a.call(e.formatter,{value:String(t.label),index:i})??String(t.label):A.text=String(t.label),!0)};f.forEach((t,e)=>{if(!w(t,e))return;let i=A.getBBox();i&&(N.set(e,i),!t.children.length&&i.width>L&&(L=i.width))});let C=p*e.padding,T=this.label.grid,k=[];f.forEach((t,e)=>{let i;let a=!t.children.length,s=w(t,e);if(A.x=C,A.y=0===e&&M?r.spacing??0:0,A.rotationCenterX=C,a)A.rotation=v,A.textAlign="end",A.textBaseline="middle";else{let i=t.leafCount*h,a=N.get(e);A.translationX-=L-g+this.label.padding,a&&a.width>i?(s=!1,N.delete(e)):A.rotation=c?b:-Math.PI/2}if(t.parent&&x){let e=a?t.screenX-h/2:t.screenX-t.leafCount*h/2;if(a)(t.number!==t.children.length-1||T)&&k.push({y:e,x1:0,x2:-L-2*this.label.padding});else{let i=-L-2*this.label.padding+t.screenY;k.push({y:e,x1:i+g,x2:i})}}if(s){let t=am.toCanvas(A);t&&N.set(e,t),i={...S(A),visible:s}}else N.delete(e),i={visible:s};D.push(i)});let E=0;k.forEach(t=>E=Math.min(E,t.x2)),k.push({y:Math.max(o,l),x1:0,x2:E});let O=[],j=[];k.forEach(t=>{if(t.y>=s[0]-1e-7&&t.y<=s[1]+1e-7){let{x1:e,x2:i,y:a}=t,s=new tI(Math.min(e,i),a,Math.abs(e-i),0);j.push(s),O.push({x1:e,x2:i,y:a})}});let R=[],z=[],P=y?y.depth+1:1;for(let t=0;t<P;t++){let e=m.length>0&&(0===t||T&&x),i=t>0?-L-2*this.label.padding-(t-1)*g:0,a=new tI(i,Math.min(...s),0,Math.abs(s[1]-s[0]));z.push(a),R.push({x:i,y1:s[0],y2:s[1],visible:e})}let B=tI.merge(W(N.values(),j,z));return{bbox:this.getTransformBox(B),tickLabelLayout:D,separatorLayout:O,axisLineLayout:R}}calculateLayout(){let{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:a}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:a,primaryTickCount:void 0}}};rL.className="GroupedCategoryAxis",rL.type="grouped-category",o([eQ(ih,{optional:!0})],rL.prototype,"labelColor",2);var rA=class{constructor(){this.destroyFns=[]}destroy(){for(let t of this.destroyFns)t()}},rw=class{constructor(){this.modules=[],this.dependencies=new Map,this.dependents=new Map}register(...t){for(let e of t){this.registerDependencies(e);let t=this.modules.find(t=>e.type===t.type&&e.optionsKey===t.optionsKey&&e.identifier===t.identifier);if(t){if("enterprise"===e.packageType&&"community"===t.packageType){let i=this.modules.indexOf(t);this.modules.splice(i,1,e)}}else this.modules.push(e)}}hasEnterpriseModules(){return this.modules.some(t=>"enterprise"===t.packageType)}*byType(...t){let{dependents:e}=this,i=new Set,a=0,s=this.modules.filter(e=>t.includes(e.type));do{for(let t of s)if(!(i.has(t.optionsKey)||e.has(t.optionsKey)))for(let[a,s]of(yield t,i.add(t.optionsKey),e.entries()))s.delete(t.optionsKey),0===s.size&&e.delete(a);a++}while(i.size<s.length&&a<3);if(e.size>0)throw Error(`Could not resolve module dependencies: [${[...e.keys()]}]`)}registerDependencies(t){if(null!=t.dependencies&&0!==t.dependencies.length){for(let e of t.dependencies){let i=this.dependencies.get(e)??new Set;i.add(t.optionsKey),this.dependencies.set(e,i)}this.dependents.set(t.optionsKey,new Set(t.dependencies))}}},rC=new rw,rT=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise(e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch(t=>y.errorOnce(t))})}async acquireImmediately(t){return!!this.available&&(await this.acquire(t),!0)}async waitForClearAcquireQueue(){return this.acquire(async()=>void 0)}async dispatchNext(){this.available=!1;let[t,e]=this.acquireQueue.shift()??[];for(;t;){try{await t(),e?.()}catch(t){y.error("mutex callback error",t),e?.()}[t,e]=this.acquireQueue.shift()??[]}this.available=!0}},rk=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw Error("AG Charts - listener must be a Function");let i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){this.eventListeners.get(t)?.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){this.eventListeners.get(t.type)?.forEach(e=>e(t))}},rE=class extends eW{constructor(t=0,e=t,i=t,a=e){super(),this.top=t,this.right=e,this.bottom=i,this.left=a}};function rO(t,e){let i,a,s=0,r=!1,n=()=>r,o=()=>{r=!1,a?.(),a=void 0,i=void 0,s>0&&t(l)},l=()=>{let t=s;s=0,r=!0;let i=e({count:t});if(!i){o();return}i.then(o,o)};return{schedule(e){0!==s||n()||t(l,e),s++},async await(){if(n())for(null==i&&(i=new Promise(t=>{a=t}));n();)await i}}}o([eQ(e9)],rE.prototype,"top",2),o([eQ(e9)],rE.prototype,"right",2),o([eQ(e9)],rE.prototype,"bottom",2),o([eQ(e9)],rE.prototype,"left",2);var rj=class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)||this.events.set(t,new Set),this.events.get(t)?.add(e),()=>this.off(t,e)}off(t,e){let i=this.events.get(t);i&&(i.delete(e),0===i.size&&this.events.delete(t))}emit(t,e){this.events.get(t)?.forEach(t=>t(e))}clear(t){t?this.events.delete(t):this.events.clear()}},rR=(t=>(t[t.Caption=0]="Caption",t[t.Legend=1]="Legend",t[t.Toolbar=2]="Toolbar",t[t.Navigator=3]="Navigator",t[t.Overlay=4]="Overlay",t))(rR||{}),rz=class{constructor(){this.events=new rj,this.elements=new Map}addListener(t,e){return this.events.on(t,e)}registerElement(t,e){return this.elements.has(t)?this.elements.get(t).add(e):this.elements.set(t,new Set([e])),()=>this.elements.get(t)?.delete(e)}createContext(t,e){let i=new rP(t,e);for(let t of Object.values(rR))"number"==typeof t&&this.elements.get(t)?.forEach(t=>t(i));return i}emitLayoutComplete(t,e){let i="layout:complete",{width:a,height:s}=t;this.events.emit(i,{type:i,axes:e.axes??[],chart:{width:a,height:s},clipSeries:e.clipSeries??!1,series:e.series})}},rP=class{constructor(t,e){this.width=t,this.height=e,this.layoutBox=new tI(0,0,t,e)}},rB=class{constructor(){this.title=new sC,this.subtitle=new sC,this.footnote=new sC}positionCaptions(t){let{title:e,subtitle:i,footnote:a}=this,s=t.layoutBox.height/10;if(e.enabled){let{spacing:a=i.enabled?sC.SMALL_PADDING:sC.LARGE_PADDING}=e;this.positionCaption("top",e,t.layoutBox,s),this.shrinkLayoutByCaption("top",e,t.layoutBox,a)}i.enabled&&(this.positionCaption("top",i,t.layoutBox,s),this.shrinkLayoutByCaption("top",i,t.layoutBox,i.spacing)),a.enabled&&(this.positionCaption("bottom",a,t.layoutBox,s),this.shrinkLayoutByCaption("bottom",a,t.layoutBox,a.spacing))}positionAbsoluteCaptions(t){let{title:e,subtitle:i,footnote:a}=this,{rect:s}=t.series;for(let t of[e,i,a])if("overlay"===t.layoutStyle){if("left"===t.textAlign)t.node.x=s.x+t.padding;else if("right"===t.textAlign){let e=t.node.getBBox();t.node.x=s.x+s.width-e.width-t.padding}}}computeX(t,e){return"left"===t?e.x:"right"===t?e.x+e.width:e.x+e.width/2}positionCaption(t,e,i,a){let s=Math.max(a1.getLineHeight(e.fontSize),a);e.node.x=this.computeX(e.textAlign,i)+e.padding,e.node.y=i.y+("top"===t?0:i.height)+e.padding,e.node.textBaseline=t,e.computeTextWrap(i.width,s)}shrinkLayoutByCaption(t,e,i,a=0){if("block"===e.layoutStyle){let s=e.node.getBBox();i.shrink("top"===t?Math.ceil(s.y-i.y+s.height+a):Math.ceil(i.y+i.height-s.y+a),t)}}};o([eQ(eJ)],rB.prototype,"title",2),o([eQ(eJ)],rB.prototype,"subtitle",2),o([eQ(eJ)],rB.prototype,"footnote",2);var rG=class{constructor(){this.registeredListeners=new Map}addListener(t,e){let i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(let[e,i]of this.registeredListeners.entries()){let a=i.findIndex(e=>e.symbol===t);if(a>=0){i.splice(a,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t,...e){for(let i of this.getListenersByType(t))try{i.handler(...e)}catch(t){y.errorOnce(t)}}dispatchWrapHandlers(t,e,...i){for(let a of this.getListenersByType(t))try{e(a.handler,...i)}catch(t){y.errorOnce(t)}}getListenersByType(t){return this.registeredListeners.get(t)??[]}destroy(){this.registeredListeners.clear()}},rF=class{constructor(){this.listeners=new rG,this.destroyFns=[]}addListener(t,e){return this.listeners.addListener(t,e)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(t=>t())}},rU=(t=>(t[t.Default=32]="Default",t[t.ZoomDrag=16]="ZoomDrag",t[t.Annotations=8]="Annotations",t[t.ContextMenu=4]="ContextMenu",t[t.Animation=2]="Animation",t[t.AnnotationsSelected=1]="AnnotationsSelected",t[t.All=63]="All",t))(rU||{}),rY=class extends rF{addListener(t,e,i=32){return super.addListener(t,t=>{this.getState()&i&&e(t)})}},rZ=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0}setFns(t){this.destroy(),this.destroyFns=t}},r_="10.3.3",rV=Symbol("previous-memento-not-found"),rW=class{constructor(t){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=aN.create(!0,"history"),this.destroyFns=new rZ,this.destroyFns.setFns([t.addListener("undo",this.undo.bind(this),63),t.addListener("redo",this.redo.bind(this),63)])}destroy(){this.destroyFns.destroy()}addMementoOriginator(t){this.originators.set(t.mementoOriginatorKey,t),this.clearState.set(t.mementoOriginatorKey,t.createMemento()),this.debugEvent("History add originator:",t.mementoOriginatorKey)}clear(){for(let[t,e]of(this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1,this.originators.entries()))this.clearState.set(t,e.createMemento())}record(t,...e){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));let i=new Map;for(let t of e){if(!this.originators.has(t.mementoOriginatorKey))throw Error(`Originator [${t.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(t.mementoOriginatorKey,t.createMemento())}this.history.push({label:t,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${t}]`)}undo(){let t=this.history[this.historyIndex];if(t){for(let e of t.mementos.keys()){let t=this.findPreviousMemento(e);if(t===rV)throw Error(`Could not find previous memento for [${e}].`);this.restoreMemento(e,t)}this.historyIndex-=1,this.debugEvent(`History undo: [${t.label}]`)}}redo(){let t=this.history[this.historyIndex+1];if(t){for(let[e,i]of t.mementos.entries())this.restoreMemento(e,i);this.historyIndex+=1,this.debugEvent(`History redo: [${t.label}]`)}}findPreviousMemento(t){for(let e=this.historyIndex-1;e>=0;e--)if(this.history[e].mementos.has(t))return this.history[e].mementos.get(t);return this.clearState.has(t)?this.clearState.get(t):rV}restoreMemento(t,e){this.originators.get(t)?.restoreMemento(r_,r_,e)}debugEvent(...t){this.debug(...t,this.history.map((t,e)=>e===this.historyIndex?`** ${t.label} **`:t.label))}},rH=class{constructor(t){this.version=t.split("-")[0]}save(...t){let e={version:this.version};for(let i of Object.values(t))e[i.mementoOriginatorKey]=this.encode(i,i.createMemento());return e}restore(t,...e){if("object"!=typeof t){y.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`);return}if(null==t){y.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in t)||"string"!=typeof t.version){y.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(let i of e){if(!(i.mementoOriginatorKey in t))continue;let e=this.decode(i,t[i.mementoOriginatorKey]);if(!i.guardMemento(e)){y.warnOnce(`Could not restore [${i.mementoOriginatorKey}] data, value was invalid, ignoring.`,e);return}i.restoreMemento(this.version,t.version,e)}}encode(t,e){try{return JSON.parse(JSON.stringify(e,this.encodeTypes))}catch(e){throw Error(`Failed to encode [${t.mementoOriginatorKey}] value [${e}].`,{cause:e})}}decode(t,e){try{return JSON.parse(JSON.stringify(e),this.decodeTypes)}catch(e){throw Error(`Failed to decode [${t.mementoOriginatorKey}] value [${e}].`,{cause:e})}}encodeTypes(t,e){return tV(this[t])?{__type:"date",value:String(this[t])}:e}decodeTypes(t,e){return tQ(this[t])&&"__type"in this[t]&&"date"===this[t].__type?new Date(this[t].value):e}},r$=class{constructor(){this.caretaker=new rH(r_),this.state=new Map}setState(t,e){null!=se(this.state.get(t.mementoOriginatorKey),e)&&(this.state.set(t.mementoOriginatorKey,e),this.restoreState(t))}restoreState(t){let{caretaker:e,state:i}=this;if(!i.has(t.mementoOriginatorKey))return;let a=i.get(t.mementoOriginatorKey);e.restore({version:e.version,[t.mementoOriginatorKey]:a},t)}};function rQ(t,e,i,a){e.addEventListener(i,a);let s=()=>e.removeEventListener(i,a);return t.push(s),s}function rX(t,e,i){rQ(t,e,"keydown",t=>{"Escape"===t.key&&i(t)})}function rK(t){return!(t.shiftKey||t.altKey||t.ctrlKey||t.metaKey)}function rJ(t,e,...i){return rK(t)&&(t.key===e||i.some(e=>t.key===e))}function rq(t,e,i,a){i&&rQ(t,e,"keydown",t=>{rJ(t,a)&&i.focus()})}var r0={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function r1(t){return t.toolbar.role="toolbar",t.toolbar.ariaOrientation=t.orientation,t.toolbar.ariaHidden=(0===t.buttons.length).toString(),r2(t)}function r2(t){let{orientation:e,buttons:i,wrapAround:a=!1,onEscape:s,onFocus:r,onBlur:n}=t,{nextKey:o,prevKey:l}=r0[e],h=t=>{t.target&&"tabIndex"in t.target&&(i.forEach(t=>t.tabIndex=-1),t.target.tabIndex=0)},[d,u]=a?[i.length,i.length]:[0,1/0],c=[];for(let t=0;t<i.length;t++){let e=i[(d+t-1)%u],a=i[t],p=i[(d+t+1)%u];rQ(c,a,"focus",h),r&&rQ(c,a,"focus",r),n&&rQ(c,a,"blur",n),s&&rX(c,a,s),function(t,e,i,a,s,r){rq(t,e,s,r),rq(t,e,i,a),rQ(t,e,"keydown",t=>{rJ(t,a,r)&&t.preventDefault()})}(c,a,e,l,p,o),a.tabIndex=0===t?0:-1}return c}var r4=class{constructor(t,e,i){this.lastFocus=e,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push(function(t,e,i){let a=rQ(t,window,"mousedown",t=>{[0,2].includes(t.button)&&!function(t,e){if(e.target instanceof Element){let{x:i,y:a,width:s,height:r}=t.getBoundingClientRect(),{clientX:n,clientY:o}=e;return n>=i&&o>=a&&n<=i+s&&o<=a+r}return!1}(e,t)&&(i(),a())});return a}(this.destroyFns,t,()=>this.close()))}close(){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0,this.closeCallback(),this.finishClosing()}finishClosing(){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0,sx(this.lastFocus,"aria-expanded",!1),this.lastFocus?.focus(),this.lastFocus=void 0}};function r3(t){let{sourceEvent:e,orientation:i,menu:a,buttons:s,closeCallback:r,autoCloseOnBlur:n=!1}=t,{nextKey:o,prevKey:l}=r0[i],h=r6(e);sx(h,"aria-expanded",!0);let d=new r4(a,h,r),u=()=>d.close(),{destroyFns:c}=d;if(a.role="menu",a.ariaOrientation=i,c.push(...r2({orientation:i,buttons:s,onEscape:u,wrapAround:!0})),a.tabIndex=-1,rX(c,a,u),rQ(c,a,"keydown",t=>{t.target===a&&(t.key===o||t.key===l)&&(t.preventDefault(),s[0]?.focus())}),n){let t=t=>{s.includes(t.relatedTarget)||u()};for(let e of s)rQ(c,e,"blur",t)}return s[0]?.focus(),d}function r5(t,e){return i=>{if("true"===t.ariaDisabled)return i.preventDefault();e(i)}}function r9(t){return"button"in t?0===t.button:rK(t)&&("Space"===t.code||"Enter"===t.key)}function r6(t){if(t?.target instanceof HTMLElement&&"tabindex"in t.target.attributes)return t.target}function r8(t){let e=t=>{!t.defaultPrevented&&sb(t.target,"data-preventdefault",!0)&&rJ(t,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&t.preventDefault()};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)}var r7=class{constructor(){if(this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([t,e])=>this.observe(t,e)),this.queuedObserveRequests=[]},"undefined"==typeof ResizeObserver)return;this.resizeObserver=new ResizeObserver(t=>{for(let{target:e,contentRect:{width:i,height:a}}of t){let t=this.elements.get(e);this.checkSize(t,e,i,a)}}),this.documentReady="complete"===q("readyState"),this.documentReady||tt()?.addEventListener("load",this.onLoad)}destroy(){tt()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=null}checkSize(t,e,i,a){t&&(i!==t.size?.width||a!==t.size?.height)&&(t.size={width:i,height:a},t.cb(t.size,e))}observe(t,e){if(!this.documentReady){this.queuedObserveRequests.push([t,e]);return}this.elements.has(t)?this.removeFromQueue(t):this.resizeObserver?.observe(t),this.elements.set(t,{cb:e})}unobserve(t){this.resizeObserver?.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter(([e])=>e!==t)}},nt=["styles","canvas","canvas-center","canvas-overlay","canvas-proxy","series-area"],ne=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}]]),ni={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON:()=>ni},na=class extends rF{constructor(t,e){super(),this.styles=new Map,this.container=void 0,this.containerSize=void 0,this.sizeMonitor=new r7;let i=te("div");i.innerHTML='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="img" class="ag-charts-series-area" tabindex="-1"></div></div><div role="presentation" class="ag-charts-canvas-overlay"></div></div></div></div>',this.element=i.children.item(0),this.styleRootElement=e,this.rootElements=nt.reduce((t,e)=>{let i=`ag-charts-${e}`,a=this.element.classList.contains(i)?this.element:this.element.querySelector(`.${i}`);if(!a)throw Error(`AG Charts - unable to find DOM element ${i}`);return t[e]={element:a,children:new Map,listeners:[]},t},{});let a=!1;this.observer=function(t,e){if("undefined"==typeof IntersectionObserver)return;let i=new IntersectionObserver(i=>{for(let a of i)a.target===t&&e(a.intersectionRatio)},{root:t});return i.observe(t),i}(this.element,t=>{0!==t||a||this.listeners.dispatch("hidden",{type:"hidden"}),a=0===t}),this.setSizeOptions(),this.addStyles("ag-charts-community",'.ag-charts-wrapper,.ag-charts-wrapper:focus,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:focus,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box;outline:none}.ag-charts-wrapper{position:relative;user-select:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;display:flex;align-items:var(--ag-charts-align);justify-content:var(--ag-charts-justify)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{display:block;pointer-events:none}.ag-charts-series-area{opacity:0;pointer-events:auto;position:absolute}.ag-charts-series-area:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-active-color: var(--ag-active-color, #2196f3);--ag-charts-background-color: var(--ag-background-color, #fff);--ag-charts-foreground-color: var(--ag-foreground-color, #181d1f);--ag-charts-border-color: var(--ag-border-color, #dddddd);--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12%);--ag-charts-font-family: "Verdana", sans-serif;--ag-charts-font-size: var(--ag-font-size, 14px);--ag-charts-size: var(--ag-grid-size, 8px);--ag-charts-border: var(--ag-charts-border-color) var(--ag-borders, solid 1px);--ag-charts-border-critical: var(--ag-borders-critical, solid 1px);--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1;--ag-charts-align: center;--ag-charts-justify: center;--ag-charts-axis-label-background-color: #474747;--ag-charts-axis-label-color: #ffffff;--ag-charts-toolbar-foreground-color: var(--ag-header-foreground-color, var(--ag-charts-foreground-color));--ag-charts-toolbar-background-color: var( --ag-header-background-color, color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 2%) );--ag-charts-toolbar-size: 34px;--ag-charts-toolbar-size-small: 24px;--ag-charts-toolbar-border: var(--ag-charts-border-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12% );--ag-charts-toolbar-focus-color: var(--ag-charts-active-color);--ag-charts-toolbar-active-background-color: var(--ag-charts-toolbar-hover-color);--ag-charts-toolbar-active-color: var(--ag-charts-active-color);--ag-charts-toolbar-disabled-foreground-color: var( --ag-disabled-foreground-color, color-mix(in srgb, transparent, var(--ag-charts-toolbar-foreground-color) 50%) );--ag-charts-toolbar-disabled-background-color: color-mix( in srgb, var(--ag-charts-toolbar-background-color), var(--ag-charts-toolbar-foreground-color) 6% );--ag-charts-toolbar-gap: var(--ag-charts-size);--ag-charts-toolbar-font-size: 13px;--ag-charts-toolbar-font-size-small: 12px;--ag-charts-toolbar-button-padding: 6px;--ag-charts-toolbar-button-padding-small: 1px;--ag-charts-popover-background-color: var(--ag-charts-toolbar-background-color);--ag-charts-popover-foreground-color: var(--ag-charts-toolbar-foreground-color);--ag-charts-popover-border: var(--ag-charts-toolbar-border);--ag-charts-popover-border-radius: var(--ag-border-radius, 4px);--ag-charts-popover-active-color: var(--ag-charts-toolbar-active-color);--ag-charts-popover-hover-color: var(--ag-charts-toolbar-hover-color);--ag-charts-popover-active-background-color: var(--ag-charts-toolbar-active-background-color);--ag-charts-popover-font-size: 14px;--ag-charts-popover-font-size-small: var(--ag-charts-toolbar-font-size-small);--ag-charts-dialog-input-group-label-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-dialog-tab-color--inactive: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-button-radius: var(--ag-border-radius, 4px);--ag-charts-focus-border-color: var(--ag-input-focus-border-color, var(--ag-charts-active-color));--ag-charts-focus-border: solid 1px var(--ag-charts-focus-border-color);--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-focus-box-shadow: var(--box-shadow), 0 0 0 2px #fff8, var(--ag-charts-focus-border-shadow);--ag-charts-icon-font-family: "agChartsDefault";--ag-charts-icon-font-weight: normal;--ag-charts-icon-font-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color), 90%);--ag-charts-icon-size: 20px;--ag-charts-input-background-color: var(--ag-charts-background-color);--ag-charts-input-background-color--hover: var(--ag-charts-hover-color);--ag-charts-input-background-color--active: var(--ag-charts-hover-color);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-color--active: var(--ag-charts-active-color);--ag-charts-input-border-radius: var(--ag-border-radius, 4px);--ag-charts-input-color--active: var(--ag-charts-active-color);--ag-charts-input-focus-outline: var(--ag-charts-focus-border);--ag-charts-input-focus-box-shadow: var(--ag-charts-focus-border-shadow);--ag-charts-input-font-family: var(--ag-charts-font-family);--ag-charts-input-font-size: var(--ag-charts-font-size);--ag-charts-input-padding: 8px;--ag-charts-input-padding-large: 10px;--ag-charts-input-placeholder-color: #888888;--ag-charts-input-spacing: 8px;--ag-charts-input-transition-duration: .25s;--ag-charts-input-transition-duration--fast: .1s;--ag-charts-input-transition-timing-function: ease-out;--ag-charts-input-checkbox-background-color: #babbbc;--ag-charts-input-checkbox-background-color--checked: var(--ag-charts-active-color)}.ag-charts-theme-default-dark{--ag-charts-background-color: var(--ag-background-color, color-mix(in srgb, #fff, #182230 97%));--ag-charts-foreground-color: var(--ag-foreground-color, #fff);--ag-charts-border-color: var(--ag-border-color, rgba(255, 255, 255, .16));--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18%);--ag-charts-axis-label-background-color: #9caebb;--ag-charts-axis-label-color: #000000;--ag-charts-toolbar-background-color: var(--ag-header-background-color, color-mix(in srgb, #fff, #182230 93%));--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18% );--ag-charts-dialog-input-group-label-text-color: #ffffff;--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-input-placeholder-color: #aaaaaa}.ag-charts-icon{display:block;width:var(--ag-charts-icon-size);height:var(--ag-charts-icon-size);speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04Ljc1IDQuNWEuNzUuNzUgMCAwIDAtMS41IDB2Mi43NUg0LjVhLjc1Ljc1IDAgMCAwIDAgMS41aDIuNzV2Mi43NWEuNzUuNzUgMCAwIDAgMS41IDBWOC43NWgyLjc1YS43NS43NSAwIDAgMCAwLTEuNUg4Ljc1VjQuNVoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zLjc1IDhhLjc1Ljc1IDAgMCAxIC43NS0uNzVoN2EuNzUuNzUgMCAwIDEgMCAxLjVoLTdBLjc1Ljc1IDAgMCAxIDMuNzUgOFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt,.ag-charts-icon-zoom-in-alt-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt,.ag-charts-icon-zoom-out-alt-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-icon-reset-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00LjQxMiA0LjA1OCAyLjc1IDIuMzk2VjYuNzVoLjc0NGEuNzYuNzYgMCAwIDAgLjAxMiAwaDMuNTk4TDUuNDc4IDUuMTI1YTQuMTI1IDQuMTI1IDAgMCAxIDIuNTIzLS44NzUgMy43NSAzLjc1IDAgMSAxLTMuMTE5IDUuODMzLjc1Ljc1IDAgMCAwLTEuMjQ3LjgzNEE1LjI1IDUuMjUgMCAxIDAgOCAyLjc1aC0uMDAzYTUuNjI1IDUuNjI1IDAgMCAwLTMuNTg1IDEuMzA4WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-left-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4wMyA0LjQ3YS43NS43NSAwIDAgMSAwIDEuMDZMNy41NiA4bDIuNDcgMi40N2EuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC0zLTNhLjc1Ljc1IDAgMCAxIDAtMS4wNmwzLTNhLjc1Ljc1IDAgMCAxIDEuMDYgMFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-pan-right-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ljk3IDExLjUzYS43NS43NSAwIDAgMSAwLTEuMDZMOC40NCA4IDUuOTcgNS41M2EuNzUuNzUgMCAwIDEgMS4wNi0xLjA2bDMgM2EuNzUuNzUgMCAwIDEgMCAxLjA2bC0zIDNhLjc1Ljc1IDAgMCAxLTEuMDYgMFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-pan-start-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZmlyc3QiPjxwYXRoIGQ9Im0xNyAxOC02LTYgNi02Ii8+PHBhdGggZD0iTTcgNnYxMiIvPjwvc3ZnPg==)}.ag-charts-icon-pan-end-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGFzdCI+PHBhdGggZD0ibTcgMTggNi02LTYtNiIvPjxwYXRoIGQ9Ik0xNyA2djEyIi8+PC9zdmc+)}.ag-charts-icon-trend-line-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMi41IiBjeT0iOCIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIvPjxjaXJjbGUgY3g9IjEzLjUiIGN5PSI4IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0iTTQgOGg4Ii8+PC9zdmc+)}.ag-charts-icon-horizontal-line-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4zODYgOC43NWEyLjUwMSAyLjUwMSAwIDAgMS00Ljc3MiAwSC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoNC44NjRhMi41MDEgMi41MDEgMCAwIDEgNC43NzIgMGg0Ljg2NGEuNzUuNzUgMCAwIDEgMCAxLjVoLTQuODY0Wk05IDhhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-vertical-line-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04Ljc1IDUuNjE0YTIuNTAxIDIuNTAxIDAgMCAxIDAgNC43NzJ2NC44NjRhLjc1Ljc1IDAgMCAxLTEuNSAwdi00Ljg2NGEyLjUwMSAyLjUwMSAwIDAgMSAwLTQuNzcyVi43NWEuNzUuNzUgMCAwIDEgMS41IDB2NC44NjRaTTggN2ExIDEgMCAxIDEgMCAyIDEgMSAwIDAgMSAwLTJaIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-parallel-channel-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MjQgNC45MmEyLjUgMi41IDAgMSAwLTMuMzc3LTIuMTRsLTYuNjMgMi45YTIuNTAxIDIuNTAxIDAgMSAwIC42MDcgMS4zNzJsNi41ODUtMi44OGEyLjUwMSAyLjUwMSAwIDAgMCAyLjgxNS43NDhabS4wNS0yLjY5M2ExIDEgMCAxIDEtMS44Ny43MDggMSAxIDAgMCAxIDEuODctLjcwOFptLTExIDQuNzVhMSAxIDAgMSAxLTEuODcuNzA4IDEgMSAwIDAgMSAxLjg3LS43MDhabTEuNTUgNi4wNzVhMi41MDEgMi41MDEgMCAxIDEtLjYwNy0xLjM3Mmw2LjYzLTIuOWEyLjUwMSAyLjUwMSAwIDEgMSAuNTYyIDEuMzkxbC02LjU4NSAyLjg4Wm0tMS41NS0uMDc1YTEgMSAwIDEgMS0xLjg3LjcwOCAxIDEgMCAwIDEgMS44Ny0uNzA4Wm0xMC40Mi0zLjQ2YTEgMSAwIDEgMC0uNzA5LTEuODcgMSAxIDAgMCAwIC43MDggMS44N1oiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-disjoint-channel-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MjQgNC45MmEyLjUgMi41IDAgMSAwLTMuMzgzLTIuNDUzTDQuNjkgNC4wNTVhMi41IDIuNSAwIDEgMCAuMzQ0IDEuNDZsNi4zOTItMS41OThhMi41MDEgMi41MDEgMCAwIDAgMyAxLjAwM1ptLjA1LTIuNjkzYTEgMSAwIDEgMS0xLjg3LjcwOCAxIDEgMCAwIDEgMS44Ny0uNzA4Wm0tMTEgMi43NWExIDEgMCAxIDEtMS44Ny43MDggMSAxIDAgMCAxIDEuODctLjcwOFptMS41NiA1LjQyYTIuNSAyLjUgMCAxIDAtLjM0NSAxLjQ2MWw2LjM1MiAxLjU4OGEyLjUgMi41IDAgMSAwIC4zODQtMS40NWwtNi4zOTItMS41OThabS0xLjU2LjUzOGExIDEgMCAxIDAtMS44Ny0uNzA4IDEgMSAwIDAgMCAxLjg3LjcwOFptMTAuNDIgMS40NjFhMSAxIDAgMSAxLS43MDkgMS44NyAxIDEgMCAwIDEgLjcwOC0xLjg3WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjc4OC41ODNhMi42MyAyLjYzIDAgMCAwLTEuODYuNzdMOS41NDQgMi43MzhhLjc1Ny43NTcgMCAwIDAtLjE0LjE0TDIuMDMyIDEwLjI1di4wMDFjLS4yNDIuMjQxLS40Mi41MzgtLjUyLjg2NGwtLjAwMi4wMDItLjg4IDIuOTAyLS4wMDEuMDAzYTEuMDgzIDEuMDgzIDAgMCAwIDEuMzUgMS4zNDdoLjAwMWwyLjkwMi0uODhoLjAwMWMuMzI2LS4xLjYyMy0uMjc3Ljg2NS0uNTE4di0uMDAxbDcuMzc1LTcuMzc2YS43NjMuNzYzIDAgMCAwIC4xMzktLjEzOWwxLjM4NC0xLjM4NEEyLjYzIDIuNjMgMCAwIDAgMTIuNzg4LjU4M1ptLS4xMjYgNC4zNTIuOTI0LS45MjRhMS4xMyAxLjEzIDAgMCAwLTEuNTk3LTEuNTk3bC0uOTI0LjkyNCAxLjU5NyAxLjU5N1ptLTIuNjU3LS41MzYtNi45MTMgNi45MTRIMy4wOWEuNTgzLjU4MyAwIDAgMC0uMTQ2LjI0MmwtLjY1MyAyLjE1MyAyLjE1NS0uNjU0YS41ODMuNTgzIDAgMCAwIC4yNDEtLjE0NGw2LjkxNC02LjkxNC0xLjU5Ny0xLjU5N1oiIGZpbGw9IiMwMDAiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDE2djE2SDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+)}.ag-charts-icon-delete-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA4MyAyLjY2N2MwLS4wOS4wNTMtLjI0Mi4xOTctLjM4Ny4xNDUtLjE0NC4yOTctLjE5Ny4zODctLjE5N2gyLjY2N2MuMDg5IDAgLjI0MS4wNTMuMzg2LjE5Ny4xNDUuMTQ1LjE5Ny4yOTcuMTk3LjM4N3YuNTgzSDYuMDg0di0uNTgzWk01LjMzIDQuNzVIMTEuOTE3djguNTgzYzAgLjA5LS4wNTIuMjQyLS4xOTcuMzg3LS4xNDUuMTQ0LS4yOTcuMTk3LS4zODYuMTk3SDQuNjY3Yy0uMDkgMC0uMjQyLS4wNTMtLjM4Ny0uMTk3LS4xNDQtLjE0NS0uMTk3LS4yOTctLjE5Ny0uMzg3VjQuNzVINS4zM1ptLS43NDUtMS41di0uNTgzYzAtLjU3OC4yOC0xLjA5Mi42MzYtMS40NDcuMzU1LS4zNTYuODctLjYzNyAxLjQ0Ny0uNjM3aDIuNjY3Yy41NzcgMCAxLjA5MS4yODEgMS40NDcuNjM3LjM1NS4zNTUuNjM2Ljg3LjYzNiAxLjQ0N3YuNTgzSDE0YS43NS43NSAwIDAgMSAwIDEuNWgtLjU4M3Y4LjU4M2MwIC41NzgtLjI4MSAxLjA5Mi0uNjM2IDEuNDQ3LS4zNTYuMzU2LS44Ny42MzctMS40NDcuNjM3SDQuNjY3Yy0uNTc3IDAtMS4wOTItLjI4MS0xLjQ0Ny0uNjM3LS4zNTUtLjM1NS0uNjM3LS44Ny0uNjM3LTEuNDQ3VjQuNzVIMmEuNzUuNzUgMCAwIDEgMC0xLjVoMi41ODNabTIuMDgzIDMuMzMzYS43NS43NSAwIDAgMSAuNzUuNzV2NGEuNzUuNzUgMCAxIDEtMS41IDB2LTRhLjc1Ljc1IDAgMCAxIC43NS0uNzVabTMuNDE3Ljc1YS43NS43NSAwIDAgMC0xLjUgMHY0YS43NS43NSAwIDEgMCAxLjUgMHYtNFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-lock-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjE3MyAyLjg0YTIuNTgzIDIuNTgzIDAgMCAxIDQuNDEgMS44Mjd2MS45MTZINS40MTZWNC42NjdjMC0uNjg1LjI3My0xLjM0My43NTctMS44MjdaTTMuOTE3IDYuNTgzVjQuNjY3YTQuMDgzIDQuMDgzIDAgMCAxIDguMTY2IDB2MS45MTZoLjU4NGMxLjE1IDAgMi4wODMuOTMzIDIuMDgzIDIuMDg0djQuNjY2YzAgMS4xNS0uOTMzIDIuMDg0LTIuMDgzIDIuMDg0SDMuMzMzYTIuMDgzIDIuMDgzIDAgMCAxLTIuMDgzLTIuMDg0VjguNjY3YzAtMS4xNTEuOTMzLTIuMDg0IDIuMDgzLTIuMDg0aC41ODNabTcuNDE2IDEuNWgtOGEuNTgzLjU4MyAwIDAgMC0uNTgzLjU4NHY0LjY2NmMwIC4zMjIuMjYxLjU4NC41ODMuNTg0aDkuMzM0YS41ODMuNTgzIDAgMCAwIC41ODMtLjU4NFY4LjY2N2EuNTgzLjU4MyAwIDAgMC0uNTgzLS41ODRoLTEuMzM0WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjkyMyAyLjg0YTIuNTgzIDIuNTgzIDAgMCAxIDMuNjUzIDAgMyAzIDAgMCAxIC41Ny43OThjLjEzNC4yNzguMTcuNDc0LjE3LjU0NWEuNzUuNzUgMCAwIDAgMS41IDBjMC0uMzgxLS4xMzItLjgwOS0uMzItMS4xOThhNC41MDEgNC41MDEgMCAwIDAtLjg1OS0xLjIwNiA0LjA4MyA0LjA4MyAwIDAgMC02Ljk3IDIuODg4djEuOTE2aC0uNTg0QzIuOTMzIDYuNTgzIDIgNy41MTYgMiA4LjY2N3Y0LjY2NmMwIDEuMTUuOTMzIDIuMDg0IDIuMDgzIDIuMDg0aDkuMzM0YzEuMTUgMCAyLjA4My0uOTMzIDIuMDgzLTIuMDg0VjguNjY3YzAtMS4xNTEtLjkzMy0yLjA4NC0yLjA4My0yLjA4NGgtNy4yNVY0LjY2N2MwLS42ODUuMjcyLTEuMzQzLjc1Ni0xLjgyN1pNNS40MTcgOC4wODNINC4wODJhLjU4My41ODMgMCAwIDAtLjU4My41ODR2NC42NjZjMCAuMzIyLjI2MS41ODQuNTgzLjU4NGg5LjMzNGEuNTgzLjU4MyAwIDAgMCAuNTgzLS41ODRWOC42NjdhLjU4My41ODMgMCAwIDAtLjU4My0uNTg0aC04WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-plus-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXBsdXMiPjxwYXRoIGQ9Ik01IDEyaDE0Ii8+PHBhdGggZD0iTTEyIDV2MTQiLz48L3N2Zz4=)}.ag-charts-icon-crossline-add-line-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43NSA0LjVhLjc1Ljc1IDAgMCAwLTEuNSAwdjIuNzVINC41YS43NS43NSAwIDAgMCAwIDEuNWgyLjc1djIuNzVhLjc1Ljc1IDAgMCAwIDEuNSAwVjguNzVoMi43NWEuNzUuNzUgMCAwIDAgMC0xLjVIOC43NXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;color:inherit;font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);transition-duration:var(--ag-charts-input-transition-duration);transition-property:none;transition-timing-function:var(--ag-charts-input-transition-timing-function)}.ag-charts-input:focus-visible{outline:var(--ag-charts-input-focus-outline);box-shadow:var(--ag-charts-input-focus-box-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);cursor:pointer;padding:var(--ag-charts-input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-input-background-color--hover)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{appearance:none;background:var(--ag-charts-input-checkbox-background-color);border-radius:9px;cursor:pointer;height:18px;margin:0;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:7px;content:" ";height:14px;margin:2px;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-input-checkbox-background-color--checked)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--line-height);font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);padding:var(--ag-charts-input-padding-large) var(--ag-charts-input-padding)}.ag-charts-textarea[placeholder]:empty:before{color:var(--ag-charts-input-placeholder);content:attr(placeholder)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:none;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:var(--ag-charts-focus-border);outline-width:2px;box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;stroke:var(--ag-charts-focus-border-color);stroke-width:2px}.ag-charts-toolbar{align-items:center;background:none;border:none;display:flex;flex-wrap:nowrap;opacity:1;position:absolute;transform:translateY(0);transition:opacity .2s ease-in-out,transform .2s ease-in-out}.ag-charts-toolbar--hidden,.ag-charts-toolbar--prevent-flash{visibility:hidden}.ag-charts-toolbar--floating-hidden{opacity:0;transition:opacity .4s ease-in-out}.ag-charts-toolbar--small{--ag-charts-toolbar-size: var(--ag-charts-toolbar-size-small);--ag-charts-toolbar-font-size: var(--ag-charts-toolbar-font-size-small);--ag-charts-toolbar-button-padding: var(--ag-charts-toolbar-button-padding-small)}.ag-charts-toolbar--top,.ag-charts-toolbar--bottom{flex-direction:row;width:100%}.ag-charts-toolbar--left,.ag-charts-toolbar--right{flex-direction:column}.ag-charts-toolbar--floating,.ag-charts-toolbar--floating-top,.ag-charts-toolbar--floating-bottom{background:none;border:none;flex-direction:row;pointer-events:none;width:100%}.ag-charts-toolbar--floating{padding:0;width:auto;z-index:var(--ag-charts-layer-toolbar)}.ag-charts-toolbar--floating-top{height:calc(var(--ag-charts-toolbar-size) + 10px);padding-top:10px}.ag-charts-toolbar--floating-bottom{height:calc(var(--ag-charts-toolbar-size) + 10px);padding-bottom:10px;overflow:hidden}.ag-charts-toolbar__align{display:flex;flex-direction:inherit;flex-wrap:inherit;gap:var(--ag-charts-toolbar-gap);max-width:100%;width:100%}.ag-charts-toolbar__align--start{justify-content:start}.ag-charts-toolbar__align--center{justify-content:center}.ag-charts-toolbar__align--end{justify-content:end}.ag-charts-toolbar__align--center,.ag-charts-toolbar__align--end{margin-left:auto}.ag-charts-toolbar--left .ag-charts-toolbar__align--center,.ag-charts-toolbar--left .ag-charts-toolbar__align--end,.ag-charts-toolbar--right .ag-charts-toolbar__align--center,.ag-charts-toolbar--right .ag-charts-toolbar__align--end{margin-left:0;margin-top:auto}.ag-charts-toolbar--floating-top .ag-charts-toolbar__align,.ag-charts-toolbar--floating-bottom .ag-charts-toolbar__align{transition:transform .4s ease-in-out;width:auto}.ag-charts-toolbar__section{display:inherit;flex-direction:inherit;flex-wrap:inherit;justify-content:inherit;max-width:inherit;width:inherit}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);display:flex;font:var(--ag-charts-toolbar-font-size) var(--ag-charts-font-family);justify-content:center;margin:0 0 0 -1px;min-height:var(--ag-charts-toolbar-size);min-width:var(--ag-charts-toolbar-size);padding:var(--ag-charts-toolbar-button-padding);pointer-events:all;position:relative;white-space:nowrap;--stroke-width-color: var(--ag-charts-toolbar-foreground-color)}.ag-charts-toolbar__no-pointer-events{pointer-events:none}.ag-charts-toolbar__button--drag-handle{min-width:24px;padding-left:0;padding-right:0}.ag-charts-toolbar__button--with-transition{transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out}.ag-charts-toolbar__button[data-toolbar-group=ranges]{padding:var(--ag-charts-toolbar-button-padding) calc(var(--ag-charts-toolbar-button-padding) * 1.5)}.ag-charts-toolbar--top,.ag-charts-toolbar--bottom,.ag-charts-toolbar--floating,.ag-charts-toolbar--floating-top,.ag-charts-toolbar--floating-bottom{.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar--left,.ag-charts-toolbar--right{.ag-charts-toolbar__button{border-radius:0;margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-button-radius);border-bottom-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar__button--hidden-value,.ag-charts-toolbar__button--hidden-toggled{display:none}.ag-charts-toolbar__button:hover:not([aria-disabled=true],.ag-charts-toolbar__button--drag-handle){background:var(--ag-charts-toolbar-hover-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button.ag-charts-toolbar__button--active{background:var(--ag-charts-toolbar-active-background-color);border-color:var(--ag-charts-toolbar-active-color);color:var(--ag-charts-toolbar-active-color);z-index:2;--stroke-width-color: var(--ag-charts-toolbar-active-color)}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-toolbar-disabled-background-color);color:var(--ag-charts-toolbar-disabled-foreground-color)}.ag-charts-toolbar__button:not([aria-disabled=true]){cursor:pointer}.ag-charts-toolbar__button.ag-charts-toolbar__button--drag-handle{cursor:grab}.ag-charts-toolbar__button.ag-charts-toolbar__button--dragging{cursor:grabbing}.ag-charts-toolbar__button--fill-visible:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--fill)}.ag-charts-toolbar__button--fill-visible[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-toolbar__button--stroke-width-visible:before{content:"";height:min(var(--strokeWidth),20px);width:12px;background:var(--stroke-width-color);margin-right:var(--ag-charts-toolbar-button-padding)}.ag-charts-toolbar__button--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-chart-overlay{color:#181d1f;pointer-events:none}.ag-chart-overlay.ag-chart-dark-overlay{color:#fff}.ag-chart-overlay--loading{color:#8c8c8c}.ag-chart-overlay__loading-background{background:#fff;pointer-events:none}.ag-chart-overlay.ag-chart-dark-overlay .ag-chart-overlay__loading-background{background:#192232}.ag-chart-tooltip{transition:transform .1s ease;width:max-content;z-index:99999;font:12px Verdana,sans-serif;color:#464646;box-shadow:0 4px 8px #00000014}.ag-chart-tooltip-wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-chart-tooltip-wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-chart-tooltip-wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-chart-tooltip-wrap-never{white-space:pre;text-overflow:ellipsis}.ag-chart-tooltip-no-interaction{pointer-events:none;user-select:none}.ag-chart-tooltip-no-animation{transition:none!important}.ag-chart-tooltip-hidden{visibility:hidden}.ag-chart-tooltip-title{overflow:hidden;position:relative;padding:8px 14px;border-top-left-radius:2px;border-top-right-radius:2px;color:#fff;background-color:#888;z-index:1;text-overflow:inherit}.ag-chart-tooltip-title:only-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.ag-chart-tooltip-content{overflow:hidden;padding:6px 14px;line-height:1.7em;background:#fff;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border:1px solid rgba(0,0,0,.15);text-overflow:inherit}.ag-chart-tooltip-arrow:before{content:"";position:absolute;top:100%;left:50%;transform:translate(-50%);border:5px solid #d9d9d9;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;width:0;height:0;margin:0 auto}.ag-chart-tooltip-arrow:after{content:"";position:absolute;top:calc(100% - 1px);left:50%;transform:translate(-50%);border:5px solid white;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;width:0;height:0;margin:0 auto}\n'),t&&this.setContainer(t),this.destroyFns.push(r8(this.element))}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach(t=>{t.children.forEach(t=>t.remove()),t.element.remove()}),this.element.remove()}setSizeOptions(t=300,e=300,i,a){let{style:s}=this.element;s.width=`${i??t}px`,s.height=`${a??e}px`}updateContainerSize(){let{style:t}=this.rootElements["canvas-center"].element;t.width=`${this.containerSize?.width??0}px`,t.height=`${this.containerSize?.height??0}px`}setContainer(t){if(t!==this.container){if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),!(null!=this.getShadowDocumentRoot(t)))for(let t of this.rootElements.styles.children.keys())this.removeChild("styles",t);for(let[e,i]of(this.container=t,this.styles))this.addStyles(e,i);t.appendChild(this.element),this.sizeMonitor.observe(t,t=>{this.containerSize=t,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.listeners.dispatch("container-changed",{type:"container-changed"})}}setThemeClass(t){this.element.classList.forEach(e=>{e.startsWith("ag-charts-theme-")&&e!==t&&this.element.classList.remove(e)}),this.element.classList.add(t)}setTabIndex(t){this.rootElements["series-area"].element.tabIndex=t}updateCanvasLabel(t){sx(this.rootElements["canvas-proxy"].element,"aria-label",t)}getEventElement(t,e){return["focus","blur","keydown","keyup"].includes(e)?this.rootElements["series-area"].element:t}addEventListener(t,e,i){this.getEventElement(this.element,t).addEventListener(t,e,i)}removeEventListener(t,e,i){this.getEventElement(this.element,t).removeEventListener(t,e,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){let t=tt(),e=new tI(0,0,t.innerWidth,t.innerHeight),i=this.getRawOverlayClientRect(),a=tI.fromDOMRect(i??this.getBoundingClientRect());return e.intersection(a)?.toDOMRect()??ni}getRawOverlayClientRect(){let t=this.element;for(;null!=t;){let e=t.computedStyleMap?.(),i=e?.get("overflow-x")?.toString(),a=e?.get("overflow-y")?.toString();if(null!=i&&"visible"!==i||a&&"visible"!==a)return t.getBoundingClientRect();t=t.parentElement}let e=this.getShadowDocumentRoot();if(e)return e.getBoundingClientRect()}getShadowDocumentRoot(t=this.container){let e=t?.ownerDocument?.body??q("body");for(;null!=t;){if(t===e)return;if(t.parentNode instanceof DocumentFragment)return t;t=t.parentNode}return this.container}getChildBoundingClientRect(t){let{children:e}=this.rootElements[t],i=[];for(let t of e.values())i.push(tI.fromDOMRect(t.getBoundingClientRect()));return tI.merge(i)}calculateCanvasPosition(t){let e=0,{x:i=0,y:a=0}=this.getChildBoundingClientRect("canvas")??{},s=t.getBoundingClientRect();return{x:s.x-i,y:s.y-a}}isManagedChildDOMElement(t,e,i){let{children:a}=this.rootElements[e],s=a?.get(i);return null!=s&&t.contains(s)}isEventOverElement(t){let e=t.target;return null!=e&&this.element.contains(e)}addStyles(t,e){let i;let a="data-ag-charts";if(this.styles.set(t,e),null==this.container)return;let s=e=>e.getAttribute(a)===t,r=t=>{for(let e of t.children)if(s(e))return;let e=te("style");return t.appendChild(e),e};null==(i=this.styleRootElement?r(this.styleRootElement):null!=this.getShadowDocumentRoot(this.container)?this.addChild("styles",t):r(q("head")))||s(i)||(i.setAttribute(a,t),i.innerHTML=e)}removeStyles(t){this.removeChild("styles",t)}updateCursor(t){this.element.style.cursor=t}getCursor(){return this.element.style.cursor}addChild(t,e,i,a){let{element:s,children:r,listeners:n}=this.rootElements[t];if(!r)throw Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(e))return r.get(e);let{childElementType:o="div"}=ne.get(t)??{};if(i&&i.tagName.toLowerCase()!==o.toLowerCase())throw Error("AG Charts - mismatching DOM element type");let l=i??te(o);for(let[t,e,i]of n)l.addEventListener(t,e,i);if(r.set(e,l),a){let t=s.querySelector(a.query);if(null==t)throw Error(`AG Charts - addChild query failed ${a.query}`);t.insertAdjacentElement(a.where,l)}else s?.appendChild(l);return l}removeChild(t,e){let{children:i}=this.rootElements[t];i&&(i.get(e)?.remove(),i.delete(e))}incrementDataCounter(t){let{dataset:e}=this.element;e[t]??(e[t]="0"),e[t]=String(Number(e[t])+1)}setDataBoolean(t,e){this.element.dataset[t]=String(e)}getIconClassNames(t){return`ag-charts-icon ag-charts-icon-${t}`}};function ns(t,e,i,a,s,r,n,o){let l=(i-t)*(o-r)-(a-e)*(n-s);if(0===l)return 0;let h=((n-s)*(e-r)-(t-s)*(o-r))/l,d=((i-t)*(e-r)-(a-e)*(t-s))/l;return h>=0&&h<=1&&d>=0&&d<=1?1:0}function nr(t,e,i,a){return[-t+3*e-3*i+a,3*t-6*e+3*i,-3*t+3*e,t]}function nn(t,e,i,a,s,r,n,o,l,h){if(isNaN(t)||isNaN(e))return 0;r&&([s,a]=[a,s]);let d=(h-o)/(l-n),u=o-d*n,c=Math.pow(d,2)+1,p=2*(d*(u-e)-t),g=Math.pow(p,2)-4*c*(Math.pow(t,2)+Math.pow(u-e,2)-Math.pow(i,2));if(g<0)return 0;let y=0;return[(-p+Math.sqrt(g))/2/c,(-p-Math.sqrt(g))/2/c].forEach(i=>{i>=Math.min(n,l)&&i<=Math.max(n,l)&&ak(Math.atan2(d*i+u-e,i-t),a,s)&&y++}),y}function no(t,e,i,a,s){return(1-s)**3*t+3*(1-s)**2*s*e+3*(1-s)*s**2*i+s**3*a}function nl(t,e,i,a,s){if(s<=Math.min(t,a))return t<a?0:1;if(s>=Math.max(t,a))return t<a?1:0;let r=0,n=1,o=NaN;for(let l=0;l<12;l+=1)no(t,e,i,a,o=(r+n)/2)<s?r=o:n=o;return o}function nh(t,e,i,a,s,r,n,o,l){let h=(1-l)*t+l*i,d=(1-l)*e+l*a,u=(1-l)*i+l*s,c=(1-l)*a+l*r,p=(1-l)*s+l*n,g=(1-l)*r+l*o,y=(1-l)*h+l*u,m=(1-l)*d+l*c,f=(1-l)*u+l*p,x=(1-l)*c+l*g,M=(1-l)*y+l*f,b=(1-l)*m+l*x;return[[{x:t,y:e},{x:h,y:d},{x:y,y:m},{x:M,y:b}],[{x:M,y:b},{x:f,y:x},{x:p,y:g},{x:n,y:o}]]}function nd(t,e,i,a){let s=-t+3*e-3*i+a,r=3*t-6*e+3*i,n=-3*t+3*e;if(0===s){if(0!==r){let t=-n/r;if(t>0&&t<1)return[t]}return[]}let o=r*r-4*s*n;if(o>=0){let t=Math.sqrt(o);return[(-r+t)/(2*s),(-r-t)/(2*s)].filter(t=>t>0&&t<1)}return[]}function nu(t,e,i,a,s,r,n,o){return[...nd(t,i,s,n),...nd(e,a,r,o)]}var nc=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,e){this.openedPath=!0,this.path2d.moveTo(t,e),this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.openedPath?(this.path2d.lineTo(t,e),this.commands.push(1),this.params.push(t,e)):this.moveTo(t,e)}rect(t,e,i,a){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+a),this.lineTo(t,e+a),this.closePath()}roundRect(t,e,i,a,s){s=Math.min(s,i/2,a/2),this.moveTo(t,e+s),this.arc(t+s,e+s,s,Math.PI,1.5*Math.PI),this.lineTo(t+s,e),this.lineTo(t+i-s,e),this.arc(t+i-s,e+s,s,1.5*Math.PI,2*Math.PI),this.lineTo(t+i,e+s),this.lineTo(t+i,e+a-s),this.arc(t+i-s,e+a-s,s,0,Math.PI/2),this.lineTo(t+i-s,e+a),this.lineTo(t+s,e+a),this.arc(t+ +s,e+a-s,s,Math.PI/2,Math.PI),this.lineTo(t,e+a-s),this.closePath()}arc(t,e,i,a,s,r){this.openedPath=!0,this.path2d.arc(t,e,i,a,s,r),this.commands.push(2),this.params.push(t,e,i,a,s,r?1:0)}cubicCurveTo(t,e,i,a,s,r){this.openedPath||this.moveTo(t,e),this.path2d.bezierCurveTo(t,e,i,a,s,r),this.commands.push(3),this.params.push(t,e,i,a,s,r)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,e){let i=this.commands,a=this.params,s=i.length,r=NaN,n=NaN,o=0,l=0,h=0;for(let d=0,u=0;d<s;d++)switch(i[d]){case 0:h+=ns(r,n,o,l,-1e4,-1e4,t,e),r=o=a[u++],n=l=a[u++];break;case 1:h+=ns(o,l,a[u++],a[u++],-1e4,-1e4,t,e),o=a[u-2],l=a[u-1];break;case 3:h+=function(t,e,i,a,s,r,n,o,l,h,d,u){let c=0,p=-1e4-u,g=d- -1e4,y=nr(t,i,s,n),m=nr(e,a,r,o),f=p*y[0]+g*m[0];for(let t of function(t,e,i,a){if(0===t)return function(t,e,i){if(0===t)return function(t,e){let i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);let a=e*e-4*t*i,s=[];if(0===a){let i=-e/(2*t);i>=0&&i<=1&&s.push(i)}else if(a>0){let i=Math.sqrt(a),r=(-e-i)/(2*t),n=(-e+i)/(2*t);r>=0&&r<=1&&s.push(r),n>=0&&n<=1&&s.push(n)}return s}(e,i,a);let s=e/t,r=i/t,n=(3*r-s*s)/9,o=(9*s*r-a/t*27-2*s*s*s)/54,l=n*n*n+o*o,h=1/3,d=[];if(l>=0){let t=Math.sqrt(l),e=Math.sign(o+t)*Math.pow(Math.abs(o+t),h),i=Math.sign(o-t)*Math.pow(Math.abs(o-t),h),a=Math.abs(Math.sqrt(3)*(e-i)/2),r=-h*s+(e+i);if(r>=0&&r<=1&&d.push(r),0===a){let t=-h*s-(e+i)/2;t>=0&&t<=1&&d.push(t)}}else{let t=Math.acos(o/Math.sqrt(-n*n*n)),e=h*s,i=2*Math.sqrt(-n),a=i*Math.cos(h*t)-e,r=i*Math.cos(h*(t+2*Math.PI))-e,l=i*Math.cos(h*(t+4*Math.PI))-e;a>=0&&a<=1&&d.push(a),r>=0&&r<=1&&d.push(r),l>=0&&l<=1&&d.push(l)}return d}(f,p*y[1]+g*m[1],p*y[2]+g*m[2],p*y[3]+g*m[3]+(-1e4*(u- -1e4)- -1e4*(d- -1e4)))){let e;let i=t*t,a=t*i,s=y[0]*a+y[1]*i+y[2]*t+y[3],r=m[0]*a+m[1]*i+m[2]*t+m[3];(e=l===d?(r-h)/(u-h):(s-l)/(d-l))>=0&&e<=1&&c++}return c}(o,l,a[u++],a[u++],a[u++],a[u++],a[u++],a[u++],-1e4,-1e4,t,e),o=a[u-2],l=a[u-1];break;case 2:{let i=a[u++],s=a[u++],n=a[u++],d=a[u++],c=a[u++];h+=nn(i,s,n,d,c,!!a[u++],-1e4,-1e4,t,e),isNaN(r)||(h+=ns(o,l,i+Math.cos(d)*n,s+Math.sin(d)*n,-1e4,-1e4,t,e)),o=i+Math.cos(c)*n,l=s+Math.sin(c)*n;break}case 4:h+=ns(r,n,o,l,-1e4,-1e4,t,e)}return h%2==1}distanceSquared(t,e){let i=1/0,a=this.commands,s=this.params,r=a.length,n=NaN,o=NaN,l=0,h=0;for(let d=0,u=0;d<r;d++)switch(a[d]){case 0:l=n=s[u++],h=o=s[u++];break;case 1:i=aF(t,e,l,h,s[u++],s[u++],i);break;case 3:y.error("Command.Curve distanceSquare not implemented");break;case 2:{let a=s[u++],r=s[u++],n=s[u++],o=s[u++],d=s[u++],c=a+Math.cos(o)*n,p=r+Math.sin(o)*n,g=!!s[u++];i=aF(t,e,l,h,c,p,i),i=aU(t,e,a,r,n,o,d,g,i),l=a+Math.cos(d)*n,h=r+Math.sin(d)*n;break}case 4:i=aF(t,e,l,h,n,o,i)}return i}getPoints(){let{commands:t,params:e}=this,i=[],a=0;for(let s of t)switch(s){case 0:case 1:i.push({x:e[a++],y:e[a++]});break;case 3:a+=4,i.push({x:e[a++],y:e[a++]});break;case 2:i.push({x:e[a++],y:e[a++]}),a+=4}return i}toSVG(t=(t,e)=>({x:t,y:e})){let e=[],{commands:i,params:a}=this,s=(i,...a)=>{e.push(i);for(let i=0;i<a.length;i+=2){let{x:s,y:r}=t(a[i],a[i+1]);e.push(s,r)}},r=0;for(let t of i)switch(t){case 0:s("M",a[r++],a[r++]);break;case 1:s("L",a[r++],a[r++]);break;case 3:s("C",a[r++],a[r++],a[r++],a[r++],a[r++],a[r++]);break;case 2:{let t=a[r++],i=a[r++],n=a[r++],o=a[r++],l=a[r++],h=a[r++],d=h?o-l:l-o;d<0&&(d+=2*Math.ceil(-d/(2*Math.PI))*Math.PI),h&&(d=-d);let u=Math.max(Math.ceil(Math.abs(d)/(Math.PI/2)),1),c=d/u,p=4/3*Math.tan(c/4);s(0===e.length?"M":"L",t+Math.cos(o)*n,i+Math.sin(o)*n);for(let e=0;e<u;e+=1){let a=o+c*(e+0),r=o+c*(e+1),l=n*Math.sin(a),h=n*Math.cos(a),d=n*Math.sin(r),u=n*Math.cos(r);s("C",t+h-p*l,i+l+p*h,t+u+p*d,i+d-p*u,t+u,i+d)}break}case 4:e.push("Z")}return e.join(" ")}computeBBox(){let{commands:t,params:e}=this,[i,a,s,r]=[1/0,1/0,-1/0,-1/0],[n,o]=[NaN,NaN],[l,h]=[NaN,NaN],d=(t,e,l)=>{i=Math.min(e,i),a=Math.min(t,a),s=Math.max(t,s),r=Math.max(e,r),l&&([n,o]=[t,e])},u=0;for(let i of t)switch(i){case 0:d(e[u++],e[u++],!0),[l,h]=[n,o];break;case 1:d(e[u++],e[u++],!0);break;case 3:{let t=e[u++],i=e[u++],a=e[u++],s=e[u++],r=e[u++],l=e[u++];d(r,l,!0),nu(n,o,t,i,a,s,r,l).forEach(e=>{d(no(n,t,a,r,e),no(o,i,s,l,e))});break}case 2:{let t=e[u++],i=e[u++],a=e[u++],s=aw(e[u++]),r=aw(e[u++]);e[u++]&&([s,r]=[r,s]);let n=(e,s)=>{d(t+a*Math.cos(e),i+a*Math.sin(e),s)};for(let t of(n(s),n(r,!0),[0,Math.PI/2,Math.PI,3*Math.PI/2]))(s<r&&s<=t&&t<=r||s>r&&(s<=t||t<=r))&&n(t);break}case 4:[n,o]=[l,h]}return new tI(a,i,s-a,r-i)}};function np(t){let{redraw:e=3,changeCb:i,convertor:a}=t??{};return tS({redraw:e,type:"path",convertor:a,changeCb:i})}var ng=class extends aX{constructor(){super(...arguments),this.path=new nc,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}isPointInPath(t,e){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,e)}distanceSquared(t,e){return this.distanceSquaredTransformedPoint(t,e)}svgPathData(t){return this.dirtyPath&&(this.updatePath(),this.dirtyPath=!1),this.path.toSVG(t)}distanceSquaredTransformedPoint(t,e){return(this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,e))?0:this.path.distanceSquared(t,e)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(){return this.updatePathIfDirty(),super.preRender()}render(t){let{ctx:e,forceRender:i,stats:a}=t;if(0===this.dirty&&!i){a&&(a.nodesSkipped+=an(this).count);return}if(!this.clip||isNaN(this._clipX)||isNaN(this._clipY))this._clipPath=void 0,this.drawPath(e);else{e.save();let t=this.strokeWidth/2;this._clipPath??(this._clipPath=new nc),this._clipPath.clear(),this._clipPath.rect(-t,-t,this._clipX+t,this._clipY+t+t),e.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(e),e.restore()}this.fillShadow?.markClean(),super.render(t)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}toSVG(){if(!this.visible)return;let t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",this.svgPathData()),t.setAttribute("fill","string"==typeof this.fill?this.fill:"none"),t.setAttribute("fill-opacity",String(this.fillOpacity)),null!=this.stroke&&(t.setAttribute("stroke",this.stroke),t.setAttribute("stroke-opacity",String(this.strokeOpacity)),t.setAttribute("stroke-width",String(this.strokeWidth))),{elements:[t]}}};ng.className="Path",o([np()],ng.prototype,"clip",2),o([np()],ng.prototype,"clipX",1),o([np()],ng.prototype,"clipY",1);var ny="ag-charts-focus-indicator",nm=class{constructor(t){this.domManager=t,this.div=q().createElement("div"),this.svg=q().createElementNS("http://www.w3.org/2000/svg","svg"),this.path=q().createElementNS("http://www.w3.org/2000/svg","path"),this.svg.append(this.path),this.element=t.addChild("series-area",ny),this.element.classList.add(ny),this.element.ariaHidden="true",this.element.append(this.svg)}destroy(){this.domManager.removeStyles(ny),this.domManager.removeChild("series-area",ny)}updateBounds(t){void 0===t||(t instanceof ng?(this.path.setAttribute("d",t.svgPathData((e,i)=>am.toCanvasPoint(t,e,i))),this.show(this.svg)):(tn(this.div,t),this.show(this.div)))}show(t){this.element.innerHTML="",this.element.append(t)}getFocusableElement(){let t=this.element.parentElement;if(null==t||0!==t.tabIndex&&-1!==t.tabIndex)throw Error("AG Charts - the focus indicator must be a child of a focusable element");return t}overrideFocusVisible(t){this.getFocusableElement().style.setProperty("opacity",{true:"1",false:"0",undefined:""}[`${t}`])}isFocusVisible(){let t=this.getFocusableElement();return null!=t&&"1"===tt().getComputedStyle(t).opacity}},nf=class{set textContent(t){this.textElement.textContent=t;let e=this.textElement,i=e.getBBox?.();i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}constructor(){this.textElement=ti("http://www.w3.org/2000/svg","text"),this.textElement.role="presentation",this.svgElement=ti("http://www.w3.org/2000/svg","svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.boundedContainer=te("div"),this.boundedContainer.appendChild(this.svgElement),this.boundedContainer.role="presentation"}remove(){this.boundedContainer.remove()}getContainer(){return this.boundedContainer}updateBounds(t){tn(this.boundedContainer,t)}};function nx(t,e){return e.params?.type===t}function nM(t){let e={params:t,result:void 0};return e.result=function(t){if("button"===t)return te("button");if("slider"===t)return te("input");if(["toolbar","group","list"].includes(t))return te("div");if("text"===t)return new nf;if("listswitch"===t)return{button:te("button"),listitem:te("div")};throw Error("AG Charts - error allocating meta")}(e.params.type),e}var nb=class{constructor(t,e){this.localeManager=t,this.domManager=e,this.destroyFns=[]}destroy(){this.destroyFns.forEach(t=>t())}addLocalisation(t){t(),this.destroyFns.push(this.localeManager.addListener("locale-changed",t))}createProxyContainer(t){let{params:e,result:i}=nM(t);return this.domManager.addChild("canvas-proxy",e.id,i),i.classList.add(...e.classList,"ag-charts-proxy-container"),i.role=e.type,"ariaOrientation"in e&&(i.ariaOrientation=e.ariaOrientation),"boolean"==typeof e.ariaHidden&&(i.ariaHidden=e.ariaHidden.toString()),this.addLocalisation(()=>{i.ariaLabel=this.localeManager.t(e.ariaLabel.id,e.ariaLabel.params)}),i}createProxyElement(t){let e=nM(t);if(nx("button",e)){let{params:t,result:i}=e;if(this.initInteract(t,i),i.style.pointerEvents="auto","string"==typeof t.textContent)i.textContent=t.textContent;else{let{textContent:e}=t;this.addLocalisation(()=>{i.textContent=this.localeManager.t(e.id,e.params)})}this.setParent(t,i)}if(nx("slider",e)){let{params:t,result:i}=e;this.initInteract(t,i),i.type="range",i.role="presentation",i.style.margin="0px",i.ariaOrientation=t.ariaOrientation,this.addLocalisation(()=>{i.ariaLabel=this.localeManager.t(t.ariaLabel.id,t.ariaLabel.params)}),this.setParent(t,i)}if(nx("text",e)){let{params:t,result:i}=e;this.initElement(t,i.getContainer()),this.setParent(t,i.getContainer())}if(nx("listswitch",e)){let{params:t,result:{button:i,listitem:a}}=e;this.initInteract(t,i),i.style.width="100%",i.style.height="100%",i.textContent=t.textContent,i.role="switch",i.ariaChecked=t.ariaChecked.toString(),i.style.pointerEvents="auto",i.setAttribute("aria-describedby",t.ariaDescribedBy),a.role="listitem",a.style.position="absolute",a.replaceChildren(i),this.setParent(t,a)}return e.result}initElement(t,e){let{id:i}=t;e.id=i,e.classList.toggle("ag-charts-proxy-elem",!0)}initInteract(t,e){let{onclick:i,ondblclick:a,onmouseenter:s,onmouseleave:r,oncontextmenu:n,onchange:o,onfocus:l,onblur:h,tabIndex:d}=t;this.initElement(t,e),void 0!==d&&(e.tabIndex=d),i&&e.addEventListener("click",i),a&&e.addEventListener("dblclick",a),s&&e.addEventListener("mouseenter",s),r&&e.addEventListener("mouseleave",r),n&&e.addEventListener("contextmenu",n),l&&e.addEventListener("focus",l),h&&e.addEventListener("blur",h),o&&e.addEventListener("change",o)}setParent(t,e){let{id:i,parent:a}=t;"string"==typeof a?this.domManager.addChild("canvas-proxy",i,e,{where:a,query:".ag-charts-series-area"}):a.appendChild(e)}},nv=/\$\{(\w+)}(?:\[(\w+)])?/gi,nI={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},nD=({defaultValue:t,variables:e})=>t?.replaceAll(nv,(t,i,a)=>{let s=e[i],r=null!=a?nI[a]:null;return(null!=a&&null==r&&y.warnOnce(`Format style [${a}] is not supported`),null!=r)?r.format(s):"number"==typeof s?nI.number.format(s):s instanceof Date?nI.datetime.format(s):String(s)}),nS=class extends rG{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(t){this.localeText!==t&&(this.localeText=t,this.dispatch("locale-changed"))}setLocaleTextFormatter(t){this.getLocaleText=t,this.getLocaleText!==t&&(this.getLocaleText=t,this.dispatch("locale-changed"))}t(t,e={}){let{localeText:i=l,getLocaleText:a}=this,s=i[t];return a?.({key:t,defaultValue:s,variables:e})??nD({key:t,defaultValue:s,variables:e})??t}},nN=class t{constructor(e){this.enabled=!0,this.width=600,this.height=300;let{width:i,height:a,pixelRatio:s,canvasElement:r,willReadFrequently:n=!1}=e;this.pixelRatio=!function(){if("undefined"==typeof navigator)return!1;let t=/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/.exec(navigator.userAgent);if(null==t)return!1;let[e,i]=t[1].split("_").map(Number);return e<16||16===e&&i<6}()?s??tt("devicePixelRatio"):1,this.element=r??te("canvas"),this.element.style.display="block",this.element.style.width=(i??this.width)+"px",this.element.style.height=(a??this.height)+"px",this.element.width=Math.round((i??this.width)*this.pixelRatio),this.element.height=Math.round((a??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:n}),this.onEnabledChange(),this.resize(i??0,a??0),t.debugContext(this.context)}static is(e){return e instanceof t}drawImage(t,e=0,i=0){return t.drawImage(this.context.canvas,e,i)}toDataURL(t){return this.element.toDataURL(t)}resize(t,e){if(!(t>0&&e>0))return;let{element:i,context:a,pixelRatio:s}=this;i.width=Math.round(t*s),i.height=Math.round(e*s),a.setTransform(s,0,0,s,0,0),i.style.width=t+"px",i.style.height=e+"px",this.width=t,this.height=e}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}static debugContext(t){if(aN.check("canvas")){let e=t.save.bind(t),i=t.restore.bind(t),a=0;Object.assign(t,{save(){e(),a++},restore(){if(0===a)throw Error("AG Charts - Unable to restore() past depth 0");i(),a--},verifyDepthZero(){if(0!==a)throw Error(`AG Charts - Save/restore depth is non-zero: ${a}`)}})}}};o([sc(t=>t.onEnabledChange())],nN.prototype,"enabled",2);var nL=class t{constructor(t,e){this.canvas=t,this.markDirty=e,this.debug=aN.create(!0,"scene"),this.layersMap=new Map,this.nextZIndex=0,this.nextLayerId=0}static sortLayers(t,e){return ar([t.zIndex,...t.zIndexSubOrder??[void 0,void 0],t.id],[e.zIndex,...e.zIndexSubOrder??[void 0,void 0],e.id],aa)}get size(){return this.layersMap.size}forEach(e){Array.from(this.layersMap.values()).sort(t.sortLayers).forEach(e)}resize(t,e){this.canvas.resize(t,e),this.layersMap.forEach(({canvas:i})=>i.resize(t,e))}addLayer(t){let{width:e,height:i,pixelRatio:a}=this.canvas,{zIndex:s=this.nextZIndex++,name:r,zIndexSubOrder:n,getComputedOpacity:o,getVisibility:l}=t,h=new nN({width:e,height:i,pixelRatio:a});return s>=this.nextZIndex&&(this.nextZIndex=s+1),this.layersMap.set(h,{id:this.nextLayerId++,name:r,canvas:h,zIndex:s,zIndexSubOrder:n,getComputedOpacity:o,getVisibility:l}),this.debug("Scene.addLayer() - layers",this.layersMap),h}removeLayer(t){this.layersMap.has(t)&&(this.layersMap.delete(t),t.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}moveLayer(t,e,i){let a=this.layersMap.get(t);a&&(a.zIndex=e,a.zIndexSubOrder=i,this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layersMap))}clear(){this.layersMap.clear()}},nA=class t{constructor(){this.offscreenCanvas="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(0,0):te("canvas"),t.offscreenCanvasCount++;let e=this.offscreenCanvas.getContext("2d");if(null==e)throw TypeError("AG Charts - invalid 2d context");this.renderCtx={ctx:e,devicePixelRatio:1,forceRender:!0,resized:!1,debugNodes:{}}}resize({spritePixelRatio:t,spriteWidth:e,spriteHeight:i}){this.offscreenCanvas.width=Math.max(e,0)*t,this.offscreenCanvas.height=Math.max(i,0)*t}renderSprite(t,e){t=H(t);let{renderCtx:i,renderCtx:{ctx:a},offscreenCanvas:s}=this,{scale:r=1,translateX:n=0,translateY:o=0}=e??{};for(let e of(a.resetTransform(),a.clearRect(0,0,s.width,s.height),a.save(),a.beginPath(),a.setTransform(r,0,0,r,n,o),t))e.preRender(),e.render(i);if(a.closePath(),a.restore(),"transferToImageBitmap"in this.offscreenCanvas)return this.offscreenCanvas.transferToImageBitmap();let l=te("canvas");return l.style.display="block",l.style.width=s.width+"px",l.style.height=s.height+"px",l.getContext("2d")?.putImageData(a.getImageData(0,0,s.width,s.height),0,0),l}};function nw(t,e,i,a,s={},r=tI.zero){if(!aN.check("scene:stats","scene:stats:verbose"))return;let{layersRendered:n=0,layersSkipped:o=0,nodesRendered:l=0,nodesSkipped:h=0}=a??{},d=performance.now(),{start:u,...c}=e,p=Object.entries(c).map(([t,e])=>nO(t,e)).filter(t=>null!=t).join(" + "),g=Object.entries(s).map(([t,e])=>`${t}: ${e}`).join(" ; "),y=aN.check("scene:stats:verbose"),m=[`${nO("⏱️",u,d)} (${p})`,`${g}`,`Layers: ${y?nE(n,o):t.size}; Sprites: ${nA.offscreenCanvasCount}`,y?`Nodes: ${nE(l,h)}`:null].filter(tJ),f=new a2(t=>i.measureText(t)),x=new Map(m.map(t=>[t,f.measureLines(t)])),M=Math.max(...Array.from(x.values(),t=>t.width)),b=function(t,e){let i=0;for(let a of t)i+=e(a);return i}(x.values(),t=>t.height),v=2+r.x;i.save(),i.fillStyle="white",i.fillRect(v,0,M,b),i.fillStyle="black";let I=0;for(let[t,e]of x.entries())I+=e.height,i.fillText(t,v,I);i.restore()}nA.offscreenCanvasCount=0;var nC=new Set,nT=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function nk(t,e){if(!aN.check(!0,"scene"))return{};let{parentNode:i}=t,a=0;return{node:"json"===e?function(t){let{...e}=t;for(let t in e)nT.has(t)||"number"==typeof e[t]||"string"==typeof e[t]||"boolean"==typeof e[t]||(nC.add(t),delete e[t]);return e}(t):t,name:t.name??t.id,dirty:tD[t.dirty],...i?.isVirtual?{virtualParentDirty:tD[i.dirty],virtualParent:i}:{},...Array.from(t.children(!1),t=>nk(t,e)).reduce((t,e)=>{let{name:i}=e,{node:{visible:s,opacity:r,zIndex:n,zIndexSubOrder:o,translationX:l,translationY:h,rotation:d,scalingX:u,scalingY:c},node:p,virtualParent:g}=e;(!s||r<=0)&&(i=`(${i})`),sk.is(p)&&(i=`*${i}*`);let y=o?.map(t=>"function"==typeof t?`${t()} (fn)`:t).join(" / "),m=[`${(a++).toString().padStart(3,"0")}|`,`${i??"<unknown>"}`,`z: ${n}`,y&&`zo: ${y}`,g&&"(virtual parent)",l&&`x: ${l}`,h&&`y: ${h}`,d&&`r: ${d}`,null!=u&&1!==u&&`sx: ${u}`,null!=c&&1!==c&&`sy: ${c}`].filter(t=>!!t).join(" "),f=m,x=1;for(;null!=t[f]&&x<100;)f=`${m} (${x++})`;return t[f]=e,t},{})}}function nE(t,e){let i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`}function nO(t,e,i){return`${t}: ${Math.round(100*(null!=i?i-e:e))/100}ms`}var nj=class{constructor(t){this.debug=aN.create(!0,"scene"),this.id=_(this),this.root=null,this.pendingSize=null,this.isDirty=!1,this.canvas=new nN(t),this.layersManager=new nL(this.canvas,()=>{this.isDirty=!0})}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}setContainer(t){let{element:e}=this.canvas;return e.parentElement?.removeChild(e),t.appendChild(e),this}setRoot(t){return this.root===t||(this.isDirty=!0,this.root?._setLayerManager(),this.root=t,t&&(t.visible=!0,t._setLayerManager(this.layersManager))),this}attachNode(t){return this.appendChild(t),()=>this.removeChild(t)}appendChild(t){return this.root?.appendChild(t),this}removeChild(t){return this.root?.removeChild(t),this}download(t,e){ta(this.canvas.toDataURL(e),t?.trim()??"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,e){return t=Math.round(t),e=Math.round(e),t>0&&e>0&&(t!==this.width||e!==this.height)&&(this.pendingSize=[t,e],this.isDirty=!0,!0)}async render(t){let{debugSplitTimes:e={start:performance.now()},extraDebugStats:i,seriesRect:a}=t??{},{canvas:s,canvas:{context:r}={},root:n,pendingSize:o}=this;if(!r)return;let l=performance.now();if(o&&(this.layersManager.resize(...o),this.pendingSize=null),n&&!n.visible){this.isDirty=!1;return}if(n&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{redrawType:tD[n.dirty],tree:nk(n,"console")}),nw(this.layersManager,e,r,void 0,i,a);return}let h={ctx:r,devicePixelRatio:this.canvas.pixelRatio??1,forceRender:!0,resized:!!o,debugNodes:{}};aN.check("scene:stats:verbose")&&(h.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0}),function(t){let e=eC(tt("agChartsSceneDebug")),i=[];for(let t of e)"layout"===t?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(t);t.debugNodeSearch=i}(h);let d=!1;if((!n||n.dirty>=1)&&(d=!0,s.clear()),n&&aN.check("scene:dirtyTree")){let{dirtyTree:t,paths:e}=function t(e){if(0===e.dirty)return{dirtyTree:{},paths:[]};let i=Array.from(e.children(),e=>t(e)).filter(t=>t.paths.length>0),a=ax.is(e)?e.name??e.id:e.id,s=i.length?i.flatMap(t=>t.paths).map(t=>`${a}.${t}`):[a];return{dirtyTree:{name:a,node:e,dirty:tD[e.dirty],...i.map(t=>t.dirtyTree).filter(t=>null!=t.dirty).reduce((t,e)=>(t[e.name??"<unknown>"]=e,t),{})},paths:s}}(n);aN.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}if(n&&d){if(n.visible&&n.preRender(),this.debug.check()){let t=nk(n,"console");this.debug("Scene.render() - before",{redrawType:tD[n.dirty],canvasCleared:d,tree:t})}n.visible&&(r.save(),n.render(h),r.restore())}if(e["✍️"]=performance.now()-l,this.layersManager.size&&d){let t=performance.now();r.save(),r.resetTransform(),this.layersManager.forEach(t=>{t.canvas.enabled&&t.getVisibility()&&(r.globalAlpha=t.getComputedOpacity(),t.canvas.drawImage(r))}),r.restore(),e["⛙"]=performance.now()-t}r.verifyDepthZero?.(),this.isDirty=!1,nw(this.layersManager,e,r,h.stats,i,a),function(t,e){for(let[i,a]of(t.save(),Object.entries(e))){let e=am.toCanvas(a);if(!e){y.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,e.x,e.y,e.width),t.fillText(i,e.x,e.y,e.width)}t.restore()}(r,h.debugNodes),n&&this.debug.check()&&this.debug("Scene.render() - after",{redrawType:tD[n.dirty],tree:nk(n,"console"),canvasCleared:d})}toSVG(){let t=this.root?.toSVG();if(null==t)return;let e=document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),null!=t.defs){let i=document.createElementNS("http://www.w3.org/2000/svg","defs");i.append(...t.defs),e.append(i)}return e.append(...t.elements),e.outerHTML}strip(){let{context:t,pixelRatio:e}=this.canvas;t.setTransform(e,0,0,e,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};nj.className="Scene";var nR=class{constructor(){this.cache=new WeakMap}call(t,...e){let i;let a=this.cache.get(t);try{i=JSON.stringify(e)}catch(i){return this.invoke(t,e,a)}return(null==a&&(a=new Map,this.cache.set(t,a)),a.has(i))?a.get(i):this.invoke(t,e,a,i)}invoke(t,e,i,a){try{let s=t(...e);return i&&null!=a&&i.set(a,s),s}catch(t){y.warnOnce("User callback errored, ignoring",t);return}}invalidateCache(){this.cache=new WeakMap}},nz=class extends rF{constructor(t){super(),this.annotationRoot=t,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(t){return tZ(t)}restoreMemento(t,e,i){this.annotations=this.cleanData(i).map(t=>{let e=this.getAnnotationTypeStyles(t.type);return t8(t,e)}),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(t){this.annotations=this.cleanData(t??[])}attachNode(t){return this.annotationRoot.append(t),()=>(this.annotationRoot?.removeChild(t),this)}setAnnotationStyles(t){this.styles=t}getAnnotationTypeStyles(t){return this.styles?.[t]}cleanData(t){for(let e of t)"textAlign"in e&&delete e.textAlign;return t}},nP=class{constructor(t){this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new sk({name:"Axes-Grids",zIndex:1}),this.axisGroup=new sk({name:"Axes",zIndex:2}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup)}updateAxes(t,e){for(let i of t)e.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(let i of e)t?.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup);for(let t of(this.axes.clear(),e)){let e=t.createAxisContext();this.axes.has(e.direction)?this.axes.get(e.direction)?.push(e):this.axes.set(e.direction,[e])}}getAxisContext(t){return this.axes.get(t)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},nB=class extends rG{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=aN.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){"function"==typeof t&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return g(t=>this.fetch(t),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return g((t,e)=>{this.debug(`DataService - dispatching 'data-load' | ${t}`),this.dispatch("data-load",{type:"data-load",data:e})},t,{leading:!0,trailing:!0})}async fetch(t){let e;if(!this.dataSourceCallback)throw Error("DataService - [dataSource.getData] callback not initialised");let i=performance.now(),a=this.requestCounter++;this.debug(`DataService - requesting | ${a}`),this.freshRequests.push(a);try{e=await this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-i}ms | ${a}`)}catch(t){this.debug(`DataService - request failed | ${a}`),y.errorOnce(`DataService - request failed | [${t}]`)}this.isLoadingInitialData=!1;let s=this.freshRequests.findIndex(t=>t===a);if(-1===s||this.dispatchOnlyLatest&&s!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${a}`);return}this.freshRequests=this.freshRequests.slice(s+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(e)?this.throttledDispatch(a,e):this.dispatch("data-error")}};o([su({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],nB.prototype,"dispatchThrottle",2),o([su({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],nB.prototype,"requestThrottle",2);var nG=class{constructor(t){this.maxAnimationTime=t,this.debug=aN.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(ey.map(t=>[t,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(ey[this.currentPhase])??[]}checkOverlappingId(t){null!=t&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${t}`),this.skip())}addAnimation(t){if(!t.isComplete){if(ey.indexOf(t.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",t.id),t.stop();return}this.controllers.set(t.id,t),this.phases.get(t.phase)?.push(t)}}removeAnimation(t){this.controllers.delete(t.id);let e=this.phases.get(t.phase),i=e?.indexOf(t);null!=i&&i>=0&&e?.splice(i,1)}progress(t){if(!this.isReady)return;let e=0===t?.01:t,i=()=>{let t=ey[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:t,phaseMeta:em[t]}},{phase:a,phaseControllers:s,phaseMeta:r}=i(),n=()=>null==ey[this.currentPhase],o=()=>{for({phase:a,phaseControllers:s,phaseMeta:r}=i();!n()&&0===s.length;)this.currentPhase++,({phase:a,phaseControllers:s,phaseMeta:r}=i()),this.debug(`AnimationBatch - phase changing to ${a}`,{unusedTime:e},s)},l=this.controllers.size;this.debug(`AnimationBatch - ${t}ms; phase ${a} with ${s?.length} of ${l}`);do{let t=e,i=r.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed,a=0;for(let r of s)i?r.stop():e=Math.min(r.update(t),e),r.isComplete&&(a++,this.removeAnimation(r));this.animationTimeConsumed+=t-e,this.debug(`AnimationBatch - updated ${s.length} controllers; ${a} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),o()}while(e>0&&!n());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let t=!0;for(let[,e]of this.controllers)if(e.duration>0&&!0!==em[e.phase].skipIfNoEarlierAnimations){t=!1;break}if(!t)for(let[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(t=!0){if(!1===this.skipAnimations&&!0===t){for(let t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(let t of this.controllers.values())t.play()}pause(){for(let t of this.controllers.values())t.pause()}stop(){for(let t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(t){y.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(t){if(null!=t&&this.controllers.has(t)){let e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(let e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(t=>t()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}};function nF(t){let e={...t,preventDefault(){e.sourceEvent?.preventDefault()}};return e}function nU(t,e){t.dispatchWrapHandlers(e.type,(t,e)=>t(e),nF(e))}var nY=["drag-start","drag","drag-end"],nZ=[...nY,"click","dblclick","contextmenu","hover","leave","enter","page-left","wheel"],n_=["blur","focus"],nV=["keydown","keyup"],nW=["mousemove","mouseup"],nH=["pagehide","mousemove","mouseup"],n$=["dblclick","contextmenu","mousedown","mouseleave","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","blur","focus","keydown","keyup"],nQ=class t extends rY{constructor(t,e){for(let i of(super(),this.keyboardOptions=t,this.domManager=e,this.debug=aN.create(!0,"interaction"),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=34,this.rootElement=this.domManager.getShadowDocumentRoot(),n$))i.startsWith("touch")||"wheel"===i?this.domManager.addEventListener(i,this.eventHandler,{passive:!1}):this.domManager.addEventListener(i,this.eventHandler);for(let t of nH)tt().addEventListener(t,this.eventHandler);this.containerChanged(!0),this.domManager.addListener("container-changed",()=>this.containerChanged())}containerChanged(t=!1){let e=this.domManager.getShadowDocumentRoot();if(t||e!==this.rootElement){for(let t of nW)this.rootElement?.removeEventListener(t,this.eventHandler);for(let t of(this.rootElement=e,this.debug("[InteractionManager] Switching rootElement to:",this.rootElement),nW))this.rootElement?.addEventListener(t,this.eventHandler)}}destroy(){for(let t of(super.destroy(),nH))tt().removeEventListener(t,this.eventHandler);for(let t of nW)this.rootElement?.removeEventListener(t,this.eventHandler);for(let t of n$)this.domManager.removeEventListener(t,this.eventHandler);this.domManager.removeStyles("interactionManager")}pushState(t){this.stateQueue|=t}popState(t){this.stateQueue&=~t}getState(){return this.stateQueue&-this.stateQueue}processEvent(t){this.debug("Received raw event",t);let e=this.decideInteractionEventTypes(t);for(let i of(null==e||Array.isArray(e)||(e=[e]),e??[]))this.dispatchEvent(t,i).catch(t=>y.errorOnce(t))}async dispatchEvent(t,e){if(nZ.includes(e)){this.dispatchPointerEvent(t,e);return}let{relatedElement:i,targetElement:a}=this.extractElements(t);n_.includes(e)?this.dispatchTypedEvent(this.listeners,{type:e,sourceEvent:t,relatedElement:i,targetElement:a}):nV.includes(e)&&this.dispatchTypedEvent(this.listeners,{type:e,sourceEvent:t,relatedElement:i,targetElement:a})}dispatchTypedEvent(t,e){let i=nF(e);this.debug("Dispatching typed event",i,this.getState()),t.dispatchWrapHandlers(e.type,(t,e)=>t(e),i)}extractElements(t){let e,i;return"relatedTarget"in t&&t.relatedTarget instanceof HTMLElement&&(e=t.relatedTarget),"target"in t&&t.target instanceof HTMLElement&&(i=t.target),{relatedElement:e,targetElement:i}}dispatchPointerEvent(t,e){let i=this.calculateCoordinates(t);if(null==i)return;let a=this.buildPointerEvent({type:e,event:t,...i});this.debug("Dispatching pointer event",a,this.getState()),nU(this.listeners,a)}getEventHTMLTarget(t){return t.target instanceof HTMLElement?t.target:t.currentTarget instanceof HTMLElement?t.currentTarget:void 0}recordDown(t){t instanceof MouseEvent&&(er(["offsetX","offsetY"],this.clickHistory[0],t),er(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),er(["offsetX","offsetY"],this.dblclickHistory[0],t)),this.dragPreStartElement=this.getEventHTMLTarget(t)}recordUp(t){return t instanceof MouseEvent&&er(["offsetX","offsetY"],this.dblclickHistory[1],t),this.dragPreStartElement=void 0,!!this.dragStartElement&&(this.dragStartElement=void 0,!0)}decideInteractionEventTypes(t){switch(t.type){case"blur":case"focus":case"keydown":case"keyup":return this.keyboardOptions.enabled?t.type:void 0;case"dblclick":case"contextmenu":case"wheel":return t.type;case"mousedown":if(!this.isEventOverElement(t))return;this.mouseDown=!0,this.recordDown(t);return;case"touchstart":if(!this.isEventOverElement(t))return;this.touchDown=!0,this.recordDown(t);return;case"touchmove":case"mousemove":if(!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(t))return;if(!this.mouseDown&&!this.touchDown)return"hover";if(this.dragStartElement)return"drag";return this.dragStartElement=this.dragPreStartElement,this.dragPreStartElement=void 0,["drag-start","drag"];case"mouseup":if(!this.mouseDown&&!this.isEventOverElement(t))return;return this.mouseDown=!1,this.recordUp(t)?"drag-end":"click";case"touchend":if(!this.touchDown&&!this.isEventOverElement(t))return;return this.touchDown=!1,this.recordUp(t)?"drag-end":"click";case"mouseleave":case"touchcancel":return"leave";case"mouseenter":return"enter";case"pagehide":return"page-left"}}isEventOverElement(t){return this.domManager.isEventOverElement(t)}calculateCoordinates(e){if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if("undefined"!=typeof TouchEvent&&e instanceof TouchEvent){let{clientX:i,clientY:a,pageX:s,pageY:r}=e.touches[0]??e.changedTouches[0];return{...t.NULL_COORDS,clientX:i,clientY:a,pageX:s,pageY:r}}if(e instanceof PageTransitionEvent){if(e.persisted)return;return t.NULL_COORDS}}getMouseEventCoords(t){let{clientX:e,clientY:i,pageX:a,pageY:s}=t,{offsetX:r,offsetY:n}=t,o=this.getEventHTMLTarget(t),{x:l=0,y:h=0}=o?this.domManager.calculateCanvasPosition(o):{};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){let t=this.domManager.calculateCanvasPosition(this.dragStartElement);r-=t.x-l,n-=t.y-h}else r+=l,n+=h;return{clientX:e,clientY:i,pageX:a,pageY:s,offsetX:r,offsetY:n}}isWheelEvent(t){return"wheel"===t.type}buildPointerEvent(t){let{type:e,event:i,clientX:a,clientY:s}=t,{offsetX:r,offsetY:n,pageX:o,pageY:l}=t;if(!t0(r)||!t0(n)){let t=this.domManager.getBoundingClientRect();r=a-t.left,n=s-t.top}if(!t0(o)||!t0(l)){let t=this.rootElement?.getBoundingClientRect();o=a-(t?.left??0),l=s-(t?.top??0)}let[h,d]=[NaN,NaN];if(this.isWheelEvent(i)){let t=0===i.deltaMode?.01:1;h=i.deltaX*t,d=i.deltaY*t}let u=[];"click"===i.type?u=this.clickHistory:"dblclick"===i.type&&(u=this.dblclickHistory);let{relatedElement:c,targetElement:p}=this.extractElements(i),g={type:e,offsetX:r,offsetY:n,pageX:o,pageY:l,deltaX:h,deltaY:d,button:"button"in i?Number(i.button):0,pointerHistory:u,sourceEvent:i,relatedElement:c,targetElement:p};return this.debug("InteractionManager - builtEvent: ",g,this.getState()),g}};function nX(t){return null==t||!isNaN(t)&&t>=0&&t<=2}nQ.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var nK=class{constructor(t,e){this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new nG(1.5*this.defaultDuration),this.debug=aN.create(!0,"animation"),this.events=new rj,this.rafAvailable="undefined"!=typeof requestAnimationFrame,this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(t,e){return this.events.on(t,e)}animate(t){let e=this.batch;try{e.checkOverlappingId(t.id)}catch(t){this.failsafeOnError(t);return}let{id:i}=t;null==i&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);let a=this.isSkipped()||"none"===t.phase;a&&this.debug("AnimationManager - skipping animation");let{delay:s,duration:r}=t;if(!nX(s))throw Error(`Animation delay of ${s} is unsupported (${i})`);if(!nX(r))throw Error(`Animation duration of ${r} is unsupported (${i})`);let n=new eM({...t,id:i,skip:a,autoplay:!!this.isPlaying&&t.autoplay,phase:t.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(n,this.defaultDuration))return this.batch.addAnimation(n),n}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(t=!0){this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=tt().requestAnimationFrame(t)}forceTimeJump(t,e){return!1}requestAnimation(){let t;if(!this.rafAvailable||!this.batch.isActive()||null!==this.requestId)return;let e=async i=>{let a=async()=>{let e=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:e}),this.interactionManager.pushState(2);try{this.batch.progress(e)}catch(t){this.failsafeOnError(t)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:e})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(a):await this.chartUpdateMutex.acquire(a),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t,e=!0){y.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new nG(1.5*this.defaultDuration),!0===t&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}destroy(){this.stop(),this.events.clear()}},nJ=class extends rF{legendItemClick(t,e,i,a){this.listeners.dispatch("legend-item-click",{type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:a})}legendItemDoubleClick(t,e,i,a,s){this.listeners.dispatch("legend-item-double-click",{type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:s,numVisibleItems:a})}axisHover(t,e){this.listeners.dispatch("axis-hover",{type:"axis-hover",axisId:t,direction:e})}},nq=class t{constructor(t){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new rG;let{Default:e,ContextMenu:i}=rU;this.destroyFns=[t.listenAll("contextmenu",t=>this.onContextMenu(t),e|i)]}destroy(){this.destroyFns.forEach(t=>t())}onContextMenu(e){"all"===t.toContextType(e.region)&&this.dispatchContext("all",e,{})}static toContextType(t){return"legend"===t||"series"===t?t:"all"}static check(t,e){return e.type===t}static checkCallback(t,e,i){return t===e}dispatchContext(t,e,i,a){let{sourceEvent:s}=e,r=a?.x??e.offsetX,n=a?.y??e.offsetY;s.stopPropagation(),this.listeners.dispatch("",nF({type:t,x:r,y:n,context:i,sourceEvent:s}))}addListener(t){return this.listeners.addListener("",t)}filterActions(t){return this.defaultActions.filter(e=>e.id&&!this.hiddenActions.has(e.id)&&["all",t].includes(e.type))}registerDefaultAction(t){let e=null!=t.id&&!this.defaultActions.some(({id:e})=>e===t.id);return e&&this.defaultActions.push(t),()=>{let i=e?this.defaultActions.findIndex(({id:e})=>e===t.id):-1;-1!==i&&this.defaultActions.splice(i,1)}}enableAction(t){this.disabledActions.delete(t)}disableAction(t){this.disabledActions.add(t)}showAction(t){this.hiddenActions.add(t)}hideAction(t){this.hiddenActions.delete(t)}isDisabled(t){return this.disabledActions.has(t)}},n0=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),void 0!==e&&super.set(t,e),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}},n1=(t=>(t.Auto="auto",t.Default="default",t.Grab="grab",t.Grabbing="grabbing",t.Move="move",t.NotAllowed="not-allowed",t.Pointer="pointer",t.EWResize="ew-resize",t.NSResize="ns-resize",t.ZoomIn="zoom-in",t.ZoomOut="zoom-out",t))(n1||{}),n2=class{constructor(t){this.domManager=t,this.stateTracker=new n0("default")}updateCursor(t,e){this.stateTracker.set(t,e),this.domManager.updateCursor(this.stateTracker.stateValue())}getCursor(){return this.domManager.getCursor()}};function n4(t,e){return Math.sqrt(function(t,e){let i=t.screenX-e.screenX,a=t.screenY-e.screenY;return i*i+a*a}(t,e))}var n3=class extends rF{constructor(t){super(),this.domManager=t,this.touchstart=t=>this.onTouchStart(t),this.touchmove=t=>this.onTouchMove(t),this.touchend=t=>this.onTouchEnd(t),this.touchcancel=t=>this.onTouchCancel(t),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.domManager.addEventListener("touchstart",this.touchstart,{passive:!0}),this.domManager.addEventListener("touchmove",this.touchmove,{passive:!1}),this.domManager.addEventListener("touchend",this.touchend),this.domManager.addEventListener("touchcancel",this.touchcancel)}destroy(){this.domManager.removeEventListener("touchstart",this.touchstart),this.domManager.removeEventListener("touchmove",this.touchmove),this.domManager.removeEventListener("touchend",this.touchend),this.domManager.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(t){let{touches:e}=t,{finger1:i,finger2:a}=this.pinch;if(0!==this.pinch.status&&2===e.length){if(e[0].identifier===i.identifier&&e[1].identifier===a.identifier)return[e[0],e[1]];if(e[0].identifier===a.identifier&&e[1].identifier===i.identifier)return[e[1],e[0]]}}copyTouchData(t){let e=["identifier","screenX","screenY"];er(e,this.pinch.finger1,t.touches[0]),er(e,this.pinch.finger2,t.touches[1]),this.pinch.distance=n4(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(t,e,i){let{finger1:a,finger2:s,origin:r}=this.pinch;this.listeners.dispatch(t,nF({sourceEvent:i,type:t,finger1:a,finger2:s,deltaDistance:e,origin:r}))}onTouchStart(t){this.stopPinchTracking(t);let{pinch:e}=this;2===t.touches.length&&(e.status=1,this.copyTouchData(t),e.origin.x=(t.touches[0].clientX+t.touches[1].clientX)/2,e.origin.y=(t.touches[0].clientY+t.touches[1].clientY)/2)}onTouchMove(t){let e=this.findPinchTouches(t);if(void 0!==e){let[i,a]=e,{pinch:s}=this,r=n4(i,a),n=r-s.distance;1===s.status?Math.abs(n)>1&&(s.status=2,this.copyTouchData(t),this.dispatchPinchEvent("pinch-start",0,t)):2===s.status?(s.distance=r,this.copyTouchData(t),this.dispatchPinchEvent("pinch-move",n,t)):y.error(`unexpected pinch.status: ${s.status}`)}}onTouchEnd(t){this.stopPinchTracking(t)}onTouchCancel(t){this.stopPinchTracking(t)}stopPinchTracking(t){let{pinch:e}=this;2===e.status&&this.dispatchPinchEvent("pinch-end",0,t),this.pinch.status=0}},n5=class extends rF{constructor(){super(...arguments),this.highlightStates=new n0}updateHighlight(t,e){let{activeHighlight:i}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:t})}getActiveHighlight(){return this.activeHighlight}isEqual(t,e){return t===e||null!=t&&null!=e&&t?.series===e?.series&&t?.itemId===e?.itemId&&t?.datum===e?.datum}},n9=class extends rY{constructor(t,e,i){super(),this.focusIndicator=t,this.interactionManager=e,this.previousInputDevice="keyboard",this.destroyFns.push(e.addListener("click",()=>this.onClick(),41),e.addListener("hover",()=>this.onMouse(),41),e.addListener("drag-start",()=>this.onMouse(),41),e.addListener("blur",t=>this.onBlur(t),63),e.addListener("focus",t=>this.onFocus(t),63),e.addListener("keydown",t=>this.onKeyDown(t),63)),this.focusIndicator.overrideFocusVisible("integrated"!==i&&void 0)}getState(){return this.interactionManager.getState()}destroy(){super.destroy()}onClick(){this.focusIndicator.overrideFocusVisible(!1),this.previousInputDevice="mouse"}onMouse(){this.previousInputDevice="mouse"}onBlur(t){this.focusIndicator.overrideFocusVisible(void 0),this.dispatch("blur",0,t)}onFocus(t){this.dispatch("focus",0,t)}onKeyDown(t){let e=this.getState(),{key:i,code:a,altKey:s,shiftKey:r,metaKey:n,ctrlKey:o}=t.sourceEvent;if(o||n){if("y"===i||"z"===i&&r)return this.focusIndicator.overrideFocusVisible("keyboard"===this.previousInputDevice),this.dispatch("redo",0,t);if("z"===i)return this.focusIndicator.overrideFocusVisible("keyboard"===this.previousInputDevice),this.dispatch("undo",0,t)}if(9&e){this.focusIndicator.overrideFocusVisible(!1);return}switch(i){case"+":return this.dispatch("nav-zoom",1,t);case"-":return this.dispatch("nav-zoom",-1,t)}if(!s&&!r&&!n&&!o)switch(this.focusIndicator.overrideFocusVisible(!0),a){case"ArrowDown":return this.dispatch("nav-vert",1,t);case"ArrowUp":return this.dispatch("nav-vert",-1,t);case"ArrowLeft":return this.dispatch("nav-hori",-1,t);case"ArrowRight":return this.dispatch("nav-hori",1,t);case"ZoomIn":case"Add":return this.dispatch("nav-zoom",1,t);case"ZoomOut":case"Substract":return this.dispatch("nav-zoom",-1,t);case"Space":case"Enter":return this.dispatch("submit",0,t)}}dispatch(t,e,i){let{previousInputDevice:a}=this;nU(this.listeners,{type:t,delta:e,sourceEvent:i,previousInputDevice:a}),"keydown"!==i.type||["redo","undo","nav-zoom"].includes(t)||(this.previousInputDevice="keyboard")}},n6=(t=>(t.NAVIGATOR="navigator",t.ROOT="root",t.SERIES="series",t.HORIZONTAL_AXES="horizontal-axes",t.VERTICAL_AXES="vertical-axes",t))(n6||{}),n8=class{constructor(t,e){this.node=t,this.overrideId=e}get id(){return this.overrideId??this.node.id}get visible(){return this.node.visible}toCanvasBBox(){return am.toCanvas(this.node)}fromCanvasPoint(t,e){return am.fromCanvasPoint(this.node,t,e)}},n7=class extends n8{constructor(t,e,i){super(t,i),this.bboxFn=e}toCanvasBBox(){return this.bboxFn()}},ot=class extends rG{};function oe(t,e,i,a,s=32){return t?.addListener(i,t=>{e.getState()&s&&a(t)})??(()=>{})}function oi(t){return t instanceof tw?new n8(t):t instanceof n8?t:new n8(t.node,t.id)}var oa=class{constructor(t){this.interactionManager=t,this.debug=aN.create(!0,"region"),this.isDragging=!1,this.leftCanvas=!1,this.regions=new Map,this.destroyFns=[],this.allRegionsListeners=new ot,this.destroyFns.push(...nZ.map(e=>t.addListener(e,this.processPointerEvent.bind(this),63)))}destroy(){for(let t of(this.destroyFns.forEach(t=>t()),this.current=void 0,this.regions.values()))t.listeners.destroy();this.regions.clear()}addRegion(t,...e){if(this.regions.has(t))throw Error(`AG Charts - Region: ${t} already exists`);let i={properties:{name:t,bboxproviders:e.map(oi)},listeners:new ot};return this.regions.set(t,i),this.makeObserver(i)}updateRegion(t,...e){let i=this.regions.get(t);if(i)i.properties.bboxproviders=e.map(oi);else throw Error("AG Charts - unknown region: "+t)}getRegion(t){return this.makeObserver(this.regions.get(t))}listenAll(t,e,i=32){return oe(this.allRegionsListeners,this.interactionManager,t,e,i)}makeObserver(t){let{interactionManager:e}=this;class i{addListener(i,a,s=32){return oe(t?.listeners,e,i,a,s)}}return new i}checkPointerHistory(t,e){for(let i of e.pointerHistory){let{region:e}=this.pickRegion(i.offsetX,i.offsetY)??{};if(t.properties.name!==e?.properties.name)return!1}return!0}dispatch(t,e){if(null==t)return;let i=t.region.properties.bboxproviders[0],a=0,s=0;if("offsetX"in e&&"offsetY"in e)({x:a,y:s}=i.fromCanvasPoint(e.offsetX,e.offsetY));else{let t=i.toCanvasBBox();a=t.width/2,s=t.height/2}let r=nF({...e,region:t.region.properties.name,bboxProviderId:t.bboxProvider?.id,regionOffsetX:a,regionOffsetY:s});this.debug("Dispatching region event: ",r),this.allRegionsListeners.dispatch(r.type,r),t.region.listeners.dispatch(r.type,r)}handleDragging(t){let{current:e}=this;switch(t.type){case"drag-start":this.isDragging=!0,this.leftCanvas=!1;break;case"leave":return this.leftCanvas=!0,this.isDragging;case"enter":return this.leftCanvas=!1,this.isDragging;case"drag":if(this.isDragging)return this.dispatch(e,t),!0;break;case"drag-end":if(this.isDragging)return this.isDragging=!1,this.dispatch(e,t),this.leftCanvas&&this.dispatch(e,{...t,type:"leave"}),!0}return!1}processPointerEvent(t){let e;if(this.handleDragging(t))return;let{current:i}=this;switch(function(t){let{type:e,sourceEvent:i}=t,{id:a,className:s,classList:r,ariaHidden:n}=i?.target??{};return r instanceof DOMTokenList?r.contains("ag-charts-annotations__axis-button-icon")&&!nY.includes(e)||"ag-charts-series-area"===s||"ag-charts-canvas-proxy"===s||"ag-charts-proxy-elem"===s&&!a?.toString().startsWith("ag-charts-legend-item-")||i?.target instanceof HTMLCanvasElement?"none":function(t){if(null==t||!(t instanceof HTMLElement))return;let e=t;for(;null!=e&&!e?.classList.contains("ag-charts-wrapper");){if(e.classList.contains("ag-chart-tooltip"))return e;e=e.parentElement}}(i.target)&&"true"!==n?"wait":"leave":"leave"}(t)){case"wait":return;case"none":e=this.pickRegion(t.offsetX,t.offsetY);break;case"leave":e=void 0}let a=e?.region;void 0!==i&&a?.properties.name!==i.region.properties.name&&this.dispatch(i,{...t,type:"leave"}),void 0!==a&&a.properties.name!==i?.region.properties.name&&this.dispatch(e,{...t,type:"enter"}),void 0!==a&&this.checkPointerHistory(a,t)&&this.dispatch(e,t),this.current=e}pickRegion(t,e){let i,a,s=1/0;for(let r of this.regions.values())for(let n of r.properties.bboxproviders){if(!1===n.visible)continue;let o=n.toCanvasBBox(),l=o.width*o.height;l<s&&o.containsPoint(t,e)&&(s=l,i=r,a=n)}return i?{region:i,bboxProvider:a}:void 0}},os=["start","center","end"],or=["seriesType","annotations","annotationOptions","ranges","zoom"],on={seriesType:0,annotations:1,annotationOptions:2,ranges:3,zoom:4},oo=(t=>(t.Top="top",t.Left="left",t.Right="right",t.Bottom="bottom",t.Floating="floating",t.FloatingTop="floating-top",t.FloatingBottom="floating-bottom",t))(oo||{}),ol=Object.values(oo);function oh(t){return["floating-top","floating-bottom"].includes(t)}var od=class extends rF{static isGroup(t,e){return e.group===t}static isChildElement(t,e){for(let i of ol)if(t.isManagedChildDOMElement(e,"canvas-overlay",`toolbar-${i}`))return!0;return!1}pressButton(t,e,i,a,s){this.listeners.dispatch("button-pressed",{type:"button-pressed",group:t,id:e,value:i,rect:a,sourceEvent:s})}cancel(t){this.listeners.dispatch("cancelled",{type:"cancelled",group:t})}toggleButton(t,e,i){let{active:a=!1,enabled:s=!0,visible:r=!0,checked:n=!1}=i;this.listeners.dispatch("button-toggled",{type:"button-toggled",group:t,id:e,active:a,enabled:s,visible:r,checked:n})}updateButton(t,e,i){this.listeners.dispatch("button-updated",{type:"button-updated",group:t,id:e,...i})}toggleGroup(t,e,i){let{active:a,visible:s}=i;this.listeners.dispatch("group-toggled",{type:"group-toggled",caller:t,group:e,active:a,visible:s})}updateGroup(t){this.listeners.dispatch("group-updated",{type:"group-updated",group:t})}groupMoved(t){this.listeners.dispatch("group-moved",{type:"group-moved",group:t})}changeFloatingAnchor(t,e){this.listeners.dispatch("floating-anchor-changed",{type:"floating-anchor-changed",group:t,anchor:e})}buttonMoved(t,e,i,a){this.listeners.dispatch("button-moved",{type:"button-moved",group:t,value:e,rect:i,groupRect:a})}proxyGroupOptions(t,e,i){this.listeners.dispatch("proxy-group-options",{type:"proxy-group-options",caller:t,group:e,options:i})}},ou=class{constructor(t,e){this.domManager=t,this.tooltip=e,this.stateTracker=new n0,this.suppressState=new n0(!1),this.appliedState=null,e.setup(t),t.addListener("hidden",()=>this.tooltip.toggle(!1))}updateTooltip(t,e,i){this.tooltip.enabled&&(i??(i=this.stateTracker.get(t)?.content),this.stateTracker.set(t,{content:i,meta:e}),this.applyStates())}removeTooltip(t){this.tooltip.enabled&&(this.stateTracker.delete(t),this.applyStates())}suppressTooltip(t){this.suppressState.set(t,!0)}unsuppressTooltip(t){this.suppressState.delete(t)}getTooltipMeta(t){return this.stateTracker.get(t)?.meta}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){let t=this.stateTracker.stateId(),e=t?this.stateTracker.get(t):null;if(this.suppressState.stateValue()||e?.meta==null||e?.content==null){this.appliedState=null,this.tooltip.toggle(!1);return}let i=this.domManager.getBoundingClientRect(),a="extended"===this.tooltip.bounds?this.domManager.getOverlayClientRect():i;if(this.appliedState?.content===e?.content){let t=this.tooltip.isVisible();this.tooltip.show(a,i,e?.meta,null,t)}else this.tooltip.show(a,i,e?.meta,e?.content);this.appliedState=e}static makeTooltipMeta(t,e){let{offsetX:i,offsetY:a}=t,s=e.series.properties.tooltip,r={offsetX:i,offsetY:a,enableInteraction:s.interaction?.enabled??!1,lastPointerEvent:{type:t.type,offsetX:i,offsetY:a},showArrow:s.showArrow,position:{type:s.position.type,xOffset:s.position.xOffset,yOffset:s.position.yOffset}},n=e.yBar?.upperPoint??e.midPoint??e.series.datumMidPoint?.(e);if(("node"===s.position.type||"sparkline"===s.position.type)&&n){let{x:t,y:i}=n,a=am.toCanvasPoint(e.series.contentGroup,t,i);return{...r,offsetX:Math.round(a.x),offsetY:Math.round(a.y)}}return r}},oc=class extends rF{constructor(){super(...arguments),this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new n0(void 0,"initial"),this.rejectCallbacks=new Map}addLayoutListeners(t){this.destroyFns.push(t.addListener("layout:complete",t=>{this.axes=t.axes}))}createMemento(){let t=this.getDefinedZoom();return{rangeX:this.getRangeDirection(t,"x"),rangeY:this.getRangeDirection(t,"y"),ratioX:{start:t.x.min,end:t.x.max},ratioY:{start:t.y.min,end:t.y.max}}}guardMemento(t){return tQ(t)&&(null!=t.ratioX||null!=t.ratioY||null!=t.rangeX||null!=t.rangeY)}restoreMemento(t,e,i){this.listeners.dispatch("restore-zoom",{...i,type:"restore-zoom"})}updateAxes(t){let e=new Map(t.map(t=>[t.id,this.axisZoomManagers.get(t.id)]));for(let i of(this.axisZoomManagers.clear(),t))this.axisZoomManagers.set(i.id,e.get(i.id)??new op(i));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}updateZoom(t,e,i=!0,a){if(a&&this.rejectCallbacks.set(t,a),0===this.axisZoomManagers.size){let s=this.state.stateId();"initial"===s||s===t||i?(this.state.set(t,e),s!==t&&this.rejectCallbacks.get(s)?.(t)):a?.(s);return}this.state.set(t,e),this.axisZoomManagers.forEach(i=>{i.updateZoom(t,e?.[i.getDirection()])}),this.applyChanges(t)}updateAxisZoom(t,e,i){this.axisZoomManagers.get(e)?.updateZoom(t,i),this.applyChanges(t)}fireZoomPanStartEvent(t){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:t})}getZoom(){let t,e;if(this.axisZoomManagers.forEach(i=>{"x"===i.getDirection()?t??(t=i.getZoom()):"y"===i.getDirection()&&(e??(e=i.getZoom()))}),t||e)return{x:t,y:e}}getAxisZoom(t){return this.axisZoomManagers.get(t)?.getZoom()??{min:0,max:1}}getAxisZooms(){let t={};for(let[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyChanges(t){if(!Array.from(this.axisZoomManagers.values(),t=>t.applyChanges()).some(Boolean))return;let e={};for(let[t,i]of this.axisZoomManagers.entries())e[t]=i.getZoom();this.listeners.dispatch("zoom-change",{type:"zoom-change",...this.getZoom(),axes:e,callerId:t})}getRangeDirection(t,e){for(let i of this.axes??[]){let a,s;if(i.direction!==e)continue;let r=i.scale.getDomain?.(),n=i.scale.convert?.(r?.at(0)),o=i.scale.convert?.(r?.at(-1));if(!t0(n)||!t0(o))return;if(n<=o){let r=o-n;a=i.scale.invert?.(0),s=i.scale.invert?.(n+r*t[e].max)}else{let r=n-o;a=i.scale.invert?.(n-r*t[e].min),s=i.scale.invert?.(0)}return{start:a,end:s}}}getDefinedZoom(){let t=this.getZoom();return{x:{min:t?.x?.min??0,max:t?.x?.max??1},y:{min:t?.y?.min??0,max:t?.y?.max??1}}}},op=class{constructor(t){this.axis=t;let[e=0,i=1]=t.visibleRange;this.state=new n0({min:e,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return si(this.state.stateValue())}applyChanges(){let t=this.currentZoom;return this.currentZoom=this.state.stateValue(),t.min!==this.currentZoom.min||t.max!==this.currentZoom.max}},og=class{constructor(){this.groups={}}registerSeries({internalId:t,seriesGrouping:e,visible:i,type:a}){var s;e&&((s=this.groups)[a]??(s[a]={}),this.groups[a][t]={grouping:e,visible:i})}updateSeries({internalId:t,seriesGrouping:e,visible:i,type:a}){if(!e)return;let s=this.groups[a]?.[t];s&&(s.grouping=e,s.visible=i)}deregisterSeries({internalId:t,type:e}){this.groups[e]&&delete this.groups[e][t],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:t,seriesGrouping:e,visible:i}){if(!e)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};let a=new Set,s=new Set;for(let i of Object.values(this.groups[t]??{}))i.visible&&(a.add(i.grouping.groupIndex),i.grouping.groupIndex===e.groupIndex&&s.add(i.grouping.stackIndex));let r=Array.from(a);return r.sort((t,e)=>t-e),{visibleGroupCount:r.length,visibleSameStackCount:s.size,index:r.indexOf(e.groupIndex)}}},oy=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.PRE_SCENE_RENDER=5]="PRE_SCENE_RENDER",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(oy||{}),om=class extends rG{constructor(t){super(),this.updateCallback=t}update(t=0,e){this.updateCallback(t,e)}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:t?.minRect,minVisibleRect:t?.minVisibleRect})}dispatchPreDomUpdate(){this.dispatch("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(t){this.dispatch("pre-scene-render",{type:"pre-scene-render",...t})}},of=class{constructor(t,e){this.callbackCache=new nR,this.chartEventManager=new nJ,this.highlightManager=new n5,this.layoutManager=new rz,this.localeManager=new nS,this.seriesStateManager=new og,this.stateManager=new r$,this.toolbarManager=new od,this.zoomManager=new oc;let{scene:i,root:a,syncManager:s,container:r,updateCallback:n,updateMutex:o,pixelRatio:l,styleContainer:h}=e;this.chartService=t,this.syncManager=s,this.domManager=new na(r,h);let d=this.domManager.addChild("canvas","scene-canvas",i?.canvas.element);this.scene=i??new nj({pixelRatio:l,canvasElement:d}),this.scene.setRoot(a),this.axisManager=new nP(a),this.annotationManager=new nz(t.annotationRoot),this.cursorManager=new n2(this.domManager),this.interactionManager=new nQ(t.keyboard,this.domManager),this.focusIndicator=new nm(this.domManager),this.keyNavManager=new n9(this.focusIndicator,this.interactionManager,t.mode),this.regionManager=new oa(this.interactionManager),this.contextMenuRegistry=new nq(this.regionManager),this.gestureDetector=new n3(this.domManager),this.updateService=new om(n),this.proxyInteractionService=new nb(this.localeManager,this.domManager),this.historyManager=new rW(this.keyNavManager),this.animationManager=new nK(this.interactionManager,o),this.dataService=new nB(this.animationManager),this.tooltipManager=new ou(this.domManager,t.tooltip),this.zoomManager.addLayoutListeners(this.layoutManager)}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.contextMenuRegistry.destroy(),this.domManager.destroy(),this.highlightManager.destroy(),this.interactionManager.destroy(),this.keyNavManager.destroy(),this.focusIndicator.destroy(),this.proxyInteractionService.destroy(),this.regionManager.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy()}},ox=class extends eW{constructor(){super(...arguments),this.range="tooltip"}};o([eQ(iE(["tooltip","node"],"a range"))],ox.prototype,"range",2);var oM=class t{constructor(){this.domain=new Set}static is(e){return e instanceof t}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},ob=class t{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof t}static extendDomain(t,e=[1/0,-1/0]){for(let i of t)"number"==typeof i&&(e[0]>i&&(e[0]=i),e[1]<i&&(e[1]=i));return e}extend(t){this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t)}getDomain(){return[...this.domain]}};function ov(t){if(null==t)return[];let[e,i]=t.map(Number);return 0===e&&0===i?[0,1]:t0(e)&&t0(i)?[e,i]:[]}function oI(t,e){return e?.get(t.id)??0}var oD=Symbol("invalid");function oS(t){let e;let i=[],a=0,s=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|\\')*'|"(?:[^"]|\\")*"|-?\d+)\s*\])\s*)/g;for(;e=s.exec(t);){if(e.index!==a)return;a=e.index+e[0].length;let t=e[1].trim();if(t.startsWith("."))i.push(t.slice(1).trim());else if(t.startsWith("[")){let e=t.slice(1,-1).trim();e.startsWith("'")?i.push(e.slice(1,-1).replace(/\\'/g,"'")):e.startsWith('"')?i.push(e.slice(1,-1).replace(/\\"/g,'"')):i.push(e)}else i.push(t)}if(a===t.length)return i}var oN=class{constructor(t,e="standalone"){this.opts=t,this.mode=e,this.debug=aN.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let i=!0;for(let e of t.props){if("key"===e.type&&!i)throw Error("AG Charts - internal config error: keys must come before values.");"value"===e.type&&i&&(i=!1)}let a=({matchGroupIds:t=[]})=>{for(let e of t)if(this.values.every(t=>t.groupId!==e))throw Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${e}).`)};for(let e of t.props)switch(e.type){case"key":this.keys.push({...e,index:this.keys.length,missing:new Map});break;case"value":if(null==e.property)throw Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(e)}`);this.values.push({...e,index:this.values.length,missing:new Map});break;case"aggregate":a(e),this.aggregates.push({...e,index:this.aggregates.length});break;case"group-value-processor":a(e),this.groupProcessors.push({...e,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...e,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...e,index:this.reducers.length});break;case"processor":this.processors.push({...e,index:this.processors.length})}}resolveProcessedDataDefById(t,e){let i=this.scopeCache.get(t.id)?.get(e);if(!i)throw Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(t,e){return this.resolveProcessedDataDefById(t,e).index}resolveProcessedDataDefsByIds(t,e){return e.map(e=>[e,this.resolveProcessedDataDefById(t,e)])}resolveProcessedDataDefsValues(t,{keys:e,values:i}){let a={};for(let[s,{index:r,def:n}]of t){let t="key"===n.type?e:i;a[s]=t[r]}return a}getDomain(t,e,i="value",a){let s=this.getDomainsByType(i,a);return s?.[this.resolveProcessedDataIndexById(t,e)]??[]}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t,e){let{opts:{groupByKeys:i,groupByFn:a},aggregates:s,groupProcessors:r,reducers:n,processors:o,propertyProcessors:l}=this,h=performance.now();if(i&&0===this.keys.length)return;let d=this.extractData(t,e);if(i?d=this.groupData(d):a&&(d=this.groupData(d,a(d))),r.length>0&&this.postProcessGroups(d),s.length>0&&this.aggregateData(d),l.length>0&&this.postProcessProperties(d),n.length>0&&this.reduceData(d),o.length>0&&this.postProcessData(d),t.length>0){for(let e of W(this.keys,this.values))for(let[i,a]of e.missing)if(a>=t.length){let t=null==i?"":` for ${i}`;y.warnOnce(`the key '${e.property}' was not found in any data element${t}.`)}}let u=performance.now();for(let t of(d.time=u-h,this.debug.check()&&function(t){let e=(t,e)=>{e.length>0&&(y.log(`DataModel.processData() - ${t}`),y.table(e))};y.log("DataModel.processData() - processedData",t),e("Key Domains",t.domain.keys),e("Group Domains",t.domain.groups??[]),e("Value Domains",t.domain.values),e("Aggregate Domains",t.domain.aggValues??[]),e("Values","grouped"===t.type?t.data.reduce((t,e)=>{let i=e.keys??[],a=e.aggValues??[],s=e.keys.map(()=>void 0),r=a?.map(()=>void 0);return t.push(...e.values.map((t,e)=>[...0===e?i:s,...t??[],...0==e?a:r])),t},[]):t.data.reduce((t,e)=>{let i=e.aggValues??[];return t.push([...e.keys,...e.values,...i]),t},[]))}(d),this.scopeCache.clear(),W(this.keys,this.values,this.aggregates)))if(t.idsMap)for(let[e,i]of t.idsMap)for(let a of i)if(this.scopeCache.has(e)){if(this.scopeCache.get(e)?.has(a))throw Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(e).set(a,t)}else this.scopeCache.set(e,new Map([[a,t]]));return d}valueGroupIdxLookup({matchGroupIds:t}){let e=[];for(let[i,a]of this.values.entries())(!t||a.groupId&&t.includes(a.groupId))&&e.push(i);return e}valueIdxLookup(t,e){let i=null==t||0===t.length,a="string"==typeof e?e:e.id,s=e=>{if(e.idsMap){for(let[i,s]of e.idsMap)if(t?.includes(i)&&s.has(a))return!0}return!1},r=this.values.findIndex(e=>(null==e.scopes||i&&!e.scopes.length||e.scopes.some(e=>t?.includes(e)))&&(e.property===a||e.id===a||s(e)));if(-1===r)throw Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`);return r}extractData(t,e){let{dataDomain:i,processValue:a,scopes:s,allScopesHaveSameDefs:r}=this.initDataDomainProcessor(),n=new Map(e?.map(t=>[t.id,t])),{keys:o,values:l}=this,h=Array(t.length),d=0,u=0;for(let[e,i]of t.entries()){let t,c;let p={},g=s.size>0?new Set(s):void 0,y=Array(o.length),m=0;for(let e of o){if((t=a(e,i,t))===oD)break;y&&(y[m++]=t)}if(t===oD)continue;let f=l.length>0?Array(l.length):void 0;for(let[t,o]of l.entries()){for(let r of o.scopes??s){let s=n.get(r);if((c=a(o,s?.data[e]??i,c,r))!==oD&&f){if(null!=s&&!1!==o.includeProperty){let t=o.includeProperty&&null!=o.id?o.id:o.property;p[r]??(p[r]={}),p[r][t]=c}f[t]=c}}if(c===oD){if(r)break;for(let t of o.scopes??s)g?.delete(t);if(g?.size===0)break}}if(c===oD&&r||g?.size===0)continue;let x={datum:{...i,...p},keys:y,values:f};!r&&g&&g.size<s.size&&(u++,x.validScopes=new Set(g)),h[d++]=x}h.length=d;let c=t=>{let e=i.get(t),a=e.getDomain();return ob.is(e)&&a[0]>a[1]?[]:a};return{type:"ungrouped",input:{count:t.length},data:h,domain:{keys:o.map(c),values:l.map(c)},defs:{allScopesHaveSameDefs:r,keys:o,values:l},partialValidDataCount:u,time:0}}groupData(t,e){let i=new Map;for(let a of t.data){let{keys:t,values:s,datum:r,validScopes:n}=a,o=e?.(a)??t,l=o.map(t=>tQ(t)?JSON.stringify(t):t).join("-");if(i.has(l)){let t=i.get(l);if(t.values.push(s),t.datum.push(r),null!=n&&null!=t.validScopes)for(let e of t.validScopes)n.has(e)||t.validScopes.delete(e)}else i.set(l,{keys:o,values:[s],datum:[r],validScopes:n})}let a=Array(i.size),s=Array(i.size),r=0;for(let{keys:t,values:e,datum:n,validScopes:o}of i.values())o?.size!==0&&(s[r]=t,a[r++]={keys:t,values:e,datum:n,validScopes:o});return{...t,type:"grouped",data:a,domain:{...t.domain,groups:s}}}aggregateData(t){let e="ungrouped"===t.type;for(let[i,a]of(t.domain.aggValues=[],this.aggregates.entries())){let s=this.valueGroupIdxLookup(a),r=[1/0,-1/0];for(let n of t.data){if(n.aggValues??(n.aggValues=Array(this.aggregates.length)),n.validScopes)continue;let t=e?[n.values]:n.values,o=a.groupAggregateFunction?.()??[1/0,-1/0];for(let e of t){let t=s.map(t=>e[t]),i=a.aggregateFunction(t,n.keys);i&&(o=a.groupAggregateFunction?.(i,o)??ob.extendDomain(i,o))}let l=(a.finalFunction?.(o)??o).map(t=>Number.isInteger(t)?t:Math.abs(t)>1e4?Math.trunc(t):Math.round(1e4*t)/1e4);n.aggValues[i]=l,ob.extendDomain(l,r)}t.domain.aggValues.push(r)}}postProcessGroups(t){let{groupProcessors:e}=this,i=new Set,a=new Map,s=new Map,r=new Map;for(let t of e){let e=this.valueGroupIdxLookup(t);for(let n of(s.set(t,e),r.set(t,t.adjust()),e)){let t="category"===this.values[n].valueType;i.add(n),a.set(n,t?new oM:new ob)}}let n=t=>{for(let e of i)a.get(e)?.extend(t[e])};for(let i of t.data){for(let a of e){if(i.validScopes)continue;let e=s.get(a)??[],n=r.get(a)?.();if(n){if("grouped"===t.type)for(let t of i.values)t&&n(t,e);else i.values&&n(i.values,e)}}if("grouped"===t.type)for(let t of i.values)n(t);else n(i.values)}for(let[e,i]of a)t.domain.values[e]=i.getDomain()}postProcessProperties(t){for(let{adjust:e,property:i,scopes:a}of this.propertyProcessors)e()(t,this.valueIdxLookup(a,i))}reduceData(t){for(let e of(t.reduced??(t.reduced={}),this.reducers)){let i=e.reducer(),a=e.initialValue;for(let s of t.data)(!s.validScopes||e.scopes?.some(t=>s.validScopes?.has(t)))&&(a=i(a,s));t.reduced[e.property]=a}}postProcessData(t){for(let e of(t.reduced??(t.reduced={}),this.processors))t.reduced[e.property]=e.calculate(t)}initDataDomainProcessor(){let{keys:t,values:e}=this,i=new Set;for(let t of e)if(t.scopes)for(let e of t.scopes)i.add(e);let a=new Map,s=new Map,r=!0,n=()=>{for(let s of W(t,e))"category"===s.valueType?a.set(s,new oM):(a.set(s,new ob),r&&(r=(s.scopes??[]).length===i.size))};n();let o=this.buildAccessors(W(t,e));return{dataDomain:a,processValue:(t,e,i,r)=>{let l,h;if(o.has(t.property)){try{h=o.get(t.property)(e)}catch(t){}l=null!=h}else h=(l=t.property in e)?e[t.property]:t.missingValue;null!=t.forceValue&&(h=l&&ty(h)?-1*t.forceValue:t.forceValue,l=!0);let d="missingValue"in t;if(!l&&!d){let e=t.missing.get(r)??0;t.missing.set(r,e+1)}if(a.has(t)||n(),l&&t.validation?.(h,e)===!1){if(!("invalidValue"in t))return"integrated"!==this.mode&&y.warnOnce(`invalid value of type [${typeof h}] for [${t.scopes} / ${t.id}] ignored:`,`[${h}]`),oD;h=t.invalidValue}return t.processor&&(s.has(t)||s.set(t,t.processor()),h=s.get(t)?.(h,i===oD?void 0:i)),a.get(t)?.extend(h),h},initDataDomain:n,scopes:i,allScopesHaveSameDefs:r}}buildAccessors(t){let e=new Map;if("integrated"===this.mode)return e;for(let i of t){if(!(i.property.includes(".")||i.property.includes("[")))continue;let t=oS(i.property);if(null==t){y.warnOnce("Invalid property path [%s]",i.property);continue}let a=function(t){return e=>{let i=e;for(let e of t)i=i[e];return i}}(t);e.set(i.property,a)}return e}},oL=class t{constructor(t){this.mode=t,this.debug=aN.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(t,e,i){if("setup"!==this.status)throw Error("AG Charts - data request after data setup phase.");return new Promise((a,s)=>{this.requested.push({id:t,opts:i,data:e,resolve:a,reject:s})})}execute(){if("setup"!==this.status)throw Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);let t=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",t);let e=this.mergeRequested(t);this.debug("DataController.execute() - merged",e),this.debug.check()&&(tt().processedData=[]);let i=this.requested.map(({id:t})=>t),a=this.hasMultipleDataSources(t);for(let{opts:s,data:r,resolves:n,rejects:o,ids:l}of e)try{let e=new oN(s,this.mode),h=e.processData(r,t);this.debug.check()&&tt("processedData").push(h),h?.partialValidDataCount===0?n.forEach((t,s)=>t({dataModel:e,processedData:this.processScopedData(l[s],h,i,a)})):h?this.splitResult(e,h,l,n):o.forEach(t=>t(Error("AG Charts - no processed data generated")))}catch(t){o.forEach(e=>e(t))}}hasMultipleDataSources(t){if(t.length){let[{data:e},...i]=t;return i.some(t=>e!==t.data)}return!1}processScopedData(t,e,i,a){let s=e=>{if(Array.isArray(e))return e.map(s);let r=a?{...e,...e[t]}:e;for(let t of i)delete r[t];return r},r=e=>Array.isArray(e)?e.map(r):e?.[t]??e;return{...e,data:e.data.map(t=>({...t,datum:s(t.datum),values:a?t.values?.map(r):t.values}))}}validateRequests(t){let e=[];for(let[i,a]of t.entries())i>0&&a.data.length!==t[0].data.length&&!1===a.opts.groupByData?a.reject(Error("all series[].data arrays must be of the same length and have matching keys.")):e.push(a);return e}mergeRequested(e){let i=[];for(let a of e){let e=i.find(t.groupMatch(a));e?e.push(a):i.push([a])}return i.map(t.mergeRequests)}splitResult(t,e,i,a){for(let s=0;s<i.length;s++){let r=i[s];(0,a[s])({dataModel:t,processedData:{...e,data:e.data.filter(({validScopes:t})=>t?.has(r)??!0)}})}}static groupMatch({data:t,opts:e}){function i(t){return t.filter(t=>"key"===t.type).map(t=>t.property).join(";")}return([a])=>(!1===e.groupByData||a.data===t)&&a.opts.groupByKeys===e.groupByKeys&&a.opts.groupByFn===e.groupByFn&&i(a.opts.props)===i(e.props)}static mergeRequests(e){return e.reduce((e,{id:i,data:a,resolve:s,reject:r,opts:{props:n,...o}})=>{for(let l of(e.ids.push(i),e.rejects.push(r),e.resolves.push(s),e.data??(e.data=a),e.opts??(e.opts={...o,props:[]}),n)){let a={...l,scopes:[i]};t.createIdsMap(i,a);let s=e.opts.props.find(e=>e.type===a.type&&t.deepEqual(e,a));if(!s){e.opts.props.push(a);continue}s.scopes??(s.scopes=[]),s.scopes.push(...a.scopes??[]),("key"===s.type||"value"===s.type)&&a.idsMap?.size&&t.mergeIdsMap(a.idsMap,s.idsMap)}return e},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(t,e){for(let[i,a]of t){let t=e.get(i);if(null!=t)for(let e of a)t.add(e);else e.set(i,new Set(a))}}static createIdsMap(t,e){null!=e.id&&(e.idsMap??(e.idsMap=new Map),e.idsMap.has(t)?e.idsMap.get(t).add(e.id):e.idsMap.set(t,new Set([e.id])))}static deepEqual(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){let a,s;if(e.constructor!==i.constructor)return!1;if(Array.isArray(e)){if((s=e.length)!==i.length)return!1;for(a=s-1;a>=0;a--)if(!t.deepEqual(e[a],i[a]))return!1;return!0}let r=Object.keys(e);if((s=r.length)!==Object.keys(i).length)return!1;for(a=s-1;a>=0;a--){let s=r[a];if(!t.skipKeys.has(s)&&(!Object.hasOwn(i,s)||!t.deepEqual(e[s],i[s])))return!1}return!0}return!1}};oL.skipKeys=new Set(["id","idsMap","type","scopes"]);var oA=new class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.moduleFactory),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate),e.hidden&&this.hidden.add(t)}create(t,e){let i=this.axesMap.get(t);if(i)return i(e);throw Error(`AG Charts - unknown axis type: ${t}`)}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter(t=>!this.hidden.has(t))}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},ow=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function oC(t){return ow.find(e=>"series"===e.type&&e.identifier===t)?.chartTypes}var oT=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,{optionsKey:e,moduleFactory:i,themeTemplate:a}){this.legendMap.set(t,{optionsKey:e,moduleFactory:i}),this.themeTemplates.set(e,a)}create(t,e){let i=this.legendMap.get(t)?.moduleFactory;if(i)return i(e);throw Error(`AG Charts - unknown legend type: ${t}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((t,[e,i])=>(t[e]=i.optionsKey,t),{})}},ok=class extends Map{get(t){return super.get(t)??"unknown"}isCartesian(t){return"cartesian"===this.get(t)}isPolar(t){return"polar"===this.get(t)}isHierarchy(t){return"hierarchy"===this.get(t)}isTopology(t){return"topology"===this.get(t)}isFlowProportion(t){return"flow-proportion"===this.get(t)}isStandalone(t){return"standalone"===this.get(t)}isGauge(t){return"gauge"===this.get(t)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))}get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))}get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}get topologyTypes(){return this.seriesTypes.filter(t=>this.isTopology(t))}get flowProportionTypes(){return this.seriesTypes.filter(t=>this.isFlowProportion(t))}get standaloneTypes(){return this.seriesTypes.filter(t=>this.isStandalone(t))}get gaugeTypes(){return this.seriesTypes.filter(t=>this.isGauge(t))}},oE=class extends Map{set(t,e){return super.set(t,t8(e,this.get(t)))}},oO=new ok,oj=new ok,oR=new oE,oz=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,{chartTypes:[e],moduleFactory:i,tooltipDefaults:a,defaultAxes:s,themeTemplate:r,paletteFactory:n,solo:o,stackable:l,groupable:h,stackedByDefault:d,hidden:u}){this.setThemeTemplate(t,r),this.seriesMap.set(t,{moduleFactory:i,tooltipDefaults:a,defaultAxes:s,paletteFactory:n,solo:o,stackable:l,groupable:h,stackedByDefault:d}),oO.set(t,e),u||oj.set(t,e)}create(t,e){let i=this.seriesMap.get(t)?.moduleFactory;if(i)return i(e);throw Error(`AG Charts - unknown series type: ${t}`)}cloneDefaultAxes(t,e){let i=this.seriesMap.get(t)?.defaultAxes;return null==i?null:{axes:si("function"==typeof i?i(e):i)}}setThemeTemplate(t,e){let i=this.themeTemplates.get(t);this.themeTemplates.set(t,t8(e,i))}getThemeTemplate(t){return this.themeTemplates.get(t)}getPaletteFactory(t){return this.seriesMap.get(t)?.paletteFactory}getTooltipDefauls(t){return this.seriesMap.get(t)?.tooltipDefaults}isSolo(t){return this.seriesMap.get(t)?.solo??!1}isGroupable(t){return this.seriesMap.get(t)?.groupable??!1}isStackable(t){return this.seriesMap.get(t)?.stackable??!1}isStackedByDefault(t){return this.seriesMap.get(t)?.stackedByDefault??!1}},oP=class t extends rF{constructor(t){super(),this.chart=t}subscribe(e=t.DEFAULT_GROUP){let i=this.get(e);return i||(i=new Set,t.chartsGroups.set(e,i)),i.add(this.chart),this}unsubscribe(e=t.DEFAULT_GROUP){return this.get(e)?.delete(this.chart),this}getChart(){return this.chart}getGroup(e=t.DEFAULT_GROUP){let i=this.get(e);return i?Array.from(i):[]}getGroupSiblings(e=t.DEFAULT_GROUP){return this.getGroup(e).filter(t=>t!==this.chart)}get(e){return t.chartsGroups.get(e)}};oP.chartsGroups=new Map,oP.DEFAULT_GROUP=Symbol("sync-group-default");var oB=class extends eW{constructor(){super(...arguments),this.enabled=!1}};o([eQ(e0)],oB.prototype,"enabled",2),o([eQ(e4)],oB.prototype,"tabIndex",2);var oG=["top","right","bottom","left"],oF=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function oU(t){let{series:e}=t;if(e)return e[0]?.type??"line"}function oY(t){let e=oU(t);return null!=e&&(oO.isCartesian(e)||"cartesian"===oC(e)?.find(t=>"cartesian"===t))}function oZ(t){let e=oU(t);return null!=e&&("polar"===e?(y.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):oO.isPolar(e)||"polar"===oC(e)?.find(t=>"polar"===t))}function o_(t){let e=oU(t);return null!=e&&("hierarchy"===e?(y.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):oO.isHierarchy(e)||"hierarchy"===oC(e)?.find(t=>"hierarchy"===t))}function oV(t){let e=oU(t);return null!=e&&("topology"===e?(y.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):oO.isTopology(e)||"topology"===oC(e)?.find(t=>"topology"===t))}function oW(t){let e=oU(t);return null!=e&&("flow-proportion"===e?(y.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):oO.isFlowProportion(e)||"flow-proportion"===oC(e)?.find(t=>"flow-proportion"===t))}function oH(t){let e=oU(t);return null!=e&&("standalone"===e?(y.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):oO.isStandalone(e)||"standalone"===oC(e)?.find(t=>"standalone"===t))}function o$(t){let e=oU(t);return null!=e&&("gauge"===e?(y.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):oO.isGauge(e)||"gauge"===oC(e)?.find(t=>"gauge"===t))}var oQ=class extends iF{applyOptions(t){for(let e of this.moduleMap.values())e.module.optionsKey in t&&e$(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(let{module:t,moduleInstance:e}of this.moduleMap.values())"legend"===t.type&&(yield{legendType:t.identifier,legend:e})}},oX="ag-chart-overlay",oK="ag-chart-dark-overlay",oJ=class extends eW{constructor(t,e){super(),this.className=t,this.defaultMessageId=e}getText(t){return t.t(this.text??this.defaultMessageId)}getElement(t,e,i){if(this.content?.remove(),this.focusBox=i,this.renderer){let t=this.renderer();if(t instanceof HTMLElement)this.content=t;else{let e=te("div");e.innerHTML=t,this.content=e.firstElementChild}}else{let i=te("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});i.innerText=this.getText(e),this.content=i,t?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(t){i.style.opacity=String(t)},onStop(){i.style.opacity="1"}})}return this.content}removeElement(t=()=>this.content?.remove(),e){if(this.content){if(e){let{content:i}=this;e.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(t){i.style.opacity=String(t)},onStop(){t?.()}})}else t?.();this.content=void 0,this.focusBox=void 0}}};o([eQ(e2,{optional:!0})],oJ.prototype,"text",2),o([eQ(e1,{optional:!0})],oJ.prototype,"renderer",2);var oq=class extends eW{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new oJ("ag-chart-loading-overlay","overlayLoadingData"),this.noData=new oJ("ag-chart-no-data-overlay","overlayNoData"),this.noVisibleSeries=new oJ("ag-chart-no-visible-series","overlayNoVisibleSeries")}getFocusInfo(t){for(let e of[this.loading,this.noData,this.noVisibleSeries])if(void 0!==e.focusBox)return{text:e.getText(t),rect:e.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement()}};o([eQ(e0)],oq.prototype,"darkTheme",2),o([eQ(eJ)],oq.prototype,"loading",2),o([eQ(eJ)],oq.prototype,"noData",2),o([eQ(eJ)],oq.prototype,"noVisibleSeries",2);var o0=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_NODE=1]="NEAREST_NODE",t[t.AXIS_ALIGNED=2]="AXIS_ALIGNED",t))(o0||{}),o1=class{constructor(t,e,{datum:i},a){this.type=t,this.event=e,this.datum=i,this.seriesId=a.id}},o2=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},o4=class extends rk{constructor(t){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeEvent=o1,this.internalId=_(this),this.rootGroup=new ax({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new iF,this._declarationOrder=-1,this.seriesListeners=new rG,this._pickNodeCache=new aJ;let{moduleCtx:e,pickModes:i,directionKeys:a={},directionNames:s={},contentGroupVirtual:r=!0,canHaveAxes:n=!1}=t;this.ctx=e,this.directionKeys=a,this.directionNames=s,this.canHaveAxes=n,this.contentGroup=this.rootGroup.appendChild(new av({name:`${this.internalId}-content`,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new av({name:`${this.internalId}-highlight`,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new ax({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new ax({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new av({name:`${this.internalId}-series-labels`,zIndex:14})),this.annotationGroup=new ax({name:`${this.id}-annotation`,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get data(){return this._data??this._chartData}set visible(t){this.properties.visible=t,this.visibleMaybeChanged()}get visible(){return this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled??!1}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){let{internalId:i,type:a,visible:s}=this;t&&this.ctx.seriesStateManager.deregisterSeries(this),e&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:a,visible:s,seriesGrouping:e}),this.fireEvent(new o2(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(t,e=0){let i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(t=>t()),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){let i=this.resolveKeyDirection(t),a=e?.[i],s=[];if(!a)return s;let r=(...t)=>{for(let e of t)Array.isArray(e)?r(...e):"object"==typeof e?r(...Object.values(e)):s.push(e)};return r(...a.map(t=>this.properties[t])),s}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getKeyProperties(t){return this.directionKeys[this.resolveKeyDirection(t)]??[]}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){let e=this.getSeriesDomain(t),i=this.moduleMap.mapModules(e=>e.getDomain(t));return e.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){let{dimOpacity:t=1,enabled:e=!0}=this.properties.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;default:return t}}getStrokeWidth(t){let{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){let t=this.ctx.highlightManager?.getActiveHighlight()?.series;return null==t?0:t!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(t=>t.getTooltipParams()).reduce((t,e)=>Object.assign(t,e),{})}pickNode(t,e,i=!1){let{pickModes:a,pickModeAxis:s,visible:r,rootGroup:n}=this;if(!r||!n.visible||"highlight"===e&&!this.properties.highlight.enabled||"highlight-tooltip"===e&&!this.properties.highlight.enabled)return;let o=1/0;if("tooltip"===e||"highlight-tooltip"===e){let{tooltip:t}=this.properties;o="number"==typeof t.range?t.range:1/0,i||(i="exact"===t.range)}else if("event"===e||"context-menu"===e){let{nodeClickRange:t}=this.properties;o="number"==typeof t?t:1/0,i||(i="exact"===t)}let l=a.filter(t=>!i||0===t),{x:h,y:d}=t,u=JSON.stringify({x:h,y:d,maxDistance:o,selectedPickModes:l});if(this._pickNodeCache.has(u))return this._pickNodeCache.get(u);for(let e of l){let i;switch(e){case 0:i=this.pickNodeExactShape(t);break;case 1:i=this.pickNodeClosestDatum(t);break;case 2:i=null!=e?this.pickNodeMainAxisFirst(t,"main-category"===s):void 0}if(i&&i.distance<=o)return this._pickNodeCache.set(u,{pickMode:e,match:i.datum,distance:i.distance})}return this._pickNodeCache.set(u,void 0)}pickNodeExactShape(t){let e=this.contentGroup.pickNode(t.x,t.y);if(e&&!0!==e.datum.missing)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(t,e){let i=X(t.x,t.y,e);if(void 0!==i.nearest&&!0!==i.nearest.datum.missing)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(t,e){throw Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeDoubleClick",t,e,this))}createNodeContextMenuActionEvent(t,e){return new this.NodeEvent("nodeContextMenuAction",t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getLabelText(t,e,i=String){return t.formatter?this.ctx.callbackCache.call(t.formatter,{seriesId:this.id,...e})??i(e.value):i(e.value)}getMarkerStyle(t,e,i=t.getStyle()){let a=t8({size:e.datum.point?.size??0},i);return t.itemStyler?t8(this.ctx.callbackCache.call(t.itemStyler,{seriesId:this.id,...a,...e,datum:e.datum.datum}),a):a}updateMarkerStyle(t,e,i,a=e.getStyle(),{applyTranslation:s=!0,selected:r=!0}={}){let{point:n}=i.datum,o=this.getMarkerStyle(e,i,a),l=this.visible&&o.size>0&&n&&!isNaN(n.x)&&!isNaN(n.y);if(s?t.setProperties({visible:l,...o,translationX:n?.x,translationY:n?.y}):t.setProperties({visible:l,...o}),r||(t.fillOpacity*=.25,t.strokeOpacity*=.125),"function"==typeof e.shape&&!t.dirtyPath){t.path.clear(!0),t.updatePath(),t.checkPathDirty();let e=t.getBBox();if(void 0!==n&&e.isFinite()){let t=e.computeCenter(),[i,a]=["x","y"].map(e=>(o.strokeWidth??0)+Math.abs(t[e]-n[e])),s=Math.max(e.width+i,e.height+a);n.focusSize=s}}}getMinRects(t,e){}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){let{width:e,height:i}=t??{width:NaN,height:NaN},a=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,s=null!=se(this.nodeDataDependencies,a);return s&&(this._nodeDataDependencies=a,this.markNodeDataDirty()),s}pickFocus(t){}};function o3({defs:t,values:e,xAxis:i,yAxis:a}){if(!(i&&a))throw Error("Axes must be defined");let s={};for(let[r,{def:n}]of t)if(Object.hasOwn(e,r)){let{scale:t}="key"===n.type?i:a;s[r]=Math.round(t.convert(e[r]))}return s}function o5(t,e,i,a){let s;for(let r of[...t].reverse()){if(!r.visible||!r.rootGroup.visible)continue;let{match:t,distance:n}=r.pickNode(e,i,a)??{};if(t&&null!=n&&((!s||s.distance>n)&&(s={series:r,distance:n,datum:t}),0===n))break}return s}o4.highlightedZIndex=1e12,o([su({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],o4.prototype,"seriesGrouping",2);var o9=class{constructor(t,e){this.element=t,this.id=e,t.id=e,t.style.display="none",sx(t.parentElement,"aria-labelledby",e)}layoutComplete(t){this.element.parentElement.style.width=`${t.chart.width}px`,this.element.parentElement.style.height=`${t.chart.height}px`}set text(t){this.element.textContent=t}},o6=class extends rF{constructor(t){super(),this.chart=t,this.id=_(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="mouse",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=rO((t,e)=>tt().requestAnimationFrame(t),()=>{if(this.tooltip.lastHover||this.highlight.pendingHoverEvent){if(4>=this.chart.getUpdateType()){this.hoverScheduler.schedule();return}this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}});let e=t.ctx.regionManager.getRegion("series"),i=t.ctx.regionManager.getRegion("horizontal-axes"),a=t.ctx.regionManager.getRegion("vertical-axes"),s=t.ctx.domManager.addChild("series-area","series-area-aria-label");this.ariaLabel=new o9(s,`${this.id}-aria-label`),this.destroyFns.push(()=>t.ctx.domManager.removeChild("series-area","series-area-aria-label"),e.addListener("contextmenu",t=>this.onContextMenu(t),63),e.addListener("drag",t=>this.onHoverLikeEvent(t),41),e.addListener("hover",t=>this.onHover(t),41),e.addListener("leave",()=>this.onLeave(),41),i.addListener("hover",t=>this.onHover(t),41),i.addListener("leave",()=>this.onLeave()),a.addListener("hover",t=>this.onHover(t),41),a.addListener("leave",()=>this.onLeave()),t.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),t.ctx.domManager.addListener("resize",()=>this.clearAll()),t.ctx.highlightManager.addListener("highlight-change",t=>this.changeHighlightDatum(t)),t.ctx.keyNavManager.addListener("blur",()=>this.onBlur()),t.ctx.keyNavManager.addListener("focus",t=>this.onFocus(t),34),t.ctx.keyNavManager.addListener("nav-hori",t=>this.onNavHori(t),34),t.ctx.keyNavManager.addListener("nav-vert",t=>this.onNavVert(t),34),t.ctx.keyNavManager.addListener("submit",t=>this.onSubmit(t),34),t.ctx.layoutManager.addListener("layout:complete",t=>this.layoutComplete(t)),t.ctx.regionManager.listenAll("click",t=>this.onClick(t)),t.ctx.regionManager.listenAll("dblclick",t=>this.onClick(t)),t.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),t.ctx.zoomManager.addListener("zoom-change",()=>this.clearAll()),t.ctx.zoomManager.addListener("zoom-pan-start",()=>this.clearAll()))}dataChanged(){var t;(t=this.highlight).stashedHoverEvent??(t.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.chart.ctx.focusIndicator.updateBounds(void 0),this.clearHighlight()}preSceneRender(){this.refreshFocus(),null!=this.highlight.stashedHoverEvent&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),null!=this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}update(t,e){this.chart.ctx.updateService.update(t,e)}seriesChanged(t){this.focus.sortedSeries=[...t].sort((t,e)=>{let i=t.properties.focusPriority??1/0,a=e.properties.focusPriority??1/0;return(i===a&&([i,a]=[t._declarationOrder,e._declarationOrder]),i<a)?-1:i>a?1:0}),this.series=t}layoutComplete(t){this.seriesRect=t.series.rect,this.hoverRect=t.series.paddedRect,this.ariaLabel.layoutComplete(t)}onContextMenu(t){let e,i;let{Default:a,ContextMenu:s}=rU;if(this.chart.ctx.focusIndicator.isFocusVisible())(e=this.chart.ctx.highlightManager.getActiveHighlight())&&this.seriesRect&&e.midPoint&&(i=am.toCanvasPoint(e.series.contentGroup,e.midPoint.x,e.midPoint.y));else if(this.chart.ctx.interactionManager.getState()&(a|s)){let i=o5(this.series,{x:t.regionOffsetX,y:t.regionOffsetY},"context-menu");i&&(this.chart.ctx.highlightManager.updateHighlight(this.id),e=i.datum)}this.clearAll(),this.chart.ctx.contextMenuRegistry.dispatchContext("series",t,{pickedNode:e},i)}onLeave(){this.chart.ctx.cursorManager.updateCursor(this.id),this.chart.ctx.focusIndicator.isFocusVisible()||this.clearAll()}onHover(t){this.hoverDevice="mouse",this.onHoverLikeEvent(t)}onHoverLikeEvent(t){if(t5(t,"drag")&&(this.tooltip.lastHover=t),this.highlight.pendingHoverEvent=t,this.hoverScheduler.schedule(),32===this.chart.ctx.interactionManager.getState()){let{regionOffsetX:e,regionOffsetY:i}=t,a=o5(this.series,{x:e,y:i},"event");a?.series.hasEventListener("nodeClick")||a?.series.hasEventListener("nodeDoubleClick")?this.chart.ctx.cursorManager.updateCursor(this.id,"pointer"):this.chart.ctx.cursorManager.updateCursor(this.id)}}onClick(t){if(this.hoverDevice="mouse",this.onHoverLikeEvent(t),this.seriesRect?.containsPoint(t.offsetX,t.offsetY)&&this.checkSeriesNodeClick(t)){this.update(4),t.preventDefault();return}let e={type:"click"===t.type?"click":"doubleClick",event:t.sourceEvent};this.chart.fireEvent(e)}onFocus(t){this.hoverDevice=this.chart.ctx.focusIndicator.isFocusVisible()?"keyboard":"mouse",this.handleFocus(0,0),t.preventDefault()}onBlur(){this.hoverDevice="mouse",this.clearAll()}onNavVert(t){this.hoverDevice="keyboard",this.focus.seriesIndex+=t.delta,this.handleFocus(t.delta,0),t.preventDefault()}onNavHori(t){this.hoverDevice="keyboard",this.focus.datumIndex+=t.delta,this.handleFocus(0,t.delta),t.preventDefault()}onSubmit(t){let{series:e,datum:i}=this.focus,a=t.sourceEvent.sourceEvent;void 0!==e&&void 0!==i?e.fireNodeClickEvent(a,i):this.chart.fireEvent({type:"click",event:a}),t.preventDefault()}checkSeriesNodeClick(t){let e={x:t.regionOffsetX,y:t.regionOffsetY};"series"!==t.region&&(e=am.fromCanvasPoint(this.chart.seriesRoot,t.offsetX,t.offsetY));let i=o5(this.series,e,"event");return null!=i&&("click"===t.type?(i.series.fireNodeClickEvent(t.sourceEvent,i.datum),!0):"dblclick"===t.type&&(t.preventZoomDblClick=0===i.distance,i.series.fireNodeDoubleClickEvent(t.sourceEvent,i.datum),!0))}refreshFocus(){this.chart.ctx.focusIndicator.isFocusVisible()&&this.handleSeriesFocus(0,0)}handleFocus(t,e){let i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);null==i?this.handleSeriesFocus(t,e):this.chart.ctx.focusIndicator.updateBounds(i.rect)}handleSeriesFocus(t,e){if("hierarchy"===this.chart.chartType){this.handleHierarchySeriesFocus(t,e);return}let{focus:i,seriesRect:a}=this,s=i.sortedSeries.filter(t=>t.visible);if(0===s.length)return;i.seriesIndex=td(0,i.seriesIndex,s.length-1),i.series=s[i.seriesIndex];let{datumIndex:r,seriesIndex:n}=i,o=i.series.pickFocus({datumIndex:r,datumIndexDelta:e,otherIndex:n,otherIndexDelta:t,seriesRect:a});this.updatePickedFocus(o)}handleHierarchySeriesFocus(t,e){this.focus.series=this.focus.sortedSeries[0];let{focus:{series:i,seriesIndex:a,datumIndex:s},seriesRect:r}=this;if(void 0===i)return;let n=i.pickFocus({datumIndex:s,datumIndexDelta:e,otherIndex:a,otherIndexDelta:t,seriesRect:r});this.updatePickedFocus(n)}updatePickedFocus(t){let{focus:e}=this;if(void 0===t||void 0===e.series)return;let{datum:i,datumIndex:a}=t;e.datumIndex=a,e.datum=i,this.chart.ctx.focusIndicator.isFocusVisible()&&this.chart.ctx.animationManager.reset();let s=function(t,e){!function(t,e){let{bounds:i,showFocusBox:a}=e;a&&t?.updateBounds(i)}(t,e);let{x:i,y:a}=function(t){if(null!=t)return t instanceof tI?t.computeCenter():am.toCanvas(t).computeCenter()}(e.bounds)??{};if(void 0!==i&&void 0!==a)return{type:"keyboard",offsetX:i,offsetY:a}}(this.chart.ctx.focusIndicator,t);if(void 0!==s&&"keyboard"===this.hoverDevice){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;let t=e.series.getTooltipHtml(i),a=ou.makeTooltipMeta(s,i);this.chart.ctx.highlightManager.updateHighlight(this.id,i),this.chart.ctx.tooltipManager.updateTooltip(this.id,a,t),this.ariaLabel.text=this.getDatumAriaText(i,t)}}getDatumAriaText(t,e){let i=e.ariaLabel;return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:t.series.getDatumAriaText?.(t,i)??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.chart.ctx.focusIndicator.updateBounds(void 0)}handleHoverHighlight(t){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;let e=this.highlight.appliedHoverEvent;if(!e)return;let i=this.chart.ctx.interactionManager.getState();if(32!==i&&8!==i&&1!==i)return;let{offsetX:a,offsetY:s}=e;if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(a,s)){this.clearHighlight();return}let r={x:e.regionOffsetX,y:e.regionOffsetY};"series"!==e.region&&(r=am.fromCanvasPoint(this.chart.seriesRoot,a,s));let{range:n}=this.chart.highlight,o=o5(this.series,r,"tooltip"===n?"highlight-tooltip":"highlight");if(o){this.chart.ctx.highlightManager.updateHighlight(this.id,o.datum),this.hoverDevice="mouse";return}this.chart.ctx.highlightManager.updateHighlight(this.id)}handleHoverTooltip(t,e){let i=this.chart.ctx.interactionManager.getState();if(32!==i&&8!==i&&1!==i)return;let{offsetX:a,offsetY:s,targetElement:r,regionOffsetX:n,regionOffsetY:o}=t;if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(a,s)){"mouse"==this.hoverDevice&&this.clearTooltip();return}if(r&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(r,"canvas-overlay",sD))return;let l={x:n,y:o};"series"!==t.region&&(l=am.fromCanvasPoint(this.chart.seriesRoot,a,s));let h=o5(this.series,l,"tooltip");if(!h){"mouse"==this.hoverDevice&&this.clearTooltip();return}this.hoverDevice="mouse";let d=h.series.getTooltipHtml(h.datum);if(this.chart.tooltip.enabled&&h.series.tooltipEnabled&&null!=d){let e=ou.makeTooltipMeta(t,h.datum);this.chart.ctx.tooltipManager.updateTooltip(this.id,e,d)}}changeHighlightDatum(t){let e=new Set,{series:i,datum:a}=t.currentHighlight??{},{series:s,datum:r}=t.previousHighlight??{};s&&e.add(s),i&&e.add(i),s?.properties.cursor&&r&&this.chart.ctx.cursorManager.updateCursor(s.id),i?.properties.cursor&&i?.properties.cursor!=="default"&&a&&this.chart.ctx.cursorManager.updateCursor(i.id,i.properties.cursor),null==i||null==s?this.update(4):this.update(4,{seriesToUpdate:e})}},o8=class{constructor(t,e,i){this.seriesRoot=t,this.highlightRoot=e,this.annotationRoot=i,this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i;let{internalId:a,type:s,rootGroup:r,highlightGroup:n,annotationGroup:o,seriesGrouping:l}=t,{groupIndex:h=a}=l??{};if(null!=this.series[a])throw Error(`AG Charts - series already has an allocated layer: ${this.series[a]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),(e=this.groups)[s]??(e[s]={});let d=this.lookupIdx(h),u=(i=this.groups[s])[d]??(i[d]={type:s,id:d,seriesIds:[],group:this.seriesRoot.appendChild(new sk({name:`${s}-content`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.highlightRoot.appendChild(new ax({name:`${s}-highlight`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.annotationRoot.appendChild(new ax({name:`${s}-annotation`,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))});return this.series[a]={layerState:u,seriesConfig:t},u.seriesIds.push(a),u.group.appendChild(r),u.highlight.appendChild(n),u.annotation.appendChild(o),u.group}changeGroup(t){let{internalId:e,seriesGrouping:i,type:a,rootGroup:s,highlightGroup:r,annotationGroup:n,oldGrouping:o}=t,{groupIndex:l=e}=i??{};this.groups[a]?.[l]?.seriesIds.includes(e)||(null!=this.series[e]&&this.releaseGroup({internalId:e,seriesGrouping:o,type:a,rootGroup:s,highlightGroup:r,annotationGroup:n}),this.requestGroup(t))}releaseGroup(t){let{internalId:e,rootGroup:i,highlightGroup:a,annotationGroup:s,type:r}=t;if(null==this.series[e])throw Error(`AG Charts - series doesn't have an allocated layer: ${e}`);let n=this.series[e]?.layerState;if(n&&(n.seriesIds=n.seriesIds.filter(t=>t!==e),n.group.removeChild(i),n.highlight.removeChild(a),n.annotation.removeChild(s)),n?.seriesIds.length===0)this.seriesRoot.removeChild(n.group),this.highlightRoot.removeChild(n.highlight),this.annotationRoot.removeChild(n.annotation),delete this.groups[n.type][n.id],delete this.groups[r][e];else if(n?.seriesIds.length>0){let t=this.series[n?.seriesIds?.[0]]?.seriesConfig;n.group.zIndexSubOrder=t?.getGroupZIndexSubOrder("data"),n.highlight.zIndexSubOrder=t?.getGroupZIndexSubOrder("highlight"),n.annotation.zIndexSubOrder=t?.getGroupZIndexSubOrder("annotation")}delete this.series[e]}lookupIdx(t){return"normal"===this.mode?t:"string"!=typeof t||(t=Number(t.split("-").at(-1)))?Math.floor(30*td(0,t/this.expectedSeriesCount,1)):0}destroy(){for(let t of Object.values(this.groups))for(let e of Object.values(t))this.seriesRoot.removeChild(e.group),this.highlightRoot.removeChild(e.highlight),this.annotationRoot.removeChild(e.annotation);this.groups={},this.series={}}},o7=class{constructor(t,e,i,a){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=a,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(t=>t())}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){(this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow().catch(t=>y.errorOnce(t))}onZoomChange(){this.dirtyZoom=!0}async updateWindow(){let t;if(!this.dataService.isLazy())return;let e=this.getValidAxis(),i=!0;if(e){let a=this.zoomManager.getAxisZoom(e.id);t=this.getAxisWindow(e,a),i=this.shouldRefresh(e,a)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:t?.min,windowEnd:t?.max})}getValidAxis(){return this.chart.axes.find(t=>"time"===t.type)}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;let i=this.lastAxisZooms.get(t.id);return(!i||e.min!==i.min||e.max!==i.max)&&(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){let i=t.scale.getDomain?.();if(!e||!i||0===i.length||isNaN(Number(i[0])))return;let a=Number(i[1])-Number(i[0]);return{min:new Date(Number(i[0])+a*e.min),max:new Date(Number(i[0])+a*e.max)}}},lt=class{constructor(t,e,i,a,s,r,n){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutManager=a,this.localeManager=s,this.animationManager=r,this.domManager=n,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(oX),this.destroyFns.push(this.layoutManager.addListener("layout:complete",t=>this.onLayoutComplete(t)))}destroy(){this.destroyFns.forEach(t=>t()),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:t}}){let e=this.dataService.isLoading(),i=this.chartLike.series.some(t=>t.hasData),a=this.chartLike.series.some(t=>t.visible);this.overlays.darkTheme?this.overlayElem.classList.add(oK):this.overlayElem.classList.remove(oK),this.overlayElem.style.left=`${t.x}px`,this.overlayElem.style.top=`${t.y}px`,this.overlayElem.style.width=`${t.width}px`,this.overlayElem.style.height=`${t.height}px`;let s=!e&&!i,r=i&&!a;e?this.showOverlay(this.overlays.loading,t):this.hideOverlay(this.overlays.loading),s?this.showOverlay(this.overlays.noData,t):this.hideOverlay(this.overlays.noData),r?this.showOverlay(this.overlays.noVisibleSeries,t):this.hideOverlay(this.overlays.noVisibleSeries),sx(this.overlayElem,"aria-hidden",!(e||s||r))}showOverlay(t,e){let i=t.getElement(this.animationManager,this.localeManager,e);this.overlayElem.appendChild(i)}hideOverlay(t){t.removeElement(()=>{this.overlayElem.innerText="\xa0"},this.animationManager)}},le=aN.create(!0,"opts"),li=class extends eW{constructor(){super(...arguments),this.padding=new rE(0)}};o([eQ(e0,{optional:!0})],li.prototype,"clip",2),o([eQ(eJ)],li.prototype,"padding",2);var la=class t extends rk{constructor(t,e){var i;super(),this.id=_(this),this.seriesRoot=new av({name:`${this.id}-series-root`}),this.highlightRoot=new sE({name:`${this.id}-highlight-root`,zIndex:5,deriveZIndexFromChildren:!0}),this.annotationRoot=new sE({name:`${this.id}-annotation-root`,zIndex:10}),this.debug=aN.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new rE(20),this.seriesArea=new li,this.keyboard=new oB,this.mode="standalone",this.chartCaptions=new rB,this.destroyed=!1,this._destroyFns=[],this.skipSync=!1,this.chartAnimationPhase="initial",this.modulesManager=new oQ,this.processors=[],this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new rT,this.updateRequestors={},this.performUpdateTrigger=rO((t,e=0)=>setTimeout(t,e),async({count:t})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(t)}catch(t){y.error("update error",t)}}).catch(t=>y.errorOnce(t))}),this._performUpdateSplits={},this.axes=[],this.series=[],this.onSeriesNodeClick=t=>{this.fireEvent({...t,type:"seriesNodeClick"})},this.onSeriesNodeDoubleClick=t=>{this.fireEvent({...t,type:"seriesNodeDoubleClick"})},this.seriesGroupingChanged=t=>{if(!(t instanceof o2))return;let{series:e,seriesGrouping:i,oldGrouping:a}=t;e.rootGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:e.internalId,type:e.type,rootGroup:e.rootGroup,highlightGroup:e.highlightGroup,annotationGroup:e.annotationGroup,getGroupZIndexSubOrder:t=>e.getGroupZIndexSubOrder(t),seriesGrouping:i,oldGrouping:a})},this.chartOptions=t;let a=e?.scene,s=e?.container??t.processedOptions.container??void 0,r=e?.styleContainer??t.specialOverrides.styleContainer,n=new ax({name:"root"}),o=new sk({name:"titles",zIndex:14});n.visible=!1,n.append(o),n.append(this.seriesRoot),n.append(this.highlightRoot),n.append(this.annotationRoot),o.append(this.title.node),o.append(this.subtitle.node),o.append(this.footnote.node),this.tooltip=new sw,this.seriesLayerManager=new o8(this.seriesRoot,this.highlightRoot,this.annotationRoot),this.mode=t.userOptions.mode??this.mode;let l=this.ctx=new of(this,{scene:a,root:n,container:s,styleContainer:r,syncManager:new oP(this),pixelRatio:t.specialOverrides.overrideDevicePixelRatio,updateCallback:(t=0,e)=>this.update(t,e),updateMutex:this.updateMutex});this._destroyFns.push(l.domManager.addListener("resize",()=>this.parentResize(l.domManager.containerSize))),this.overlays=new oq,(i=this.overlays.loading).renderer??(i.renderer=()=>(function(t,e){let{animationDuration:i}=em.add,a=te("div",`${oX}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${i*e}ms linear 50ms both`}),s=te("span",{width:"45px",height:"40px",backgroundImage:"linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)",backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),r=te("p",{marginTop:"1em"});r.innerText=t;let n=te("div",`${oX}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),o=te("style");return o.innerText="@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } } @keyframes ag-charts-loading-matrix { 0% { background-position: 0% 0%, 50% 0%, 100% 0%; } 100% { background-position: 0% 100%, 50% 100%, 100% 100%; } }",a.replaceChildren(o,s,r,n),a})(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new o7(this,l.dataService,l.updateService,l.zoomManager),new lt(this,this.overlays,l.dataService,l.layoutManager,l.localeManager,l.animationManager,l.domManager)],this.highlight=new ox,this.container=s;let h=this.getModuleContext();l.regionManager.addRegion("series",this.seriesRoot,new n7(this.seriesRoot,()=>this.seriesRect??tI.zero),this.ctx.axisManager.axisGridGroup),l.regionManager.addRegion("horizontal-axes"),l.regionManager.addRegion("vertical-axes"),l.regionManager.addRegion("root",n),l.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new o6(this.initSeriesAreaDependencies()),this._destroyFns.push(l.layoutManager.registerElement(0,t=>{t.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(t)}),l.layoutManager.addListener("layout:complete",t=>this.chartCaptions.positionAbsoluteCaptions(t)),l.dataService.addListener("data-load",t=>{this.data=t.data}),this.title.registerInteraction(h,"beforebegin"),this.subtitle.registerInteraction(h,"beforebegin"),this.footnote.registerInteraction(h,"afterend"),l.interactionManager.addListener("page-left",()=>this.destroy()),l.animationManager.addListener("animation-frame",()=>{this.update(6)}),l.animationManager.addListener("animation-start",()=>l.domManager.setDataBoolean("animating",!0)),l.animationManager.addListener("animation-stop",()=>l.domManager.setDataBoolean("animating",!1)),l.zoomManager.addListener("zoom-change",()=>{this.series.forEach(t=>t.animationState?.transition("updateData"));let t="initial"!==this.chartAnimationPhase;this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t})})),this.parentResize(l.domManager.containerSize)}static getInstance(e){return t.chartsInstances.get(e)}get canvasElement(){return this.ctx.scene.canvas.element}download(t,e){this.ctx.scene.download(t,e)}getCanvasDataURL(t){return this.ctx.scene.getDataURL(t)}toSVG(){return this.ctx.scene.toSVG()}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}initSeriesAreaDependencies(){let{ctx:t,tooltip:e,highlight:i,overlays:a,seriesRoot:s}=this,r=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,chartType:r,ctx:t,tooltip:e,highlight:i,overlays:a,seriesRoot:s}}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(t=>t.enabled&&t.text).map(t=>t.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){for(let t of(this.chartAnimationPhase="initial",this.series))t.resetAnimation(this.chartAnimationPhase);for(let t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(t){let e;if(this.destroyed)return;let i=t?.keepTransferableResources;return this.performUpdateType=7,this._destroyFns.forEach(t=>t()),this.processors.forEach(t=>t.destroy()),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),e={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(t=>t.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),e}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{!this.destroyed&&(await t(this),!this.destroyed&&this._pendingFactoryUpdatesCount--)}).catch(t=>y.errorOnce(t)))}update(t=0,e){let{forceNodeDataRefresh:i=!1,skipAnimations:a,seriesToUpdate:s=this.series,newAnimationBatch:r}=e??{};for(let t of(i&&this.series.forEach(t=>t.markNodeDataDirty()),s))this.seriesToUpdate.add(t);if(a&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),r&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.skipSync=e?.skipSync??!1,this.debug.check()){let e=Error().stack??"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(e?.backOffMs))}async performUpdate(t){let{performUpdateType:e,extraDebugStats:i,_performUpdateSplits:a,ctx:s}=this,r=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&e<6&&(s.animationManager.startBatch(this._performUpdateSkipAnimations),s.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",oy[e]);let n=performance.now();a.start??(a.start=n);let o=t=>{a[t]??(a[t]=0),a[t]+=performance.now()-n,n=performance.now()},l=!1;switch(e){case 0:this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:await this.updateData(),o("⬇️");case 2:await this.processData(),this.seriesAreaManager.dataChanged(),o("\uD83C\uDFED");case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(r)){l=!0;break}await this.processLayout(),o("⌖");case 4:{if(this.checkUpdateShortcut(4))break;let{seriesRect:t}=this;await Promise.all(r.map(e=>e.update({seriesRect:t}))),o("\uD83E\uDD14"),this.updateAriaLabels()}case 5:if(this.checkUpdateShortcut(5))break;s.updateService.dispatchPreSceneRender(this.getMinRects()),o("↖");case 6:if(this.checkUpdateShortcut(6))break;for(let t in s.animationManager.endBatch(),i.updateShortcutCount=this.updateShortcutCount,await s.scene.render({debugSplitTimes:a,extraDebugStats:i,seriesRect:this.seriesRect}),this.extraDebugStats={},a)delete a[t];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,s.animationManager.endBatch()}l||(s.updateService.dispatchUpdateComplete(this.getMinRects()),this.ctx.domManager.setDataBoolean("updatePending",!1));let h=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((h-a.start)*100)/100,count:t,performUpdateType:oy[e]})}updateThemeClassName(){let{theme:t}=this.chartOptions.processedOptions,e="ag-charts-theme-",i=[`${e}default`,`${e}default-dark`],a=i[0],s=!1;"string"==typeof t?(a=t.replace("ag-",e),s=t.includes("-dark")):"string"==typeof t?.baseTheme&&(a=t.baseTheme.replace("ag-",e),s=t.baseTheme.includes("-dark")),i.includes(a)||(a=s?i[1]:i[0]),this.ctx.domManager.setThemeClass(a)}updateDOM(){this.updateThemeClassName();let{enabled:t,tabIndex:e}=this.keyboard;this.ctx.domManager.setTabIndex(t?e??0:-1)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(t){return this.updateShortcutCount>3?(y.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(null!=this.width&&null!=this.height);else if(!this._lastAutoSize){let e=this._performUpdateNoRenderCount++,i=(e+1)**2*40;if(e<8)return this.update(3,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onAxisChange(t,e){(null!=e||0!==t.length)&&this.ctx.axisManager.updateAxes(e??[],t)}onSeriesChange(t,e){let i=e?.filter(e=>!t.includes(e))??[];for(let a of(this.destroySeries(i),this.seriesLayerManager?.setSeriesCount(t.length),t)){if(e?.includes(a))continue;a.rootGroup.isRoot()&&this.seriesLayerManager.requestGroup(a);let t=this;a.chart={get mode(){return t.mode},get isMiniChart(){return!1},get seriesRect(){return t.seriesRect},placeLabels:e=>t.placeLabels(e)},a.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(a),a.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(t)}destroySeries(t){t?.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.removeEventListener("groupingChanged",this.seriesGroupingChanged),t.destroy(),this.seriesLayerManager.releaseGroup(t),t.chart=void 0})}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(let t of this.axes)t.boundSeries=this.series.filter(e=>e.axes[t.direction]===t)}assignAxesToSeries(){let t=ek(this.axes,t=>t.direction);this.series.forEach(e=>{e.directions.forEach(i=>{let a=t[i];if(!a){y.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}let s=e.getKeys(i),r=a.find(t=>!t.keys.length||s.some(e=>t.keys.includes(e)));if(!r){y.warnOnce(`no matching axis for direction [${i}] and keys [${s}]; check series and axes configuration.`);return}e.axes[i]=r})})}parentResize(t){if(null==t||null!=this.width&&null!=this.height)return;let{width:e,height:i}=t;if(e=Math.floor(e),i=Math.floor(i),0===e&&0===i)return;let[a=0,s=0]=this._lastAutoSize??[];(a!==e||s!==i)&&(this._lastAutoSize=[e,i],this.resize("SizeMonitor",{}))}resize(t,e){let{scene:i,animationManager:a}=this.ctx,{inWidth:s,inHeight:r,inMinWidth:n,inMinHeight:o}=e;this.ctx.domManager.setSizeOptions(n??this.minWidth,o??this.minHeight,s??this.width,r??this.height);let l=s??this.width??this._lastAutoSize?.[0],h=r??this.height??this._lastAutoSize?.[1];if(this.debug(`Chart.resize() from ${t}`,{width:l,height:h,stack:Error().stack}),null!=l&&null!=h&&t0(l)&&t0(h)&&i.resize(l,h)){a.reset();let t=!0;(null==this.width||null==this.height)&&this._firstAutoSize&&(t=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t})}}async updateData(){this.series.forEach(t=>t.setChartData(this.data));let t=this.modulesManager.mapModules(t=>t.updateData?.(this.data));await Promise.all(t)}async processData(){this.series.some(t=>t.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());let t=new oL(this.mode),e=this.series.map(e=>e.processData(t)),i=this.modulesManager.mapModules(e=>e.processData?.(t));for(let{legendType:a,legend:s}of(t.execute(),await Promise.all([...e,...i]),this.modulesManager.legends()))s.data=this.getLegendData(a,"integrated"!==this.mode)}placeLabels(t){let e=[],i=[];for(let t of this.series){var a;if(!t.visible)continue;let s=t.getLabelData();null!=(a=s?.[0])&&"object"==typeof a.point&&"object"==typeof a.label&&(i.push(s),e.push(t))}let{seriesRect:s}=this,{top:r,right:n,bottom:o,left:l}=this.seriesArea.padding;return new Map((s&&i.length>0?function(t,e,i=5){let a=[];t=t.map(t=>t.slice().sort((t,e)=>e.point.size-t.point.size));for(let s=0;s<t.length;s++){let r=a[s]=[],n=t[s];if(n?.length&&n[0].label)for(let s=0,o=n.length;s<o;s++){let o=n[s],{point:l,label:h,marker:d}=o,{text:u,width:c,height:p}=h,g=.5*l.size,y=0,m=0;if(g>0&&null!=o.placement){let t=a8[o.placement];y=(.5*c+g+i)*t.x,m=(.5*p+g+i)*t.y}let f=l.x-.5*c+y-((d?.center.x??.5)-.5)*l.size,x=l.y-.5*p+m-((d?.center.y??.5)-.5)*l.size;!(!e||f+c<e.x+e.width&&f>e.x&&x>e.y&&x+p<e.y+e.height)||t.some(t=>t.some(t=>(function(t,e,i,a,s,r){if(0===t.size)return!1;let n=t.x,o=t.y;null!=e&&(n-=(e.x-.5)*t.size,o-=(e.y-.5)*t.size);let l=n;n<i?l=i:n>i+s&&(l=i+s);let h=o;o<a?h=a:o>a+r&&(h=a+r);let d=n-l,u=o-h;return Math.sqrt(d*d+u*u)<=.5*t.size})(t.point,t.marker?.center,f,x,c,p)))||a.some(t=>t.some(t=>a6(t,f,x,c,p)))||r.push({index:s,text:u,x:f,y:x,width:c,height:p,datum:o})}}return a}(i,{x:-l,y:-r,width:s.width+l+n,height:s.height+r+o},t):[]).map((t,i)=>[e[i],t]))}getLegendData(t,e){var i;let a=this.series.filter(t=>t.properties.showInLegend).flatMap(e=>e.getLegendData(t));if(e&&a.every(t=>"category"===t.legendType)){let t={},e=new Map(this.series.map(t=>[t.id,t.type]));for(let{seriesId:s,symbols:[{marker:r}],label:n}of a){if(null==r.fill)continue;let a=e.get(s),o=t[a]??(t[a]={});o[i=n.text]??(o[i]=r.fill),o[n.text]!==r.fill&&y.warnOnce(`legend item '${n.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}return a}async processLayout(){let t=this.animationRect,{width:e,height:i}=this.ctx.scene,a=this.ctx.layoutManager.createContext(e,i);await this.performLayout(a),t&&!this.animationRect?.equals(t)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async waitForUpdate(t=1e4,e=!1){let i=performance.now();for(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue();7!==this.performUpdateType;){if(performance.now()-i>t){let i=`Chart.waitForUpdate() timeout of ${t} reached - first chart update taking too long.`;if(e)throw Error(i);y.warnOnce(i)}await new Promise(t=>{setTimeout(()=>t(void 0),50)})}await this.updateMutex.waitForClearAcquireQueue()}getMinRects(){let{width:t,height:e}=this.ctx.scene,i=this.series.map(i=>i.getMinRects(t,e)).filter(tY);if(0===i.length)return;let a=0,s=0,r=0,n=0;for(let{minRect:t,minVisibleRect:e}of i)a=Math.max(a,t.width),s=Math.max(s,t.height),r=Math.max(r,e.width),n=Math.max(n,e.height);let o=new tI(0,0,a,s),l=o.clone();return r>0&&n>0&&(l=new tI(0,0,r,n)),{minRect:o,minVisibleRect:l}}filterMiniChartSeries(t){return t?.filter(t=>!1!==t.showInMiniChart)}applyOptions(t){let e=t!==this.chartOptions?this.chartOptions.processedOptions:{},i=t.processedOptions,a=t.diffOptions(e);if(null==a)return;le("Chart.applyOptions() - applying delta",a);let s=this.applyModules(i);a.listeners&&this.registerListeners(this,a.listeners),sr(this,a,{skip:["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"]});let r=!1,n="no-op";null!=a.series&&(n=this.applySeries(this,a.series,e?.series),r=!0),"replaced"===n&&this.resetAnimations(),this.applyAxes(this,i,e,n,[],!0)&&(r=!0),a.data&&(this.data=a.data),a.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,a.legend.listeners),a.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=a.locale?.localeText),this.chartOptions=t;let o=this.modulesManager.getModule("navigator"),l=this.modulesManager.getModule("zoom");o?.enabled||l?.enabled||this.ctx.zoomManager.updateZoom("chart");let h=o?.miniChart,d=i.navigator?.miniChart?.series??i.series;h?.enabled===!0&&null!=d?this.applyMiniChartOptions(h,d,i,e):h?.enabled===!1&&(h.series=[],h.axes=[]),this.ctx.annotationManager.setAnnotationStyles(t.annotationThemes),r||(r=this.shouldForceNodeDataRefresh(a,n));let u=r||s?0:3;this.maybeResetAnimations(n),le("Chart.applyOptions() - update type",oy[u],{seriesStatus:n,forceNodeDataRefresh:r}),this.update(u,{forceNodeDataRefresh:r,newAnimationBatch:!0}),(a.initialState||a.theme)&&this.applyInitialState(t.userOptions.initialState)}applyInitialState(t){let{ctx:{annotationManager:e,historyManager:i,stateManager:a}}=this;if(t?.annotations!=null){let i=t.annotations.map(t=>{let i=e.getAnnotationTypeStyles(t.type);return t8(t,i)});a.setState(e,i)}null!=t&&i.clear()}maybeResetAnimations(t){if("standalone"===this.mode)switch(t){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(t,e){let i=!!t.data||"data-change"===e||"replaced"===e,a=Object.values(oT.getKeys()).some(e=>null!=t[e]),s=null!=t.title&&null!=t.subtitle;return i||a||s}applyMiniChartOptions(t,e,i,a){let s=a?.navigator?.miniChart?.series??a?.series,r=this.applySeries(t,this.filterMiniChartSeries(e),this.filterMiniChartSeries(s));for(let e of(this.applyAxes(t,i,a,r,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]),t.series))e.properties.id=void 0;let n=t.axes,o=n.find(t=>"x"===t.direction);for(let t of n)t.gridLine.enabled=!1,t.label.enabled=t===o,t.tick.enabled=!1,t.interactionEnabled=!1;if(null!=o){let t=i.navigator?.miniChart,e=t?.label,a=t?.label?.interval;o.line.enabled=!1,o.label.set(ee(e,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),o.tick.set(ee(a,["enabled","width","size","color","interval","step"]));let s=a?.step;null!=s&&(o.interval.step=s)}}applyModules(t){let{type:e}=this.constructor,i=!1;for(let a of rC.byType("root","legend")){let s=null!=t[a.optionsKey]&&a.chartTypes.includes(e);s!==this.modulesManager.isEnabled(a)&&(s?(this.modulesManager.addModule(a,t=>t.moduleFactory(this.getModuleContext())),"legend"===a.type&&this.modulesManager.getModule(a)?.attachLegend(this.ctx.scene),this[a.optionsKey]=this.modulesManager.getModule(a)):(this.modulesManager.removeModule(a),delete this[a.optionsKey]),i=!0)}return i}initSeriesDeclarationOrder(t){for(let e=0;e<t.length;e++)t[e]._declarationOrder=e}applySeries(t,e,i){if(!e)return"no-change";let a=function(t,e,i){let a=(t,e,i)=>{let a=[t];for(let t of oF)t in e&&null!=e[t]&&a.push(`${t}=${e[t]}`);return i?.seriesGrouping&&a.push(`seriesGrouping.groupId=${i?.seriesGrouping.groupId}`),a.join(";")},s=new Map,r=0;for(let e of t){let t=a(e.type,e.properties,i?.[r]);s.has(t)||s.set(t,[]),s.get(t)?.push([e,r++])}let n=new Map;for(let t of e){let e=a(t.type,t,t);n.has(e)||n.set(e,[]),n.get(e)?.push(t)}if(![...s.keys()].some(t=>n.has(t)))return{status:"no-overlap",oldKeys:s.keys(),newKeys:n.keys()};let o=[],l=-1;for(let[t,e]of n.entries())for(let a of e){l++;let e=s.get(t);if(null==e||e.length<1){o.push({opts:a,idx:l,status:"add"}),s.delete(t);continue}let[r,n]=e.shift(),h=se(i?.[n]??{},a??{}),{groupIndex:d,stackIndex:u}=h?.seriesGrouping??{};null!=d||null!=u?o.push({opts:a,series:r,diff:h,idx:n,status:"series-grouping"}):h?o.push({opts:a,series:r,diff:h,idx:n,status:"update"}):o.push({opts:a,series:r,idx:n,status:"no-op"}),0===e.length&&s.delete(t)}for(let t of s.values())for(let[e,i]of t)o.push({series:e,idx:i,status:"remove"});return{status:"overlap",changes:o}}(t.series,e,i);if("no-overlap"===a.status)return le(`Chart.applySeries() - creating new series instances, status: ${a.status}`,a),t.series=e.map(t=>this.createSeries(t)),this.initSeriesDeclarationOrder(t.series),"replaced";le("Chart.applySeries() - matchResult",a);let s=[],r=!1,n=!1,o=!1;for(let t of a.changes)switch(n||(n="series-grouping"===t.status),r||(r=t.diff?.data!=null),o||(o="no-op"!==t.status),t.status){case"add":{let e=this.createSeries(t.opts);s.push(e),le("Chart.applySeries() - created new series",e);break}case"remove":le(`Chart.applySeries() - removing series at previous idx ${t.idx}`,t.series);break;case"no-op":s.push(t.series),le(`Chart.applySeries() - no change to series at previous idx ${t.idx}`,t.series);break;default:{let{series:e,diff:i,idx:a}=t;le(`Chart.applySeries() - applying series diff previous idx ${a}`,i,e),this.applySeriesValues(e,i),e.markNodeDataDirty(),s.push(e)}}return(this.initSeriesDeclarationOrder(s),le("Chart.applySeries() - final series instances",s),t.series=s,n)?"series-grouping-change":r?"data-change":o?"updated":"no-op"}applyAxes(t,e,i,a,s=[],r=!1){if(!("axes"in e)||!e.axes)return!1;s=["axes[].type",...s];let{axes:n}=e;if("replaced"!==a&&t.axes.length===n.length&&t.axes.every((t,e)=>t.type===n[e].type)&&oY(i))return t.axes.forEach((t,e)=>{let a=se(i.axes?.[e]??{},n[e]);le(`Chart.applyAxes() - applying axis diff idx ${e}`,a),sr(t,a,{path:`axes[${e}]`,skip:s})}),!0;le(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${a}`),t.axes=this.createAxis(n,s);let o={x:[],y:[]};return t.axes.forEach(t=>{let{id:e}=t,i=t.getRegionNode();null!=i&&o[t.direction].push({id:e,node:i})}),r&&(this.ctx.regionManager.updateRegion("horizontal-axes",...o.x),this.ctx.regionManager.updateRegion("vertical-axes",...o.y)),!0}createSeries(t){let e=oz.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(e,t),this.applySeriesValues(e,t),e}applySeriesOptionModules(t,e){let i=t.createModuleContext(),a=t.getModuleMap();for(let s of rC.byType("series-option"))s.optionsKey in e&&s.seriesTypes.includes(t.type)&&a.addModule(s,t=>t.moduleFactory(i))}applySeriesValues(t,e){let i=t.getModuleMap(),{type:a,data:s,listeners:r,seriesGrouping:n,showInMiniChart:o,...l}=e;for(let t of ow)if("series-option"===t.type&&t.optionsKey in l){let e=i.getModule(t.optionsKey);if(e){let i=l[t.optionsKey];delete l[t.optionsKey],e.properties.set(i)}}t.properties.set(l),"data"in e&&t.setOptionsData(s),r&&this.registerListeners(t,r),"seriesGrouping"in e&&(null==n?t.seriesGrouping=void 0:t.seriesGrouping={...t.seriesGrouping,...n})}createAxis(t,e){let i=[],a=this.getModuleContext();for(let s=0;s<t.length;s++){let r=t[s],n=oA.create(r.type,a);this.applyAxisModules(n,r),sr(n,r,{path:`axes[${s}]`,skip:e}),i.push(n)}return function(t){let e=[],i=[],a=[...oG];for(let a of t)if(a instanceof rb){var s;"string"==typeof(s=a.position)&&oG.includes(s)?i.push(a.position):e.push(a)}for(let t of e){let e;do e=a.pop();while(e&&i.includes(e));if(null==e)break;t.position=e}}(i),i}applyAxisModules(t,e){let i=t.createModuleContext(),a=t.getModuleMap();for(let s of rC.byType("axis-option")){let r=null!=e[s.optionsKey];r!==a.isEnabled(s)&&(r?(a.addModule(s,t=>t.moduleFactory(i)),t[s.optionsKey]=a.getModule(s)):(a.removeModule(s),delete t[s.optionsKey]))}}registerListeners(t,e){for(let[i,a]of(t.clearEventListeners(),Object.entries(e)))t$(a)&&t.addEventListener(i,a)}};la.chartsInstances=new WeakMap,o([su({newValue(t){this.destroyed||(this.ctx.domManager.setContainer(t),la.chartsInstances.set(t,this))},oldValue(t){la.chartsInstances.delete(t)}})],la.prototype,"container",2),o([su({newValue(t){this.resize("width option",{inWidth:t})}})],la.prototype,"width",2),o([su({newValue(t){this.resize("height option",{inHeight:t})}})],la.prototype,"height",2),o([su({newValue(t){this.resize("minWidth option",{inMinWidth:t})}})],la.prototype,"minWidth",2),o([su({newValue(t){this.resize("minHeight option",{inMinHeight:t})}})],la.prototype,"minHeight",2),o([eQ(eJ)],la.prototype,"padding",2),o([eQ(eJ)],la.prototype,"seriesArea",2),o([eQ(eJ)],la.prototype,"keyboard",2),o([eQ(iE(["standalone","integrated"],"a chart mode"))],la.prototype,"mode",2),o([sl("chartCaptions.title")],la.prototype,"title",2),o([sl("chartCaptions.subtitle")],la.prototype,"subtitle",2),o([sl("chartCaptions.footnote")],la.prototype,"footnote",2),o([su({changeValue(t,e){this.onAxisChange(t,e)}})],la.prototype,"axes",2),o([su({changeValue(t,e){this.onSeriesChange(t,e)}})],la.prototype,"series",2);var ls=la,lr=class{constructor(t,e,i){this.root=new ll(t,e,i)}clear(t){this.root.clear(t)}addValue(t,e){this.root.addElem({hitTester:t,value:e,distanceSquared:(e,i)=>t.distanceSquared(e,i)})}find(t,e){let i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(t,e,i),i.best}},ln=class{constructor(t,e,i,a){this.nw=t,this.ne=e,this.sw=i,this.se=a}addElem(t){this.nw.addElem(t),this.ne.addElem(t),this.sw.addElem(t),this.se.addElem(t)}find(t,e,i){this.nw.find(t,e,i),this.ne.find(t,e,i),this.sw.find(t,e,i),this.se.find(t,e,i)}},lo=class{constructor(t,e,i){this.capacity=t,this.maxdepth=e,this.boundary=i??tI.NaN,this.elems=[],this.subdivisions=void 0}clear(t){this.elems.length=0,this.boundary=t,this.subdivisions=void 0}addElem(t){this.addCondition(t)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(t):this.subdivide(t):this.subdivisions.addElem(t))}find(t,e,i){this.findCondition(t,e,i)&&(void 0===this.subdivisions?this.findAction(t,e,i):this.subdivisions.find(t,e,i))}subdivide(t){for(let t of(this.subdivisions=this.makeSubdivisions(),this.elems))this.subdivisions.addElem(t);this.subdivisions.addElem(t),this.elems.length=0}makeSubdivisions(){let{x:t,y:e,width:i,height:a}=this.boundary,{capacity:s}=this,r=this.maxdepth-1,n=i/2,o=a/2,l=new tI(t,e,n,o),h=new tI(t+n,e,n,o),d=new tI(t,e+o,n,o),u=new tI(t+n,e+o,n,o);return new ln(this.child(s,r,l),this.child(s,r,h),this.child(s,r,d),this.child(s,r,u))}},ll=class t extends lo{addCondition(t){let{x:e,y:i}=t.hitTester.midPoint;return this.boundary.containsPoint(e,i)}findCondition(t,e,i){let{best:a}=i;return 0!==a.distanceSquared&&this.boundary.distanceSquared(t,e)<a.distanceSquared}findAction(t,e,i){let a=X(t,e,this.elems,i.best.distanceSquared);void 0!==a.nearest&&a.distanceSquared<i.best.distanceSquared&&(i.best=a)}child(e,i,a){return new t(e,i,a)}},lh=["ArrowDown","ArrowUp","Circle","Cross","Diamond","Heart","MapPin","Plus","Square","Star","Triangle"],ld=Object.freeze({x:.5,y:.5}),lu=class extends ng{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}isBuiltIn(){return lh.includes(this.constructor.className??"")}computeBBox(){if(!this.isBuiltIn())return this.path.computeBBox();let{x:t,y:e,size:i}=this,{center:a}=this.constructor;return new tI(t-i*a.x,e-i*a.y,i,i)}applyPath(t,e){let{path:i}=this,{x:a,y:s}=this;for(let{x:r,y:n,t:o}of(i.clear(),e))a+=r*t,s+=n*t,"move"===o?i.moveTo(a,s):i.lineTo(a,s);i.closePath()}executeFill(t,e){if(e)return super.executeFill(t,e)}executeStroke(t,e){if(e)return super.executeStroke(t,e)}};o([np()],lu.prototype,"x",2),o([np()],lu.prototype,"y",2),o([np({convertor:Math.abs})],lu.prototype,"size",2);var lc=class extends ap(ag(ay(lu))){};lc.center=ld;var lp=class extends lc{updatePath(){let{x:t,y:e,path:i,size:a}=this;i.clear(),i.arc(t,e,a/2,0,2*Math.PI),i.closePath()}};lp.className="Circle";var lg=class t extends lc{updatePath(){let e=this.size/4.2;super.applyPath(e,t.moves)}};lg.className="Cross",lg.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var ly=class t extends lc{updatePath(){let e=this.size/2;super.applyPath(e,t.moves)}};ly.className="Diamond",ly.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var lm=class extends lc{rad(t){return t/180*Math.PI}updatePath(){let{x:t,path:e,size:i,rad:a}=this,s=i/4,r=this.y+s/2;e.clear(),e.arc(t-s,r-s,s,a(130),a(330)),e.arc(t+s,r-s,s,a(220),a(50)),e.lineTo(t,r+s),e.closePath()}};lm.className="Heart";var lf=class extends lc{updatePath(){let{path:t,x:e,y:i}=this,a=this.size;t.clear(),t.moveTo(e+-.34375*a,i+-.65625*a),t.cubicCurveTo(e+-.34375*a,i+-.848509*a,e+-.192259*a,i+-1*a,e+0*a,i+-1*a),t.cubicCurveTo(e+.19225899999999996*a,i+-1*a,e+.34375*a,i+-.848509*a,e+.34375*a,i+-.65625*a),t.cubicCurveTo(e+.34375*a,i+-.506176*a,e+.284625*a,i+-.39981900000000004*a,e+.21646100000000001*a,i+-.30460699999999996*a),t.cubicCurveTo(e+.199009*a,i+-.280231*a,e+.18127099999999996*a,i+-.256896*a,e+.16378499999999996*a,i+-.23389499999999996*a),t.cubicCurveTo(e+.11189300000000002*a,i+-.16563300000000003*a,e+.06222799999999995*a,i+-.10030099999999997*a,e+.028896000000000033*a,i+-.019352000000000036*a),t.cubicCurveTo(e+.024074999999999958*a,i+-.007642000000000038*a,e+.01266299999999998*a,i+0*a,e+0*a,i+0*a),t.cubicCurveTo(e+-.01266299999999998*a,i+0*a,e+-.024075000000000013*a,i+-.007642000000000038*a,e+-.028895999999999977*a,i+-.019352000000000036*a),t.cubicCurveTo(e+-.01266299999999998*a,i+0*a,e+-.024075000000000013*a,i+-.007642000000000038*a,e+-.028895999999999977*a,i+-.019352000000000036*a),t.cubicCurveTo(e+-.062228000000000006*a,i+-.10030099999999997*a,e+-.11189300000000002*a,i+-.16563300000000003*a,e+-.16378500000000001*a,i+-.23389499999999996*a),t.cubicCurveTo(e+-.18127100000000002*a,i+-.256896*a,e+-.199009*a,i+-.280231*a,e+-.21646100000000001*a,i+-.30460699999999996*a),t.cubicCurveTo(e+-.284625*a,i+-.39981900000000004*a,e+-.34375*a,i+-.506176*a,e+-.34375*a,i+-.65625*a),t.closePath()}};lf.className="MapPin",lf.center={x:.5,y:1};var lx=class t extends lc{updatePath(){let e=this.size/3;super.applyPath(e,t.moves)}};lx.className="Plus",lx.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var lM=class extends lc{updatePath(){let{path:t,x:e,y:i}=this,a=this.size/2;t.clear(),t.moveTo(this.align(e-a),this.align(i-a)),t.lineTo(this.align(e+a),this.align(i-a)),t.lineTo(this.align(e+a),this.align(i+a)),t.lineTo(this.align(e-a),this.align(i+a)),t.closePath()}};lM.className="Square";var lb=class extends lc{updatePath(){let{x:t,y:e,path:i,size:a}=this,s=a/2,r=Math.PI/2;i.clear();for(let n=0;n<10;n++){let o=n%2==0?a:s,l=n*Math.PI/5-r,h=t+Math.cos(l)*o,d=e+Math.sin(l)*o;i.lineTo(h,d)}i.closePath()}};lb.className="Star";var lv=class t extends lc{updatePath(){let e=1.1*this.size;super.applyPath(e,t.moves)}};lv.className="Triangle",lv.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var lI={circle:lp,cross:lg,diamond:ly,heart:lm,pin:lf,plus:lx,square:lM,star:lb,triangle:lv},lD=Object.keys(lI);function lS(t){return"string"==typeof t&&lD.includes(t)}function lN(t=lM){return lS(t)?lI[t]:"function"==typeof t?t:lM}var lL=class extends o4{constructor(){super(...arguments),this.showFocusBox=!0}getScaleInformation({xScale:t,yScale:e}){return{isContinuousX:eN.is(t),isContinuousY:eN.is(e),xScaleType:t?.type,yScaleType:e?.type}}getModulePropertyDefinitions(){let t=this.axes.x?.scale,e=this.axes.y?.scale;return this.moduleMap.mapModules(i=>i.getPropertyDefinitions(this.getScaleInformation({xScale:t,yScale:e}))).flat()}async requestDataModel(t,e,i){i.props.push(...this.getModulePropertyDefinitions());let{dataModel:a,processedData:s}=await t.request(this.id,e??[],i);return this.dataModel=a,this.processedData=s,this.dispatch("data-processed",{dataModel:a,processedData:s}),{dataModel:a,processedData:s}}isProcessedDataAnimatable(){let t=this.processedData?.reduced?.animationValidation;if(!t)return!0;let{orderedKeys:e,uniqueKeys:i}=t;return e&&i}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(t){let e=this.getNodeData();if(void 0===e||0===e.length)return;let i=this.computeFocusDatumIndex(t,e);if(void 0===i)return;let{showFocusBox:a}=this,s=e[i],r={...t,datumIndex:i},n=this.computeFocusBounds(r);if(void 0!==n)return{bounds:n,showFocusBox:a,datum:s,datumIndex:i}}computeFocusDatumIndex(t,e){let i;let a=t=>{let{missing:i=!1,enabled:a=!0,focusable:s=!0}=e[t];return!i&&a&&s},s=t=>{for(;t>=0&&!a(t);)t--;return -1===t?void 0:t},r=t=>{for(;t<e.length&&!a(t);)t++;return t===e.length?void 0:t},n=td(0,t.datumIndex,e.length-1);return void 0!==(i=t.datumIndexDelta<0?s(n):t.datumIndexDelta>0?r(n):r(n)??s(n))?i:0!==t.datumIndexDelta?t.datumIndex-t.datumIndexDelta:void 0}},lA=class extends eW{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};o([eQ(ih,{optional:!0})],lA.prototype,"fill",2),o([eQ(e6,{optional:!0})],lA.prototype,"fillOpacity",2),o([eQ(ih,{optional:!0})],lA.prototype,"stroke",2),o([eQ(e9,{optional:!0})],lA.prototype,"strokeWidth",2),o([eQ(e6,{optional:!0})],lA.prototype,"strokeOpacity",2),o([eQ(ib,{optional:!0})],lA.prototype,"lineDash",2),o([eQ(e9,{optional:!0})],lA.prototype,"lineDashOffset",2);var lw=class extends eW{};o([eQ(e9,{optional:!0})],lw.prototype,"strokeWidth",2),o([eQ(e6,{optional:!0})],lw.prototype,"dimOpacity",2),o([eQ(e0,{optional:!0})],lw.prototype,"enabled",2);var lC=class extends eW{constructor(){super(...arguments),this.color="black"}};o([eQ(ih,{optional:!0})],lC.prototype,"color",2);var lT=class extends eW{constructor(){super(...arguments),this.enabled=!0}};o([eQ(e0,{optional:!0})],lT.prototype,"enabled",2);var lk=class extends eW{constructor(){super(...arguments),this.item=new lA,this.series=new lw,this.text=new lC}};o([eQ(eJ)],lk.prototype,"item",2),o([eQ(eJ)],lk.prototype,"series",2),o([eQ(eJ)],lk.prototype,"text",2);var lE=class extends eW{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new lT,this.highlightStyle=new lk}};o([eQ(e2,{optional:!0})],lE.prototype,"id",2),o([eQ(e0)],lE.prototype,"visible",2),o([eQ(e3,{optional:!0})],lE.prototype,"focusPriority",2),o([eQ(e0)],lE.prototype,"showInLegend",2),o([eQ(e2)],lE.prototype,"cursor",2),o([eQ(iT)],lE.prototype,"nodeClickRange",2),o([eQ(eJ)],lE.prototype,"highlight",2),o([eQ(eJ)],lE.prototype,"highlightStyle",2);var lO={x:["xKey"],y:["yKey"]},lj={x:["xName"],y:["yName"]},lR=class extends o1{constructor(t,e,i,a){super(t,e,i,a),this.xKey=a.properties.xKey,this.yKey=a.properties.yKey}},lz=class extends lE{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};o([eQ(e2,{optional:!0})],lz.prototype,"legendItemName",2),o([eQ(e0,{optional:!0})],lz.prototype,"pickOutsideVisibleMinorAxis",2);var lP=class extends lL{constructor({pathsPerSeries:t=["path"],hasMarkers:e=!1,hasHighlightedLabels:i=!1,pathsZIndexSubOrderOffset:a=[],datumSelectionGarbageCollection:s=!0,markerSelectionGarbageCollection:r=!0,animationAlwaysUpdateSelections:n=!1,animationResetFns:o,directionKeys:l,directionNames:h,...d}){if(super({directionKeys:l,directionNames:h,canHaveAxes:!0,...d}),this.NodeEvent=lR,this.dataNodeGroup=this.contentGroup.appendChild(new ax({name:`${this.id}-series-dataNodes`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.markerGroup=this.contentGroup.appendChild(new ax({name:`${this.id}-series-markers`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelGroup=this.contentGroup.appendChild(new av({name:`${this.id}-series-labels`,zIndex:14,zIndexSubOrder:this.getGroupZIndexSubOrder("labels")})),this.labelSelection=aL.select(this.labelGroup,a3),this.highlightSelection=aL.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=aL.select(this.highlightLabel,a3),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=aN.create(),!l||!h)throw Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:t,hasMarkers:e,hasHighlightedLabels:i,pathsZIndexSubOrderOffset:a,directionKeys:l,directionNames:h,animationResetFns:o,animationAlwaysUpdateSelections:n,datumSelectionGarbageCollection:s,markerSelectionGarbageCollection:r},this.paths=[];for(let e=0;e<t.length;e++)this.paths[e]=new ng({name:`${this.id}-${t[e]}`}),this.paths[e].zIndex=4,this.paths[e].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",e),this.contentGroup.appendChild(this.paths[e]);this.datumSelection=aL.select(this.dataNodeGroup,()=>this.nodeFactory(),s),this.markerSelection=aL.select(this.markerGroup,()=>this.markerFactory(),r),this.animationState=new sy("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:t=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(t):this.animateWaitingUpdateReady(t)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:t=>this.resetAllAnimation(t),reset:"empty"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t?this.animationState.transition("skip"):"disabled"===t&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",t=>this.onLegendItemClick(t)),this.ctx.chartEventManager.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData=void 0}async update({seriesRect:t}){let{visible:e,_contextNodeData:i}=this,a=this.ctx.highlightManager?.getActiveHighlight()?.series===this,s=this.checkResize(t),r=await this.updateHighlightSelection(a);await this.updateSelections(e),await this.updateNodes(r,a,e);let n=this.getAnimationData(t,i);n&&(s&&this.animationState.transition("resize",n),this.animationState.transition("update",n))}async updateSelections(t){var e;let i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((t||!i)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=await this.createNodeData();let t=this.isProcessedDataAnimatable();this._contextNodeData&&((e=this._contextNodeData).animationValid??(e.animationValid=t)),this.minRectsCache.dirtyNodeData=!0;let{dataModel:i,processedData:a}=this;void 0!==i&&void 0!==a&&this.dispatch("data-update",{dataModel:i,processedData:a})}await this.updateSeriesSelections()}}async updateSeriesSelections(t){let{datumSelection:e,labelSelection:i,markerSelection:a,paths:s}=this,r=this._contextNodeData;if(!r)return;let{nodeData:n,labelData:o,itemId:l}=r;await this.updatePaths({seriesHighlighted:t,itemId:l,contextData:r,paths:s}),this.datumSelection=await this.updateDatumSelection({nodeData:n,datumSelection:e}),this.labelSelection=await this.updateLabelSelection({labelData:o,labelSelection:i}),this.opts.hasMarkers&&(this.markerSelection=await this.updateMarkerSelection({nodeData:n,markerSelection:a}))}markerFactory(){return new(lN())}getGroupZIndexSubOrder(t,e=0){let i=super.getGroupZIndexSubOrder(t,e);if("paths"===t){let[t]=i,a=this.opts.pathsZIndexSubOrderOffset[e]??0;i[0]=t$(t)?()=>Number(t())+a:Number(t)+a}return i}async updateNodes(t,e,i){let{highlightSelection:a,highlightLabelSelection:s,opts:{hasMarkers:r,hasHighlightedLabels:n}}=this,o=!this.ctx.animationManager.isSkipped(),l=this.visible&&null!=this._contextNodeData&&i;this.rootGroup.visible=o||l,this.contentGroup.visible=o||l,this.highlightGroup.visible=(o||l)&&e;let h=this.getOpacity();r?(await this.updateMarkerNodes({markerSelection:a,isHighlight:!0}),this.animationState.transition("highlightMarkers",a)):(await this.updateDatumNodes({datumSelection:a,isHighlight:!0}),this.animationState.transition("highlight",a)),n&&await this.updateLabelNodes({labelSelection:s});let{dataNodeGroup:d,markerGroup:u,datumSelection:c,labelSelection:p,markerSelection:g,paths:y,labelGroup:m}=this,{itemId:f}=this.contextNodeData??{};d.opacity=h,d.visible=o||l,m.visible=l,r&&(u.opacity=h,u.zIndex=d.zIndex>=4?d.zIndex:d.zIndex+1,u.visible=l),m&&(m.opacity=h),await this.updatePathNodes({seriesHighlighted:e,itemId:f,paths:y,opacity:h,visible:l,animationEnabled:o}),d.visible&&(await this.updateDatumNodes({datumSelection:c,highlightedItems:t,isHighlight:!1}),await this.updateLabelNodes({labelSelection:p}),r&&await this.updateMarkerNodes({markerSelection:g,isHighlight:!1}))}getHighlightLabelData(t,e){let i=t.filter(t=>t.datum===e.datum&&t.itemId===e.itemId);return 0===i.length?void 0:i}getHighlightData(t,e){return e?[e]:void 0}async updateHighlightSelection(t){let e,i;let{highlightSelection:a,highlightLabelSelection:s,_contextNodeData:r}=this;if(!r)return;let n=this.ctx.highlightManager?.getActiveHighlight(),o=t&&n?.datum?n:void 0;if(null!=o){let t=this.isLabelEnabled(),{labelData:a,nodeData:s}=r;i=this.getHighlightData(s,o),e=t?this.getHighlightLabelData(a,o):void 0}return this.highlightSelection=await this.updateHighlightSelectionItem({items:i,highlightSelection:a}),this.highlightLabelSelection=await this.updateHighlightSelectionLabel({items:e,highlightLabelSelection:s}),i}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(let{node:t}of this.datumSelection)!0!==t.datum.missing&&(yield t)}getQuadTree(){if(void 0===this.quadtree){let{width:t,height:e}=this.ctx.scene.canvas,i=new tI(0,0,t,e);this.quadtree=new lr(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(t){}pickNodeExactShape(t){let e;let i=super.pickNodeExactShape(t);if(i)return i;let{x:a,y:s}=t,{opts:{hasMarkers:r}}=this,{dataNodeGroup:n,markerGroup:o}=this;if((e=n.pickNode(a,s))||!r||(e=o?.pickNode(a,s)),e&&!0!==e.datum.missing)return{datum:e.datum,distance:0};for(let e of this.moduleMap.modules()){let{datum:i}=e.pickNodeExact(t)??{};if(null!=i&&i?.missing!==!0)return{datum:i,distance:0}}}pickNodeClosestDatum(t){let e;let{x:i,y:a}=t,{axes:s,_contextNodeData:r}=this;if(!r)return;let n=s.x,o=s.y,l={x:i,y:a},h=1/0;for(let t of r.nodeData){let{point:{x:i=NaN,y:a=NaN}={}}=t;if(isNaN(i)||isNaN(a)||!(n?.inRange(i)&&o?.inRange(a)))continue;let s=Math.max((l.x-i)**2+(l.y-a)**2,0);s<h&&(h=s,e=t)}for(let i of this.moduleMap.modules()){let a=i.pickNodeNearest(t);if(void 0!==a&&a.distanceSquared<h){h=a.distanceSquared,e=a.datum;break}}if(e){let t=Math.max(Math.sqrt(h)-(e.point?.size??0),0);return{datum:e,distance:t}}}pickNodeMainAxisFirst(t,e){let i;let{x:a,y:s}=t,{axes:r,_contextNodeData:n}=this,{pickOutsideVisibleMinorAxis:o}=this.properties;if(!n)return;let l=r.x,h=r.y,d=[l,h].filter(rv.is).map(t=>t.direction);if(e&&0===d.length)return;let[u="x"]=d,c=[a,s];"x"!==u&&c.reverse();let p=[1/0,1/0];for(let t of n.nodeData){let{x:e=NaN,y:a=NaN}=t.point??t.midPoint??{};if(isNaN(e)||isNaN(a)||!0===t.missing)continue;let s=[l?.inRange(e),h?.inRange(a)];if("x"!==u&&s.reverse(),!s[0]||!o&&!s[1])continue;let r=[e,a];"x"!==u&&r.reverse();let n=!0;for(let t=0;t<r.length;t++){let e=Math.abs(r[t]-c[t]);if(e>p[t]){n=!1;break}e<p[t]&&(p[t]=e,p.fill(1/0,t+1,p.length))}n&&(i=t)}if(i){let e=Math.max(p[0]**2+p[1]**2-(i.point?.size??0),0);for(let a of this.moduleMap.modules()){let s=a.pickNodeMainAxisFirst(t);if(void 0!==s&&s.distanceSquared<e){i=s.datum,e=s.distanceSquared;break}}return{datum:i,distance:Math.sqrt(e)}}}onLegendItemClick(t){let{legendItemName:e}=this.properties,{enabled:i,itemId:a,series:s}=t,r=null!=e&&e===t.legendItemName;(s.id===this.id||r)&&this.toggleSeriesItem(a,i)}onLegendItemDoubleClick(t){let{enabled:e,itemId:i,series:a,numVisibleItems:s}=t,{legendItemName:r}=this.properties,n=null!=r&&r===t.legendItemName;a.id===this.id||n?this.toggleSeriesItem(i,!0):e&&1===s?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRects(t,e){let{dirtyNodeData:i,sizeCache:a,minRect:s,minVisibleRect:r}=this.minRectsCache,n=JSON.stringify({width:t,height:e});if(!(n!==a)&&!i&&s&&r)return{minRect:s,minVisibleRect:r};let o=this.computeMinRects(t,e);return this.minRectsCache={dirtyNodeData:!1,sizeCache:n,minRect:o?.minRect,minVisibleRect:o?.minVisibleRect},o}computeMinRects(t,e){let i,a,s,r;let n=this._contextNodeData;if(!n?.nodeData.length)return;let{nodeData:o}=n,l=Array(o.length),h=Array(o.length);for(let[t,{midPoint:e}]of o.entries())l[t]=e?.x??0,h[t]=e?.y??0;l.sort((t,e)=>t-e),h.sort((t,e)=>t-e);let d=0,u=0;for(let n=1;n<o.length;n++)l[n]>=0&&(i??(i=n)),l[n]>t&&(a??(a=n)),h[n]>=0&&(s??(s=n)),h[n]>e&&(r??(r=n)),d=Math.max(d,l[n]-l[n-1]),u=Math.max(u,h[n]-h[n-1]);a??(a=o.length),r??(r=o.length);let c=null!=i&&null!=a?l.slice(i,a):[],p=null!=s&&null!=r?h.slice(s,r):[],g=0,y=0;for(let t=1;t<Math.max(c.length,p.length);t++){let e=c[t],i=c[t-1],a=p[t],s=p[t-1];null!=e&&null!=i&&(g=Math.max(g,e-i)),null!=a&&null!=s&&(y=Math.max(y,a-s))}return{minRect:new tI(0,0,d,u),minVisibleRect:new tI(0,0,g,y)}}updateHighlightSelectionItem(t){let{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:a}=t,s=i??[];return e?this.updateMarkerSelection({nodeData:s,markerSelection:a}):this.updateDatumSelection({nodeData:s,datumSelection:a})}updateHighlightSelectionLabel(t){return this.updateLabelSelection({labelData:t.items??[],labelSelection:t.highlightLabelSelection})}async updateDatumSelection(t){return t.datumSelection}async updateDatumNodes(t){}async updateMarkerSelection(t){return t.markerSelection}async updateMarkerNodes(t){}async updatePaths(t){t.paths.forEach(t=>t.visible=!1)}async updatePathNodes(t){let{paths:e,opacity:i,visible:a}=t;for(let t of e)t.opacity=i,t.visible=a}resetPathAnimation(t){let{path:e}=this.opts?.animationResetFns??{};e&&t.paths.forEach(t=>{iY([t],e)})}resetDatumAnimation(t){let{datum:e}=this.opts?.animationResetFns??{};e&&iY([t.datumSelection],e)}resetLabelAnimation(t){let{label:e}=this.opts?.animationResetFns??{};e&&iY([t.labelSelection],e)}resetMarkerAnimation(t){let{marker:e}=this.opts?.animationResetFns??{};e&&this.opts.hasMarkers&&iY([t.markerSelection],e)}resetAllAnimation(t){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(t),this.resetDatumAnimation(t),this.resetLabelAnimation(t),this.resetMarkerAnimation(t),t.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){let{datum:e}=this.opts?.animationResetFns??{};e&&iY([t],e)}animateReadyHighlightMarkers(t){let{marker:e}=this.opts?.animationResetFns??{};e&&iY([t],e)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){let t=this.getAnimationData();t&&this.animationState.transition("clear",t)}getAnimationData(t,e){let{_contextNodeData:i}=this;if(i)return{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:e,paths:this.paths,seriesRect:t}}calculateScaling(){let t={};for(let e of Object.values(iG)){let i=this.axes[e];if(i){if(i.scale instanceof i7){let{range:a,domain:s}=i.scale;t[e]={type:"log",convert:t=>i.scale.convert(t),domain:[s[0],s[1]],range:[a[0],a[1]]}}else if(i.scale instanceof eN){let{range:a}=i.scale,s=i.scale.getDomain();t[e]={type:"continuous",domain:[s[0],s[1]],range:[a[0],a[1]]}}else if(i.scale){let{domain:a}=i.scale;t[e]={type:"category",domain:a,range:a.map(t=>i.scale.convert(t))}}}}return t}},lB=["top","right","bottom","left"],lG=class extends ls{constructor(t,e){super(t,e),this.paired=!0,this.firstSeriesTranslation=!0,this.lastUpdateClipRect=void 0,this._lastCrossLineIds=void 0,this._lastAxisAreaWidths=new Map,this._lastClipSeries=!1,this._lastVisibility={crossLines:!0,series:!0}}onAxisChange(t,e){super.onAxisChange(t,e),this.ctx?.zoomManager.updateAxes(t)}destroySeries(t){super.destroySeries(t),this.firstSeriesTranslation=!0}getChartType(){return"cartesian"}setRootClipRects(t){let{seriesRoot:e,annotationRoot:i,highlightRoot:a}=this;e.setClipRect(t),a.setClipRect(t),i.setClipRect(t)}performLayout(t){let{firstSeriesTranslation:e,seriesRoot:i,annotationRoot:a,highlightRoot:s}=this,{seriesRect:r,visibility:n,clipSeries:o}=this.updateAxes(t.layoutBox);this.seriesRoot.visible=n.series,this.seriesRect=r,this.animationRect=t.layoutBox;let{x:l,y:h}=r;if(e){for(let t of[i,a,s])t.translationX=Math.floor(l),t.translationY=Math.floor(h);this.firstSeriesTranslation=!1}else{let{translationX:t,translationY:e}=i;eI(this.id,"seriesRect",this.ctx.animationManager,[i,s,a],{translationX:t,translationY:e},{translationX:Math.floor(l),translationY:Math.floor(h)},{phase:"update"})}let d=r.clone().grow(this.seriesArea.padding),u=this.seriesArea.clip||o?d:void 0,{lastUpdateClipRect:c}=this;this.lastUpdateClipRect=u,this.ctx.animationManager.isActive()&&null!=c?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:c,to:d,onUpdate:t=>this.setRootClipRects(t),onComplete:()=>this.setRootClipRects(u)}):this.setRootClipRects(u),this.ctx.layoutManager.emitLayoutComplete(t,{axes:this.axes.map(t=>t.getLayoutState()),series:{rect:r,paddedRect:d,visible:n.series,shouldFlipXY:this.shouldFlipXY()},clipSeries:o})}updateAxes(t){let e,i,a;let s=this.axes.flatMap(t=>t.crossLines??[]).map(t=>t.id);null!=this._lastCrossLineIds&&this._lastCrossLineIds.length===s.length&&this._lastCrossLineIds.every((t,e)=>s[e]===t)?(e=new Map(this._lastAxisAreaWidths.entries()),i=this._lastClipSeries,a={...this._lastVisibility}):(e=new Map,i=!1,a={crossLines:!0,series:!0},this._lastCrossLineIds=s);let r=new Set(this.axes.map(t=>t.position));for(let t of e.keys())r.has(t)||e.delete(t);let n=(t,s,r)=>{if([...t.keys()].some(t=>!e.has(t))||a.crossLines!==r.crossLines||a.series!==r.series||i!==s)return!1;for(let[i,a]of e.entries()){let e=t.get(i);if((null!=a||null!=e)&&a!==e)return!1}return!0},o=t=>{for(let[e,i]of t.entries()){if(i&&Math.abs(i)===1/0){t.set(e,0);continue}t.set(e,null!=i?Math.ceil(i):i)}return t},l=new Map,h={},d=!1,u=this.seriesRect?.clone(),c=0;do{e=new Map(l.entries()),i=d,Object.assign(a,h);let s=this.updateAxesPass(e,t.clone(),u);if(l=o(s.axisAreaWidths),h=s.visibility,d=s.clipSeries,{seriesRect:u}=s,c++>10){y.warn("unable to find stable axis layout.");break}}while(!n(l,d,h));return this.axes.forEach(t=>{t.update()}),this.axes.forEach(e=>{if(e.setCrossLinesVisible(a.crossLines),u)switch(e.clipGrid(u.x,u.y,u.width+5,u.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,u.y,t.width+5,u.height+5);break;case"top":case"bottom":e.clipTickLines(u.x,t.y,u.width+5,t.height+5)}}),this._lastAxisAreaWidths=e,this._lastVisibility=a,this._lastClipSeries=i,{seriesRect:u,visibility:a,clipSeries:i}}updateAxesPass(t,e,i){let a=new Map,s=new Map,r={series:!0,crossLines:!0},n=!1,o={},l=this.applySeriesPadding(e),h=i?this.buildCrossLinePadding(t):{},d=this.buildAxisBound(l,t,h,r),u=this.buildSeriesRect(d,t);for(let t of this.axes){let{position:e="left"}=t,{clipSeries:i,axisThickness:r}=this.calculateAxisDimensions({axis:t,seriesRect:u,primaryTickCounts:o,clipSeries:n});a.set(t.id,r),s.has(e)||s.set(e,[]),s.get(e)?.push(t),n=n||i}let c=new Map,p=new Map;for(let[t,e]of s.entries()){let i="left"===t||"right"===t;c.set(t,this.calculateAxisArea(e,a,p,i))}for(let[t,e]of s.entries())this.positionAxes({axes:e,position:t,axisWidths:a,axisOffsets:p,axisAreaWidths:c,axisBound:d,seriesRect:u});return{clipSeries:n,seriesRect:u,axisAreaWidths:c,visibility:r}}buildCrossLinePadding(t){let e={};for(let[i,a=0]of(this.axes.forEach(t=>{t.crossLines?.forEach(t=>{t.calculatePadding?.(e)})}),Object.entries(e)))e[i]=Math.max(a-(t.get(i)??0),0);return e}applySeriesPadding(t){let e=t.clone();return lB.forEach(t=>{let i=this.seriesArea.padding[t],a=this.axes.findLast(e=>e.position===t);a?a.seriesAreaPadding=i:e.shrink(i,t)}),e}buildAxisBound(t,e,i,a){let s=t.clone(),{top:r=0,right:n=0,bottom:o=0,left:l=0}=i,h=l+n,d=r+o,u=(e.get("left")??0)+(e.get("right")??0)+h,c=(e.get("top")??0)+(e.get("bottom")??0)+d;return s.width<=u||s.height<=c?(a.crossLines=!1,a.series=!1):(s.x+=l,s.y+=r,s.width-=h,s.height-=d),s}buildSeriesRect(t,e){let i=t.clone();return i.x+=e.get("left")??0,i.y+=e.get("top")??0,i.width-=(e.get("left")??0)+(e.get("right")??0),i.height-=(e.get("top")??0)+(e.get("bottom")??0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,a){let{x:s,y:r,width:n,height:o}=t,l=[s,r,s+n,r+o][("x"===i?0:1)+(1===a?0:2)];return(1===a?Math.min:Math.max)(e,l)}calculateAxisDimensions(t){let{axis:e,seriesRect:i,primaryTickCounts:a}=t,{clipSeries:s}=t,{position:r="left",direction:n}=e;this.sizeAxis(e,i,r);let o=this.getSyncedDomain(e),l=e.calculateLayout(o,e.nice?a[n]:void 0);return a[n]??(a[n]=l.primaryTickCount),s||(s=e.dataDomain.clipped||e.visibleRange[0]>0||e.visibleRange[1]<1),{clipSeries:s,axisThickness:Math.ceil(null!=e.thickness&&e.thickness>0?e.thickness:"y"===n?l.bbox.width:l.bbox.height)}}getSyncedDomain(t){let e=this.modulesManager.getModule("sync");if(!e?.enabled)return;let i=e.getSyncedDomain(t);if(i&&t.dataDomain.domain.length){let a;let{domain:s}=t.scale;if(eN.is(t.scale)){let[t,e]=tc(i);a=t!==s[0]||e!==s[1]}else a=!ew(i,s);a&&!this.skipSync&&e.updateSiblings()}return i}sizeAxis(t,e,i){let a=t instanceof rv||t instanceof rL,s="left"===i||"right"===i,{min:r,max:n}=this.ctx.zoomManager.getAxisZoom(t.id),{width:o,height:l}=e,h=s?l:o,d=0,u=h,{width:c,unit:p,align:g}=t.layoutConstraints;u="px"===p?d+c:u*c/100,"end"===g&&(d=h-(u-d),u=h),a&&s?[r,n]=[1-n,1-r]:s&&([d,u]=[u,d]),t.range=[d,u],t.visibleRange=[r,n],t.gridLength=s?o:l}calculateAxisArea(t,e,i,a){let{width:s,height:r,canvas:n}=this.ctx.scene,o=a?r%n.pixelRatio:s%n.pixelRatio,l=0;for(let a of t){i.set(a.id,o);let t=e.get(a.id)??0;l=Math.max(l,o+t),a.layoutConstraints.stacked&&(o+=t+15)}return l}positionAxes(t){let{axes:e,axisBound:i,axisWidths:a,axisOffsets:s,axisAreaWidths:r,seriesRect:n,position:o}=t,l=r.get(o)??0,h="x",d="y",u=1,c=0;for(let t of(("top"===o||"bottom"===o)&&(h="y",d="x",c+=1),c+=i[h],("right"===o||"bottom"===o)&&(u=-1,c+="x"===h?i.width:i.height),e)){let e=r.get("x"===d?"left":"top")??0;t.translation[d]=i[d]+e;let o=a.get(t.id)??0,p=s.get(t.id)??0;t.translation[h]=this.clampToOutsideSeriesRect(n,c+u*(p+o),h,u),t.gridPadding=l-p-o,t.updatePosition()}}shouldFlipXY(){return this.series.every(t=>t instanceof lP&&t.shouldFlipXY())}};lG.className="CartesianChart",lG.type="cartesian";var lF=class t{constructor(t,e,i){this.factoryApi=e,this.licenseManager=i,this.chart=t}static isInstance(e){return e instanceof t||e.constructor?.name==="AgChartInstanceProxy"&&null!=e.chart||null!=e.chart&&this.validateImplementation(e)}static validateImplementation(t){let e=Object.keys(Object.getPrototypeOf(t)??{});return["getOptions","destroy"].every(t=>e.includes(t))}async update(t){this.factoryApi.update(t,this),await this.chart.waitForUpdate()}async updateDelta(t){this.factoryApi.updateUserDelta(this,t),await this.chart.waitForUpdate()}getOptions(){let t=si(this.chart.getOptions());for(let e in t)e.startsWith("_")&&delete t[e];return t}waitForUpdate(){return this.chart.waitForUpdate()}async download(t){let e=await this.prepareResizedChart(this,t);try{e.chart.download(t?.fileName,t?.fileFormat)}finally{e.destroy()}}async __toSVG(t){let e=await this.prepareResizedChart(this,{width:600,height:300,...t});try{return e.chart.toSVG()}finally{e.destroy()}}async getImageDataURL(t){let e=await this.prepareResizedChart(this,t);try{return e.chart.getCanvasDataURL(t?.fileFormat)}finally{e.destroy()}}getState(){let{factoryApi:{caretaker:t},chart:{ctx:{annotationManager:e}}}=this;return t.save(e)}async setState(t){let{factoryApi:{caretaker:e},chart:{ctx:{annotationManager:i}}}=this;e.restore(t,i),await this.chart.waitForUpdate()}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.publicApi=void 0,this.chart.destroy()}async prepareResizedChart(t,e={}){let{chart:i}=t,a=e.width??i.width??i.ctx.scene.canvas.width,s=e.height??i.height??i.ctx.scene.canvas.height,r=t.getState(),n=rC.hasEnterpriseModules(),o={...i.chartOptions.processedOverrides,container:document.createElement("div"),width:a,height:s},l=i.getOptions();n&&(o.animation={enabled:!1},oY(l)&&(o.toolbar={enabled:!1}),this.licenseManager?.isDisplayWatermark()&&(o.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));let h={...i.chartOptions.specialOverrides},d={...i.chartOptions.optionMetadata};null!=e.width&&null!=e.height&&(h.overrideDevicePixelRatio=1);let u=await this.factoryApi.create(l,o,h,d);return await u.setState(r),u.chart.ctx.zoomManager.updateZoom("chartProxy",i.ctx.zoomManager.getZoom()),i.series.forEach((t,e)=>{t.visible||(u.chart.series[e].visible=!1)}),u.chart.update(0,{forceNodeDataRefresh:!0}),await u.waitForUpdate(),u}};lF.chartInstances=new WeakMap,o([su({oldValue(t){t.destroyed||(t.publicApi=void 0),lF.chartInstances.delete(t)},newValue(t){t.publicApi=this,lF.chartInstances.set(t,this)}})],lF.prototype,"chart",2);var lU=class extends rA{constructor(t){super(),this.ctx=t,this.localeText=void 0}};o([sc(t=>{t.ctx.localeManager.setLocaleText(t.localeText)}),eQ(eq,{optional:!0})],lU.prototype,"localeText",2),o([sc(t=>{t.ctx.localeManager.setLocaleTextFormatter(t.getLocaleText)}),eQ(e1,{optional:!0})],lU.prototype,"getLocaleText",2);var lY={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new lU(t)},lZ=class extends eN{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(t){return t}ticks(){let t=this.tickCount??eN.defaultTickCount;if(!this.domain||this.domain.length<2||t<1||!this.domain.every(isFinite))return[];this.refresh();let[e,i]=this.getDomain();if(this.interval){let t=Math.abs(this.interval);if(!i8((i-e)/t,this.getPixelRange()))return i6(e,i,t)}return i2(e,i,t,this.minTickCount,this.maxTickCount)}update(){this.domain&&!(this.domain.length<2)&&this.nice&&this.updateNiceDomain()}getTickStep(t,e){return this.interval??i3(t,e,this.tickCount,this.minTickCount,this.maxTickCount)}updateNiceDomain(){let t=this.tickCount;if(t<1){this.niceDomain=[...this.domain];return}let[e,i]=this.domain;if(1===t)[e,i]=function(t,e){let i=Math.abs(e-t),a=10**Math.floor(Math.log10(i)),s=1/0,r=[t,e];for(let n of i0){let o=n*a,l=Math.floor(t/o)*o,h=Math.ceil(e/o)*o,d=1-i/Math.abs(h-l);s>d&&(s=d,r=[l,h])}return r}(e,i);else{let t=e>i?Math.ceil:Math.floor,a=i<e?Math.floor:Math.ceil;for(let s=0;s<4;s++){let s=e,r=i,n=this.getTickStep(e,i),[o,l]=this.domain;if(n>=1)e=t(o/n)*n,i=a(l/n)*n;else{let s=1/n;e=t(o*s)/s,i=a(l*s)/s}if(e===s&&i===r)break}}this.niceDomain=[e,i]}tickFormat({ticks:t,specifier:e}){return i9(t??this.ticks(),e)}},l_=class extends rb{constructor(t,e=new lZ){super(t,e),this.min=NaN,this.max=NaN}normaliseDataDomain(t){let{min:e,max:i}=this,{extent:a,clipped:s}=eA(t,e,i);return{domain:a,clipped:s}}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];let{domain:e,ticks:i}=function(t,e,i){var a;let[s,r]=tc(t),n=(a=s=function(t,e,i){let a=Math.pow(10,Math.floor(Math.log10(Math.abs(e-t)/(i-1))));return Math.floor(t/a)*a}(Math.floor(s),r,e),function(t){let e=Math.pow(10,Math.floor(Math.log10(t))),i=t/e*10;return i>0&&i<=1?e/10:i>1&&i<=2?2*e/10:i>1&&i<=5?5*e/10:i>5&&i<=10?10*e/10:i>10&&i<=20?20*e/10:i>20&&i<=40?40*e/10:i>40&&i<=50?50*e/10:i>50&&i<=100?100*e/10:i}((r-a)/(e-1)));return r=s+(e-1)*n,{domain:i?[r,s]:[s,r],ticks:function(t,e,i){let a=Math.floor(Math.log10(e)),s=Math.pow(10,e>0&&e<1?Math.abs(a):0),r=[];for(let a=0;a<i;a++){let i=t+e*a;r[a]=Math.round(i*s)/s}return r}(s,n,e)}}(this.dataDomain.domain,t??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}};l_.className="NumberAxis",l_.type="number",o([eQ(eX(e7,ia("max"))),rt(NaN)],l_.prototype,"min",2),o([eQ(eX(e7,is("min"))),rt(NaN)],l_.prototype,"max",2);var lV=iR(t=>tq(t)&&0!==t,"a non-zero number"),lW=class extends l_{constructor(t){super(t,new i7),this.min=NaN,this.max=NaN}normaliseDataDomain(t){let{min:e,max:i}=this,{extent:a,clipped:s}=eA(t,e,i),r=a[0]>a[1],n=a[0]<0&&a[1]>0,o=0===a[0]&&0===a[1];return(r||n||o)&&(n?y.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):o&&y.warn("the data domain has 0 extent, no data is rendered.")),0===a[0]&&(a[0]=1),0===a[1]&&(a[1]=-1),{domain:a,clipped:s}}set base(t){this.scale.base=t}get base(){return this.scale.base}};lW.className="LogAxis",lW.type="log",o([eQ(eX(e7,lV,ia("max"))),rt(NaN)],lW.prototype,"min",2),o([eQ(eX(e7,lV,is("min"))),rt(NaN)],lW.prototype,"max",2);var lH=class extends rb{constructor(t){super(t,new at),this.min=void 0,this.max=void 0}normaliseDataDomain(t){let{min:e,max:i}=this,a=!1;return"number"==typeof e&&(e=new Date(e)),"number"==typeof i&&(i=new Date(i)),t.length>2&&(t=eL(t)?.map(t=>new Date(t))??[]),e instanceof Date&&(a||(a=e>t[0]),t=[e,t[1]]),i instanceof Date&&(a||(a=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{domain:t,clipped:a}}onFormatChange(t,e,i,a){a?super.onFormatChange(t,e,i,a):(this.labelFormatter=this.scale.tickFormat({ticks:t,domain:i}),this.datumFormatter=this.scale.tickFormat({ticks:t,domain:i,formatOffset:1}))}};lH.className="TimeAxis",lH.type="time",o([eQ(eX(io,ia("max")),{optional:!0})],lH.prototype,"min",2),o([eQ(eX(io,is("min")),{optional:!0})],lH.prototype,"max",2);var l$=(t,{x0:e,y0:i,x1:a,y1:s,cx:r,cy:n},o,l)=>{if(l&&t.moveTo(e,i),e!==a||i!==s){let l=Math.atan2(i-n,e-r),h=Math.atan2(s-n,a-r);t.arc(r,n,o,l,h)}else t.lineTo(e,i)},lQ=(t,e,i,a,s)=>{let r=!1,n=!1,o=a-Math.sqrt(Math.max(s**2-i**2,0)),l=0,h=0,d=i-Math.sqrt(Math.max(s**2-a**2,0));return o>t?(r=!0,o=t,l=i-Math.sqrt(Math.max(s**2-(a-t)**2))):o<1e-6&&(o=0),d>e?(n=!0,h=a-Math.sqrt(Math.max(s**2-(i-e)**2)),d=e):d<1e-6&&(d=0),{leading0:o,leading1:l,trailing0:h,trailing1:d,leadingClipped:r,trailingClipped:n}},lX=(t,e,i,a,s,r,n)=>{let o,l,h,d,{topLeft:u,topRight:c,bottomRight:p,bottomLeft:g}=r,y=Math.max(u+g,c+p),m=Math.max(u+c,g+p);if(y<=0&&m<=0){null==n?t.rect(e,i,a,s):t.rect(n.x,n.y,n.width,n.height);return}if(null==n&&u===c&&u===p&&u===g){t.roundRect(e,i,a,s,u);return}if(a<0&&(e+=a,a=Math.abs(a)),s<0&&(i+=s,s=Math.abs(s)),a<=0||s<=0)return;if(null==n)n=new tI(e,i,a,s);else{let t=Math.max(e,n.x),r=Math.min(e+a,n.x+n.width),o=Math.max(i,n.y);n=new tI(t,o,r-t,Math.min(i+s,n.y+n.height)-o)}let f=Math.max(y/s,m/a,1);f>1&&(u/=f,c/=f,p/=f,g/=f);let x=!0,M=!0,b=!0,v=!0;{let t=lQ(n.height,n.width,Math.max(e+u-n.x,0),Math.max(i+u-n.y,0),u);t.leadingClipped&&(v=!1),t.trailingClipped&&(M=!1);let a=Math.max(n.x+t.leading1,n.x),s=Math.max(n.y+t.leading0,n.y),r=Math.max(n.x+t.trailing1,n.x);o={x0:a,y0:s,x1:r,y1:Math.max(n.y+t.trailing0,n.y),cx:e+u,cy:i+u}}if(M){let t=lQ(n.width,n.height,Math.max(i+c-n.y,0),Math.max(n.x+n.width-(e+a-c),0),c);t.leadingClipped&&(x=!1),t.trailingClipped&&(b=!1);let s=Math.min(n.x+n.width-t.leading0,n.x+n.width),r=Math.max(n.y+t.leading1,n.y),o=Math.min(n.x+n.width-t.trailing0,n.x+n.width);l={x0:s,y0:r,x1:o,y1:Math.max(n.y+t.trailing1,n.y),cx:e+a-c,cy:i+c}}if(b){let t=lQ(n.height,n.width,Math.max(n.x+n.width-(e+a-p),0),Math.max(n.y+n.height-(i+s-p),0),p);t.leadingClipped&&(M=!1),t.trailingClipped&&(v=!1);let r=Math.min(n.x+n.width-t.leading1,n.x+n.width),o=Math.min(n.y+n.height-t.leading0,n.y+n.height),l=Math.min(n.x+n.width-t.trailing1,n.x+n.width);h={x0:r,y0:o,x1:l,y1:Math.min(n.y+n.height-t.trailing0,n.y+n.height),cx:e+a-p,cy:i+s-p}}if(v){let t=lQ(n.width,n.height,Math.max(n.y+n.height-(i+s-g),0),Math.max(e+g-n.x,0),g);t.leadingClipped&&(b=!1),t.trailingClipped&&(x=!1);let a=Math.max(n.x+t.leading0,n.x),r=Math.min(n.y+n.height-t.leading1,n.y+n.height),o=Math.max(n.x+t.trailing0,n.x);d={x0:a,y0:r,x1:o,y1:Math.min(n.y+n.height-t.trailing1,n.y+n.height),cx:e+g,cy:i+s-g}}let I=!1;x&&null!=o&&(l$(t,o,u,!I),I||(I=!0)),M&&null!=l&&(l$(t,l,c,!I),I||(I=!0)),b&&null!=h&&(l$(t,h,p,!I),I||(I=!0)),v&&null!=d&&(l$(t,d,g,!I),I||(I=!0)),t.closePath()},lK=class extends ng{constructor(){super(...arguments),this.borderPath=new nc,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=aX.defaultStyles.strokeWidth,this.effectiveStrokeWidth=aX.defaultStyles.strokeWidth,this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint,this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){let{path:t,borderPath:e,crisp:i,topLeftCornerRadius:a,topRightCornerRadius:s,bottomRightCornerRadius:r,bottomLeftCornerRadius:n}=this,{x:o,y:l,width:h,height:d,strokeWidth:u,clipBBox:c}=this,p=1/(this.layerManager?.canvas.pixelRatio??1),g=1;if(t.clear(!0),e.clear(!0),i&&(h<=p&&(g*=h/p),d<=p&&(g*=d/p),h=this.align(o,h),d=this.align(l,d),o=this.align(o),l=this.align(l),c=null!=c?new tI(this.align(c.x),this.align(c.y),this.align(c.x,c.width),this.align(c.y,c.height)):void 0),u){if(h<p){let t=o+p/2;e.moveTo(t,l),e.lineTo(t,l+d),u=p,this.borderClipPath=void 0}else if(d<p){let t=l+p/2;e.moveTo(o,t),e.lineTo(o+h,t),u=p,this.borderClipPath=void 0}else if(u<h&&u<d){let i=u/2;o+=i,l+=i,h-=u,d-=u;let p=c?.clone().shrink(i),g={topLeft:a>0?a-u:0,topRight:s>0?s-u:0,bottomRight:r>0?r-u:0,bottomLeft:n>0?n-u:0};this.borderClipPath=void 0,h>0&&d>0&&(null==p||p?.width>0&&p?.height>0)&&(lX(t,o,l,h,d,g,p),lX(e,o,l,h,d,g,p))}else this.borderClipPath=this.borderClipPath??new nc,this.borderClipPath.clear(!0),this.borderClipPath.rect(o,l,h,d),e.rect(o,l,h,d)}else this.borderClipPath=void 0,lX(t,o,l,h,d,{topLeft:a,topRight:s,bottomRight:r,bottomLeft:n},c);if([a,s,r,n].every(t=>0===t)){let t=this.getBBox();this.hittester=t.containsPoint.bind(t),this.distanceSquared=(t,e)=>this.getBBox().distanceSquared(t,e)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=u,this.lastUpdatePathStrokeWidth=u,this.microPixelEffectOpacity=g}computeBBox(){let{x:t,y:e,width:i,height:a,clipBBox:s}=this;return s?.clone()??new tI(t,e,i,a)}isPointInPath(t,e){return this.hittester(t,e)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,e){return this.distanceCalculator(t,e)}applyFillAlpha(t){let{fillOpacity:e,microPixelEffectOpacity:i,opacity:a}=this;t.globalAlpha*=a*e*i}renderStroke(t){let{stroke:e,effectiveStrokeWidth:i}=this;if(e&&i){let{globalAlpha:a}=t,{strokeOpacity:s,lineDash:r,lineDashOffset:n,lineCap:o,lineJoin:l,borderPath:h,borderClipPath:d,opacity:u,microPixelEffectOpacity:c}=this;d&&t.clip(d.getPath2D()),t.strokeStyle=e,t.globalAlpha*=u*s*c,t.lineWidth=i,r&&t.setLineDash(r),n&&(t.lineDashOffset=n),o&&(t.lineCap=o),l&&(t.lineJoin=l),t.stroke(h.getPath2D()),t.globalAlpha=a}}};lK.className="Rect",o([np()],lK.prototype,"x",2),o([np()],lK.prototype,"y",2),o([np()],lK.prototype,"width",2),o([np()],lK.prototype,"height",2),o([np()],lK.prototype,"topLeftCornerRadius",2),o([np()],lK.prototype,"topRightCornerRadius",2),o([np()],lK.prototype,"bottomRightCornerRadius",2),o([np()],lK.prototype,"bottomLeftCornerRadius",2),o([np()],lK.prototype,"clipBBox",2),o([np()],lK.prototype,"crisp",2);var lJ=class extends rA{constructor(t){super(),this.ctx=t,this.rectNode=new lK,this.textNode=new a3,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(t.scene.attachNode(this.node),t.layoutManager.addListener("layout:complete",t=>this.onLayoutComplete(t)))}createNode(){return new ax({name:"background",zIndex:0})}onLayoutComplete(t){let{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}};o([eQ(e0),sd("node","visible")],lJ.prototype,"visible",2),o([eQ(ih,{optional:!0}),sd("rectNode","fill")],lJ.prototype,"fill",2),o([eQ(eJ,{optional:!0})],lJ.prototype,"image",2),o([eQ(e2,{optional:!0}),sd("textNode")],lJ.prototype,"text",2);var lq={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new lJ(t)},l0=class extends tw{constructor(t){super(),this.sourceImage=t,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}updateBitmap(t,e,i,a){this.sourceImage=t,this.width=t.width/e,this.height=t.height/e,this.x=i/e,this.y=a/e,this.markDirty(3)}render(t){let{ctx:e,forceRender:i,stats:a}=t;if(0===this.dirty&&!i){a&&a.nodesSkipped++;return}let s=this.sourceImage;s&&(e.globalAlpha=this.opacity,e.drawImage(s,0,0,s.width,s.height,this.x,this.y,this.width,this.height),super.render(t))}};o([tS({redraw:3})],l0.prototype,"x",2),o([tS({redraw:3})],l0.prototype,"y",2),o([tS({redraw:3})],l0.prototype,"width",2),o([tS({redraw:3})],l0.prototype,"height",2),o([tS({redraw:3})],l0.prototype,"opacity",2);var l1=class extends ay(ax){constructor(){super({name:"markerLabelGroup"}),this.label=new a3,this.symbolsGroup=new ax({name:"legend-markerLabel-symbols"}),this.bitmap=new l0,this.bitmapDirty=!0,this.enabled=!0,this.pageIndex=NaN,this._markers=[],this._lines=[];let{markers:t,label:e,lines:i}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1,this.updateSymbols(t,i),this.append([this.symbolsGroup,e])}destroy(){super.destroy(),this.destroyProxyButton()}destroyProxyButton(){this.proxyButton?.button.remove(),this.proxyButton?.listitem.remove(),this.proxyButton=void 0}get markers(){return this._markers}get lines(){return this._lines}updateSymbols(t,e){ew(this._markers,t)&&ew(this._lines,e)||(this.bitmapDirty=!0,this._markers=t,this._lines=e,this.symbolsGroup.clear(),this.symbolsGroup.append([this.bitmap,...e,...t]))}setEnabled(t){this.enabled=t,this.refreshVisibilities()}refreshVisibilities(){let t=this.enabled?1:.5;this.label.opacity=t,this.opacity=t,this.bitmap.opacity=t,this.setBitmapVisibility(!this.enabled)}setBitmapVisibility(t){let{lines:e,markers:i}=this;[e,i].forEach(e=>e.forEach(e=>e.visible=!t)),this.bitmap.visible=t}update(t,{spriteAAPadding:e,spritePixelRatio:i},a){let{markers:s,lines:r}=this,n=0,o=0,l=0;for(let t=0;t<Math.max(s.length,r.length);t++){let{length:e,spacing:i,isCustomMarker:h}=a[t]??0,d=s[t],u=r[t],c=d?.size??0,p=1/0,g=1/0,y=1/0,m=1/0,f=1/0;if(d){let t=d.constructor.center,i=(c+d.strokeWidth)/2;h?(d.x=0,d.y=0,d.translationX=(t.x-.5)*c+e/2+l,d.translationY=(t.y-.5)*c,m=d.translationY-i,f=d.translationX-i):(d.x=(t.x-.5)*c+e/2+l,d.y=(t.y-.5)*c,m=d.y-i,f=d.x-i)}u&&(u.x1=l,u.x2=l+e,u.y1=0,u.y2=0,u.markDirty(3),p=-u.strokeWidth/2,g=u.x1,y=u.x2),l+=i+Math.max(e,c),n=Math.min(n,g,y,f),o=Math.min(o,p,m)}let h=a.at(-1),d=this.lines.at(-1),u=this.markers.at(-1),c=d?d.x2:-1/0,p=(u?.x??0)+(u?.size??0)/2;if(this.label.x=Math.max(c,p)+(h?.spacing??0),this.bitmapDirty){this.setBitmapVisibility(!1);let a=(e+n)*i,s=(e-o)*i,r=t.renderSprite(this.symbolsGroup,{scale:i,translateX:Math.floor(a),translateY:Math.floor(s)});this.bitmap.updateBitmap(r,i,Math.ceil(-a),Math.ceil(-s)),this.bitmapDirty=!1,this.refreshVisibilities()}if(a.length<2)return;let g=this.symbolsGroup.getBBox(),y=Math.max(u?.size??0,h?.length??0),m=new tI(g.x+y/2,g.y,y,g.height);this.symbolsGroup.setClipRect(m)}computeBBox(){let{label:t,lines:e,markers:i}=this;return this.toParent(ax.computeChildrenBBox(W([t],e,i),!1))}};l1.className="MarkerLabel",o([sd("label")],l1.prototype,"text",2),o([sd("label")],l1.prototype,"fontStyle",2),o([sd("label")],l1.prototype,"fontWeight",2),o([sd("label")],l1.prototype,"fontSize",2),o([sd("label")],l1.prototype,"fontFamily",2),o([sd("label","fill")],l1.prototype,"color",2);var l2=class extends eW{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};o([eQ(ih)],l2.prototype,"color",2),o([eQ(iI,{optional:!0})],l2.prototype,"fontStyle",2),o([eQ(iD,{optional:!0})],l2.prototype,"fontWeight",2),o([eQ(e9)],l2.prototype,"fontSize",2),o([eQ(e2)],l2.prototype,"fontFamily",2);var l4=class extends eW{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};o([eQ(e9)],l4.prototype,"size",2),o([eQ(ih,{optional:!0})],l4.prototype,"fill",2),o([eQ(e6,{optional:!0})],l4.prototype,"fillOpacity",2),o([eQ(ih,{optional:!0})],l4.prototype,"stroke",2),o([eQ(e9)],l4.prototype,"strokeWidth",2),o([eQ(e6)],l4.prototype,"strokeOpacity",2);var l3=class extends eW{constructor(t){super(),this.parent=t,this.shape=lv,this.size=15,this.padding=8}};o([su({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],l3.prototype,"shape",2),o([eQ(e9)],l3.prototype,"size",2),o([eQ(e9)],l3.prototype,"padding",2);var l5=class extends eW{constructor(t,e){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.id=_(this),this.marker=new l3(this),this.activeStyle=new l4,this.inactiveStyle=new l4,this.highlightStyle=new l4,this.label=new l2,this.group=new av({name:"pagination"}),this.labelNode=new a3,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new lv,this._previousButton=new lv,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(t=>t())}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){(this._orientation=t,"horizontal"===t)?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){let{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){let t=this.labelNode.getBBox();this.nextButton.translationX=t.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){let{currentPage:t,totalPages:e,labelNode:i,label:{color:a,fontStyle:s,fontWeight:r,fontSize:n,fontFamily:o}}=this;i.text=`${t+1} / ${e}`,i.fill=a,i.fontStyle=s,i.fontWeight=r,i.fontSize=n,i.fontFamily=o}updateMarkers(){let{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:a,activeStyle:s,inactiveStyle:r,highlightStyle:n,highlightActive:o}=this,l=(t,e)=>e?r:t===o?n:s;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",a))}updateMarker(t,e){let{size:i}=this.marker;t.size=i,t.fill=e.fill,t.fillOpacity=e.fillOpacity??1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){let{currentPage:t,totalPages:e}=this,i=0===e;this.nextButtonDisabled=t===e-1||i,this.previousButtonDisabled=0===t||i}setPage(t){t=td(0,t,this.totalPages-1),this.currentPage!==t&&(this.currentPage=t,this.onPaginationChanged())}getCursor(t){return({previous:this.previousButtonDisabled,next:this.nextButtonDisabled})[t]?void 0:"pointer"}onClick(t,e){t.preventDefault(),"next"!==e||this.nextButtonDisabled?"previous"!==e||this.previousButtonDisabled||(this.decrementPage(),this.onPaginationChanged()):(this.incrementPage(),this.onPaginationChanged())}onMouseHover(t){this.highlightActive=t,this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){let t=ap(lN(this.marker.shape||lv));this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){return{prev:am.toCanvas(this.previousButton),next:am.toCanvas(this.nextButton)}}};l5.className="Pagination",o([eQ(eJ)],l5.prototype,"marker",2),o([eQ(eJ)],l5.prototype,"activeStyle",2),o([eQ(eJ)],l5.prototype,"inactiveStyle",2),o([eQ(eJ)],l5.prototype,"highlightStyle",2),o([eQ(eJ)],l5.prototype,"label",2);var l9=class extends eW{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};o([eQ(e9,{optional:!0})],l9.prototype,"maxLength",2),o([eQ(ih)],l9.prototype,"color",2),o([eQ(iI,{optional:!0})],l9.prototype,"fontStyle",2),o([eQ(iD,{optional:!0})],l9.prototype,"fontWeight",2),o([eQ(e9)],l9.prototype,"fontSize",2),o([eQ(e2)],l9.prototype,"fontFamily",2),o([eQ(e1,{optional:!0})],l9.prototype,"formatter",2);var l6=class extends eW{constructor(){super(...arguments),this.size=15,this.padding=8}};o([sc(t=>t.parent?.onMarkerShapeChange())],l6.prototype,"shape",2),o([eQ(e9)],l6.prototype,"size",2),o([eQ(e9)],l6.prototype,"padding",2),o([eQ(e9,{optional:!0})],l6.prototype,"strokeWidth",2),o([eQ(e0)],l6.prototype,"enabled",2);var l8=class extends eW{};o([eQ(e9,{optional:!0})],l8.prototype,"strokeWidth",2),o([eQ(e9,{optional:!0})],l8.prototype,"length",2);var l7=class extends eW{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new l6,this.label=new l9,this.line=new l8}};o([eQ(e9,{optional:!0})],l7.prototype,"maxWidth",2),o([eQ(e9)],l7.prototype,"paddingX",2),o([eQ(e9)],l7.prototype,"paddingY",2),o([eQ(e0)],l7.prototype,"showSeriesStroke",2),o([eQ(eJ)],l7.prototype,"marker",2),o([eQ(eJ)],l7.prototype,"label",2),o([eQ(eJ)],l7.prototype,"line",2);var ht=class extends eW{};o([eQ(e1,{optional:!0})],ht.prototype,"legendItemClick",2),o([eQ(e1,{optional:!0})],ht.prototype,"legendItemDoubleClick",2);var he="legend-visibility",hi="legend-other-series",ha=class{constructor(t,e,i,a,s){this.type=t,this.enabled=e,this.itemId=i,this.seriesId=a,this.event=s,this.defaultPrevented=!1}preventDefault(){this.defaultPrevented=!0}},hs=class extends eW{constructor(t){super(),this.ctx=t,this.id=_(this),this.group=new sE({name:"legend",zIndex:15}),this.itemSelection=aL.select(this.group,l1),this.spriteRenderer=void 0,this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this._symbolsDirty=!0,this.toggleSeries=!0,this.item=new l7,this.listeners=new ht,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.proxyLegendDirty=!0,this.proxyLegendToolbarDestroyFns=new rZ,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new l5(e=>t.updateService.update(e),t=>this.updatePageNumber(t)),this.pagination.attachPagination(this.group),this.destroyFns.push(t.contextMenuRegistry.registerDefaultAction({id:he,type:"legend",label:"contextMenuToggleSeriesVisibility",action:t=>this.contextToggleVisibility(t)}),t.contextMenuRegistry.registerDefaultAction({id:hi,type:"legend",label:"contextMenuToggleOtherSeries",action:t=>this.contextToggleOtherSeries(t)})),this.destroyFns.push(t.layoutManager.registerElement(1,t=>this.positionLegend(t)),t.localeManager.addListener("locale-changed",()=>this.onLocaleChanged()),()=>this.group.remove()),this.proxyLegendToolbar=this.ctx.proxyInteractionService.createProxyContainer({type:"list",id:`${this.id}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"},ariaHidden:!0}),this.proxyLegendPagination=this.ctx.proxyInteractionService.createProxyContainer({type:"group",id:`${this.id}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal",ariaHidden:!0}),this.proxyLegendItemDescription=te("p"),this.proxyLegendItemDescription.style.display="none",this.proxyLegendItemDescription.id=`${this.id}-ariaDescription`,this.proxyLegendItemDescription.textContent=this.getItemAriaDescription(),this.proxyLegendToolbar.append(this.proxyLegendItemDescription)}set data(t){this.onDataUpdate(this._data,t),this._data=t,this._symbolsDirty=!0,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(t=>t()),this.pagination.destroy(),this.itemSelection.clear(),this.proxyLegendToolbarDestroyFns.destroy()}initLegendItemToolbar(){if(!this.proxyLegendDirty)return;this.itemSelection.each((t,e,i)=>{t.destroyProxyButton(),t.proxyButton??(t.proxyButton=this.ctx.proxyInteractionService.createProxyElement({type:"listswitch",id:`ag-charts-legend-item-${i}`,textContent:this.getItemAriaText(i),ariaChecked:!!t.datum.enabled,ariaDescribedBy:this.proxyLegendItemDescription.id,parent:this.proxyLegendToolbar,onclick:e=>this.onClick(e,t.datum,t.proxyButton.button),ondblclick:e=>this.onDoubleClick(e,t.datum),onmouseenter:e=>this.onHover(e,t),onmouseleave:()=>this.onLeave(),oncontextmenu:e=>this.onContextClick(e,t),onblur:()=>this.onLeave(),onfocus:e=>this.onHover(e,t)}))});let t=this.itemSelection.nodes().map(t=>t.proxyButton?.button).filter(tY);this.proxyLegendToolbarDestroyFns.setFns([...r2({orientation:"horizontal",buttons:t}),...r2({orientation:"vertical",buttons:t})]),this.proxyLegendToolbar.ariaHidden=(0===t.length).toString(),this.proxyLegendDirty=!1}onDataUpdate(t,e){this.proxyLegendDirty=t.length!==e.length||t.some((i,a,s)=>{let[r,n]=[e[a],t[a]];return r.id!==n.id})}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(2)}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}getItemLabel(t){let{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}calcLayout(t,e){let{paddingX:i,paddingY:a,label:s,maxWidth:r,label:{maxLength:n=1/0,fontStyle:o,fontWeight:l,fontSize:h,fontFamily:d}}=this.item,u=[...this.data];this.reverseOrder&&u.reverse(),this.itemSelection.update(u),this.initLegendItemToolbar();let c=[],p=a1.toFontString(s),g=r??.8*t,y=this.calculateSpriteDimensions();if(this.spriteRenderer??(this.spriteRenderer=new nA),this.spriteRenderer.resize(y),this.itemSelection.each((t,e)=>{t.fontStyle=o,t.fontWeight=l,t.fontSize=h,t.fontFamily=d;let i=this.updateMarkerLabel(this.spriteRenderer,t,e,y),a=e.itemId??e.id,s=(this.getItemLabel(e)??"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(s,n,g,i,p,a),c.push(t.getBBox())}),this._symbolsDirty=!1,t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return{};let m=this.size,f=this.oldSize;m[0]=t,m[1]=e,(m[0]!==f[0]||m[1]!==f[1])&&(f[0]=m[0],f[1]=m[1]);let{pages:x,maxPageHeight:M,maxPageWidth:b}=this.updatePagination(c,t,e),v=this.pages;this.pages=x,this.maxPageSize=[b-i,M-a];let I=this.pagination.currentPage,D=this.pages[I];return this.pages.length<1||!D?this.visible=!1:(this.visible=!0,this.updatePositions(I),this.update()),{oldPages:v}}isCustomMarker(t,e){return t&&void 0!==e&&"string"!=typeof e}calcSymbolsEnabled(t){let{showSeriesStroke:e,marker:i}=this.item,a=!!i.enabled||!e||(t.marker.enabled??!0),s=!!(t.line&&e),r=this.isCustomMarker(a,t.marker.shape);return{markerEnabled:a,lineEnabled:s,isCustomMarker:r}}calcSymbolsLengths(t){let e;let{marker:i,line:a}=this.item,{markerEnabled:s,lineEnabled:r}=this.calcSymbolsEnabled(t),{strokeWidth:n}=this.getMarkerStyles(t),{strokeWidth:o}=r?this.getLineStyles(t):{strokeWidth:0},{shape:l}=t.marker;if(this.isCustomMarker(s,l)){let t=new l;t.updatePath();let i=t.getBBox();e=Math.max(i.width,i.height)}return{markerLength:s?i.size:0,markerStrokeWidth:n,lineLength:r?a.length??25:0,lineStrokeWidth:o,customMarkerSize:e}}calculateSpriteDimensions(){let t=0,e=0,i=0,a=0;return this.itemSelection.each((s,r)=>{r.symbols.forEach(s=>{let{markerLength:r,markerStrokeWidth:n,lineLength:o,lineStrokeWidth:l,customMarkerSize:h=-1/0}=this.calcSymbolsLengths(s),d=r+n;a=Math.max(a,o,h,r),e=Math.max(e,o,h,d),i=Math.max(i,l,d),t=Math.max(t,n+.5)})}),e+=2*t,i+=2*t,{spritePixelRatio:tt().devicePixelRatio,spriteAAPadding:t,spriteWidth:e,spriteHeight:i,markerWidth:a}}updateMarkerLabel(t,e,i,a){let{marker:s,paddingX:r}=this.item,{markerWidth:n}=a,o=[],l=r;if(this._symbolsDirty){let t=[],a=[];i.symbols.forEach(e=>{let{shape:i=e.marker.shape}=s,r=lN(i);a.push(new aK({zIndex:0})),t.push(new r({zIndex:1}))}),e.updateSymbols(t,a)}return i.symbols.forEach((t,i)=>{let a=t.marker.padding??s.padding,{markerEnabled:r,lineEnabled:h,isCustomMarker:d}=this.calcSymbolsEnabled(t);e.markers[i].size=r||!h?s.size:0,o.push({length:n,spacing:a,isCustomMarker:d}),(r||h)&&(l+=a+n);let u=e.markers[i],c=e.lines[i];if(u){let{strokeWidth:e,fill:i,stroke:a,fillOpacity:s,strokeOpacity:r}=this.getMarkerStyles(t);u.fill=i,u.stroke=a,u.strokeWidth=e,u.fillOpacity=s,u.strokeOpacity=r}if(c){let e=this.getLineStyles(t);c.stroke=e.stroke,c.strokeOpacity=e.strokeOpacity,c.strokeWidth=e.strokeWidth,c.lineDash=e.lineDash}}),e.update(t,a,o),l}truncate(t,e,i,a,s,r){let n=!1;t.length>e&&(t=t.substring(0,e),n=!0);let o=aq.getMeasurer({font:s}),l=sm.truncateLine(t,o,i-a,n);return l.endsWith(a1.EllipsisChar)?this.truncatedItems.add(r):this.truncatedItems.delete(r),l}updatePagination(t,e,i){let a=this.getOrientation(),s=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=a,this.pagination.translationX=0,this.pagination.translationY=0;let{pages:r,maxPageHeight:n,maxPageWidth:o,paginationBBox:l,paginationVertical:h}=this.calculatePagination(t,e,i),d=r.findIndex(t=>t.endIndex>=s);this.pagination.currentPage=td(0,d,r.length-1);let{paddingX:u,paddingY:c}=this.item,p=n-c,g=0,y=-l.y-this.item.marker.size/2;h?y+=p+8:(g+=-l.x+(o-u)+8,y+=(p-l.height)/2),this.pagination.translationX=g,this.pagination.translationY=y,this.pagination.update(),this.pagination.updateMarkers();let m=0;return this.itemSelection.each((t,e,i)=>{i>(r[m]?.endIndex??1/0)&&m++,t.pageIndex=m}),{maxPageHeight:n,maxPageWidth:o,pages:r}}updateItemProxyButtons(){let t=this.toggleSeries?"pointer":void 0,e=Math.max(...this.itemSelection.nodes().map(t=>t.getBBox().height));this.itemSelection.each(i=>{if(i.proxyButton){let{listitem:a,button:s}=i.proxyButton,r=i.pageIndex===this.pagination.currentPage,n=am.toCanvas(i);if(n.height!==e){let t=(e-n.height)/2;n={x:n.x,y:n.y-t,height:e,width:n.width}}sv(s,"pointer-events",r?"auto":"none"),sv(s,"cursor",t),tn(a,n)}})}updatePaginationProxyButtons(t){this.proxyLegendPagination.style.display=this.pagination.visible?"absolute":"none";let e=(t?.length??this.pages.length)>1,i=this.pages.length>1;e!==i&&(i?(this.proxyPrevButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`${this.id}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.proxyLegendPagination,onclick:t=>this.pagination.onClick(t,"previous"),onmouseenter:()=>this.pagination.onMouseHover("previous"),onmouseleave:()=>this.pagination.onMouseHover(void 0)}),this.proxyNextButton??(this.proxyNextButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`${this.id}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.proxyLegendPagination,onclick:t=>this.pagination.onClick(t,"next"),onmouseenter:()=>this.pagination.onMouseHover("next"),onmouseleave:()=>this.pagination.onMouseHover(void 0)})),this.proxyLegendPagination.ariaHidden="false"):(this.proxyNextButton?.remove(),this.proxyPrevButton?.remove(),[this.proxyNextButton,this.proxyPrevButton]=[void 0,void 0],this.proxyLegendPagination.ariaHidden="true"));let{prev:a,next:s}=this.pagination.computeCSSBounds();tn(this.proxyPrevButton,a),tn(this.proxyNextButton,s),sv(this.proxyNextButton,"cursor",this.pagination.getCursor("next")),sv(this.proxyPrevButton,"cursor",this.pagination.getCursor("previous"))}calculatePagination(t,e,i){let{paddingX:a,paddingY:s}=this.item,r=this.getOrientation(),n=["left","right"].includes(this.position),o=this.pagination.getBBox(),l=new tI(0,0,0,0),h=[],d=0,u=0,c=0,p=t=>t.width===o.width&&t.height===o.height,g=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{if(c++>10){y.warn("unable to find stable legend layout.");break}o=l;let p=e-(n?0:o.width),m=function({orientation:t,bboxes:e,maxHeight:i,maxWidth:a,itemPaddingY:s=0,itemPaddingX:r=0,forceResult:n=!1}){let o="horizontal"===t,l={max:o?a:i,fn:o?t=>t.width:t=>t.height,padding:o?r:s},h={max:o?i:a,fn:o?t=>t.height:t=>t.width,padding:o?s:r},d=0,u=[];for(;d<e.length;){let t=function(t,e,i,a,s){let r=function(t,e){let i=t.length,a=0;for(let s=0;s<i;s++)if((a+=e.fn(t[s])+e.padding)>e.max){if(i/s<2)return Math.ceil(i/2);return s}return i}(t,i);if(r<1){if(!s)return;r=1}let n=r;for(;n>=1;){let r=function(t,e,i,a,s,r){let n=[],o=0,l=0,h=[],d=[];for(let u=0;u<t.length;u++){let c=(u+i)%i;0===c&&(o+=l,l=0,h.length>0&&n.push(h),h=[]);let p=a.fn(t[u])+a.padding;d[c]=Math.max(d[c]??0,p);let g=o+(l=Math.max(l,s.fn(t[u])+s.padding)),y=!r||n.length>0;if(g>s.max&&y){h=[];break}if(d.reduce((t,e)=>t+e,0)>a.max&&!r){if(d.length<i)return d.length;return}h.push(u+e)}return h.length>0&&n.push(h),n.length>0?n:void 0}(t,e,n,i,a,s);if(null==r&&n<=1)return;if(null==r){n--;continue}if("number"==typeof r){if(r<=1)return;n=r<n&&r>1?r:n,n--;continue}return{processedBBoxCount:r.length*r[0].length,pageIndices:r}}}(e.slice(d),d,l,h,n);if(!t)return;d+=t.processedBBoxCount,u.push(t.pageIndices)}return function(t,e,i,a,s){let r=0,n=0;return{pages:t.map(t=>{"horizontal"===e&&(t=function(t){let e=[];for(let i of t[0])e.push([]);return t.forEach((t,i)=>{t.forEach((t,a)=>{e[a][i]=t})}),e}(t));let o=0,l=t.map(t=>{let e=t.map(t=>(o=Math.max(t,o),i[t])),r=0,n=0;return e.forEach(t=>{r+=t.height+a,n=Math.max(n,t.width+s)}),{indices:t,bboxes:e,columnHeight:Math.ceil(r),columnWidth:Math.ceil(n)}}),h=0,d=0;return l.forEach(t=>{h+=t.columnWidth,d=Math.max(d,t.columnHeight)}),r=Math.max(h,r),n=Math.max(d,n),{columns:l,startIndex:t[0][0],endIndex:o,pageWidth:h,pageHeight:d}}),maxPageWidth:r,maxPageHeight:n}}(u,t,e,s,r)}({orientation:r,bboxes:t,maxHeight:i-(n?o.height:0),maxWidth:p,itemPaddingY:s,itemPaddingX:a,forceResult:g});h=m?.pages??[],d=m?.maxPageWidth??0,u=m?.maxPageHeight??0;let f=h.length;if(this.pagination.visible=f>1,this.pagination.totalPages=f,this.pagination.update(),this.pagination.updateMarkers(),l=this.pagination.getBBox(),!this.pagination.visible)break}while(!p(l));return{maxPageWidth:d,maxPageHeight:u,pages:h,paginationBBox:l,paginationVertical:n}}updatePositions(t=0){let{item:{paddingY:e},itemSelection:i,pages:a}=this;if(a.length<1||!a[t])return;let{columns:s,startIndex:r,endIndex:n}=a[t],o=0,l=0,h=s.length,d=s[0].indices.length,u="horizontal"===this.getOrientation(),c=s[0].bboxes[0].height+e,p=[];i.each((t,e,i)=>{let a,g;if(i<r||i>n){t.visible=!1;return}let y=i-r;u?(a=y%h,g=Math.floor(y/h)):(a=Math.floor(y/d),g=y%d),t.visible=!0;let m=s[a];m&&(l=Math.floor(c*g),o=Math.floor(p[g]??0),p[g]=(p[g]??0)+m.columnWidth,t.translationX=o,t.translationY=l)}),this.updateItemProxyButtons()}updatePageNumber(t){let{pages:e}=this,{startIndex:i,endIndex:a}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=a:this.paginationTrackingIndex=Math.floor((i+a)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),sv(this.proxyNextButton,"cursor",this.pagination.getCursor("next")),sv(this.proxyPrevButton,"cursor",this.pagination.getCursor("previous")),this.ctx.updateService.update(6)}update(){let{label:{color:t}}=this.item;this.itemSelection.each((e,i)=>{e.setEnabled(i.enabled),e.color=t}),this.updateContextMenu()}updateContextMenu(){let{toggleSeries:t,ctx:{contextMenuRegistry:e}}=this;t?(e.hideAction(he),e.hideAction(hi)):(e.showAction(he),e.showAction(hi))}getLineStyles(t){let{stroke:e,strokeOpacity:i=1,strokeWidth:a,lineDash:s}=t.line??{},r=Math.min(2,a??1);return{stroke:e,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??r,lineDash:s}}getMarkerStyles(t){let{fill:e,stroke:i,strokeOpacity:a=1,fillOpacity:s=1,strokeWidth:r}=t.marker,n=Math.min(2,r??1);return{fill:e,stroke:i,strokeOpacity:a,fillOpacity:s,strokeWidth:this.item.marker.strokeWidth??n}}computePagedBBox(){let t=ax.computeChildrenBBox(this.group.children());if(this.pages.length>1){let[e,i]=this.maxPageSize;t.height=Math.max(i,t.height),t.width=Math.max(e,t.width)}return t}findNode(t){let{datum:e,proxyButton:i}=this.itemSelection.select(e=>e.datum?.itemId===t.itemId)[0]??{};if(void 0===e||void 0===i)throw Error(`AG Charts - Missing required properties { datum: ${e}, proxyButton: ${i} }`);return{datum:e,proxyButton:i}}contextToggleVisibility(t){let{datum:e,proxyButton:i}=this.findNode(t);this.doClick(t.event,e,i.button)}contextToggleOtherSeries(t){this.doDoubleClick(t.event,this.findNode(t).datum)}onContextClick(t,e){let i=e.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&1>=this.getVisibleItemCount()?this.ctx.contextMenuRegistry.disableAction(he):this.ctx.contextMenuRegistry.enableAction(he);let{button:a,offsetX:s,offsetY:r}=t,{x:n,y:o}=am.toCanvasPoint(e,s,r);this.ctx.contextMenuRegistry.dispatchContext("legend",{type:"contextmenu",sourceEvent:t,button:a,offsetX:n,offsetY:o,deltaX:0,deltaY:0,pageX:NaN,pageY:NaN,preventDefault:()=>t.preventDefault(),pointerHistory:[]},{legendItem:i})}onClick(t,e,i){this.doClick(t,e,i)&&t.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(t=>t.getLegendData("category")).filter(t=>t.enabled).length}doClick(t,e,i){let{listeners:{legendItemClick:a},ctx:{chartService:s,highlightManager:r},preventHidingAll:n,toggleSeries:o}=this;if(!e)return!1;let{id:l,itemId:h,enabled:d}=e,u=s.series.find(t=>t.id===l);if(!u)return!1;let c=d,p=new ha("click",c,h,u.id,t);return a?.(p),!!p.defaultPrevented||(o&&(c=!d,n&&!c&&2>this.getVisibleItemCount()&&(c=!0),i.ariaChecked=c.toString(),this.ctx.chartEventManager.legendItemClick(u,h,c,e.legendItemName)),c?r.updateHighlight(this.id,{series:u,itemId:h,datum:void 0}):r.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0)}onDoubleClick(t,e){this.doDoubleClick(t,e)&&t.preventDefault()}doDoubleClick(t,e){let{listeners:{legendItemDoubleClick:i},ctx:{chartService:a},toggleSeries:s}=this;if("integrated"===a.mode||!e)return!1;let{id:r,itemId:n,seriesId:o}=e,l=a.series.find(t=>t.id===r);if(!l)return!1;let h=new ha("dblclick",!0,n,l.id,t);if(i?.(h),h.defaultPrevented)return!0;if(s){let t=a.series.flatMap(t=>t.getLegendData("category")),e=t.filter(t=>t.enabled).length,i=t.find(t=>t.itemId===n&&t.seriesId===o);this.ctx.chartEventManager.legendItemDoubleClick(l,n,i?.enabled??!1,e,i?.legendItemName)}return this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(t,e){let i;if(t instanceof FocusEvent){let{x:t,y:a}=am.toCanvas(e).computeCenter();i={type:"keyboard",offsetX:t,offsetY:a}}else{t.preventDefault();let{x:a,y:s}=am.toCanvasPoint(e,t.offsetX,t.offsetY);i={type:"hover",offsetX:a,offsetY:s}}let{offsetX:a,offsetY:s}=i;return{offsetX:a,offsetY:s,lastPointerEvent:i,showArrow:!1}}onHover(t,e){if(!this.enabled)throw Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(e.pageIndex);let i=e.datum,a=i?this.ctx.chartService.series.find(t=>t.id===i?.id):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){let a=this.toTooltipMeta(t,e);this.ctx.tooltipManager.updateTooltip(this.id,a,sL({content:this.getItemLabel(i)}))}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&a?this.updateHighlight({series:a,itemId:i?.itemId,datum:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(t){let e=this.ctx.interactionManager.getState();32===e?this.ctx.highlightManager.updateHighlight(this.id,t):2===e&&(this.pendingHighlightDatum=t,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.itemSelection.each(({proxyButton:t},e,i)=>{t?.button!=null&&(t.button.textContent=this.getItemAriaText(i))}),this.proxyLegendItemDescription.textContent=this.getItemAriaDescription()}getItemAriaText(t){let e=this.data[t],i=e&&this.getItemLabel(e),a=this.ctx.localeManager;if(t>=0&&i){let e=this.data.length;return a.t("ariaLabelLegendItem",{label:i,index:t+1,count:e})}return a.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(){return this.ctx.localeManager.t("ariaDescriptionLegendItem")}positionLegend(t){if(sv(this.proxyLegendToolbar,"display",this.visible&&this.enabled?void 0:"none"),!this.enabled||!this.data.length)return;let{layoutBox:e}=t,{x:i,y:a,width:s,height:r}=e,[n,o]=this.calculateLegendDimensions(e),{oldPages:l}=this.calcLayout(n,o),h=this.computePagedBBox(),d=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return r-h.height;default:return s-h.width}};if(this.visible){let t,n;let o=this.spacing;switch(this.position){case"top":case"bottom":t=(s-h.width)/2,n=d(),e.shrink(h.height+o,this.position);break;default:t=d(),n=(r-h.height)/2,e.shrink(h.width+o,this.position)}this.group.translationX=Math.floor(i+t-h.x),this.group.translationY=Math.floor(a+n-h.y),this.proxyLegendToolbar.ariaOrientation=this.getOrientation()}this.updateItemProxyButtons(),this.updatePaginationProxyButtons(l)}calculateLegendDimensions(t){let e,i;let{width:a,height:s}=t,r=a/s;switch(this.position){case"top":case"bottom":{let t=r<1?Math.min(.5,1/r*.2):.2;e=this.maxWidth?Math.min(this.maxWidth,a):a,i=this.maxHeight?Math.min(this.maxHeight,s):Math.round(s*t);break}default:{let t=r>1?Math.min(.5,.25*r):.25;e=this.maxWidth?Math.min(this.maxWidth,a):Math.round(a*t),i=this.maxHeight?Math.min(this.maxHeight,s):s}}return[e,i]}};hs.className="Legend",o([eQ(e0)],hs.prototype,"toggleSeries",2),o([eQ(eJ)],hs.prototype,"pagination",2),o([eQ(eJ)],hs.prototype,"item",2),o([eQ(eJ)],hs.prototype,"listeners",2),o([sc(t=>t.updateGroupVisibility()),eQ(e0)],hs.prototype,"enabled",2),o([sc(t=>t.proxyLegendDirty=!0),eQ(iv)],hs.prototype,"position",2),o([eQ(e9,{optional:!0})],hs.prototype,"maxWidth",2),o([eQ(e9,{optional:!0})],hs.prototype,"maxHeight",2),o([eQ(e0,{optional:!0})],hs.prototype,"reverseOrder",2),o([eQ(iE(["horizontal","vertical"],"an orientation"),{optional:!0})],hs.prototype,"orientation",2),o([eQ(e0,{optional:!0})],hs.prototype,"preventHidingAll",2),o([eQ(e9)],hs.prototype,"spacing",2);var hr={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:t=>new hs(t),packageType:"community"},hn=class extends ng{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.gripLineGap=2,this.gripLineLength=8}setCenter(t,e){this.dirtyPath=!0,(this.centerX!==t||this.centerY!==e)&&(this.centerX=t,this.centerY=e,this.markDirty(3))}static align(t,e,i,a,s,r,n,o){let l=t.strokeWidth/2,h=t.align(i+s*n)+l,d=h+t.align(i+s*n,s*(o-n))-2*l,u=t.align(a+r/2)+l;t.setCenter(h,u),e.setCenter(d,u)}computeBBox(){let{centerX:t,centerY:e,width:i,height:a}=this;return new tI(t-i/2,e-a/2,i,a)}isPointInPath(t,e){return this.getBBox().containsPoint(t,e)}updatePath(){let{centerX:t,centerY:e,path:i,strokeWidth:a,gripLineGap:s,gripLineLength:r}=this,n=this.layerManager?.canvas?.pixelRatio??1;i.clear();let o=Math.floor(this.width/2*n)/n,l=Math.floor(this.height/2*n)/n;i.moveTo(t-o,e-l),i.lineTo(t+o,e-l),i.lineTo(t+o,e+l),i.lineTo(t-o,e+l),i.closePath();let h=Math.floor((s+a)/2*n)/n,d=Math.floor(r/2*n)/n;i.moveTo(t-h,e-d),i.lineTo(t-h,e+d),i.moveTo(t+h,e-d),i.lineTo(t+h,e+d)}};hn.className="RangeHandle",o([eQ(e9),tS({redraw:3,type:"path"})],hn.prototype,"width",2),o([eQ(e9),tS({redraw:3,type:"path"})],hn.prototype,"height",2),o([eQ(e9),tS({redraw:3,type:"path"})],hn.prototype,"gripLineGap",2),o([eQ(e9),tS({redraw:3,type:"path"})],hn.prototype,"gripLineLength",2);var ho=class extends ng{constructor(){super(...arguments),this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1}layout(t,e,i,a){(t!==this.x||e!==this.y||i!==this.width||this.height!==a)&&(this.x=t,this.y=e,this.width=i,this.height=a,this.dirtyPath=!0,this.markDirty(3))}update(t,e){t=isNaN(t)?this.min:t,e=isNaN(e)?this.max:e,(t!==this.min||e!==this.max)&&(this.min=t,this.max=e,this.dirtyPath=!0,this.markDirty(3))}computeBBox(){let{x:t,y:e,width:i,height:a}=this;return new tI(t,e,i,a)}computeVisibleRangeBBox(){let{x:t,y:e,width:i,height:a,min:s,max:r}=this,n=t+i*s;return new tI(n,e,t+i*r-n,a)}updatePath(){let{path:t,x:e,y:i,width:a,height:s,min:r,max:n,strokeWidth:o}=this,l=o/2;t.clear();let h=this.align(e)+l,d=this.align(i)+l,u=h+this.align(e,a)-2*l,c=d+this.align(i,s)-2*l;t.moveTo(h,d),t.lineTo(u,d),t.lineTo(u,c),t.lineTo(h,c),t.closePath();let p=this.align(e+a*r)+l,g=p+this.align(e+a*r,a*(n-r))-2*l;t.moveTo(p,d),t.lineTo(p,c),t.lineTo(g,c),t.lineTo(g,d),t.closePath()}};ho.className="RangeMask";var hl=class extends sk{constructor(t){super({name:"rangeSelectorGroup",zIndex:16}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new av({name:"navigator-background",zIndex:1})),this.append(t)}layout(t,e,i,a,s,r){this.x=t,this.y=e,this.width=i,this.height=a,this.lOffset=s,this.rOffset=r,this.background.translationX=t,this.background.translationY=e,this.markDirty(3)}updateBackground(t,e){null!=t&&this.background.removeChild(t),null!=e&&this.background.appendChild(e),this.markDirty(3)}computeBBox(){let{x:t,y:e,width:i,height:a,lOffset:s,rOffset:r}=this;return new tI(t-s,e,i+(s+r),a)}},hh=class extends rA{constructor(t){super(),this.ctx=t,this.miniChart=void 0,this.enabled=!1,this.mask=new ho,this.minHandle=new hn,this.maxHandle=new hn,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(t,e)=>({x:t,y:e})},this.height=30,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new hl([this.mask,this.minHandle,this.maxHandle]),this._min=0,this._max=1,this.minRange=.001;let e=t.regionManager.addRegion("navigator",this.rangeSelector);this.destroyFns.push(t.scene.attachNode(this.rangeSelector),e.addListener("hover",t=>this.onHover(t),50),e.addListener("drag-start",t=>this.onDragStart(t),50),e.addListener("drag",t=>this.onDrag(t),50),e.addListener("drag-end",t=>this.onDragEnd(t),50),e.addListener("leave",t=>this.onLeave(t),50),this.ctx.localeManager.addListener("locale-changed",()=>this.updateZoom()),this.ctx.layoutManager.registerElement(3,t=>this.onLayoutStart(t)),this.ctx.layoutManager.addListener("layout:complete",t=>this.onLayoutComplete(t)),t.zoomManager.addListener("zoom-change",t=>this.onZoomChange(t))),this.proxyNavigatorToolbar=this.ctx.proxyInteractionService.createProxyContainer({type:"toolbar",id:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],ariaOrientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.updateGroupVisibility(),this.proxyNavigatorElements=[this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-min",ariaLabel:{id:"ariaLabelNavigatorMinimum"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,onchange:t=>this.onMinSliderChange(t)}),this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-pan",ariaLabel:{id:"ariaLabelNavigatorRange"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,onchange:t=>this.onPanSliderChange(t)}),this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-max",ariaLabel:{id:"ariaLabelNavigatorMaximum"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,onchange:t=>this.onMaxSliderChange(t)})],this.proxyNavigatorElements.forEach(t=>sx(t,"data-preventdefault",!1)),this.setSliderRatio(this.proxyNavigatorElements[0],this._min),this.setSliderRatio(this.proxyNavigatorElements[2],this._max),this.setPanSliderValue(this._min,this._max),r1({orientation:"vertical",toolbar:this.proxyNavigatorToolbar,buttons:this.proxyNavigatorElements}),this.destroyFns.push(()=>{this.proxyNavigatorElements.forEach(t=>t.remove()),this.proxyNavigatorToolbar.remove()})}updateBackground(t,e){this.rangeSelector?.updateBackground(t,e)}updateGroupVisibility(){let{enabled:t}=this;null!=this.rangeSelector&&t!==this.rangeSelector.visible&&(this.rangeSelector.visible=t,this.proxyNavigatorToolbar.ariaHidden=(!t).toString(),t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}onLayoutStart(t){if(this.enabled){let{layoutBox:e}=t,i=this.height+this.spacing;e.shrink(i,"bottom"),this.y=e.y+e.height+this.spacing}else this.y=0}onLayoutComplete(t){let{x:e,width:i}=t.series.rect;if(this.enabled){let{y:t,height:a}=this;this.layoutNodes(e,t,i,a),tn(this.proxyNavigatorToolbar,{x:e,y:t,width:i,height:a}),this.proxyNavigatorToolbar.style.removeProperty("display")}else this.proxyNavigatorToolbar.style.display="none";this.x=e,this.width=i}onHover(t){this.enabled&&this.updateCursor(t)}updateCursor(t){if(!this.enabled)return;let{mask:e,minHandle:i,maxHandle:a}=this,{regionOffsetX:s,regionOffsetY:r}=t;i.containsPoint(s,r)||a.containsPoint(s,r)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):e.computeVisibleRangeBBox().containsPoint(s,r)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator")}onDragStart(t){if(!this.enabled)return;this.updateCursor(t);let{mask:e,minHandle:i,maxHandle:a,x:s,width:r,_min:n}=this,{regionOffsetX:o,regionOffsetY:l}=t;i.zIndex<a.zIndex?a.containsPoint(o,l)?this.dragging="max":i.containsPoint(o,l)&&(this.dragging="min"):i.containsPoint(o,l)?this.dragging="min":a.containsPoint(o,l)&&(this.dragging="max"),null==this.dragging&&e.computeVisibleRangeBBox().containsPoint(o,l)&&(this.dragging="pan",this.panStart=(o-s)/r-n),null!=this.dragging&&this.ctx.zoomManager.fireZoomPanStartEvent("navigator")}onDrag(t){if(!this.enabled||null==this.dragging)return;let{dragging:e,minRange:i,panStart:a,x:s,width:r}=this,{_min:n,_max:o}=this,{regionOffsetX:l}=t,h=(l-s)/r;if("min"===e)n=td(0,h,o-i);else if("max"===e)o=td(n+i,h,1);else if("pan"===e&&null!=a){let t=o-n;o=(n=td(0,h-a,1-t))+t}this._min=n,this._max=o,this.updateZoom()}onDragEnd(t){this.dragging=void 0,this.updateCursor(t)}onLeave(t){this.ctx.cursorManager.updateCursor("navigator")}onZoomChange(t){let{x:e}=t;e&&(this._min=e.min,this._max=e.max,this.updateNodes(e.min,e.max),this.setPanSliderValue(e.min,e.max),this.setSliderRatio(this.proxyNavigatorElements[0],e.min),this.setSliderRatio(this.proxyNavigatorElements[2],e.max))}onPanSliderChange(t){let e=this.getSliderRatio(this.proxyNavigatorElements[1]),i=this._max-this._min;this._min=td(0,e,1-i),this._max=this._min+i,this.updateZoom()}onMinSliderChange(t){let e=this.proxyNavigatorElements[0];this._min=this.setSliderRatioClamped(e,0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(t){let e=this.proxyNavigatorElements[2];this._max=this.setSliderRatioClamped(e,this._min+this.minRange,1),this.updateZoom()}setPanSliderValue(t,e){this.proxyNavigatorElements[1].value=`${Math.round(100*t)}`,this.proxyNavigatorElements[1].ariaValueText=this.ctx.localeManager.t("ariaValuePanRange",{min:t,max:e})}setSliderRatioClamped(t,e,i){let a=this.getSliderRatio(t),s=td(e,a,i);return s!==a&&this.setSliderRatio(t,s),s}setSliderRatio(t,e){let i=Math.round(100*e);t.value=`${i}`,t.ariaValueText=tv(i)}getSliderRatio(t){return parseFloat(t.value)/100}layoutNodes(t,e,i,a){let{rangeSelector:s,mask:r,minHandle:n,maxHandle:o,_min:l,_max:h}=this;s.layout(t,e,i,a,n.width/2,o.width/2),r.layout(t,e,i,a),hn.align(n,o,t,e,i,a,l,h),l+(h-l)/2<.5?(n.zIndex=3,o.zIndex=4):(n.zIndex=4,o.zIndex=3),[n,this.maskVisibleRange,o].forEach((i,a)=>{let s=i.getBBox(),r={x:s.x-t,y:s.y-e,height:s.height,width:s.width};tn(this.proxyNavigatorElements[a],r)})}updateNodes(t,e){this.mask.update(t,e)}updateZoom(){if(!this.enabled)return;let{_min:t,_max:e}=this;if(null!=t&&null!=e)return this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e}},!1,t=>{(null!=this.min||null!=this.max)&&y.warnOnce(`Could not apply [navigator.min] or [navigator.max] as [${t}] has modified the initial zoom state.`)})}};o([eQ(eJ,{optional:!0})],hh.prototype,"miniChart",2),o([eQ(e0),sc(t=>t.updateGroupVisibility())],hh.prototype,"enabled",2),o([eQ(e9)],hh.prototype,"height",2),o([eQ(e9)],hh.prototype,"spacing",2),o([su({newValue(t){this._min=t,this.updateZoom()}}),eQ(eX(e6,ia("max")),{optional:!0})],hh.prototype,"min",2),o([su({newValue(t){this._max=t,this.updateZoom()}}),eQ(eX(e6,is("min")),{optional:!0})],hh.prototype,"max",2);var hd={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],moduleFactory:t=>new hh(t),themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8}}}};function hu({takeColors:t}){let{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}function hc(t){return{marker:hu(t)}}var hp=(t=>(t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=17]="LARGE",t))(hp||{}),hg=(t=>(t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.LIGHTER="lighter",t))(hg||{}),hy=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(hy||{}),hm=(t=>(t.CATEGORY="category",t.ORDINAL_TIME="ordinal-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(hm||{}),hf=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(hf||{}),hx=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(hx||{}),hM=Symbol("is-dark-theme"),hb=Symbol("is-community"),hv=Symbol("is-enterprise"),hI=Symbol("default-font"),hD=Symbol("default-label-colour"),hS=Symbol("default-inverted-label-colour"),hN=Symbol("default-inside-series-label-colour"),hL=Symbol("default-muted-label-colour"),hA=Symbol("default-axis-grid-colour"),hw=Symbol("default-axis-line-colour"),hC=Symbol("default-cross-lines-colour"),hT=Symbol("default-background-colour"),hk=Symbol("default-shadow-colour"),hE=Symbol("default-colours"),hO=Symbol("default-padding"),hj=Symbol("default-caption-layout-style"),hR=Symbol("default-caption-alignment"),hz=Symbol("palette-up-stroke"),hP=Symbol("palette-down-stroke"),hB=Symbol("palette-up-fill"),hG=Symbol("palette-down-fill"),hF=Symbol("palette-neutral-stroke"),hU=Symbol("palette-neutral-fill"),hY=Symbol("palette-alt-up-stroke"),hZ=Symbol("palette-alt-down-stroke"),h_=Symbol("palette-alt-up-fill"),hV=Symbol("palette-alt-down-fill"),hW=Symbol("palette-gray-fill"),hH=Symbol("palette-gray-stroke"),h$=Symbol("default-polar-series-stroke"),hQ=Symbol("default-diverging-series-colour-range"),hX=Symbol("default-gauge-series-colour-range"),hK=Symbol("default-funnel-series-colour-range"),hJ=Symbol("default-hierarchy-fills"),hq=Symbol("default-hierarchy-strokes"),h0=Symbol("default-annotation-stroke"),h1=Symbol("default-text-annotation-color"),h2=Symbol("default-annotation-background-fill"),h4=Symbol("default-annotation-handle-fill"),h3=Symbol("default-annotation-statistics-fill"),h5=Symbol("default-annotation-statistics-stroke"),h9=Symbol("default-annotation-statistics-color"),h6=Symbol("default-annotation-statistics-divider-stroke"),h8=Symbol("default-annotation-statistics-fill"),h7=Symbol("default-annotation-statistics-stroke"),dt=Symbol("default-textbox-fill"),de=Symbol("default-textbox-stroke"),di=Symbol("default-textbox-color"),da=Symbol("default-toolbar-position"),ds=Symbol("default-gridline-enabled");function dr(t,e,i,a,s){let{addPhaseFn:r,updatePhaseFn:n,removePhaseFn:o}=s,l=(a,s,r)=>{i.animate({id:`${t}_${e}_${s.id}_${a}`,groupId:t,from:0,to:1,ease:eh,collapsable:!1,onUpdate(t,e){e&&"removed"!==a||(s.path.clear(!0),r(t,s),s.checkPathDirty())},onStop(){"added"===a&&(s.path.clear(!0),r(1,s),s.checkPathDirty())},phase:eb[a]})};for(let t of a)i.isSkipped()||(l("removed",t,o),l("updated",t,n)),l("added",t,r)}function dn(t){return"number"==typeof t?t.toFixed(2):String(t??"")}var dl=null;function dh(t){return null==t?void 0:""===t?"":(dl??(dl=te("div")),dl.textContent=String(t),dl.innerHTML)}var dd=new WeakMap;function du(t,e){let i=JSON.stringify(t,null,0);return dd.has(e)||dd.set(e,new Map),dd.get(e)?.has(i)||dd.get(e)?.set(i,e(t)),dd.get(e)?.get(i)}function dc(t,e=[0,0]){for(let i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function dp(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:t=>dc(t)}}function dg(t,e){return{id:t,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:t=>dc(t),groupAggregateFunction:(t,e=[0,0])=>(e[0]+=t?.[0]??0,e[1]+=t?.[1]??0,e)}}function dy(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:t=>ob.extendDomain(t)}}function dm(t){return{id:t,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>(e[0]+=t?.[0]??0,e[1]+=t?.[1]??0,e)}}function df(t,e){return{id:t,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:t=>dc(t),groupAggregateFunction:(t,e=[0,0,-1])=>(e[0]+=t?.[0]??0,e[1]+=t?.[1]??0,e[2]++,e),finalFunction:(t=[0,0,0])=>{let e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}function dx(t,e,i){let a={id:t,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(t,i=[])=>{let a=i[1]-i[0];return e.aggregateFunction(t).map(t=>t/a)}};return e.groupAggregateFunction&&(a.groupAggregateFunction=e.groupAggregateFunction),a}function dM(t){return()=>{let e=0;return i=>t0(i)?e+=t?Math.max(0,i):i:i}}function db(){return()=>{let t=0;return e=>{if(!t0(e))return e;let i=t;return t+=e,i}}}function dv(t){return null!=t&&sF(t)}function dI(t){return null!=t}function dD(t){switch(t){case"number":case"log":case"ordinal-time":case"time":case"color":return dv;default:return dI}}function dS(t){switch(t){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function dN(t,e,i={}){return{property:t,type:"key",valueType:dS(e),validation:dD(e),...i}}function dL(t,e,i={}){return{property:t,type:"value",valueType:dS(e),validation:dD(e),...i}}function dA(t,e={}){let{min:i=-1/0,max:a=1/0,...s}=e;return{type:"value",property:t,valueType:"range",validation:dv,processor:()=>t=>t0(t)?td(i,t,a):t,...s}}function dw(t,e,i={}){let{onlyPositive:a,...s}=i;return{...dL(t,e,s),processor:dM(a)}}function dC(t,e,i={}){return{...dL(t,e,i),processor:db()}}function dT(t,e,i="current",a,s){return[dL(t,s,a),dY(a.groupId,e,i,a.separateNegative),...null!=a.rangeId?[dy(a.rangeId,a.groupId)]:[]]}function dk(t,e,i){return[dL(t,e,i),d_(i.groupId)]}var dE={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e=1/0,i)=>{let a=i.keys[0],s=Math.abs(a-t);return(t=a,!isNaN(s)&&s>0&&s<e)?s:e}}},dO={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let t=NaN;return(e=-1/0,i)=>{let a=i.keys[0],s=Math.abs(a-t);return(t=a,!isNaN(s)&&s>0&&s>e)?s:e}}},dj={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>t?.slice().sort((t,e)=>{for(let i=0;i<t.length;i++){let a=t[i]-e[i];if(0!==a)return a}return 0})};function dR({normaliseTo:t,mode:e}){let i=(e,i)=>{let a=e*t/i;return a>=0?Math.min(t,a):Math.max(-t,a)};return()=>()=>(t,a)=>{let s=[0,0];for(let i of a){let a=t[i],r="number"==typeof a?a:Math.max(...a),n=r<0?0:1;"sum"===e?s[n]+=r:0===n?s[n]=Math.min(s[n],r):s[n]=Math.max(s[n],r)}let r=Math.max(Math.abs(s[0]),s[1]);for(let e of a){let a=t[e];t[e]="number"==typeof a?i(a,r):a.map(t=>i(t,r))}}}function dz(t,e,i="sum"){return{type:"group-value-processor",matchGroupIds:t,adjust:du({normaliseTo:e,mode:i},dR)}}function dP({normaliseTo:t,zeroDomain:e,rangeMin:i,rangeMax:a}){let s=t[1]-t[0],r=(i,a,r)=>{let n=t[0]+(i-a)/r*s;return 0===r?e:n>=t[1]?t[1]:n<t[0]?t[0]:n};return()=>(e,s)=>{let[n,o]=e.domain.values[s];null!=i&&(n=i),null!=a&&(o=a);let l=o-n;for(let i of(e.domain.values[s]=[t[0],t[1]],e.data)){let t=i.values;for(let i of("ungrouped"===e.type&&(t=[t]),t))i[s]=r(i[s],n,l)}}}function dB(t,e,i,a,s){return{type:"property-value-processor",property:t,adjust:du({normaliseTo:e,rangeMin:a,rangeMax:s,zeroDomain:i},dP)}}function dG(t){return{type:"processor",property:"animationValidation",calculate(e){let{keys:i,values:a}=e.defs,{input:s,data:r}=e,n=!0,o=!0,l=[];for(let e=0;e<a.length;e++)t?.includes(a[e].id)&&l.push([e,a[e]]);let h=(t,i,a)=>{if("category"===i.valueType){let i=e.domain[a][t];n&&(n=i.length===s.count);return}let l=r[0]?.[a][t];for(let e=1;(n||o)&&e<r.length;e++){let i=r[e][a][t];o&&(o=l<=i),n&&(n=l!==i),l=i}};for(let t=0;(n||o)&&t<i.length;t++)h(t,i[t],"keys");for(let t=0;(n||o)&&t<l.length;t++){let[e,i]=l[t];h(e,i,"values")}return{uniqueKeys:n,orderedKeys:o}}}}function dF({mode:t,separateNegative:e}){return()=>()=>(i,a)=>{let s=[0,0];for(let r of a){let a=i[r],n=ty(a)&&e?0:1;t0(a)&&("normal"===t&&(s[n]+=a),i[r]=s[n],"trailing"===t&&(s[n]+=a))}}}function dU({mode:t,sum:e}){return()=>{let i=[],a=!0;return()=>(s,r)=>{let n=0;for(let o of r){let r=s[o],l=a&&"current"===e?0:i[o];i[o]=r;let h="current"===e?r:l;if(!t0(r)||!t0(l)){s[o]=n;continue}"normal"===t&&(n+=h),s[o]=n,"trailing"===t&&(n+=h)}a=!1}}}function dY(t,e,i,a=!1){return{type:"group-value-processor",matchGroupIds:[t],adjust:e.startsWith("window")?du({mode:e.endsWith("-trailing")?"trailing":"normal",sum:i},dU):du({mode:e,separateNegative:a},dF)}}function dZ(){return()=>(t,e)=>{let i=new Float64Array(32),a=0;for(let s of e){let e=t[s];i[a]=Number.isFinite(e)?e:NaN,a+=1,t[s]=i.subarray(0,a)}}}function d_(t){return{type:"group-value-processor",matchGroupIds:[t],adjust:dZ}}function dV(t,e=!0){return{type:"processor",property:"diff",calculate:i=>{let a=new Map,s=new Map,r=new Map,n=new Map,o=Math.max(t.data.length,i.data.length);for(let l=0;l<o;l++){let o=t.data[l],h=i.data[l],d=o?dW(o.keys):"",u=h?dW(h.keys):"";if(h&&o&&d===u){ew(o.values,h.values)||r.set(u,h);continue}n.has(u)?((e||!ew(n.get(u).values,h.values))&&(r.set(u,h),a.set(u,h)),n.delete(u)):h&&s.set(u,h),s.has(d)?((e||!ew(s.get(d).values,o.values))&&(r.set(d,o),a.set(d,o)),s.delete(d)):o&&(r.delete(d),n.set(d,o))}return{changed:s.size>0||r.size>0||n.size>0,added:s,updated:r,removed:n,moved:a}}}}function dW(t,...e){let i;return("string"==typeof(i=tZ(t)?t.map(t=>sY(t)).join("___"):sY(t))||"number"==typeof i||"boolean"==typeof i||i instanceof Date)&&e.length>0&&(i+=`___${e.join("___")}`),i}function dH({id:t},e,i,...a){eI(t,e,i,a,{opacity:0},{opacity:1},{phase:"trailing"})}function d$({id:t},e,i,...a){eI(t,e,i,a,{opacity:1},{opacity:0},{phase:"remove"})}function dQ(t){return{opacity:1}}var dX=class extends eW{constructor(){super(...arguments),this._dirty=3}markDirty(t=1){this._dirty<t&&(this._dirty=t)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},dK=class extends dX{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};o([eQ(e0),tS({redraw:3})],dK.prototype,"enabled",2),o([eQ(ih),tS({redraw:3})],dK.prototype,"color",2),o([eQ(e4),tS({redraw:3})],dK.prototype,"xOffset",2),o([eQ(e4),tS({redraw:3})],dK.prototype,"yOffset",2),o([eQ(e9),tS({redraw:3})],dK.prototype,"blur",2);var dJ=iR(t=>lS(t)||"function"==typeof t&&Object.create(t.prototype)instanceof lc,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),dq=class extends dX{constructor(){super(...arguments),this.enabled=!0,this.shape=lp,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){let{size:t,shape:e,fill:i,fillOpacity:a,stroke:s,strokeWidth:r,strokeOpacity:n}=this;return{size:t,shape:e,fill:i,fillOpacity:a,stroke:s,strokeWidth:r,strokeOpacity:n}}getDiameter(){return this.size+this.strokeWidth}};o([eQ(e0),tS({redraw:3})],dq.prototype,"enabled",2),o([eQ(dJ),tS({redraw:3})],dq.prototype,"shape",2),o([eQ(e9),tS({redraw:3})],dq.prototype,"size",2),o([eQ(ih,{optional:!0}),tS({redraw:3})],dq.prototype,"fill",2),o([eQ(e6),tS({redraw:3})],dq.prototype,"fillOpacity",2),o([eQ(ih,{optional:!0}),tS({redraw:3})],dq.prototype,"stroke",2),o([eQ(e9),tS({redraw:3})],dq.prototype,"strokeWidth",2),o([eQ(e6),tS({redraw:3})],dq.prototype,"strokeOpacity",2),o([eQ(e1,{optional:!0}),tS({redraw:3})],dq.prototype,"itemStyler",2);var d0=class extends eW{constructor(){super(...arguments),this.enabled=!1}};o([eQ(e0)],d0.prototype,"enabled",2);var d1=class extends eW{constructor(){super(...arguments),this.enabled=!0,this.interaction=new d0,this.position=new sA,this.range=void 0}toTooltipHtml(t,e){return this.renderer?sL(this.renderer(e),t):sL(t)}};o([eQ(e0)],d1.prototype,"enabled",2),o([eQ(e0,{optional:!0})],d1.prototype,"showArrow",2),o([eQ(e1,{optional:!0})],d1.prototype,"renderer",2),o([eQ(eJ)],d1.prototype,"interaction",2),o([eQ(eJ)],d1.prototype,"position",2),o([eQ(iT,{optional:!0})],d1.prototype,"range",2);var d2=iE(["linear","smooth","step"],"a line style"),d4=iE(["start","middle","end"]),d3=class extends eW{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};o([eQ(d2)],d3.prototype,"type",2),o([eQ(e6)],d3.prototype,"tension",2),o([eQ(d4)],d3.prototype,"position",2);var d5=class extends lz{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new d3,this.shadow=new dK,this.marker=new dq,this.label=new sj,this.tooltip=new d1,this.connectMissingData=!1}};function d9(t){switch(t.type){case"linear":case"step":return[{x:t.x0,y:t.y0},{x:t.x1,y:t.y1}];case"cubic":return[{x:t.cp0x,y:t.cp0y},{x:t.cp3x,y:t.cp3y}]}}function d6(t,e,i){let[a,s]=d9(t),r=s.x!==a.x?(i.x-e.x)/(s.x-a.x):0,n=s.y!==a.y?(i.y-e.y)/(s.y-a.y):0;switch(t.type){case"linear":return{type:"linear",moveTo:t.moveTo,x0:e.x,y0:e.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:t.moveTo,cp0x:e.x,cp0y:e.y,cp1x:i.x-(t.cp2x-a.x)*r,cp1y:i.y-(t.cp2y-a.y)*n,cp2x:i.x-(t.cp1x-a.x)*r,cp2y:i.y-(t.cp1y-a.y)*n,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:t.moveTo,x0:e.x,y0:e.y,x1:i.x,y1:i.y,stepX:i.x-(t.stepX-a.x)*r}}}function d8(t,e,i){let{moveTo:a}=t,[s,r]=function(t){let e=d9(t);return e[0].x>e[1].x&&e.reverse(),e}(t),{x:n,y:o}=s,{x:l,y:h}=r;if(i<n)return d6(t,s,s);if(e>l)return d6(t,r,r);switch(t.type){case"linear":{let t=o===h?void 0:(h-o)/(l-n),s=null==t?o:t*(e-n)+o,r=null==t?o:t*(i-n)+o;return{type:"linear",moveTo:a,x0:e,y0:s,x1:i,y1:r}}case"step":if(i<=t.stepX){let s=t.y0;return{type:"step",moveTo:a,x0:e,y0:s,x1:i,y1:s,stepX:i}}if(e>=t.stepX){let s=t.y1;return{type:"step",moveTo:a,x0:e,y0:s,x1:i,y1:s,stepX:e}}{let{y0:s,y1:r,stepX:n}=t;return{type:"step",moveTo:a,x0:e,y0:s,x1:i,y1:r,stepX:n}}case"cubic":{let s=nl(t.cp0x,t.cp1x,t.cp2x,t.cp3x,e),[r,n]=nh(t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,s),o=nl(n[0].x,n[1].x,n[2].x,n[3].x,i);return[n,r]=nh(n[0].x,n[0].y,n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y,o),{type:"cubic",moveTo:a,cp0x:n[0].x,cp0y:n[0].y,cp1x:n[1].x,cp1y:n[1].y,cp2x:n[2].x,cp2y:n[2].y,cp3x:n[3].x,cp3y:n[3].y}}}}o([eQ(e2)],d5.prototype,"xKey",2),o([eQ(e2,{optional:!0})],d5.prototype,"xName",2),o([eQ(e2)],d5.prototype,"yKey",2),o([eQ(e2,{optional:!0})],d5.prototype,"yName",2),o([eQ(e2,{optional:!0})],d5.prototype,"yFilterKey",2),o([eQ(e9,{optional:!0})],d5.prototype,"normalizedTo",2),o([eQ(ih)],d5.prototype,"fill",2),o([eQ(e6)],d5.prototype,"fillOpacity",2),o([eQ(ih)],d5.prototype,"stroke",2),o([eQ(e9)],d5.prototype,"strokeWidth",2),o([eQ(e6)],d5.prototype,"strokeOpacity",2),o([eQ(ib)],d5.prototype,"lineDash",2),o([eQ(e9)],d5.prototype,"lineDashOffset",2),o([eQ(eJ)],d5.prototype,"interpolation",2),o([eQ(eJ)],d5.prototype,"shadow",2),o([eQ(eJ)],d5.prototype,"marker",2),o([eQ(eJ)],d5.prototype,"label",2),o([eQ(eJ)],d5.prototype,"tooltip",2),o([eQ(e0)],d5.prototype,"connectMissingData",2);var d7={start:0,middle:.5,end:1};function ut(t,e){return"linear"===t.type?function(t,e){let{x0:i,y0:a,x1:s,y1:r}=t,n=(r-a)/(s-i)*(e-i)+a;return{leftCp1x:i,leftCp1y:a,leftCp2x:e,leftCp2y:n,stepX:e,stepY0:n,stepY1:n,rightCp1x:e,rightCp1y:n,rightCp2x:s,rightCp2y:r}}(t,e):"cubic"===t.type?function(t,e){let{cp0x:i,cp0y:a,cp1x:s,cp1y:r,cp2x:n,cp2y:o,cp3x:l,cp3y:h}=t,d=nl(i,s,n,l,e),[u,c]=nh(i,a,s,r,n,o,l,h,d),p=u[3].y;return{leftCp1x:u[1].x,leftCp1y:u[1].y,leftCp2x:u[2].x,leftCp2y:u[2].y,stepX:e,stepY0:p,stepY1:p,rightCp1x:c[1].x,rightCp1y:c[1].y,rightCp2x:c[2].x,rightCp2y:c[2].y}}(t,e):function(t){let{x0:e,y0:i,x1:a,y1:s,stepX:r}=t;return{leftCp1x:(e+r)/2,leftCp1y:i,leftCp2x:(e+r)/2,leftCp2y:i,stepX:r,stepY0:i,stepY1:s,rightCp1x:(r+a)/2,rightCp1y:s,rightCp2x:(r+a)/2,rightCp2y:s}}(t)}function ue(t,e,i,a,s,r,n){switch(e){case 1:n?t.moveTo(s,r):t.moveTo(i,a);break;case 2:n?t.lineTo(s,r):t.lineTo(i,a)}}function ui(t,e,i,a,s,r){r?t.lineTo(e,i):t.lineTo(a,s)}function ua(t,e,i,a,s,r,n,o,l,h){h?t.cubicCurveTo(r,n,a,s,e,i):t.cubicCurveTo(a,s,r,n,o,l)}function us(t,e,i,a,s,r,n){n?(t.lineTo(r,s),t.lineTo(r,i),t.lineTo(e,i)):(t.lineTo(r,i),t.lineTo(r,s),t.lineTo(a,s))}function ur(t,e,i,a){let[s,r]=d9(e);switch(ue(t,i,s.x,s.y,r.x,r.y,a),e.type){case"linear":ui(t,e.x0,e.y0,e.x1,e.y1,a);break;case"cubic":ua(t,e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,a);break;case"step":us(t,e.x0,e.y0,e.x1,e.y1,e.stepX,a)}}function un(t,e,i,a,s,r){var n,o,l,h,d,u,c,p,g,y,m,f,x,M,b,v,I,D,S,N;let[L,A]=d9(e),[w,C]=d9(i),T=(n=L.x,(w.x-n)*a+n),k=(o=L.y,(w.y-o)*a+o),E=(l=A.x,(C.x-l)*a+l),O=(h=A.y,(C.y-h)*a+h);if(ue(t,s,T,k,E,O,r),"cubic"===e.type&&"cubic"===i.type){let s=(d=e.cp1x,(i.cp1x-d)*a+d);ua(t,T,k,s,(u=e.cp1y,(i.cp1y-u)*a+u),(c=e.cp2x,(i.cp2x-c)*a+c),(p=e.cp2y,(i.cp2y-p)*a+p),E,O,r)}else if("step"===e.type&&"step"===i.type)us(t,T,k,E,O,(g=e.stepX,(i.stepX-g)*a+g),r);else if("linear"===e.type&&"linear"===i.type)ui(t,T,k,E,O,r);else{let s;s="step"===e.type?e.stepX:"step"===i.type?i.stepX:(T+E)/2;let n=ut(e,s),o=ut(i,s),l=(y=n.leftCp1x,(o.leftCp1x-y)*a+y),h=(m=n.leftCp1y,(o.leftCp1y-m)*a+m),d=(f=n.leftCp2x,(o.leftCp2x-f)*a+f),u=(x=n.leftCp2y,(o.leftCp2y-x)*a+x),c=(M=n.stepX,(o.stepX-M)*a+M),p=(b=n.stepY0,(o.stepY0-b)*a+b),g=(v=n.stepY1,(o.stepY1-v)*a+v),L=(I=n.rightCp1x,(o.rightCp1x-I)*a+I),A=(D=n.rightCp1y,(o.rightCp1y-D)*a+D),w=(S=n.rightCp2x,(o.rightCp2x-S)*a+S),C=(N=n.rightCp2y,(o.rightCp2y-N)*a+N);r?(t.cubicCurveTo(w,C,L,A,c,g),t.lineTo(c,p),t.cubicCurveTo(d,u,l,h,T,k)):(t.cubicCurveTo(l,h,d,u,c,p),t.lineTo(c,g),t.cubicCurveTo(L,A,w,C,E,O))}}function uo({id:t},e,i,...a){eI(t,"markers",e,a,{opacity:0},{opacity:1},{phase:i?eb[i]:"trailing"}),a.forEach(t=>t.cleanup())}function ul({id:t},e,...i){eI(t,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(t=>t.cleanup())}function uh({id:t,nodeDataDependencies:e},i,...a){let s=e.seriesRectWidth;ev(t,"markers",i,a,{fromFn:(t,e)=>{let i=td(0,eg((e.midPoint?.x??s)/s),1);return isNaN(i)&&(i=0),{scalingX:0,scalingY:0,delay:i,duration:.2,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function ud(t){return{opacity:1,scalingX:1,scalingY:1}}function uu(t,e){return{translationX:e.point?.x??NaN,translationY:e.point?.y??NaN}}function uc(t,e){let i=(e,i)=>{let a=t[i][e];return Array.isArray(a)?a[0]:a},a=e=>{let{xValue:a}=e;return t.moved[a]?{point:i(a,"moved"),status:"updated"}:t.removed[a]?{point:i(a,"removed"),status:"removed"}:t.added[a]?{point:i(a,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(t,i)=>{let{status:s,point:r}=a(i);if("unknown"===s)return{opacity:0};let n={translationX:r?.from?.x??t.translationX,translationY:r?.from?.y??t.translationY,opacity:t.opacity,phase:eb[s]};return"added"===e?{...n,opacity:0,translationX:r?.to?.x,translationY:r?.to?.y,phase:eb.added}:("added"===s&&(n.opacity=0),n)},toFn:(t,i)=>{let{status:s,point:r}=a(i);if("unknown"===s)return{opacity:0};let n={translationX:i.point.x,translationY:i.point.y,opacity:1,phase:eb[s]};return"removed"===s||"removed"===e?{...n,translationX:r?.to?.x,translationY:r?.to?.y,opacity:0,phase:eb.removed}:n}}}function up(t,{datumIndex:e}){let i=t.getNodeData();if(void 0===i)return;let a=i[e],{point:s}=a;if(null==a||null==s)return;let r=s.focusSize??t.getFormattedMarkerStyle(a).size,n=r/2,o=a.point.x-n,l=a.point.y-n;return am.toCanvas(t.contentGroup,new tI(o,l,r,r))}function ug(t){return t.reduce(({min:t,max:e},i)=>((null==t||t.point.x>i.point.x)&&(t=i),(null==e||e.point.x<i.point.x)&&(e=i),{min:t,max:e}),{})}function uy(t,e,i){let a=(e.y-t.y)/(e.x-t.x),s=(i-t.x)*a+t.y;return{x:i,y:s}}function um(t,e,i,a){let s=-1,r=0,n=[];for(;r<t.length;){if(t[r].change===e){n.push(t[r]),r++;continue}if(t[r].change===i){r++;continue}n.length>0&&(a(n,s,r),n.length=0),s=r,r++}n.length>0&&a(n,s,r)}function uf(t,e){um(t,"out","in",(i,a,s)=>{-1===a&&t[s]?i.forEach(e=>e.to=t[s].from):s===t.length&&t[a]?i.forEach(e=>e.to=t[a].from):"intersect"===e&&t[a]?.from&&t[s]?.from?i.forEach(e=>e.to=uy(t[a].from,t[s].from,e.from.x)):i.forEach(t=>t.to=t.from)}),um(t,"in","out",(i,a,s)=>{-1===a&&t[s]?i.forEach(e=>e.from=t[s].to):s===t.length&&t[a]?i.forEach(e=>e.from=t[a].to):"intersect"===e&&t[a]?.to&&t[s]?.to?i.forEach(e=>e.from=uy(t[a].to,t[s].to,e.to.x)):i.forEach(t=>t.from=t.to)})}function ux(t,e,i){let a=isNaN(t.x)?e.x:t.x,s=isNaN(t.y)?e.y:t.y,r=e.x-t.x,n=e.y-t.y;return{x:a+(isNaN(r)?0:r*i),y:s+(isNaN(n)?0:n*i)}}var uM={start:0,middle:.5,end:1};function ub(t,e,i,a=!1){let{path:s}=e;i?.type==="smooth"?function(t,e,i,a){let s=Array.isArray(e)?e:Array.from(e);if(0===s.length||(a?t.lineTo(s[0].x,s[0].y):t.moveTo(s[0].x,s[0].y),s.length<=1))return;let r=s.map((t,e)=>{let i=0===e?t:s[e-1],a=e===s.length-1?t:s[e+1],r=0===e||e===s.length-1;if(Math.sign(i.y-t.y)===Math.sign(a.y-t.y))return 0;if(!r){let e=Math.abs(i.y-a.y),s=Math.abs(t.y-i.y)/e,r=Math.abs(t.y-a.y)/e;if(s<=.05||1-s<=.05||r<=.05||1-r<=.05)return 0}return(a.y-i.y)/(a.x-i.x)});0===r[1]&&(r[0]*=2),0===r[r.length-2]&&(r[r.length-1]*=2);for(let e=1;e<s.length;e+=1){let a=s[e-1],n=r[e-1],o=s[e],l=r[e],h=o.x-a.x,d=o.y-a.y,u=h*i/3,c=h*n*i/3,p=h*i/3,g=h*l*i/3;0===l&&Math.abs(c)>Math.abs(d)&&(u*=Math.abs(d/c),c=Math.sign(c)*Math.abs(d)),0===n&&Math.abs(g)>Math.abs(d)&&(p*=Math.abs(d/g),g=Math.sign(g)*Math.abs(d)),t.cubicCurveTo(a.x+u,a.y+c,o.x-p,o.y-g,o.x,o.y)}}(s,t,i.tension??1,a):i?.type==="step"?function(t,e,i,a){let s;for(let r of e){if(null!=s){let e=s.x<r.x?i:1-i,a=(r.x-s.x)*e+s.x;t.lineTo(a,s?.y??r.y),t.lineTo(a,r.y),t.lineTo(r.x,r.y)}else a?t.lineTo(r.x,r.y):t.moveTo(r.x,r.y);s=r}}(s,t,uM[i.position??"end"],a):function(t,e,i){let a=i;for(let{x:i,y:s}of e)a?t.lineTo(i,s):(t.moveTo(i,s),a=!0)}(s,t,a)}function uv(t,e){let i,a;let s=[],r=()=>{null!=a&&(s.push(a),a=void 0)};for(let s of t){let{from:t,to:n}=s,o=e[s.change];if(null==o||null==t||null==n)continue;let l=ux(t,n,o);if(!1===s.moveTo)a??(a=[]),a.push(l);else if(!0!==s.moveTo&&i){if(i){let{x:t,y:e}=ux(i,l,"in"===s.moveTo?o:1-o);a??(a=[]),a.push({x:t,y:e}),r(),a=[l]}}else r(),a=[l];i=l}return r(),s}function uI(t,e,i,a){uv(t,e).forEach(t=>{ub(t,i,a)})}function uD({id:t,visible:e,nodeDataDependencies:i},a,...s){let{seriesRectWidth:r,seriesRectHeight:n}=i;eI(t,"path_properties",a,s,{clipX:0},{clipX:r},{phase:"initial",start:{clip:!0,clipY:n,visible:e},finish:{clip:!1,visible:e}})}function uS({id:t},e,i,a="add",...s){eI(t,e,i,s,{opacity:0},{opacity:1},{phase:a})}function uN({id:t},e,i,...a){eI(t,e,i,a,{opacity:1},{opacity:0},{phase:"remove"})}function uL(t){return e=>({visible:t.getVisible(),opacity:t.getOpacity(),clipScalingX:1,clip:!1})}function uA({nodeDataDependencies:t},e){let i=t=>isFinite(t)?t:0;e.clipX=i(t.seriesRectWidth),e.clipY=i(t.seriesRectHeight)}function uw(t){return"continuous"===t.type||"log"===t.type}function uC(t){return"category"===t.type}function uT(t,e){return t.domain.length===e.domain.length&&t.range.length===e.range.length&&t.domain.every((t,i)=>t===e.domain[i])&&t.range.every((t,i)=>t===e.range[i])}function uk(t,e){return void 0===t||void 0===e?void 0!==t||void 0!==e:uw(t)&&uw(e)?t.type===e.type&&uT(t,e):!!(uC(t)&&uC(e))&&uT(t,e)}function uE(t){return!!(null!=t&&t.range.every(t=>Number.isFinite(t)))&&("category"===t.type?t.domain.every(t=>null!=t):t.domain.every(t=>Number.isFinite(t)||t instanceof Date))}function*uO(t){let e=-1,i=0;for(let{point:a}of t){if(a.moveTo){let t=e>=0?{start:e,end:i}:void 0;i=e=i,void 0!==t&&(yield t)}i+=1}-1!==e&&(yield{start:e,end:i})}function*uj(t,{start:e,end:i}){for(let a=e;a<i;a+=1)yield t[a].point}function*uR(t,{start:e,end:i}){for(let a=i-1;a>=e;a-=1)yield t[a].point}function uz(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"==typeof t)return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if("log"===e.type&&"number"==typeof t)return e.convert(t);let i=e.domain.findIndex(e=>e===t);if(i>=0)return e.range[i];let a=e.domain.findIndex(e=>{var i;return null!=(i=t)&&null!=e&&"object"==typeof i&&"object"==typeof e&&("id"in i&&"id"in e?i.id===e.id:i.toString()===e.toString())});return a>=0?e.range[a]:NaN}function uP(t=!1,e=!1){return t===e?!!t:t?"in":"out"}function uB(t,e,i={}){let{backfillSplitMode:a="intersect"}=i,s=[],r={added:{},moved:{},removed:{}},n=(t,e,i,a="move")=>{t&&(isNaN(t.point.x)||isNaN(t.point.y))&&(t=e);let n={from:t?.point,to:e?.point,moveTo:uP(t?.point.moveTo,e?.point.moveTo),change:a};"move"===a?(r.moved[i]=n,u++,c++):"in"===a?(r.added[i]=n,c++):"out"===a&&(r.removed[i]=n,u++),s.push(n)},{min:o,max:l}=ug(e.nodeData),{min:h,max:d}=ug(t.nodeData),u=0,c=0;for(;u<e.nodeData.length||c<t.nodeData.length;){let i=e.nodeData[u],a=t.nodeData[c],s=i?uz(i.xValue??NaN,t.scales.x):void 0,r=a?uz(a.xValue??NaN,e.scales.x):void 0,p=void 0;if(null!=s&&function(t,e){let i=Number(t),a=Number(e);return isNaN(i)||isNaN(a)?t===e:.25>Math.abs(a-i)}(s,a?.point.x))n(i,a,a.xValue,"move");else if(null!=s&&s<(h?.point.x??-1/0))n(i,p,i.xValue,"out");else if(null!=s&&s>(d?.point.x??1/0))n(i,p,i.xValue,"out");else if(null!=r&&r<(o?.point.x??-1/0))n(p,a,a.xValue,"in");else if(null!=r&&r>(l?.point.x??1/0))n(p,a,a.xValue,"in");else if(null!=s&&s<a?.point.x)n(i,p,i.xValue,"out");else if(null!=r&&r<i?.point.x)n(p,a,a.xValue,"in");else if(i)n(i,p,i.xValue,"out");else if(a)n(p,a,a.xValue,"in");else throw Error("Unable to process points")}return uf(s,a),{result:s,resultMap:r}}function uG(t,e,i,a={}){let s,r;let{backfillSplitMode:n="intersect",multiDatum:o=!1}=a,l=[],h={added:{},moved:{},removed:{}},d={added:{},moved:{},removed:{}},u={in:"added",move:"moved",out:"removed"},c=(t,e)=>{var i;let a=u[e.change];o?((i=d[a])[t]??(i[t]=[]),d[a][t].push(e)):h[a][t]=e,s=e,r=sY(t)},p=0,g=0,y=!1;for(;p<e.nodeData.length||g<t.nodeData.length;){let a;let n=e.nodeData[p],h=t.nodeData[g],d=sY(n?.xValue),u=sY(h?.xValue);if(d===u)a={change:"move",moveTo:uP(n.point.moveTo??!1,h.point.moveTo),from:n.point,to:h.point},c(n?.xValue,a),p++,g++;else if(i?.removed.has(String(d)))a={change:"out",moveTo:n.point.moveTo??!1,from:n.point},c(n?.xValue,a),p++;else if(i?.added.has(String(u)))a={change:"in",moveTo:h.point.moveTo??!1,to:h.point},c(h?.xValue,a),g++;else if(o&&s&&r===d)a={...s},c(n?.xValue,a),p++;else if(o&&s&&r===u)a={...s},c(h?.xValue,a),g++;else{y=!0;break}l.push(a)}let m=-1/0;return(y||(y=l.some(t=>{let{change:e,to:{x:i=-1/0}={}}=t;if("out"===e)return;let a=i<m;return m=i,a})),y)?{result:void 0,resultMap:void 0}:(uf(l,n),{result:l,resultMap:o?d:h})}function uF(t,e,i){let a="updated";if(!e.visible&&t.visible)a="added";else if(e.visible&&!t.visible)a="removed";else for(let t=0;t<i.length&&"move"===i[t].change&&i[t].from?.x===i[t].to?.x&&i[t].from?.y===i[t].to?.y;t++)if(t===i.length-1)return"no-op";return a}function uU(t,e){let i="none"===e?"updated":t,a={fromFn:e=>{let a;return a="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},{phase:eb[i],...a}},toFn:t=>({phase:eb[i]})};return"fade"===e?{fromFn:e=>({opacity:"added"===t?0:e.opacity,...a.fromFn(e)}),toFn:e=>({opacity:"removed"===t?0:1,...a.toFn(e)})}:a}function uY(t,e,i,a,s,r){let n=uF(t,e,i),o=uU(n,a);return{status:n,path:{addPhaseFn:(t,e)=>{r(i,{move:1,in:t},e,s)},updatePhaseFn:(t,e)=>{r(i,{move:t},e,s)},removePhaseFn:(t,e)=>{r(i,{move:0,out:t},e,s)}},pathProperties:o}}function uZ(t,e,i,a){let s=t.scales.x?.type==="category";if(s!==(e.scales.x?.type==="category")||!uE(t.scales.x)||!uE(e.scales.x))return;let{result:r,resultMap:n}=s?uG(t,e,i):uB(t,e),o="updated";if(e.visible&&!t.visible?o="removed":!e.visible&&t.visible&&(o="added"),void 0===r||void 0===n)return;let l=(i?.changed??!0)||!uk(t.scales.x,e.scales.x)||!uk(t.scales.y,e.scales.y)||"updated"!==o,h=uY(t,e,r,"fade",a,uI),d=uc(n,o);return{...h,marker:d,hasMotion:l}}function u_(t){return sY(t).valueOf()}function uV({data:t},e){return t.map((t,i)=>({xValue0Index:e.indexOf(u_(t.xValue0)),xValue1Index:e.indexOf(u_(t.xValue1)),datumIndex:i}))}function uW(t,e,i){if(i.xValue1Index===i.xValue0Index+1)return t;let a=d9(t),s=(a[1].x-a[0].x)/(i.xValue1Index-i.xValue0Index),r=a[0].x+(e-i.xValue0Index)*s;return d8(t,r,r+s)}function uH(t,e){let[i,a]=d9(t),s=uz(0,e.scales.y);return d6(t,{x:i.x,y:s},{x:a.x,y:s})}function u$(t,e,i,a,s){let r,n;if(a.xValue0Index>=s.xValue1Index){let t=i.findLast(t=>t.xValue1Index<=s.xValue1Index)?.datumIndex,a=null!=t?e.data[t]:void 0;r=a?.xValue1,n=a?.yValue1}else if(a.xValue0Index<=s.xValue0Index){let t=i.find(t=>t.xValue0Index>=s.xValue0Index)?.datumIndex,a=null!=t?e.data[t]:void 0;r=a?.xValue0,n=a?.yValue0}if(null==r||null==n)return uH(t,e);let o={x:uz(r,e.scales.x),y:uz(n,e.scales.y)};return d6(t,o,o)}function uQ(t,e){let i=u_(t.xValue0),a=u_(t.xValue1);return e?.find(t=>u_(t.xValue0)===i&&u_(t.xValue1)===a)?.span}function uX(t,e,i,a,s,r){let n=t.data[i.datumIndex],o=n.span,l=uQ(n,a);if(null!=l)r.removed.push({from:l,to:l}),r.moved.push({from:l,to:o}),r.added.push({from:o,to:o});else{let a=u$(o,t,e,i,s);r.added.push({from:a,to:o})}}function uK(t,e,i,a,s,r){let n=t.data[i.datumIndex],o=n.span,l=uQ(n,a);if(null!=l)r.removed.push({from:o,to:o}),r.moved.push({from:o,to:l}),r.added.push({from:l,to:l});else{let a=u$(o,t,e,i,s);r.removed.push({from:o,to:a})}}function uJ(t,e,i,a,s){let r=e[s.xValue0Index],n=i.data.find(t=>u_(t.xValue0)===r),o=e[s.xValue1Index],l=i.data.find(t=>u_(t.xValue1)===o);if(null==n||null==l)return;let[{x:h},{x:d}]=d9(t),u=uz(n.xValue0,i.scales.x),c=uz(n.yValue0,i.scales.y),p=uz(l.xValue1,i.scales.x),g=uz(l.yValue1,i.scales.y),y=a.data[s.datumIndex].span;return d8(y=d6(y,{x:u,y:c},{x:p,y:g}),h,d)}function uq(t,e){let i={removed:[],moved:[],added:[]},a=function(t,e){let i=new Set;for(let{xValue0:e,xValue1:a}of t.data){let t=u_(e),s=u_(a);i.add(t).add(s)}let a=Array.from(i).sort((e,i)=>uz(e,t.scales.x)-uz(i,t.scales.x)),s=[];for(let{xValue0:t,xValue1:a}of e.data){let e=u_(t),r=u_(a);i.has(e)||(i.add(e),s.push(e)),i.has(r)||(i.add(r),s.push(r))}s.sort((t,i)=>uz(t,e.scales.x)-uz(i,e.scales.x));let r=0;for(let t of s){for(let i=a.length;i>r;i-=1)if(uz(t,e.scales.x)>uz(a[i],e.scales.x)){r=i+1;break}a.splice(r,0,t),r+=1}if(!function(t,e){let i=-1/0;for(let a of t){let t=uz(a,e.scales.x);if(Number.isFinite(t)){if(t<i)return!1;i=t}}return!0}(a,e))return;let n=uV(e,a),o=uV(t,a);return{axisValues:a,oldDataAxisIndices:n,newDataAxisIndices:o}}(t,e);return null==a?function(t,e,i){for(let t of e.data){let a=t.span,s=uQ(t,e.zeroData)??uH(a,e);i.removed.push({from:a,to:s})}for(let e of t.data){let a=e.span,s=uQ(e,t.zeroData)??uH(a,t);i.added.push({from:s,to:a})}}(t,e,i):function(t,e,i,a){let{axisValues:s,oldDataAxisIndices:r,newDataAxisIndices:n}=t,o={xValue0Index:Math.max(r.at(0)?.xValue0Index??-1/0,n.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(r.at(-1)?.xValue1Index??1/0,n.at(-1)?.xValue1Index??1/0)};for(let t=0;t<s.length-1;t+=1)!function(t,e,i,a,s,r,n,o){let l;let h=a+1,d=r.find(t=>t.xValue0Index<=a&&t.xValue1Index>=h),u=s.find(t=>t.xValue0Index<=a&&t.xValue1Index>=h),c=e.zeroData,p=t.zeroData;if(null==d&&null!=u){uX(t,s,u,c,n,o);return}if(null!=d&&null==u){uK(e,r,d,p,n,o);return}if(null==d||null==u)return;l=d.xValue0Index===u.xValue0Index&&d.xValue1Index===u.xValue1Index?0:d.xValue0Index<=u.xValue0Index&&d.xValue1Index>=u.xValue1Index?-1:d.xValue0Index>=u.xValue0Index&&d.xValue1Index<=u.xValue1Index?1:0;let g=uW(e.data[d.datumIndex].span,a,d),y=uW(t.data[u.datumIndex].span,a,u);if(1===l){let a=uJ(g,i,e,t,u);null!=a?(o.removed.push({from:g,to:a}),o.moved.push({from:a,to:y}),o.added.push({from:y,to:y})):uK(e,r,d,p,n,o)}else if(-1===l){let a=uJ(y,i,t,e,d);null!=a?(o.removed.push({from:g,to:g}),o.moved.push({from:g,to:a}),o.added.push({from:a,to:y})):uX(t,s,u,c,n,o)}else o.removed.push({from:g,to:g}),o.moved.push({from:g,to:y}),o.added.push({from:y,to:y})}(e,i,s,t,n,r,o,a)}(a,t,e,i),i}function u0(t,e,i,a){for(let s=0;s<i.length;s+=1){let r=i[s],n=a[s];un(e.path,r.from,r.to,t,1,!1),un(e.path,n.from,n.to,t,2,!0),e.path.closePath()}}function u1(t,e,i){for(let a of i)un(e.path,a.from,a.to,t,1,!1)}function u2(t,e){if(t.scales.x?.type==="category"!=(e.scales.x?.type==="category")||!uE(t.scales.x)||!uE(e.scales.x))return;let i="updated";e.visible&&!t.visible?i="removed":!e.visible&&t.visible&&(i="added");let a=uq({scales:t.scales,data:t.fillData.spans,visible:t.visible},{scales:e.scales,data:e.fillData.spans,visible:e.visible}),s=uq({scales:t.scales,data:t.fillData.phantomSpans,visible:t.visible},{scales:e.scales,data:e.fillData.phantomSpans,visible:e.visible}),r=uq({scales:t.scales,data:t.strokeData.spans,visible:t.visible,zeroData:t.fillData.phantomSpans},{scales:e.scales,data:e.strokeData.spans,visible:e.visible,zeroData:e.fillData.phantomSpans}),n="none",o=function(t,e,i,a){let s=uU(t,a);return{status:t,path:{addPhaseFn:(t,a)=>u0(t,a,e.added,i.added),updatePhaseFn:(t,a)=>u0(t,a,e.moved,i.moved),removePhaseFn:(t,a)=>u0(t,a,e.removed,i.removed)},pathProperties:s}}(i,a,s,n),l=function(t,e,i){let a=uU(t,i);return{status:t,path:{addPhaseFn:(t,i)=>u1(t,i,e.added),updatePhaseFn:(t,i)=>u1(t,i,e.moved),removePhaseFn:(t,i)=>u1(t,i,e.removed)},pathProperties:a}}(i,r,n);return{status:i,fill:o,stroke:l}}var u4=class extends lP{constructor(t){super({moduleCtx:t,directionKeys:lO,directionNames:lj,pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:uL({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:dQ,marker:(t,e)=>({...ud(t),...uu(t,e)})}}),this.properties=new d5}async processData(t){if(null==this.data||!this.properties.isValid())return;let{data:e,visible:i,seriesGrouping:{groupIndex:a=this.id,stackCount:s=1}={}}=this,{xKey:r,yKey:n,yFilterKey:o,connectMissingData:l,normalizedTo:h}=this.properties,d=!this.ctx.animationManager.isSkipped(),u=this.axes.x?.scale,c=this.axes.y?.scale,{xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:u,yScale:c}),y={value:`area-stack-${a}-yValue`,values:`area-stack-${a}-yValues`,stack:`area-stack-${a}-yValue-stack`,marker:`area-stack-${a}-yValues-marker`},m=[];tY(h)&&m.push(dz(Object.values(y),h,"range")),d&&m.push(dG());let f={invalidValue:null};l&&s>1&&(f.invalidValue=0),i||(f.forceValue=0),await this.requestDataModel(t,e,{props:[dN(r,p,{id:"xValue"}),dL(n,g,{id:"yValueRaw",...f}),...null!=o?[dL(o,g,{id:"yFilterRaw"})]:[],...dk(n,g,{id:"yValueStack",...f,groupId:y.stack}),dL(n,g,{id:"yValue",...f,groupId:y.value}),...dT(n,"window","current",{id:"yValueEnd",...f,groupId:y.values},g),...dT(n,"normal","current",{id:"yValueCumulative",...f,groupId:y.marker},g),...m],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}getSeriesDomain(t){let{processedData:e,dataModel:i,axes:a}=this;if(!e||!i||0===e.data.length)return[];let s=a.y,r=i.resolveProcessedDataDefById(this,"xValue"),n=i.getDomain(this,"xValue","key",e),o=i.getDomain(this,"yValueEnd","value",e);return"x"===t?r?.def.type==="key"&&"category"===r.def.valueType?n:ov(eL(n)):s instanceof lW||s instanceof lH?ov(o):ov([o[0]>0?0:o[0],o[1]<0?0:o[1]])}async createNodeData(){let{axes:t,data:e,processedData:{data:i}={},dataModel:a}=this,s=t.x,r=t.y;if(!s||!r||!e||!a||!this.properties.isValid())return;let{yKey:n,xKey:o,yFilterKey:l,marker:h,label:d,fill:u,stroke:c,connectMissingData:p}=this.properties,{scale:g}=s,{scale:y}=r,{isContinuousY:m}=this.getScaleInformation({xScale:g,yScale:y}),f=(g.bandwidth??0)/2,x=a.resolveProcessedDataDefsByIds(this,["yValueEnd","yValueRaw","yValueCumulative"]),M=null!=l?a.resolveProcessedDataIndexById(this,"yFilterRaw"):void 0,b=a.resolveProcessedDataIndexById(this,"yValueStack"),v=(t,e,i)=>{let a;return(tY(this.properties.normalizedTo)?m&&sF(i):!isNaN(i))&&(a=e),{x:g.convert(t)+f,y:y.convert(a),size:h.size}},I=[],D=[],{visibleSameStackCount:S}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),N=-1,L=!1;i?.forEach(t=>{let{keys:e,keys:[i],datum:s,values:r}=t;r.forEach((t,r)=>{N++;let l=s[r],{yValueRaw:p,yValueCumulative:g,yValueEnd:y}=a.resolveProcessedDataDefsValues(x,{keys:e,values:t}),m=Number.isFinite(p),f=v(i,+g,p),b=null!=M?t[M]===p:void 0;if(!1===b&&(L=!0),m&&h&&D.push({index:N,series:this,itemId:n,datum:l,midPoint:{x:f.x,y:f.y},cumulativeValue:y,yValue:p,xValue:i,yKey:n,xKey:o,point:f,fill:h.fill??u,stroke:h.stroke??c,strokeWidth:h.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:b}),m&&d){let t=this.getLabelText(d,{value:p,datum:l,xKey:o,yKey:n,xName:this.properties.xName,yName:this.properties.yName},dn);I.push({index:N,series:this,itemId:n,datum:l,x:f.x,y:f.y,labelText:t})}})});let{interpolation:A}=this.properties,w=t=>{let e;let i=t.map(t=>t.point);switch(A.type){case"linear":e=function(t){let e=[],i=0,a=NaN,s=NaN;for(let{x:r,y:n}of t){if(i>0){let t=1===i;e.push({type:"linear",moveTo:t,x0:a,y0:s,x1:r,y1:n})}i+=1,a=r,s=n}return e}(i);break;case"smooth":e=function(t,e){let i=Array.isArray(t)?t:Array.from(t);if(i.length<=1)return[];let a=i.map((t,e)=>{let a=0===e?t:i[e-1],s=e===i.length-1?t:i[e+1],r=0===e||e===i.length-1;if(Math.sign(a.y-t.y)===Math.sign(s.y-t.y))return 0;if(!r){let e=Math.abs(a.y-s.y),i=Math.abs(t.y-a.y)/e,r=Math.abs(t.y-s.y)/e;if(i<=.05||1-i<=.05||r<=.05||1-r<=.05)return 0}return(s.y-a.y)/(s.x-a.x)});0===a[1]&&(a[0]*=2),0===a[a.length-2]&&(a[a.length-1]*=2);let s=[];for(let t=1;t<i.length;t+=1){let r=i[t-1],n=a[t-1],o=i[t],l=a[t],h=o.x-r.x,d=o.y-r.y,u=h*e/3,c=h*n*e/3,p=h*e/3,g=h*l*e/3;0===l&&Math.abs(c)>Math.abs(d)&&(u*=Math.abs(d/c),c=Math.sign(c)*Math.abs(d)),0===n&&Math.abs(g)>Math.abs(d)&&(p*=Math.abs(d/g),g=Math.sign(g)*Math.abs(d)),s.push({type:"cubic",moveTo:1===t,cp0x:r.x,cp0y:r.y,cp1x:r.x+u,cp1y:r.y+c,cp2x:o.x-p,cp2y:o.y-g,cp3x:o.x,cp3y:o.y})}return s}(i,A.tension);break;case"step":e=function(t,e){let i=[],a=0,s=NaN,r=NaN,n="number"==typeof e?e:d7[e];for(let{x:e,y:o}of t){if(a>0){let t=1===a,l=s+(e-s)*n;i.push({type:"step",moveTo:t,x0:s,y0:r,x1:e,y1:o,stepX:l})}a+=1,s=e,r=o}return i}(i,A.position)}return e.map((e,i)=>({span:e,xValue0:t[i].xDatum,yValue0:t[i].yDatum,xValue1:t[i+1].xDatum,yValue1:t[i+1].yDatum}))},C=t=>t.flatMap(t=>Array.isArray(t)?w(t):Array(t.skip).fill(null)),T=i?.flatMap(t=>{let{keys:[e],values:i}=t;return i.map(t=>({xDatum:e,values:t}))}),k=(t,e)=>({point:{x:g.convert(t)+f,y:y.convert(e)},xDatum:t,yDatum:e}),E=t=>{let e=[];if(null==T)return[];for(let i=0;i<T.length;i+=1){let{xDatum:a,values:s}=T[i],r=s[b],n=Number.isFinite(r[t]);if(p&&!n)continue;let o=T[i-1]?.values[b],l=T[i+1]?.values[b],h=0,d=0;for(let e=0;e<=t;e+=1){let t=r[e];if(Number.isFinite(t)){let i=null==o||Number.isFinite(o[e]),a=null==l||Number.isFinite(l[e]);i&&(h+=t),a&&(d+=t)}}let u=e[e.length-1];if(p||h===d&&n){let t=k(a,Math.max(h,d));Array.isArray(u)?u.push(t):(null!=u&&(u.skip+=1),e.push([t]))}else if(!n&&Array.isArray(u)&&1===u.length)e[e.length-1]={skip:1};else{let t=k(a,h),i=k(a,d);Array.isArray(u)?u.push(t):null!=u&&(u.skip+=1),e.push(n?[i]:{skip:0})}}return C(e)},O=this.seriesGrouping?.stackIndex??0,j=()=>null==T?[]:w(T.map(({xDatum:t,values:e})=>{let i=e[b][O];if(!p||Number.isFinite(i))return k(t,0)}).filter(t=>null!=t)),R=E(O),z=R.map(()=>null);for(let t=O-1;t>=-1;t-=1){let e;for(let i=0;i<z.length;i+=1)null==z[i]&&(e??(e=-1!==t?E(t):j()),z[i]=e[i])}return{itemId:n,fillData:{itemId:n,spans:R.map((t,e)=>t??z[e]),phantomSpans:z},strokeData:{itemId:n,spans:R.filter(t=>null!=t)},labelData:I,nodeData:D,scales:this.calculateScaling(),visible:this.visible,stackVisible:S>0,crossFiltering:L}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){let{shape:t}=this.properties.marker;return new(lN(t))}async updatePathNodes(t){let{opacity:e,visible:i,animationEnabled:a}=t,[s,r]=t.paths,n=this.contextNodeData?.crossFiltering===!0,o=this.getStrokeWidth(this.properties.strokeWidth);r.setProperties({fill:void 0,lineJoin:r.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:o,strokeOpacity:this.properties.strokeOpacity*(n?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i||a}),s.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity*(n?.125:1),fillShadow:this.properties.shadow,opacity:e,visible:i||a}),uA(this,r),uA(this,s)}async updatePaths(t){this.updateAreaPaths(t.paths,t.contextData)}updateAreaPaths(t,e){for(let i of t)i.visible=e.visible;if(e.visible)this.updateFillPath(t,e),this.updateStrokePath(t,e);else for(let e of t)e.path.clear(),e.checkPathDirty()}updateFillPath(t,e){let{spans:i,phantomSpans:a}=e.fillData,[s]=t,{path:r}=s;r.clear(!0);for(let t=0;t<i.length;t+=1){let{span:e}=i[t],s=a[t].span;ur(r,e,1,!1),ur(r,s,2,!0),r.closePath()}s.checkPathDirty()}updateStrokePath(t,e){let{spans:i}=e.strokeData,[,a]=t,{path:s}=a;for(let{span:t}of(s.clear(!0),i))ur(s,t,1,!1);a.checkPathDirty()}async updateMarkerSelection(t){let{nodeData:e,markerSelection:i}=t,a=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(a?e:[])}async updateMarkerNodes(t){let{markerSelection:e,isHighlight:i}=t,{xKey:a,yKey:s,marker:r,fill:n,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:d,highlightStyle:u}=this.properties,c=t8(i&&u.item,r.getStyle(),{fill:n,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:d});e.each((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:a,yKey:s},c,{selected:e.selected})}),i||this.properties.marker.markClean()}async updateLabelSelection(t){let{labelData:e,labelSelection:i}=t;return i.update(e)}async updateLabelNodes(t){let{labelSelection:e}=t,{enabled:i,fontStyle:a,fontWeight:s,fontSize:r,fontFamily:n,color:o}=this.properties.label;e.each((t,e)=>{let{x:l,y:h,labelText:d}=e;d&&i&&this.visible?(t.fontStyle=a,t.fontWeight=s,t.fontSize=r,t.fontFamily=n,t.textAlign="center",t.textBaseline="bottom",t.text=d,t.x=l,t.y=h-10,t.fill=o,t.visible=!0):t.visible=!1})}getTooltipHtml(t){let{id:e,axes:i,dataModel:a}=this,{xKey:s,xName:r,yName:n,tooltip:o,marker:l}=this.properties,{yKey:h,xValue:d,yValue:u,datum:c,itemId:p}=t,g=i.x,y=i.y;if(!this.properties.isValid()||!(g&&y&&t0(u))||!a)return sN;let m=g.formatDatum(d),f=y.formatDatum(u),x=dh(n),M=dh(m+": "+f),b=t8({fill:this.properties.fill},l.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:v}=this.getMarkerStyle(l,{datum:t,xKey:s,yKey:h,highlighted:!1},b);return o.toTooltipHtml({title:x,content:M,backgroundColor:v},{datum:c,itemId:p,xKey:s,xName:r,yKey:h,yName:n,color:v,title:x,seriesId:e})}getLegendData(t){if(!this.data?.length||!this.properties.isValid()||!this.properties.showInLegend||"category"!==t)return[];let{yKey:e,yName:i,fill:a,stroke:s,fillOpacity:r,strokeOpacity:n,strokeWidth:o,lineDash:l,marker:h,visible:d,legendItemName:u}=this.properties,c=!h.enabled||void 0===h.fill;return[{legendType:t,id:this.id,itemId:e,seriesId:this.id,enabled:d,label:{text:u??i??e},symbols:[{marker:{shape:h.shape,fill:c?a:h.fill,fillOpacity:c?r:h.fillOpacity,stroke:h.stroke??s,strokeOpacity:h.strokeOpacity??n,strokeWidth:h.strokeWidth??0,enabled:h.enabled||o<=0},line:{stroke:s,strokeOpacity:n,strokeWidth:o,lineDash:l}}],legendItemName:u}]}animateEmptyUpdateReady(t){let{markerSelection:e,labelSelection:i,contextData:a,paths:s}=t,{animationManager:r}=this.ctx;this.updateAreaPaths(s,a),uD(this,r,...s),iY([e],uu),uh(this,r,e),dH(this,"labels",r,i)}animateReadyResize(t){let{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){let{animationManager:e}=this.ctx,{markerSelection:i,labelSelection:a,contextData:s,paths:r,previousContextData:n}=t,[o,l]=r;if(null==o&&null==l)return;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);let h=()=>{this.resetPathAnimation(t),this.updateAreaPaths(r,s)},d=()=>{e.skipCurrentBatch(),h()};if(null==s||null==n){h(),uo(this,e,"added",i),uS(this,"fill_path_properties",e,"add",o),uS(this,"stroke_path_properties",e,"add",l),dH(this,"labels",e,a);return}if(s.crossFiltering!==n.crossFiltering){d();return}let u=u2(s,n);if(void 0===u){d();return}"no-op"!==u.status&&(uo(this,e,void 0,i),ev(this.id,"fill_path_properties",e,[o],u.fill.pathProperties),dr(this.id,"fill_path_update",e,[o],u.fill.path),ev(this.id,"stroke_path_properties",e,[l],u.stroke.pathProperties),dr(this.id,"stroke_path_update",e,[l],u.stroke.path),dH(this,"labels",e,a),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(r,s)}))}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ax}getFormattedMarkerStyle(t){let{xKey:e,yKey:i}=t;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,highlighted:!0})}computeFocusBounds(t){return up(this,t)}};u4.className="AreaSeries",u4.type="area";var u3={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:t=>new u4(t),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:hk,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:hI,color:hD}}},paletteFactory:t=>{let{marker:e}=hc(t);return{fill:e.fill,stroke:e.stroke,marker:e}}};function u5(t,e){return i=>e(i)?[{...t[0],position:t[1].position},{...t[1],position:t[0].position}]:t}function u9(t,e){for(let i of e){let e=i.datum;void 0===e?y.error("undefined datum"):t.addValue(i,e)}}function u6(t,e){let{x:i,y:a}=e,{nearest:s,distanceSquared:r}=t.getQuadTree().find(i,a);if(void 0!==s)return{datum:s.value,distance:Math.sqrt(r)}}var u8=class extends lz{constructor(){super(...arguments),this.direction="vertical"}};o([eQ(iw)],u8.prototype,"direction",2);var u7=class extends lP{constructor(){super(...arguments),this.groupScale=new eV,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(t,e){let i=t0(this.smallestDataInterval)?this.smallestDataInterval*("boolean"==typeof e?1:.5):0,a=eL(t)??[NaN,NaN];return"boolean"==typeof e?a[e?0:1]-=(e?1:-1)*i:(a[0]-=i,a[1]+=i),ov(a)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){let t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){let t=this.getCategoryDirection();return this.axes[t]}getBandwidth(t){return eN.is(t.scale)?t.scale.calcBandwidth(this.smallestDataInterval):t.scale.bandwidth}updateGroupScale(t){let e=[],{groupScale:i}=this,a=this.getBandwidth(t),{index:s,visibleGroupCount:r}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let t=0;t<r;t++)e.push(String(t));return i.domain=e,i.range=[0,a??0],t instanceof rv?i.paddingInner=t.groupPaddingInner:t instanceof rL?i.padding=.1:i.padding=0,i.round=0!==i.padding,{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:s}}resolveKeyDirection(t){return"x"===this.getBarDirection()?"x"===t?"y":"x":t}initQuadTree(t){u9(t,this.datumNodesIter())}pickNodeClosestDatum(t){return u6(this,t)}},ct=class extends sj{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}};o([eQ(iE(["inside-center","inside-start","inside-end","outside-start","outside-end",{value:"inside",deprecatedTo:"inside-center"},{value:"outside",deprecatedTo:"outside-end"}],"a placement"))],ct.prototype,"placement",2),o([eQ(e4)],ct.prototype,"padding",2);var ce=class extends u8{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new dK,this.label=new ct,this.tooltip=new d1,this.sparklineMode=!1}};function ci(t,e){t.crisp=e.crisp??!0,t.fill=e.fill,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.fillOpacity=e.fillOpacity,t.strokeOpacity=e.strokeOpacity,t.lineDash=e.lineDash,t.lineDashOffset=e.lineDashOffset,t.fillShadow=e.fillShadow,t.topLeftCornerRadius=!1!==e.topLeftCornerRadius?e.cornerRadius??0:0,t.topRightCornerRadius=!1!==e.topRightCornerRadius?e.cornerRadius??0:0,t.bottomRightCornerRadius=!1!==e.bottomRightCornerRadius?e.cornerRadius??0:0,t.bottomLeftCornerRadius=!1!==e.bottomLeftCornerRadius?e.cornerRadius??0:0,t.visible=e.visible??!0}function ca({datum:t,isHighlighted:e,style:i,highlightStyle:a,itemStyler:s,seriesId:r,ctx:{callbackCache:n},...o}){let l;let{fill:h,fillOpacity:d,stroke:u,strokeWidth:c,strokeOpacity:p,lineDash:g,lineDashOffset:y,cornerRadius:m=0}=t8(e&&a,i);return s&&(l=n.call(s,{datum:t.datum,xKey:t.xKey,fill:h,fillOpacity:d,stroke:u,strokeWidth:c,strokeOpacity:p,lineDash:g,lineDashOffset:y,cornerRadius:m,highlighted:e,seriesId:r,...o})),{fill:l?.fill??h,fillOpacity:l?.fillOpacity??d,stroke:l?.stroke??u,strokeWidth:l?.strokeWidth??c,strokeOpacity:l?.strokeOpacity??p,lineDash:l?.lineDash??g,lineDashOffset:l?.lineDashOffset??y,cornerRadius:l?.cornerRadius??m,topLeftCornerRadius:i.topLeftCornerRadius,topRightCornerRadius:i.topRightCornerRadius,bottomRightCornerRadius:i.bottomRightCornerRadius,bottomLeftCornerRadius:i.bottomLeftCornerRadius,fillShadow:i.fillShadow}}function cs(t,e,i,a){if(null!=e){let[t,i]=e;if(0!==t||1!==i)return!1}if(eN.is(t)){let e=t.calcBandwidth(a)-t.calcBandwidth(i);if(e>0&&e<1)return!1}return!0}o([eQ(e2)],ce.prototype,"xKey",2),o([eQ(e2,{optional:!0})],ce.prototype,"xName",2),o([eQ(e2)],ce.prototype,"yKey",2),o([eQ(e2,{optional:!0})],ce.prototype,"yName",2),o([eQ(e2,{optional:!0})],ce.prototype,"yFilterKey",2),o([eQ(e2,{optional:!0})],ce.prototype,"stackGroup",2),o([eQ(e4,{optional:!0})],ce.prototype,"normalizedTo",2),o([eQ(ih)],ce.prototype,"fill",2),o([eQ(e6)],ce.prototype,"fillOpacity",2),o([eQ(ih)],ce.prototype,"stroke",2),o([eQ(e9)],ce.prototype,"strokeWidth",2),o([eQ(e6)],ce.prototype,"strokeOpacity",2),o([eQ(ib)],ce.prototype,"lineDash",2),o([eQ(e9)],ce.prototype,"lineDashOffset",2),o([eQ(e9)],ce.prototype,"cornerRadius",2),o([eQ(e0,{optional:!0})],ce.prototype,"crisp",2),o([eQ(e1,{optional:!0})],ce.prototype,"itemStyler",2),o([eQ(eJ,{optional:!0})],ce.prototype,"shadow",2),o([eQ(eJ)],ce.prototype,"label",2),o([eQ(eJ)],ce.prototype,"tooltip",2),o([eQ(e0)],ce.prototype,"sparklineMode",2);var cr=t=>ty(t.yValue??0);function cn(t,e,i){let{startingX:a,startingY:s}=function(t,e){let i=e[t?"y":"x"],a=1/0,s=0;return i&&(t?s=i.scale.convert(eN.is(i.scale)?0:Math.max(...i.range)):a=i.scale.convert(eN.is(i.scale)?0:Math.min(...i.range))),{startingX:a,startingY:s}}(t,e);return{isVertical:t,calculate:(e,i)=>{let r,n=t?e.x:a,o=t?s:e.y,l=t?e.width:0,h=t?0:e.height,{opacity:d}=e;return i&&(isNaN(n)||isNaN(o))&&({x:n,y:o}=i,l=t?i.width:0,h=t?0:i.height,t&&!cr(i)?o+=i.height:!t&&cr(i)&&(n+=i.width)),r=null==e.clipBBox?void 0:cr(e)?t?new tI(n,o-h,l,h):new tI(n-l,o,l,h):new tI(n,o,l,h),{x:n,y:o,width:l,height:h,clipBBox:r,opacity:d}},mode:i}}function co(t,e){return{isVertical:t,calculate:e=>({x:t?e.x:e.x+e.width/2,y:t?e.y+e.height/2:e.y,width:t?e.width:0,height:t?0:e.height,clipBBox:e.clipBBox,opacity:e.opacity}),mode:e}}function cl(t){let e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,a,s)=>"removed"===s&&null==i.datum&&"fade"===t.mode?{...ch(i,a),opacity:0}:"removed"===s||e(a)?t.calculate(a,i.previousDatum):{x:a.x,y:a.y,width:a.width,height:a.height,clipBBox:a.clipBBox,opacity:a.opacity},fromFn:(i,a,s)=>{let r;"updated"===s&&e(a)?s="removed":"updated"===s&&e(i.previousDatum)&&(s="added"),r="added"===s&&null==i.previousDatum&&"fade"===t.mode?{...ch(i,a),opacity:0}:"unknown"===s||"added"===s?t.calculate(a,i.previousDatum):{x:i.x,y:i.y,width:i.width,height:i.height,clipBBox:i.clipBBox,opacity:i.opacity};let n=eb[s];return{...r,phase:n}}}}function ch(t,{x:e,y:i,width:a,height:s,clipBBox:r,opacity:n}){return{x:e,y:i,width:a,height:s,clipBBox:r,opacity:n}}function cd(t,e,i){if(void 0===t)return;let{x:a,y:s,width:r,height:n}=t;return am.toCanvas(e,new tI(a,s,r,n)).clip(i)}function cu(t,e,i){if(e.enabled&&i){let{x:a,y:s,text:r,textAlign:n,textBaseline:o}=i,{color:l,fontStyle:h,fontWeight:d,fontSize:u,fontFamily:c}=e;t.setProperties({visible:!0,x:a,y:s,text:r,fill:l,fontStyle:h,fontWeight:d,fontSize:u,fontFamily:c,textAlign:n,textBaseline:o})}else t.visible=!1}var cc={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function cp({isUpward:t,isVertical:e,placement:i,padding:a=0,rect:s}){let r=s.x+s.width/2,n=s.y+s.height/2,o="center",l="middle";if("inside-center"!==i){let h=(t?1:-1)*(e?-1:1),{direction:d,textAlignment:u}=cc[i],c=(d+1)*.5;e?(n=(t?s.y+s.height:s.y)+s.height*h*c+a*u*h,l=u===h?"top":"bottom"):(r=(t?s.x:s.x+s.width)+s.width*h*c+a*u*h,o=u===h?"left":"right")}return{x:r,y:n,textAlign:o,textBaseline:l}}var cg={"inside-center":"inside-center","inside-start":"inside-start","inside-end":"inside-end","outside-start":"outside-start","outside-end":"outside-end",inside:"inside-center",outside:"outside-end"},cy=class extends u7{constructor(t){super({moduleCtx:t,directionKeys:lO,directionNames:lj,pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:ch,label:dQ}}),this.properties=new ce}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return null!=this.properties.yFilterKey&&(null==this.seriesGrouping||0===this.seriesGrouping.stackIndex)}async processData(t){if(!this.properties.isValid()||!this.data)return;let{seriesGrouping:{groupIndex:e=this.id}={},data:i=[]}=this,{xKey:a,yKey:s,yFilterKey:r,normalizedTo:n}=this.properties,o=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,h=this.getValueAxis()?.scale,{isContinuousX:d,xScaleType:u,yScaleType:c}=this.getScaleInformation({xScale:l,yScale:h}),p=`bar-stack-${e}-yValues`,g=`${p}-trailing`,y=[];t0(n)&&y.push(dz([p,g],Math.abs(n),"range")),o&&this.processedData&&y.push(dV(this.processedData)),o&&y.push(dG());let m=this.visible?{}:{forceValue:0},{processedData:f}=await this.requestDataModel(t,i,{props:[dN(a,u,{id:"xValue"}),dL(s,c,{id:"yValue-raw",invalidValue:null,...m}),...this.crossFilteringEnabled()?[dL(r,c,{id:"yFilterValue",invalidValue:null,...m})]:[],...dT(s,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:p,separateNegative:!0,...m},c),...dT(s,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0,...m},c),...d?[dE,dO]:[],...y],groupByKeys:!0,groupByData:!1});this.smallestDataInterval=f.reduced?.smallestKeyInterval,this.largestDataInterval=f.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(t){let{processedData:e,dataModel:i}=this;if(!i||!e?.data.length)return[];let a=i.resolveProcessedDataDefById(this,"xValue"),s=i.getDomain(this,"xValue","key",e),r=i.getDomain(this,"yValue-end","value",e),n=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",e):void 0;return(null!=n&&(r=[Math.min(r[0],n[0]),Math.max(r[1],n[1])]),t===this.getCategoryDirection())?a?.def.type==="key"&&"category"===a.def.valueType?s:this.padBandExtent(s):this.getValueAxis()instanceof lW?ov(r):ov([Math.min(0,r[0]),Math.max(0,r[1])])}async createNodeData(){let{dataModel:t}=this,e=this.getCategoryAxis(),i=this.getValueAxis();if(!t||!e||!i||!this.properties.isValid())return;let a=e.scale,s=i.scale,{xKey:r,yKey:n,xName:o,yName:l,fill:h,stroke:d,strokeWidth:u,cornerRadius:c,legendItemName:p,label:g}=this.properties,y=i.isReversed(),{barWidth:m,groupIndex:f}=this.updateGroupScale(e),x=eN.is(a)?-.5*m:0,M=t.resolveProcessedDataIndexById(this,"xValue"),b=t.resolveProcessedDataIndexById(this,"yValue-raw"),v=this.crossFilteringEnabled()?t.resolveProcessedDataIndexById(this,"yFilterValue"):void 0,I=t.resolveProcessedDataIndexById(this,"yValue-start"),D=t.resolveProcessedDataIndexById(this,"yValue-end"),S=t.resolveProcessedDataIndexById(this,"yValue-range"),N=!this.ctx.animationManager.isSkipped(),L=({datum:t,valueIndex:e,xValue:i,yValue:o,cumulativeValue:l,phantom:p,currY:M,prevY:b,isPositive:v,yRange:I,labelText:D,crossScale:S=1})=>{let N=a.convert(i),L=v!==y,w=N+A.convert(String(f))+x,C=s.convert(M),T=s.convert(b),k="x"===this.getBarDirection(),E=s.convert(I),O=s.convert(0),j=.5*m*(1-S),R={x:k?Math.min(C,T):w+j,y:k?w+j:Math.min(C,T),width:k?Math.abs(T-C):m*S,height:k?m*S:Math.abs(T-C)},z=new tI(R.x,R.y,R.width,R.height),P={x:k?Math.min(O,E):w+j,y:k?w+j:Math.min(O,E),width:k?Math.abs(O-E):m*S,height:k?m*S:Math.abs(O-E)},B=this.shouldFlipXY()?R.height:R.width;return{series:this,itemId:p?dW(n,p):n,datum:t,valueIndex:e,cumulativeValue:l,phantom:p,xValue:i,yValue:o,yKey:n,xKey:r,capDefaults:{lengthRatioMultiplier:B,lengthMax:B},x:P.x,y:P.y,width:P.width,height:P.height,midPoint:{x:R.x+R.width/2,y:R.y+R.height/2},fill:h,stroke:d,opacity:1,strokeWidth:u,cornerRadius:c,topLeftCornerRadius:k!==L,topRightCornerRadius:L,bottomRightCornerRadius:k===L,bottomLeftCornerRadius:!L,clipBBox:z,label:null!=D?{text:D,...cp({isUpward:L,isVertical:!k,placement:cg[g.placement],padding:g.padding,rect:R})}:void 0,missing:null==o,focusable:!p}},{groupScale:A,processedData:w}=this,C=[],T=[],k=[];return w?.data.forEach(({keys:t,datum:e,values:i,aggValues:a})=>{i.forEach((i,s)=>{let h=t[M],d=i[b],u=Number(i[I]),c=null!=v?Number(i[v]):void 0,g=Number(i[D]),y=d>=0&&!Object.is(d,-0),m=a?.[S][y?1:0]??0;if(!Number.isFinite(g)||null!=c&&!Number.isFinite(c))return;let f=null!=d?this.getLabelText(this.properties.label,{datum:e[s],value:c??d,xKey:r,yKey:n,xName:o,yName:l,legendItemName:p},dn):void 0,x=null!=c&&c>d,N=L({datum:e[s],valueIndex:s,xValue:h,yValue:c??d,cumulativeValue:c??g,phantom:!1,currY:null!=c?u+c:g,prevY:u,isPositive:y,yRange:Math.max(u+(c??-1/0),m),labelText:f,crossScale:x?.6:void 0});if(T.push(N),k.push(N),null!=c){let t=L({datum:e[s],valueIndex:s,xValue:h,yValue:c,cumulativeValue:c,phantom:!0,currY:g,prevY:u,isPositive:y,yRange:m,labelText:void 0,crossScale:void 0});C.push(t)}})}),{itemId:n,nodeData:C.length>0?[...C,...T]:T,labelData:k,scales:this.calculateScaling(),visible:this.visible||N}}nodeFactory(){return new lK}getHighlightData(t,e){let i=t.find(t=>t.datum===e.datum&&!t.phantom);return null!=i?[i]:void 0}async updateDatumSelection(t){return t.datumSelection.update(t.nodeData,void 0,t=>dW(t.xValue,t.valueIndex,t.phantom))}async updateDatumNodes(t){if(!this.properties.isValid())return;let{yKey:e,stackGroup:i,fill:a,fillOpacity:s,stroke:r,strokeWidth:n,strokeOpacity:o,lineDash:l,lineDashOffset:h,itemStyler:d,shadow:u,highlightStyle:{item:c}}=this.properties,p=this.axes.x,g=this.properties.crisp??cs(p?.scale,p?.visibleRange,this.smallestDataInterval,this.largestDataInterval),y="x"===this.getCategoryDirection(),m={fill:a,stroke:r,lineDash:l,lineDashOffset:h,fillShadow:u,strokeWidth:this.getStrokeWidth(n),fillOpacity:0,strokeOpacity:0},f={datum:void 0,ctx:this.ctx,seriesId:this.id,isHighlighted:t.isHighlight,highlightStyle:c,yKey:e,style:m,itemStyler:d,stackGroup:i};t.datumSelection.each((t,e)=>{m.fillOpacity=s*(e.phantom?.2:1),m.strokeOpacity=o*(e.phantom?.2:1),m.cornerRadius=e.cornerRadius,m.topLeftCornerRadius=e.topLeftCornerRadius,m.topRightCornerRadius=e.topRightCornerRadius,m.bottomRightCornerRadius=e.bottomRightCornerRadius,m.bottomLeftCornerRadius=e.bottomLeftCornerRadius;let i=y?(e.clipBBox?.width??e.width)>0:(e.clipBBox?.height??e.height)>0;f.datum=e;let a=ca(f);a.crisp=g,a.visible=i,ci(t,a)})}async updateLabelSelection(t){let e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,t=>{t.pointerEvents=1})}async updateLabelNodes(t){t.labelSelection.each((t,e)=>{cu(t,this.properties.label,e.label)})}getTooltipHtml(t){let e;let{id:i,processedData:a,ctx:{callbackCache:s}}=this,r=this.getCategoryAxis(),n=this.getValueAxis();if(!a||!this.properties.isValid()||!r||!n)return sN;let{xKey:o,yKey:l,xName:h,yName:d,fill:u,stroke:c,strokeWidth:p,tooltip:g,itemStyler:y,stackGroup:m,legendItemName:f}=this.properties,{xValue:x,yValue:M,datum:b,itemId:v}=t,I=r.formatDatum(x),D=n.formatDatum(M),S=dh(d),N=dh(I+": "+D);y&&(e=s.call(y,{seriesId:i,datum:b,xKey:o,yKey:l,stackGroup:m,fill:u,stroke:c,strokeWidth:this.getStrokeWidth(p),highlighted:!1,cornerRadius:this.properties.cornerRadius,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash??[],lineDashOffset:this.properties.lineDashOffset}));let L=e?.fill??u;return g.toTooltipHtml({title:S,content:N,backgroundColor:L},{seriesId:i,itemId:v,datum:b,xKey:o,yKey:l,xName:h,yName:d,stackGroup:m,title:S,color:L,legendItemName:f,...this.getModuleTooltipParams()})}getLegendData(t){let{showInLegend:e}=this.properties;if("category"!==t||!this.data?.length||!this.properties.isValid()||!e)return[];let{yKey:i,yName:a,fill:s,stroke:r,strokeWidth:n,fillOpacity:o,strokeOpacity:l,legendItemName:h,visible:d}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:d,label:{text:h??a??i},symbols:[{marker:{fill:s,fillOpacity:o,stroke:r,strokeWidth:n,strokeOpacity:l}}],legendItemName:h}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e,annotationSelections:i}){let a=cl(cn(this.isVertical(),this.axes,"normal"));ev(this.id,"nodes",this.ctx.animationManager,[t],a),dH(this,"labels",this.ctx.animationManager,e),dH(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(t){let{datumSelection:e,labelSelection:i,annotationSelections:a,previousContextData:s}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);let r=this.processedData?.reduced?.diff,n=cl(cn(this.isVertical(),this.axes,null==s?"fade":"normal"));ev(this.id,"nodes",this.ctx.animationManager,[e],n,(t,e)=>dW(e.xValue,e.valueIndex,e.phantom),r),(r?.changed??!0)&&(dH(this,"labels",this.ctx.animationManager,i),dH(this,"annotations",this.ctx.animationManager,...a))}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t,seriesRect:e}){return cd(this.contextNodeData?.nodeData[t].clipBBox,this.contentGroup,e)}};cy.className="BarSeries",cy.type="bar";var cm={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:t=>new cy(t),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:u5([{type:"number",position:"left"},{type:"category",position:"bottom"}],t=>t?.direction==="horizontal"),themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:hI,color:hN,placement:"inside-center"},shadow:{enabled:!1,color:hk,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:hu},cf=class extends dq{constructor(){super(...arguments),this.maxSize=30}};o([eQ(e9),tS({redraw:3})],cf.prototype,"maxSize",2),o([eQ(ic,{optional:!0}),tS({redraw:3})],cf.prototype,"domain",2);var cx=class extends sj{constructor(){super(...arguments),this.placement="top"}};o([eQ(ik)],cx.prototype,"placement",2);var cM=class extends lz{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new cx,this.tooltip=new d1,this.marker=new cf}};o([eQ(e2)],cM.prototype,"xKey",2),o([eQ(e2)],cM.prototype,"yKey",2),o([eQ(e2)],cM.prototype,"sizeKey",2),o([eQ(e2,{optional:!0})],cM.prototype,"labelKey",2),o([eQ(e2,{optional:!0})],cM.prototype,"colorKey",2),o([eQ(e2,{optional:!0})],cM.prototype,"xFilterKey",2),o([eQ(e2,{optional:!0})],cM.prototype,"yFilterKey",2),o([eQ(e2,{optional:!0})],cM.prototype,"sizeFilterKey",2),o([eQ(e2,{optional:!0})],cM.prototype,"xName",2),o([eQ(e2,{optional:!0})],cM.prototype,"yName",2),o([eQ(e2,{optional:!0})],cM.prototype,"sizeName",2),o([eQ(e2,{optional:!0})],cM.prototype,"labelName",2),o([eQ(e2,{optional:!0})],cM.prototype,"colorName",2),o([eQ(ic,{optional:!0})],cM.prototype,"colorDomain",2),o([eQ(id)],cM.prototype,"colorRange",2),o([eQ(e2,{optional:!0})],cM.prototype,"title",2),o([sl("marker.shape")],cM.prototype,"shape",2),o([sl("marker.size")],cM.prototype,"size",2),o([sl("marker.maxSize")],cM.prototype,"maxSize",2),o([sl("marker.domain",{optional:!0})],cM.prototype,"domain",2),o([sl("marker.fill",{optional:!0})],cM.prototype,"fill",2),o([sl("marker.fillOpacity")],cM.prototype,"fillOpacity",2),o([sl("marker.stroke",{optional:!0})],cM.prototype,"stroke",2),o([sl("marker.strokeWidth")],cM.prototype,"strokeWidth",2),o([sl("marker.strokeOpacity")],cM.prototype,"strokeOpacity",2),o([sl("marker.itemStyler",{optional:!0})],cM.prototype,"itemStyler",2),o([eQ(eJ)],cM.prototype,"label",2),o([eQ(eJ)],cM.prototype,"tooltip",2);var cb=class extends lR{constructor(t,e,i,a){super(t,e,i,a),this.sizeKey=a.properties.sizeKey}},cv=class extends lP{constructor(t){super({moduleCtx:t,directionKeys:lO,directionNames:lj,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:dQ,marker:ud}}),this.NodeEvent=cb,this.properties=new cM,this.sizeScale=new lZ,this.colorScale=new aV}get pickModeAxis(){return"main-category"}async processData(t){if(!this.properties.isValid()||null==this.data||!this.visible)return;let e=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:a,yScaleType:s}=this.getScaleInformation({xScale:e,yScale:i}),r=this.colorScale.type,n=this.sizeScale.type,{xKey:o,yKey:l,sizeKey:h,xFilterKey:d,yFilterKey:u,sizeFilterKey:c,labelKey:p,colorDomain:g,colorRange:y,colorKey:m,marker:f}=this.properties,{dataModel:x,processedData:M}=await this.requestDataModel(t,this.data,{props:[dL(o,a,{id:"xValue"}),dL(l,s,{id:"yValue"}),...null!=d?[dL(d,a,{id:"xFilterValue"})]:[],...null!=u?[dL(u,s,{id:"yFilterValue"})]:[],...null!=c?[dL(c,n,{id:"sizeFilterValue"})]:[],dL(h,n,{id:"sizeValue"}),...m?[dL(m,r,{id:"colorValue"})]:[],...p?[dL(p,"band",{id:"labelValue"})]:[]]}),b=x.resolveProcessedDataIndexById(this,"sizeValue"),v=M.domain.values[b]??[];if(this.sizeScale.domain=f.domain?f.domain:v,m){let t=x.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=g??M.domain.values[t]??[],this.colorScale.range=y,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(t){let{dataModel:e,processedData:i}=this;if(!i||!e)return[];let a="x"===t?"xValue":"yValue",s=e.resolveProcessedDataDefById(this,a),r=e.getDomain(this,a,"value",i);return s?.def.type==="value"&&s?.def.valueType==="category"?r:ov(eL(r))}async createNodeData(){let{axes:t,dataModel:e,processedData:i,colorScale:a,sizeScale:s}=this,{xKey:r,yKey:n,sizeKey:o,xFilterKey:l,yFilterKey:h,sizeFilterKey:d,labelKey:u,xName:c,yName:p,sizeName:g,labelName:y,label:m,colorKey:f,marker:x,visible:M}=this.properties,b=lN(x.shape),{placement:v}=m,I=t.x,D=t.y;if(!(e&&i&&M&&I&&D))return;let S=e.resolveProcessedDataIndexById(this,"xValue"),N=e.resolveProcessedDataIndexById(this,"yValue"),L=null!=o?e.resolveProcessedDataIndexById(this,"sizeValue"):void 0,A=null!=f?e.resolveProcessedDataIndexById(this,"colorValue"):-1,w=null!=u?e.resolveProcessedDataIndexById(this,"labelValue"):-1,C=null!=l?e.resolveProcessedDataIndexById(this,"xFilterValue"):void 0,T=null!=h?e.resolveProcessedDataIndexById(this,"yFilterValue"):void 0,k=null!=d?e.resolveProcessedDataIndexById(this,"sizeFilterValue"):void 0,E=I.scale,O=D.scale,j=(E.bandwidth??0)/2,R=(O.bandwidth??0)/2,z=[];s.range=[x.size,x.maxSize];let P=m.getFont(),B=aq.getMeasurer({font:P});for(let{values:t,datum:e}of i.data??[]){let i;let l=t[S],h=t[N],d=null!=L?t[L]:void 0,M=E.convert(l)+j,I=O.convert(h)+R;null!=C&&null!=T&&(i=t[C]===l&&t[T]===h,null!=k&&i&&(i=t[k]===d));let D=this.getLabelText(m,{value:u?t[w]:h,datum:e,xKey:r,yKey:n,sizeKey:o,labelKey:u,xName:c,yName:p,sizeName:g,labelName:y}),P=B.measureText(String(D)),G=d?s.convert(d):x.size,F=f?a.convert(t[A]):void 0;z.push({series:this,itemId:n,yKey:n,xKey:r,datum:e,xValue:l,yValue:h,sizeValue:d,point:{x:M,y:I,size:G},midPoint:{x:M,y:I},fill:F,label:{text:D,...P},marker:b,placement:v,selected:i})}return{itemId:n,nodeData:z,labelData:z,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.contextNodeData?.labelData??[]}markerFactory(){let{shape:t}=this.properties.marker;return new(lN(t))}async updateMarkerSelection(t){let{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());let a=this.properties.marker.enabled?e:[];return i.update(a,void 0,t=>dW([t.xValue,t.yValue,t.label.text]))}async updateMarkerNodes(t){let{markerSelection:e,isHighlight:i}=t,{xKey:a,yKey:s,sizeKey:r,labelKey:n,marker:o}=this.properties,{size:l,shape:h,fill:d,fillOpacity:u,stroke:c,strokeWidth:p,strokeOpacity:g}=t8(i&&this.properties.highlightStyle.item,o.getStyle()),y={size:l,shape:h,fill:d,fillOpacity:u,stroke:c,strokeWidth:p,strokeOpacity:g};this.sizeScale.range=[o.size,o.maxSize],e.each((t,e)=>{this.updateMarkerStyle(t,o,{datum:e,highlighted:i,xKey:a,yKey:s,sizeKey:r,labelKey:n},y,{selected:e.selected})}),i||this.properties.marker.markClean()}async updateLabelSelection(t){let e=this.properties.label.enabled?this.chart?.placeLabels().get(this)??[]:[];return t.labelSelection.update(e.map(t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}})))}async updateLabelNodes(t){let{label:e}=this.properties;t.labelSelection.each((t,i)=>{t.text=i.label.text,t.fill=e.color,t.x=i.point?.x??0,t.y=i.point?.y??0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"})}getTooltipHtml(t){let e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return sN;let{xKey:a,yKey:s,sizeKey:r,labelKey:n,xName:o,yName:l,sizeName:h,labelName:d,marker:u,tooltip:c}=this.properties,p=this.properties.title??l,g=t8({fill:t.fill,strokeWidth:this.getStrokeWidth(u.strokeWidth)},u.getStyle()),{fill:y="gray"}=this.getMarkerStyle(u,{datum:t,highlighted:!1,xKey:a,yKey:s,sizeKey:r,labelKey:n},g),{datum:m,xValue:f,yValue:x,sizeValue:M,label:{text:b},itemId:v}=t,I=dh(e.formatDatum(f)),D=dh(i.formatDatum(x)),S=`<b>${dh(o??a)}</b>: ${I}<br><b>${dh(l??s)}</b>: ${D}`;return r&&(S+=`<br><b>${dh(h??r)}</b>: ${dh(String(M))}`),n&&(S=`<b>${dh(d??n)}</b>: ${dh(b)}<br>`+S),c.toTooltipHtml({title:p,content:S,backgroundColor:y},{datum:m,itemId:v,xKey:a,xName:o,yKey:s,yName:l,sizeKey:r,sizeName:h,labelKey:n,labelName:d,title:p,color:y,seriesId:this.id})}getLegendData(){if(!this.data?.length||!this.properties.isValid())return[];let{yKey:t,yName:e,title:i,marker:a,visible:s}=this.properties,{shape:r,fill:n,stroke:o,fillOpacity:l,strokeOpacity:h,strokeWidth:d}=a;return[{legendType:"category",id:this.id,itemId:t,seriesId:this.id,enabled:s,label:{text:i??e??t},symbols:[{marker:{shape:r,fill:n??"rgba(0, 0, 0, 0)",stroke:o??"rgba(0, 0, 0, 0)",fillOpacity:l??1,strokeOpacity:h??1,strokeWidth:d??0}}]}]}animateEmptyUpdateReady({markerSelection:t,labelSelection:e}){ul(this,this.ctx.animationManager,t),dH(this,"labels",this.ctx.animationManager,e)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ax}getFormattedMarkerStyle(t){let{xKey:e,yKey:i,sizeKey:a,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,sizeKey:a,labelKey:s,highlighted:!1})}computeFocusBounds(t){return up(this,t)}};cv.className="BubbleSeries",cv.type="bubble";var cI={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:t=>new cv(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:hI,color:hD}}},paletteFactory:hu},cD=class extends lz{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new dK,this.label=new sj,this.tooltip=new d1}};o([eQ(e2)],cD.prototype,"xKey",2),o([eQ(e2,{optional:!0})],cD.prototype,"yKey",2),o([eQ(e2,{optional:!0})],cD.prototype,"xName",2),o([eQ(e2,{optional:!0})],cD.prototype,"yName",2),o([eQ(ih,{optional:!0})],cD.prototype,"fill",2),o([eQ(e6)],cD.prototype,"fillOpacity",2),o([eQ(ih,{optional:!0})],cD.prototype,"stroke",2),o([eQ(e9)],cD.prototype,"strokeWidth",2),o([eQ(e6)],cD.prototype,"strokeOpacity",2),o([eQ(ib)],cD.prototype,"lineDash",2),o([eQ(e9)],cD.prototype,"lineDashOffset",2),o([eQ(e9)],cD.prototype,"cornerRadius",2),o([eQ(e0)],cD.prototype,"areaPlot",2),o([eQ(it,{optional:!0})],cD.prototype,"bins",2),o([eQ(iE(["count","sum","mean"],"a histogram aggregation"))],cD.prototype,"aggregation",2),o([eQ(e9,{optional:!0})],cD.prototype,"binCount",2),o([eQ(eJ)],cD.prototype,"shadow",2),o([eQ(eJ)],cD.prototype,"label",2),o([eQ(eJ)],cD.prototype,"tooltip",2);var cS=class extends lP{constructor(t){super({moduleCtx:t,directionKeys:lO,directionNames:lj,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:ch,label:dQ}}),this.properties=new cD,this.calculatedBins=[]}deriveBins(t){let e=i2(t[0],t[1],10),i=i3(t[0],t[1],10),[a]=e;return[[a-i,a],...e.map(t=>[t,t+i])]}calculateNiceBins(t,e){let i=Math.floor(t[0]),a=t[1],s=e||1,{start:r,binSize:n}=this.calculateNiceStart(i,a,s);return this.getBins(r,a,n,s)}getBins(t,e,i,a){let s=[],r=this.calculatePrecision(i);for(let n=0;n<a;n++){let o=Math.round((t+n*i)*r)/r,l=Math.round((t+(n+1)*i)*r)/r;n===a-1&&(l=Math.max(l,e)),s[n]=[o,l]}return s}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){let a=Math.abs(e-t)/i,s=Math.pow(10,Math.floor(Math.log10(a)));return{start:Math.floor(t/s)*s,binSize:a}}async processData(t){this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));let{xKey:e,yKey:i,areaPlot:a,aggregation:s}=this.properties,r=this.axes.x?.scale,n=this.axes.y?.scale,{xScaleType:o,yScaleType:l}=this.getScaleInformation({yScale:n,xScale:r}),h=[dN(e,o),dj];if(i){let t=dm("groupAgg");"count"===s||("sum"===s?t=dg("groupAgg"):"mean"===s&&(t=df("groupAgg"))),a&&(t=dx("groupAgg",t)),h.push(dL(i,l,{invalidValue:void 0}),t)}else{let t=dm("groupAgg");a&&(t=dx("groupAgg",t)),h.push(t)}!this.ctx.animationManager.isSkipped()&&this.processedData&&h.push(dV(this.processedData,!1)),await this.requestDataModel(t,this.data,{props:h,groupByFn:t=>{let e=ov(t.domain.keys[0]);if(0===e.length)return t.domain.groups=[],()=>[];let i=tq(this.properties.binCount)?this.calculateNiceBins(e,this.properties.binCount):this.properties.bins??this.deriveBins(e),a=i.length;return this.calculatedBins=[...i],t=>{let e=t.keys[0];for(let t=0;t<a;t++){let s=i[t];if(e>=s[0]&&e<s[1]||t===a-1&&e<=s[1])return s}return[]}}}),this.animationState.transition("updateData")}getSeriesDomain(t){let{processedData:e,dataModel:i}=this;if(!e||!i||!this.calculatedBins.length)return[];let a=i.getDomain(this,"groupAgg","aggregate",e),s=this.calculatedBins?.[0][0],r=this.calculatedBins?.[(this.calculatedBins?.length??0)-1][1];return"x"===t?ov([s,r]):ov(a)}async createNodeData(){let{id:t,axes:e,processedData:i,ctx:{callbackCache:a}}=this,s=e.x,r=e.y;if(!s||!r)return;let{scale:n}=s,{scale:o}=r,{xKey:l,yKey:h,xName:d,yName:u,fill:c,stroke:p,strokeWidth:g,cornerRadius:y}=this.properties,m=this.properties.label.formatter??(t=>String(t.value)),f=[],x={itemId:this.properties.yKey??this.id,nodeData:f,labelData:f,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return this.visible&&i&&"grouped"===i.type&&(i.data.forEach(e=>{let i;let{aggValues:[[s,x]]=[[0,0]],datum:M,datum:{length:b},keys:v,keys:[I,D]}=e,S=n.convert(I),N=n.convert(D),L=s+x,A=o.convert(0),w=o.convert(L),C=Math.abs(N-S),T=Math.abs(w-A),k=Math.min(S,N),E=Math.min(A,w);0!==L&&(i={x:k+C/2,y:E+T/2,text:a.call(m,{value:L,datum:M,seriesId:t,xKey:l,yKey:h,xName:d,yName:u})??String(L)});let O=r.isReversed();f.push({series:this,datum:M,aggregatedValue:L,frequency:b,domain:v,yKey:h,xKey:l,x:k,y:E,xValue:S,yValue:w,width:C,height:T,midPoint:{x:k+C/2,y:E+T/2},fill:c,stroke:p,cornerRadius:y,topLeftCornerRadius:!O,topRightCornerRadius:!O,bottomRightCornerRadius:O,bottomLeftCornerRadius:O,opacity:1,strokeWidth:g,label:i})}),f.sort((t,e)=>t.x-e.x)),x}nodeFactory(){return new lK}async updateDatumSelection(t){let{nodeData:e,datumSelection:i}=t;return i.update(e,t=>{t.crisp=!0},t=>t.domain.join("_"))}async updateDatumNodes(t){let{isHighlight:e}=t,{fillOpacity:i,strokeOpacity:a,lineDash:s,lineDashOffset:r,shadow:n,highlightStyle:{item:{fill:o,fillOpacity:l=i,stroke:h,strokeWidth:d}}}=this.properties;t.datumSelection.each((t,u,c)=>{let{cornerRadius:p,topLeftCornerRadius:g,topRightCornerRadius:y,bottomRightCornerRadius:m,bottomLeftCornerRadius:f}=u,x=e&&void 0!==d?d:u.strokeWidth;t.fill=(e?o:void 0)??u.fill,t.stroke=(e?h:void 0)??u.stroke,t.fillOpacity=e?l:i,t.strokeOpacity=a,t.strokeWidth=x,t.lineDash=s,t.lineDashOffset=r,t.topLeftCornerRadius=g?p:0,t.topRightCornerRadius=y?p:0,t.bottomRightCornerRadius=m?p:0,t.bottomLeftCornerRadius=f?p:0,t.fillShadow=n,t.zIndex=e?o4.highlightedZIndex:c,t.visible=u.height>0})}async updateLabelSelection(t){let{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.pointerEvents=1,t.textAlign="center",t.textBaseline="middle"})}async updateLabelNodes(t){let{fontStyle:e,fontWeight:i,fontFamily:a,fontSize:s,color:r}=this.properties.label,n=this.isLabelEnabled();t.labelSelection.each((t,o)=>{n&&o?.label?(t.text=o.label.text,t.x=o.label.x,t.y=o.label.y,t.fontStyle=e,t.fontWeight=i,t.fontFamily=a,t.fontSize=s,t.fill=r,t.visible=!0):t.visible=!1})}initQuadTree(t){let{value:e}=this.contentGroup.children().next();e&&u9(t,e.children())}pickNodeClosestDatum(t){return u6(this,t)}getTooltipHtml(t){let e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return sN;let{xKey:a,yKey:s,xName:r,yName:n,fill:o,aggregation:l,tooltip:h}=this.properties,{aggregatedValue:d,frequency:u,domain:[c,p],itemId:g}=t,y=`${dh(r??a)}: ${e.formatDatum(c)} - ${e.formatDatum(p)}`,m=s?`<b>${dh(n??s)} (${l})</b>: ${i.formatDatum(d)}<br>`:"",f={title:y,backgroundColor:o,content:m+=`<b>Frequency</b>: ${u}`};return h.toTooltipHtml(f,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},itemId:g,xKey:a,xName:r,yKey:s,yName:n,color:o,title:y,seriesId:this.id})}getLegendData(t){if(!this.data?.length||"category"!==t)return[];let{xKey:e,yName:i,fill:a,fillOpacity:s,stroke:r,strokeWidth:n,strokeOpacity:o,visible:l}=this.properties;return[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:l,label:{text:i??e??"Frequency"},symbols:[{marker:{fill:a??"rgba(0, 0, 0, 0)",stroke:r??"rgba(0, 0, 0, 0)",fillOpacity:s,strokeOpacity:o,strokeWidth:n}}]}]}animateEmptyUpdateReady({datumSelection:t,labelSelection:e}){let i=cl(cn(!0,this.axes,"normal"));ev(this.id,"datums",this.ctx.animationManager,[t],i),dH(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(t){let e=this.processedData?.reduced?.diff,i=cl(cn(!0,this.axes,"normal"));ev(this.id,"datums",this.ctx.animationManager,[t.datumSelection],i,(t,e)=>dW(e.domain),e),dH(this,"labels",this.ctx.animationManager,t.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:t,seriesRect:e}){return cd(this.contextNodeData?.nodeData[t],this.contentGroup,e)}};cS.className="HistogramSeries",cS.type="histogram";var cN={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:t=>new cS(t),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:hI,color:hN},shadow:{enabled:!1,color:hk,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:t})=>{let{fills:[e],strokes:[i]}=t(1);return{fill:e,stroke:i}}},cL=class extends lz{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new d3,this.marker=new dq,this.label=new sj,this.tooltip=new d1,this.connectMissingData=!1}};o([eQ(e2)],cL.prototype,"xKey",2),o([eQ(e2)],cL.prototype,"yKey",2),o([eQ(e2,{optional:!0})],cL.prototype,"xName",2),o([eQ(e2,{optional:!0})],cL.prototype,"yName",2),o([eQ(e2,{optional:!0})],cL.prototype,"yFilterKey",2),o([eQ(e2,{optional:!0})],cL.prototype,"stackGroup",2),o([eQ(e9,{optional:!0})],cL.prototype,"normalizedTo",2),o([eQ(e2,{optional:!0})],cL.prototype,"title",2),o([eQ(ih)],cL.prototype,"stroke",2),o([eQ(e9)],cL.prototype,"strokeWidth",2),o([eQ(e6)],cL.prototype,"strokeOpacity",2),o([eQ(ib)],cL.prototype,"lineDash",2),o([eQ(e9)],cL.prototype,"lineDashOffset",2),o([eQ(eJ)],cL.prototype,"interpolation",2),o([eQ(eJ)],cL.prototype,"marker",2),o([eQ(eJ)],cL.prototype,"label",2),o([eQ(eJ)],cL.prototype,"tooltip",2),o([eQ(e0)],cL.prototype,"connectMissingData",2);var cA=class extends lP{constructor(t){super({moduleCtx:t,directionKeys:lO,directionNames:lj,hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:uL({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:dQ,marker:(t,e)=>({...ud(t),...uu(t,e)})}}),this.properties=new cL}get pickModeAxis(){return"main-category"}async processData(t){if(null==this.data||!this.properties.isValid())return;let{data:e,visible:i,seriesGrouping:{groupIndex:a=this.id,stackCount:s=1}={}}=this,{xKey:r,yKey:n,yFilterKey:o,connectMissingData:l,normalizedTo:h}=this.properties,d=!this.ctx.animationManager.isSkipped(),u=this.axes.x?.scale,c=this.axes.y?.scale,{isContinuousX:p,xScaleType:g,yScaleType:y}=this.getScaleInformation({xScale:u,yScale:c}),m={invalidValue:null};l&&s>1&&(m.invalidValue=0),i||(m.forceValue=0);let f=[];if(p||f.push(dN(r,g,{id:"xKey"})),f.push(dL(r,g,{id:"xValue"}),dL(n,y,{id:"yValueRaw",...m,invalidValue:void 0})),null!=o&&f.push(dL(o,y,{id:"yFilterRaw"})),s>1){let t=[`line-stack-${a}-yValues`,`line-stack-${a}-yValues-trailing`,`line-stack-${a}-yValues-marker`];f.push(...dT(n,"window","current",{id:"yValueEnd",...m,groupId:t[0]},y),...dT(n,"window-trailing","current",{id:"yValueStart",...m,groupId:t[1]},y),...dT(n,"normal","current",{id:"yValueCumulative",...m,groupId:t[2]},y)),tY(h)&&f.push(dz([t[0],t[1],t[2]],h,"range"))}d&&(f.push(dG(p?["xValue"]:void 0)),this.processedData&&f.push(dV(this.processedData))),await this.requestDataModel(t,e,{props:f}),this.animationState.transition("updateData")}getSeriesDomain(t){let{dataModel:e,processedData:i}=this;if(!e||!i?.data.length)return[];let a=e.resolveProcessedDataDefById(this,"xValue");if("x"!==t)return ov((this.seriesGrouping?.stackCount??1)>1?e.getDomain(this,"yValueEnd","value",i):e.getDomain(this,"yValueRaw","value",i));{let t=e.getDomain(this,"xValue","value",i);return a?.def.type==="value"&&"category"===a.def.valueType?t:ov(eL(t))}}async createNodeData(){let{processedData:t,dataModel:e,axes:i}=this,a=i.x,s=i.y;if(!t||!e||!a||!s)return;let{xKey:r,yKey:n,yFilterKey:o,xName:l,yName:h,marker:d,label:u,connectMissingData:c,legendItemName:p}=this.properties,g=(this.seriesGrouping?.stackCount??1)>1,y=a.scale,m=s.scale,f=(y.bandwidth??0)/2,x=(m.bandwidth??0)/2,M=[],b=d.enabled?d.size:0,v=e.resolveProcessedDataIndexById(this,"xValue"),I=e.resolveProcessedDataIndexById(this,"yValueRaw"),D=null!=o?e.resolveProcessedDataIndexById(this,"yFilterRaw"):void 0,S=g?e.resolveProcessedDataIndexById(this,"yValueCumulative"):I,N=g?e.resolveProcessedDataIndexById(this,"yValueEnd"):void 0,L=!0,A=!1;return t.data?.forEach(({datum:t,values:e})=>{let i=e[v],a=e[I],s=e[S],o=null!=N?e[N]:void 0;if(null==a){L||(L=!c);return}let d=y.convert(i)+f;if(isNaN(d)){L||(L=!c);return}let g=m.convert(s)+x,w=null!=D?e[D]===a:void 0;!1===w&&(A=!0);let C=this.getLabelText(u,{value:a,datum:t,xKey:r,yKey:n,xName:l,yName:h,legendItemName:p},dn);M.push({series:this,datum:t,yKey:n,xKey:r,point:{x:d,y:g,moveTo:L,size:b},midPoint:{x:d,y:g},cumulativeValue:o,yValue:a,xValue:i,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},labelText:C,selected:w}),L=!1}),{itemId:n,nodeData:M,labelData:M,scales:this.calculateScaling(),visible:this.visible,crossFiltering:A}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){let{shape:t}=this.properties.marker;return new(lN(t))}async updatePathNodes(t){let{paths:[e],opacity:i,visible:a,animationEnabled:s}=t,r=this.contextNodeData?.crossFiltering===!0;e.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(r?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),s||(e.visible=a),uA(this,e)}async updateMarkerSelection(t){let{nodeData:e}=t,{markerSelection:i}=t;return e=this.properties.marker.enabled||this.contextNodeData?.crossFiltering===!0?e:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,t=>dW(t.xValue))}async updateMarkerNodes(t){let{markerSelection:e,isHighlight:i}=t,{xKey:a,yKey:s,stroke:r,strokeWidth:n,strokeOpacity:o,marker:l,highlightStyle:h}=this.properties,d=t8(i&&h.item,l.getStyle(),{stroke:r,strokeWidth:n,strokeOpacity:o}),u=this.ctx.animationManager.isSkipped();e.each((t,e)=>{this.updateMarkerStyle(t,l,{datum:e,highlighted:i,xKey:a,yKey:s},d,{applyTranslation:u,selected:e.selected})}),i||l.markClean()}async updateLabelSelection(t){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])}async updateLabelNodes(t){let{enabled:e,fontStyle:i,fontWeight:a,fontSize:s,fontFamily:r,color:n}=this.properties.label;t.labelSelection.each((t,o)=>{e&&o?.labelText?(t.fontStyle=i,t.fontWeight=a,t.fontSize=s,t.fontFamily=r,t.textAlign="center",t.textBaseline="bottom",t.text=o.labelText,t.x=o.point.x,t.y=o.point.y-10,t.fill=n,t.visible=!0):t.visible=!1})}getTooltipHtml(t){let e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return sN;let{xKey:a,yKey:s,xName:r,yName:n,strokeWidth:o,marker:l,tooltip:h}=this.properties,{datum:d,xValue:u,yValue:c,itemId:p}=t,g=e.formatDatum(u),y=i.formatDatum(c),m=dh(this.properties.title??n),f=dh(g+": "+y),x=t8({fill:l.stroke},l.getStyle(),{strokeWidth:o}),{fill:M}=this.getMarkerStyle(l,{datum:t,xKey:a,yKey:s,highlighted:!1},x);return h.toTooltipHtml({title:m,content:f,backgroundColor:M},{datum:d,itemId:p,xKey:a,xName:r,yKey:s,yName:n,title:m,color:M,seriesId:this.id,...this.getModuleTooltipParams()})}getLegendData(t){if(!(this.data?.length&&this.properties.isValid()&&"category"===t))return[];let{yKey:e,yName:i,stroke:a,strokeOpacity:s,strokeWidth:r,lineDash:n,title:o,marker:l,visible:h,legendItemName:d}=this.properties,u="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:e,legendItemName:d,seriesId:this.id,enabled:h,label:{text:d??o??i??e},symbols:[{marker:{shape:l.shape,fill:l.fill??u,stroke:l.stroke??a??u,fillOpacity:l.fillOpacity??1,strokeOpacity:l.strokeOpacity??s??1,strokeWidth:l.strokeWidth??0,enabled:l.enabled},line:{stroke:a??u,strokeOpacity:s,strokeWidth:r,lineDash:n}}]}]}async updatePaths(t){this.updateLinePaths(t.paths,t.contextData)}updateLinePaths(t,e){let{interpolation:i}=this.properties,{nodeData:a}=e,[s]=t;for(let t of(s.path.clear(!0),uO(a)))ub(uj(a,t),s,i);s.checkPathDirty()}animateEmptyUpdateReady(t){let{markerSelection:e,labelSelection:i,annotationSelections:a,contextData:s,paths:r}=t,{animationManager:n}=this.ctx;this.updateLinePaths(r,s),uD(this,n,...r),iY([e],uu),uh(this,n,e),dH(this,"labels",n,i),dH(this,"annotations",n,...a)}animateReadyResize(t){let{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){let e;let{animationManager:i}=this.ctx,{markerSelection:a,labelSelection:s,annotationSelections:r,contextData:n,paths:o,previousContextData:l}=t,[h]=o;this.resetMarkerAnimation(t),this.resetLabelAnimation(t);let d=()=>{this.resetPathAnimation(t),this.updateLinePaths(o,n)},u=()=>{i.skipCurrentBatch(),d()};if(null==n||null==l){d(),uo(this,i,"added",a),uS(this,"path_properties",i,"add",h),dH(this,"labels",i,s),dH(this,"annotations",i,...r);return}if(n.crossFiltering!==l.crossFiltering){u();return}try{e=uZ(n,l,this.processedData?.reduced?.diff,this.properties.interpolation)}catch{e=void 0}if(void 0===e){u();return}"no-op"!==e.status&&(uo(this,i,void 0,a),ev(this.id,"path_properties",i,[h],e.pathProperties),"added"===e.status?this.updateLinePaths(o,n):"removed"===e.status?this.updateLinePaths(o,l):dr(this.id,"path_update",i,[h],e.path),e.hasMotion&&(dH(this,"labels",i,s),dH(this,"annotations",i,...r)))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new ax}getFormattedMarkerStyle(t){let{xKey:e,yKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,highlighted:!0})}computeFocusBounds(t){return up(this,t)}};cA.className="LineSeries",cA.type="line";var cw={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:t=>new cA(t),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:hI,color:hD},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{let{marker:e}=hc(t);return{stroke:e.fill,marker:e}}},cC=class extends sj{constructor(){super(...arguments),this.placement="top"}};o([eQ(ik)],cC.prototype,"placement",2);var cT=class extends lz{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new cC,this.tooltip=new d1,this.marker=new dq}};o([eQ(e2)],cT.prototype,"xKey",2),o([eQ(e2)],cT.prototype,"yKey",2),o([eQ(e2,{optional:!0})],cT.prototype,"labelKey",2),o([eQ(e2,{optional:!0})],cT.prototype,"colorKey",2),o([eQ(e2,{optional:!0})],cT.prototype,"xFilterKey",2),o([eQ(e2,{optional:!0})],cT.prototype,"yFilterKey",2),o([eQ(e2,{optional:!0})],cT.prototype,"xName",2),o([eQ(e2,{optional:!0})],cT.prototype,"yName",2),o([eQ(e2,{optional:!0})],cT.prototype,"labelName",2),o([eQ(e2,{optional:!0})],cT.prototype,"colorName",2),o([eQ(ic,{optional:!0})],cT.prototype,"colorDomain",2),o([eQ(id)],cT.prototype,"colorRange",2),o([eQ(e2,{optional:!0})],cT.prototype,"title",2),o([sl("marker.shape")],cT.prototype,"shape",2),o([sl("marker.size")],cT.prototype,"size",2),o([sl("marker.fill")],cT.prototype,"fill",2),o([sl("marker.fillOpacity")],cT.prototype,"fillOpacity",2),o([sl("marker.stroke")],cT.prototype,"stroke",2),o([sl("marker.strokeWidth")],cT.prototype,"strokeWidth",2),o([sl("marker.strokeOpacity")],cT.prototype,"strokeOpacity",2),o([sl("marker.itemStyler",{optional:!0})],cT.prototype,"itemStyler",2),o([eQ(eJ)],cT.prototype,"label",2),o([eQ(eJ)],cT.prototype,"tooltip",2);var ck=class extends lP{constructor(t){super({moduleCtx:t,directionKeys:lO,directionNames:lj,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:ud,label:dQ}}),this.properties=new cT,this.colorScale=new aV}get pickModeAxis(){return"main-category"}async processData(t){if(!this.properties.isValid()||null==this.data||!this.visible)return;let e=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:a,yScaleType:s}=this.getScaleInformation({xScale:e,yScale:i}),r=this.colorScale.type,{xKey:n,yKey:o,xFilterKey:l,yFilterKey:h,labelKey:d,colorKey:u,colorDomain:c,colorRange:p}=this.properties,{dataModel:g,processedData:y}=await this.requestDataModel(t,this.data,{props:[dL(n,a,{id:"xValue"}),dL(o,s,{id:"yValue"}),...null!=l?[dL(l,a,{id:"xFilterValue"})]:[],...null!=h?[dL(h,s,{id:"yFilterValue"})]:[],...u?[dL(u,r,{id:"colorValue"})]:[],...d?[dL(d,"band",{id:"labelValue"})]:[]]});if(u){let t=g.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=c??y.domain.values[t]??[],this.colorScale.range=p,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(t){let{dataModel:e,processedData:i}=this;if(!i||!e)return[];let a="x"===t?"xValue":"yValue",s=e.resolveProcessedDataDefById(this,a),r=e.getDomain(this,a,"value",i);return s?.def.type==="value"&&s?.def.valueType==="category"?r:ov(eL(r))}async createNodeData(){let{axes:t,dataModel:e,processedData:i,colorScale:a}=this,{xKey:s,yKey:r,xFilterKey:n,yFilterKey:o,labelKey:l,colorKey:h,xName:d,yName:u,labelName:c,marker:p,label:g,visible:y}=this.properties,{placement:m}=g,f=lN(p.shape),x=t.x,M=t.y;if(!(e&&i&&y&&x&&M))return;let b=e.resolveProcessedDataIndexById(this,"xValue"),v=e.resolveProcessedDataIndexById(this,"yValue"),I=null!=h?e.resolveProcessedDataIndexById(this,"colorValue"):-1,D=null!=l?e.resolveProcessedDataIndexById(this,"labelValue"):-1,S=null!=n?e.resolveProcessedDataIndexById(this,"xFilterValue"):void 0,N=null!=o?e.resolveProcessedDataIndexById(this,"yFilterValue"):void 0,L=x.scale,A=M.scale,w=(L.bandwidth??0)/2,C=(A.bandwidth??0)/2,T=[],k=g.getFont(),E=aq.getMeasurer({font:k});for(let{values:t,datum:e}of i.data??[]){let i=t[b],n=t[v],o=L.convert(i)+w,y=A.convert(n)+C,x=null!=S&&null!=N?t[S]===i&&t[N]===n:void 0,M=this.getLabelText(g,{value:l?t[D]:n,datum:e,xKey:s,yKey:r,labelKey:l,xName:d,yName:u,labelName:c}),k=E.measureText(M),O=h?a.convert(t[I]):void 0;T.push({series:this,itemId:r,yKey:r,xKey:s,datum:e,xValue:i,yValue:n,capDefaults:{lengthRatioMultiplier:p.getDiameter(),lengthMax:1/0},point:{x:o,y,size:p.size},midPoint:{x:o,y},fill:O,label:{text:M,...k},marker:f,placement:m,selected:x})}return{itemId:r,nodeData:T,labelData:T,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.contextNodeData?.labelData??[]}markerFactory(){let{shape:t}=this.properties.marker;return new(lN(t))}async updateMarkerSelection(t){let{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}async updateMarkerNodes(t){let{markerSelection:e,isHighlight:i}=t,{xKey:a,yKey:s,labelKey:r,marker:n,highlightStyle:o}=this.properties,l=t8(i&&o.item,n.getStyle());e.each((t,e)=>{this.updateMarkerStyle(t,n,{datum:e,highlighted:i,xKey:a,yKey:s,labelKey:r},l,{selected:e.selected})}),i||n.markClean()}async updateLabelSelection(t){let e=this.isLabelEnabled()?this.chart?.placeLabels().get(this)??[]:[];return t.labelSelection.update(e.map(({datum:t,x:e,y:i})=>({...t,point:{x:e,y:i,size:t.point.size},placement:"top"})),t=>{t.pointerEvents=1})}async updateLabelNodes(t){let{label:e}=this.properties;t.labelSelection.each((t,i)=>{t.text=i.label.text,t.fill=e.color,t.x=i.point?.x??0,t.y=i.point?.y??0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"})}getTooltipHtml(t){let e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return sN;let{xKey:a,yKey:s,labelKey:r,xName:n,yName:o,labelName:l,title:h=o,marker:d,tooltip:u}=this.properties,{datum:c,xValue:p,yValue:g,label:y,itemId:m}=t,f=t8({fill:t.fill,strokeWidth:this.getStrokeWidth(d.strokeWidth)},d.getStyle()),{fill:x="gray"}=this.getMarkerStyle(d,{datum:t,highlighted:!1,xKey:a,yKey:s,labelKey:r},f),M=dh(e.formatDatum(p)),b=dh(i.formatDatum(g)),v=`<b>${dh(n??a)}</b>: ${M}<br><b>${dh(o??s)}</b>: ${b}`;return r&&(v=`<b>${dh(l??r)}</b>: ${dh(y.text)}<br>`+v),u.toTooltipHtml({title:h,content:v,backgroundColor:x},{datum:c,itemId:m,xKey:a,xName:n,yKey:s,yName:o,labelKey:r,labelName:l,title:h,color:x,seriesId:this.id,...this.getModuleTooltipParams()})}getLegendData(t){let{yKey:e,yName:i,title:a,marker:s,visible:r}=this.properties,{fill:n,stroke:o,fillOpacity:l,strokeOpacity:h,strokeWidth:d}=s;return this.data?.length&&this.properties.isValid()&&"category"===t?[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:r,label:{text:a??i??e},symbols:[{marker:{shape:s.shape,fill:s.fill??n??"rgba(0, 0, 0, 0)",stroke:s.stroke??o??"rgba(0, 0, 0, 0)",fillOpacity:l??1,strokeOpacity:h??1,strokeWidth:d??0}}]}]:[]}animateEmptyUpdateReady(t){let{markerSelection:e,labelSelection:i,annotationSelections:a}=t;ul(this,this.ctx.animationManager,e),dH(this,"labels",this.ctx.animationManager,i),dH(this,"annotations",this.ctx.animationManager,...a)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ax}getFormattedMarkerStyle(t){let{xKey:e,yKey:i,labelKey:a}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,labelKey:a,highlighted:!0})}computeFocusBounds(t){return up(this,t)}};ck.className="ScatterSeries",ck.type="scatter";var cE={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:t=>new ck(t),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:hI,color:hD},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:hu},cO=class t{constructor(t,e,i,a){this.startAngle=t,this.endAngle=e,this.innerRadius=i,this.outerRadius=a}clone(){let{startAngle:e,endAngle:i,innerRadius:a,outerRadius:s}=this;return new t(e,i,a,s)}equals(t){return this.startAngle===t.startAngle&&this.endAngle===t.endAngle&&this.innerRadius===t.innerRadius&&this.outerRadius===t.outerRadius}[$](e,i){return new t(this.startAngle*(1-i)+e.startAngle*i,this.endAngle*(1-i)+e.endAngle*i,this.innerRadius*(1-i)+e.innerRadius*i,this.outerRadius*(1-i)+e.outerRadius*i)}};function cj({startAngle:t,endAngle:e,innerRadius:i,outerRadius:a}){let s=1/0,r=1/0,n=-1/0,o=-1/0,l=(t,e)=>{s=Math.min(t,s),r=Math.min(e,r),n=Math.max(t,n),o=Math.max(e,o)};return l(i*Math.cos(t),i*Math.sin(t)),l(i*Math.cos(e),i*Math.sin(e)),l(a*Math.cos(t),a*Math.sin(t)),l(a*Math.cos(e),a*Math.sin(e)),ak(0,t,e)&&l(a,0),ak(.5*Math.PI,t,e)&&l(0,a),ak(Math.PI,t,e)&&l(-a,0),ak(1.5*Math.PI,t,e)&&l(0,-a),new tI(s,r,n-s,o-r)}function cR(t,e,i){let a=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:s,outerRadius:r}=i;if(i.startAngle===i.endAngle||a<Math.min(s,r)||a>Math.max(s,r))return!1;let n=aT(i.startAngle),o=aT(i.endAngle),l=Math.atan2(e,t);return n<o?l<=o&&l>=n:l<=o&&l>=-Math.PI||l>=n&&l<=Math.PI}function cz(t,e){let{startAngle:i,endAngle:a,innerRadius:s,outerRadius:r}=e,n={x:r*Math.cos(i),y:r*Math.sin(i)},o={x:r*Math.cos(a),y:r*Math.sin(a)},l=0===s?{x:0,y:0}:{x:s*Math.cos(i),y:s*Math.sin(i)},h=0===s?{x:0,y:0}:{x:s*Math.cos(a),y:s*Math.sin(a)};return ns(t.start.x,t.start.y,t.end.x,t.end.y,n.x,n.y,l.x,l.y)||ns(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,h.x,h.y)||nn(0,0,r,i,a,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function cP(t,e){let i={x:t.x,y:t.y},a={x:t.x+t.width,y:t.y},s={x:t.x,y:t.y+t.height},r={x:t.x+t.width,y:t.y+t.height};return cz({start:i,end:a},e)||cz({start:s,end:r},e)}function cB(t,e,i,a){if(0===i&&0===a)return 0;if(Math.asin(Math.abs(1*i)/(t+1*i))+Math.asin(Math.abs(1*a)/(t+1*a))-e<0)return 1;let s=0,r=1;for(let n=0;n<8;n+=1){let n=(s+r)/2;Math.asin(Math.abs(n*i)/(t+n*i))+Math.asin(Math.abs(n*a)/(t+n*a))-e<0?s=n:r=n}return s}function cG(t,e){return 1e-6>aR(t,e)?e:aw(t-e)+e}function cF(t,e,i=0){let a=Math.abs(e-t)>=2*Math.PI?2*Math.PI:aw(e-t);return e=(t=cG(t,i))+a,{startAngle:t,endAngle:e}}function cU(t,e,i,a,s,r){let n=Math.sin(r),o=Math.cos(r),l=t**2+e**2-i**2,h=NaN,d=NaN,u=NaN,c=NaN;if(o>.5){let i=n/o,a=1+i**2,s=-2*(t+e*i),r=s**2-4*a*l;if(r<0)return;let p=(-s+Math.sqrt(r))/(2*a),g=(-s-Math.sqrt(r))/(2*a);h=p,d=p*i,u=g,c=g*i}else{let i=o/n,a=1+i**2,s=-2*(e+t*i),r=s**2-4*a*l;if(r<0)return;let p=(-s+Math.sqrt(r))/(2*a),g=(-s-Math.sqrt(r))/(2*a);h=p*i,d=p,u=g*i,c=g}let p=h*o+d*n,g=u*o+c*n,y=p>0?cG(Math.atan2(d-e,h-t),a):NaN,m=g>0?cG(Math.atan2(c-e,u-t),a):NaN;return y>=a&&y<=s?y:m>=a&&m<=s?m:void 0}function cY(t,e,i,a,s,r){let n=Math.hypot(t,e),o=Math.atan2(e,t),l=Math.acos(-(n-(n**2-i**2+r**2)/(2*n))/i),h=cG(o+l,a),d=cG(o-l,a);return h>=a&&h<=s?h:d>=a&&d<=s?d:void 0}var cZ=class{constructor(t,e,i,a,s){this.cx=t,this.cy=e,this.r=i,this.a0=a,this.a1=s,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(t){return{x:this.cx+this.r*Math.cos(t),y:this.cy+this.r*Math.sin(t)}}clipStart(t){null!=t&&this.isValid()&&!(t<this.a0)&&(this.a0=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(t){null!=t&&this.isValid()&&!(t>this.a1)&&(this.a1=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},c_=class extends ng{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){return cj(this).translate(this.centerX,this.centerY)}normalizedRadii(){let{concentricEdgeInset:t}=this,{innerRadius:e,outerRadius:i}=this;return{innerRadius:e=e>0?e+t:0,outerRadius:i=Math.max(i-t,0)}}normalizedClipSector(){let{clipSector:t}=this;if(null==t)return;let{startAngle:e,endAngle:i}=cF(this.startAngle,this.endAngle),{innerRadius:a,outerRadius:s}=this.normalizedRadii(),r=cF(t.startAngle,t.endAngle,e);return new cO(Math.max(e,r.startAngle),Math.min(i,r.endAngle),Math.max(a,t.innerRadius),Math.min(s,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,e,i,a,s,r,n,o){if(t<=0)return;let{startAngle:l,endAngle:h}=cF(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:u}=this.normalizedRadii(),c=this.normalizedClipSector();if(o&&d<=0)return;let p=o?this.getAngleOffset(d+t):this.getAngleOffset(u-t),g=n?l+p+e:h-p-e,y=o?d+t:u-t,m=y*Math.cos(g),f=y*Math.sin(g);if(null!=c&&(!n&&!(g>=l-1e-6&&g<=c.endAngle-1e-6)||n&&!(g>=c.startAngle+1e-6&&g<=h-1e-6)||o&&y<c.innerRadius-1e-6||!o&&y>c.outerRadius+1e-6))return;let x=new cZ(m,f,t,i,a);if(null!=c){let e,h;if(o?(x.clipStart(cU(m,f,t,i,a,c.endAngle)),x.clipEnd(cU(m,f,t,i,a,c.startAngle))):(x.clipStart(cU(m,f,t,i,a,c.startAngle)),x.clipEnd(cU(m,f,t,i,a,c.endAngle))),n?(e=cY(m,f,t,i,a,c.innerRadius),h=cY(m,f,t,i,a,c.outerRadius)):(e=cY(m,f,t,i,a,c.outerRadius),h=cY(m,f,t,i,a,c.innerRadius)),x.clipStart(e),x.clipEnd(h),null!=e){let{x:t,y:i}=x.pointAt(e),a=cG(Math.atan2(i,t),l);n?r?.clipStart(a):s.clipEnd(a)}if(null!=h){let{x:t,y:e}=x.pointAt(h),i=cG(Math.atan2(e,t),l);n?s.clipStart(i):r?.clipEnd(i)}}if(null!=c){let{x:t,y:e}=x.pointAt((x.a0+x.a1)/2);if(!cR(t,e,c))return}let{x:M,y:b}=x.pointAt(n===o?x.a0:x.a1),v=cG(Math.atan2(b,M),l),I=o?r:s;return n?I?.clipStart(v):I?.clipEnd(v),x}updatePath(){let{path:t,centerX:e,centerY:i,concentricEdgeInset:a,radialEdgeInset:s}=this,{startOuterCornerRadius:r,endOuterCornerRadius:n,startInnerCornerRadius:o,endInnerCornerRadius:l}=this,{startAngle:h,endAngle:d}=cF(this.startAngle,this.endAngle),{innerRadius:u,outerRadius:c}=this.normalizedRadii(),p=this.normalizedClipSector(),g=d-h,y=g>=2*Math.PI-1e-6;if(t.clear(),0===u&&0===c||u>c||(p?.startAngle??h)===(p?.endAngle??d))return;if(y&&null==this.clipSector&&0===r&&0===n&&0===o&&0===l){t.moveTo(e+c*Math.cos(h),i+c*Math.sin(h)),t.arc(e,i,c,h,d),u>a&&(t.moveTo(e+u*Math.cos(d),i+u*Math.sin(d)),t.arc(e,i,u,d,h,!0)),t.closePath();return}if(null==this.clipSector&&1e-6>Math.abs(u-c)){t.arc(e,i,c,h,d,!1),t.arc(e,i,c,d,h,!0),t.closePath();return}let m=this.getAngleOffset(u),f=this.getAngleOffset(c);if(g<2*f)return;let x=(p?.innerRadius??u)>a,M=u<a||g<2*m,b=c-u,v=Math.max(r,o,n,l),I=v>0?Math.min(b/v,1):1;r*=I,n*=I,o*=I,l*=I;let D=cB(c,g-2*f,-r,-n);if(r*=D,n*=D,!M&&x){let t=cB(u,g-2*m,o,l);o*=t,l*=t}else o=0,l=0;let S=Math.max(r+o,n+l),N=S>0?Math.min(b/S,1):1;r*=N,n*=N,o*=N,l*=N;let L=0,A=0,w=r/(c-r),C=n/(c-n);w>=0&&w<.999999?L=Math.asin(w):r=Math.min(c/(1/Math.sin(L=g/2)+1),r),C>=0&&C<.999999?A=Math.asin(C):n=Math.min(c/(1/Math.sin(A=g/2)+1),n);let T=Math.asin(o/(u+o)),k=Math.asin(l/(u+l)),E=p?.outerRadius??c,O=this.getAngleOffset(E),j=new cZ(0,0,E,h+O,d-O),R=p?.innerRadius??u,z=this.getAngleOffset(R),P=x?new cZ(0,0,R,h+z,d-z):void 0;null!=p&&(j.clipStart(p.startAngle),j.clipEnd(p.endAngle),P?.clipStart(p.startAngle),P?.clipEnd(p.endAngle));let B=this.arc(r,L,h-.5*Math.PI,h+L,j,P,!0,!1),G=this.arc(n,A,d-A,d+.5*Math.PI,j,P,!1,!1),F=this.arc(l,k,d+.5*Math.PI,d+Math.PI-k,j,P,!1,!0),U=this.arc(o,T,h+Math.PI+T,h+1.5*Math.PI,j,P,!0,!0);if(M){let a;let r=g<.5*Math.PI?s*(1+Math.cos(g))/Math.sin(g):NaN;a=Math.max(a=r>0&&r<c?Math.max(Math.hypot(s,r),u):s,u);let n=h+.5*g;t.moveTo(e+a*Math.cos(n),i+a*Math.sin(n))}else if(U?.isValid()===!0||P?.isValid()===!0);else{let a=h+g/2,s=u*Math.cos(a),r=u*Math.sin(a);t.moveTo(e+s,i+r)}if(B?.isValid()===!0){let{cx:a,cy:s,r,a0:n,a1:o}=B;t.arc(e+a,i+s,r,n,o)}if(j.isValid()){let{r:a,a0:s,a1:r}=j;t.arc(e,i,a,s,r)}if(G?.isValid()===!0){let{cx:a,cy:s,r,a0:n,a1:o}=G;t.arc(e+a,i+s,r,n,o)}if(!M){if(F?.isValid()===!0){let{cx:a,cy:s,r,a0:n,a1:o}=F;t.arc(e+a,i+s,r,n,o)}if(P?.isValid()===!0){let{r:a,a0:s,a1:r}=P;t.arc(e,i,a,r,s,!0)}if(U?.isValid()===!0){let{cx:a,cy:s,r,a0:n,a1:o}=U;t.arc(e+a,i+s,r,n,o)}}t.closePath()}isPointInPath(t,e){let{startAngle:i,endAngle:a,innerRadius:s,outerRadius:r}=this.clipSector??this;return cR(t-this.centerX,e-this.centerY,{startAngle:i,endAngle:a,innerRadius:Math.min(s,r),outerRadius:Math.max(s,r)})}};c_.className="Sector",o([np()],c_.prototype,"centerX",2),o([np()],c_.prototype,"centerY",2),o([np()],c_.prototype,"innerRadius",2),o([np()],c_.prototype,"outerRadius",2),o([np()],c_.prototype,"startAngle",2),o([np()],c_.prototype,"endAngle",2),o([np()],c_.prototype,"clipSector",2),o([np()],c_.prototype,"concentricEdgeInset",2),o([np()],c_.prototype,"radialEdgeInset",2),o([np()],c_.prototype,"startOuterCornerRadius",2),o([np()],c_.prototype,"endOuterCornerRadius",2),o([np()],c_.prototype,"startInnerCornerRadius",2),o([np()],c_.prototype,"endInnerCornerRadius",2);var cV={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},cW={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},cH=class extends sC{constructor(){super(...arguments),this.showInLegend=!1}};o([eQ(e0)],cH.prototype,"showInLegend",2);var c$=class extends sj{constructor(){super(...arguments),this.spacing=2}set(t,e){return super.set(t)}};o([eQ(e2)],c$.prototype,"text",2),o([eQ(e4)],c$.prototype,"spacing",2);var cQ=class extends eW{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};o([eQ(ih)],cQ.prototype,"fill",2),o([eQ(e6)],cQ.prototype,"fillOpacity",2);var cX=class extends sj{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};o([eQ(e9)],cX.prototype,"offset",2),o([eQ(e8)],cX.prototype,"minAngle",2),o([eQ(e9)],cX.prototype,"minSpacing",2),o([eQ(e9)],cX.prototype,"maxCollisionOffset",2),o([eQ(e0)],cX.prototype,"avoidCollisions",2);var cK=class extends sj{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};o([eQ(e4)],cK.prototype,"positionOffset",2),o([eQ(e6)],cK.prototype,"positionRatio",2);var cJ=class extends eW{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};o([eQ(id,{optional:!0})],cJ.prototype,"colors",2),o([eQ(e9)],cJ.prototype,"length",2),o([eQ(e9)],cJ.prototype,"strokeWidth",2);var cq=class extends lE{constructor(){super(...arguments),this.fills=Object.values(cV),this.strokes=Object.values(cW),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.innerLabels=new eH(c$),this.title=new cH,this.innerCircle=new cQ,this.shadow=new dK,this.calloutLabel=new cX,this.sectorLabel=new cK,this.calloutLine=new cJ,this.tooltip=new d1}isValid(){let t=super.isValid();return null==this.innerRadiusRatio&&null==this.innerRadiusOffset?(y.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}};function c0(t,e,i,a){let s=[i.convert(0),i.convert(1)],r=[a.convert(0),a.convert(1)],n=-(Math.PI/2)+aE(e),o=t?"initial":"update",l=({radius:t})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*t}),h=({radius:t})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*t});return{nodes:{toFn:(t,e,i,{prevLive:a})=>{let{startAngle:s,endAngle:r,innerRadius:o,outerRadius:h}=e,{stroke:d,fill:u}=e.sectorFormat;if("removed"===i&&a?(s=a.datum?.endAngle,r=a.datum?.endAngle):"removed"!==i||a||(s=n,r=n),"removed"===i){let t=l(e);o=t.innerRadius,h=t.outerRadius}return{startAngle:s,endAngle:r,outerRadius:h,innerRadius:o,stroke:d,fill:u}},fromFn:(e,i,a,{prevFromProps:s})=>{let{startAngle:r,endAngle:l,innerRadius:d,outerRadius:u}=e,{fill:c,stroke:p}=i.sectorFormat;if("unknown"!==a&&("added"!==a||s)?"added"===a&&s&&(r=s.endAngle??n,l=s.endAngle??n,d=s.innerRadius??i.innerRadius,u=s.outerRadius??i.outerRadius):(r=n,l=n,d=i.innerRadius,u=i.outerRadius),"added"===a&&!t){let t=h(i);d=t.innerRadius,u=t.outerRadius}return"updated"===a&&(c=e.fill??c,p=e.stroke??p),{startAngle:r,endAngle:l,innerRadius:d,outerRadius:u,fill:c,stroke:p,phase:o}}},innerCircle:{fromFn:(t,e)=>({size:t.previousDatum?.radius??t.size??0,phase:o}),toFn:(t,e)=>({size:e.radius??0})}}}function c1(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function c2(t,e){let i=e.y-t.centerY,a=e.x-t.centerX,s=Math.atan2(i,a);for(let e of t.getItemNodes())if(!0!==e.datum.missing&&ak(s,e.startAngle,e.endAngle)){let t=Math.sqrt(a*a+i*i),s=0;return t<e.innerRadius?s=e.innerRadius-t:t>e.outerRadius&&(s=t-e.outerRadius),{datum:e.datum,distance:s}}}o([eQ(e2)],cq.prototype,"angleKey",2),o([eQ(e2,{optional:!0})],cq.prototype,"angleName",2),o([eQ(e2,{optional:!0})],cq.prototype,"angleFilterKey",2),o([eQ(e2,{optional:!0})],cq.prototype,"radiusKey",2),o([eQ(e2,{optional:!0})],cq.prototype,"radiusName",2),o([eQ(e9,{optional:!0})],cq.prototype,"radiusMin",2),o([eQ(e9,{optional:!0})],cq.prototype,"radiusMax",2),o([eQ(e2,{optional:!0})],cq.prototype,"calloutLabelKey",2),o([eQ(e2,{optional:!0})],cq.prototype,"calloutLabelName",2),o([eQ(e2,{optional:!0})],cq.prototype,"sectorLabelKey",2),o([eQ(e2,{optional:!0})],cq.prototype,"sectorLabelName",2),o([eQ(e2,{optional:!0})],cq.prototype,"legendItemKey",2),o([eQ(id)],cq.prototype,"fills",2),o([eQ(id)],cq.prototype,"strokes",2),o([eQ(e6)],cq.prototype,"fillOpacity",2),o([eQ(e6)],cq.prototype,"strokeOpacity",2),o([eQ(ib)],cq.prototype,"lineDash",2),o([eQ(e9)],cq.prototype,"lineDashOffset",2),o([eQ(e9)],cq.prototype,"cornerRadius",2),o([eQ(e1,{optional:!0})],cq.prototype,"itemStyler",2),o([eQ(e8)],cq.prototype,"rotation",2),o([eQ(e4)],cq.prototype,"outerRadiusOffset",2),o([eQ(e6)],cq.prototype,"outerRadiusRatio",2),o([eQ(e4,{optional:!0})],cq.prototype,"innerRadiusOffset",2),o([eQ(e6,{optional:!0})],cq.prototype,"innerRadiusRatio",2),o([eQ(e9)],cq.prototype,"strokeWidth",2),o([eQ(e4)],cq.prototype,"sectorSpacing",2),o([eQ(iy)],cq.prototype,"innerLabels",2),o([eQ(eJ)],cq.prototype,"title",2),o([eQ(eJ)],cq.prototype,"innerCircle",2),o([eQ(eJ)],cq.prototype,"shadow",2),o([eQ(eJ)],cq.prototype,"calloutLabel",2),o([eQ(eJ)],cq.prototype,"sectorLabel",2),o([eQ(eJ)],cq.prototype,"calloutLine",2),o([eQ(eJ)],cq.prototype,"tooltip",2);var c4=class extends lL{constructor({useLabelLayer:t=!1,pickModes:e=[1,0],canHaveAxes:i=!1,animationResetFns:a,...s}){super({...s,useLabelLayer:t,pickModes:e,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:i}),this.itemGroup=this.contentGroup.appendChild(new ax),this.nodeData=[],this.itemSelection=aL.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=aL.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=aL.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=aL.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=a,this.animationState=new sy("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}labelFactory(){let t=new a3;return t.pointerEvents=1,t}getInnerRadius(){return 0}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){let{item:t,label:e}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&iY([this.itemSelection,this.highlightSelection],t),e&&iY([this.labelSelection,this.highlightLabelSelection],e),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){let{item:e,label:i}=this.animationResetFns??{};e&&iY([this.highlightSelection],e),i&&iY([this.highlightLabelSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}computeFocusBounds(t){let e=this.getNodeData()?.[t.datumIndex];if(void 0!==e)return this.itemSelection.select(t=>t instanceof ng&&t.datum===e)[0]}},c3=class extends o1{constructor(t,e,i,a){super(t,e,i,a),this.angleKey=a.properties.angleKey,this.radiusKey=a.properties.radiusKey,this.calloutLabelKey=a.properties.calloutLabelKey,this.sectorLabelKey=a.properties.sectorLabelKey}},c5=class extends c4{constructor(t){super({moduleCtx:t,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:c1,label:dQ}}),this.properties=new cq,this.phantomNodeData=void 0,this.previousRadiusScale=new lZ,this.radiusScale=new lZ,this.phantomGroup=this.contentGroup.appendChild(new ax),this.phantomSelection=aL.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new ax({name:"pieCalloutLabels"})),this.calloutLabelSelection=new aL(this.calloutLabelGroup,ax),this.backgroundGroup=this.rootGroup.appendChild(new sE({name:`${this.id}-background`,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ax({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new lp),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new lp),this.innerLabelsGroup=this.contentGroup.appendChild(new ax({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new ax({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=aL.select(this.innerLabelsGroup,a3),this.innerCircleSelection=aL.select(this.innerCircleGroup,lp),this.seriesItemEnabled=[],this.legendItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=c3,this.angleScale=new lZ,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.phantomGroup.opacity=.2,this.phantomGroup.zIndexSubOrder=[()=>this._declarationOrder,0]}get calloutNodeData(){return this.phantomNodeData??this.nodeData}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}get visible(){return super.visible&&(0===this.seriesItemEnabled.length||this.seriesItemEnabled.includes(!0))}nodeFactory(){return new c_}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}async processData(t){if(null==this.data||!this.properties.isValid())return;let{data:e}=this,{visible:i,seriesItemEnabled:a}=this,{angleKey:s,angleFilterKey:r,radiusKey:n,calloutLabelKey:o,sectorLabelKey:l,legendItemKey:h}=this.properties,d=!this.ctx.animationManager.isSkipped(),u=[],c=[];h?u.push(dN(h,"band",{id:"legendItemKey"})):o?u.push(dN(o,"band",{id:"calloutLabelKey"})):l&&u.push(dN(l,"band",{id:"sectorLabelKey"}));let p=this.radiusScale.type,g=this.radiusScale.type;for(let m of(n&&c.push(dA(n,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),dL(n,p,{id:"radiusRaw"}),dB("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),o&&c.push(dL(o,"band",{id:"calloutLabelValue"})),l&&c.push(dL(l,"band",{id:"sectorLabelValue"})),h&&c.push(dL(h,"band",{id:"legendItemValue"})),r&&c.push(dw(r,g,{id:"angleFilterValue",onlyPositive:!0}),dL(r,g,{id:"angleFilterRaw"}),dB("angleFilterValue",[0,1],0,0)),d&&this.processedData&&u.length>0&&c.push(dV(this.processedData)),c.push(dG()),e=e.map((t,e)=>i&&a[e]?t:{...t,[s]:0}),await this.requestDataModel(t,e,{props:[...u,dw(s,g,{id:"angleValue",onlyPositive:!0}),dL(s,g,{id:"angleRaw"}),dB("angleValue",[0,1],0,0),...c]}),this.processedData?.defs?.values??[])){let{id:t,missing:e,property:i}=m,a=oI(this,e);"angleRaw"!==t&&a>0&&y.warnOnce(`no value was found for the key '${String(i)}' on ${a} data element${a>1?"s":""}`)}this.animationState.transition("updateData")}async maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;let{nodeData:t=[],phantomNodeData:e}=await this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=e,this.nodeDataRefresh=!1}getProcessedDataIndexes(t){let e=t.resolveProcessedDataIndexById(this,"angleValue"),i=t.resolveProcessedDataIndexById(this,"angleRaw"),a=null!=this.properties.angleFilterKey?t.resolveProcessedDataIndexById(this,"angleFilterValue"):void 0,s=null!=this.properties.angleFilterKey?t.resolveProcessedDataIndexById(this,"angleFilterRaw"):void 0,r=this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue"):void 0,n=this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusRaw"):void 0;return{angleIdx:e,angleRawIdx:i,angleFilterIdx:a,angleFilterRawIdx:s,radiusIdx:r,radiusRawIdx:n,calloutLabelIdx:this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue"):void 0,sectorLabelIdx:this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue"):void 0,legendItemIdx:this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue"):void 0}}async createNodeData(){let{id:t,processedData:e,dataModel:i,angleScale:a}=this,{rotation:s,innerRadiusRatio:r}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:t,nodeData:[],labelData:[]};if(!e||!i||"ungrouped"!==e.type)return;let{angleIdx:n,angleRawIdx:o,angleFilterIdx:l,angleFilterRawIdx:h,radiusIdx:d,radiusRawIdx:u,calloutLabelIdx:c,sectorLabelIdx:p,legendItemIdx:g}=this.getProcessedDataIndexes(i),y=null!=h&&e.data.some(({values:t})=>t[h]>t[o]),m=0,f=0,x=[],M=null!=h?[]:void 0;return e.data.forEach((t,e)=>{let{datum:i,values:r}=t,b=y?r[l]:r[n],v=null==h||y?1:Math.sqrt(r[h]/r[o]),I=a.convert(m)+aE(s);m=b,f+=b;let D=a.convert(m)+aE(s),S=Math.abs(D-I),N=I+S/2,L=r[o],A=(null!=d?r[d]??1:1)*v,w=null!=u?r[u]:void 0,C=null!=g?r[g]:void 0,T=this.getLabels(i,N,S,!0,null!=c?r[c]:void 0,null!=p?r[p]:void 0,C),k=this.getSectorFormat(i,e,!1),E={itemId:e,series:this,datum:i,index:e,angleValue:L,midAngle:N,midCos:Math.cos(N),midSin:Math.sin(N),startAngle:I,endAngle:D,radius:A,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(A),0),sectorFormat:k,radiusValue:w,legendItemValue:C,enabled:this.seriesItemEnabled[e],focusable:!0,...T};x.push(E),null!=M&&M.push({...E,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}),this.zerosumOuterRing.visible=0===f,this.zerosumInnerRing.visible=0===f&&null!=r&&1!==r&&r>0,{itemId:t,nodeData:x,labelData:x,phantomNodeData:M}}getLabels(t,e,i,a,s,r,n){let{calloutLabel:o,sectorLabel:l,legendItemKey:h}=this.properties,d=!a||o.enabled?this.properties.calloutLabelKey:void 0,u=!a||l.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!u&&!h)return{};let c={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return d&&i>aE(o.minAngle)&&(p.calloutLabel={...this.getTextAlignment(e),text:this.getLabelText(o,{...c,value:s}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),u&&(p.sectorLabel={text:this.getLabelText(l,{...c,value:r})}),null!=h&&null!=n&&(p.legendItem={key:h,text:n}),p}getTextAlignment(t){let e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=tx(Math.floor((aT(t)- -.75*Math.PI)/(Math.PI/2)),e.length);return e[i]}getSectorFormat(t,e,i){let a;let{callbackCache:s}=this.ctx,{angleKey:r,radiusKey:n,calloutLabelKey:o,sectorLabelKey:l,legendItemKey:h,fills:d,strokes:u,itemStyler:c}=this.properties,p=u[e%u.length],{fill:g,fillOpacity:y,stroke:m,strokeWidth:f,strokeOpacity:x,lineDash:M,lineDashOffset:b,cornerRadius:v}=t8(i&&this.properties.highlightStyle.item,{fill:d.length>0?d[e%d.length]:void 0,stroke:p,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);return c&&(a=s.call(c,{datum:t,angleKey:r,radiusKey:n,calloutLabelKey:o,sectorLabelKey:l,legendItemKey:h,fill:g,fillOpacity:y,stroke:m,strokeWidth:f,strokeOpacity:x,lineDash:M,lineDashOffset:b,cornerRadius:v,highlighted:i,seriesId:this.id})),{fill:a?.fill??g,fillOpacity:a?.fillOpacity??y,stroke:a?.stroke??m,strokeWidth:a?.strokeWidth??f,strokeOpacity:a?.strokeOpacity??x,lineDash:a?.lineDash??M,lineDashOffset:a?.lineDashOffset??b,cornerRadius:a?.cornerRadius??v}}getInnerRadius(){let{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,a=t*e+i;return a===t||a<0?0:a}getOuterRadius(){let{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){let e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e);let i=t=>({...t,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(t.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){let t=Math.max(0,this.radiusScale.range[1]);if(0===t)return NaN;let e=this.properties.title?.spacing??0,i=Math.max(0,-t);return-t-(2+e)-i}async update({seriesRect:t}){let{title:e}=this.properties,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},a=null!=se(this.nodeDataDependencies,i);if(a&&(this._nodeDataDependencies=i),await this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(a),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){let t=this.getTitleTranslationY();e.node.y=isFinite(t)?t:0;let i=e.node.getBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i)}for(let t of[this.zerosumInnerRing,this.zerosumOuterRing])t.fillOpacity=0,t.stroke=this.properties.calloutLabel.color,t.strokeWidth=1,t.strokeOpacity=1;this.updateNodeMidPoint(),await this.updateSelections(),await this.updateNodes(t)}updateTitleNodes(){let{oldTitle:t}=this,{title:e}=this.properties;t!==e&&(t&&this.labelGroup?.removeChild(t.node),e&&(e.node.textBaseline="bottom",this.labelGroup?.appendChild(e.node)),this.oldTitle=e)}updateNodeMidPoint(){let t=t=>{let e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}};this.nodeData.forEach(t),this.phantomNodeData?.forEach(t)}async updateSelections(){await this.updateGroupSelection(),this.updateInnerCircleSelection()}async updateGroupSelection(){let{itemSelection:t,highlightSelection:e,phantomSelection:i,highlightLabelSelection:a,calloutLabelSelection:s,labelSelection:r,innerLabelsSelection:n}=this,o=this.nodeData.map(t=>({...t,sectorFormat:{...t.sectorFormat}})),l=(t,e)=>{t.update(e,void 0,t=>this.getDatumId(t)),this.ctx.animationManager.isSkipped()&&t.cleanup()};l(t,this.nodeData),l(e,o),l(i,this.phantomNodeData??[]),s.update(this.calloutNodeData,t=>{let e=new aK;e.tag=0,e.pointerEvents=1,t.appendChild(e);let i=new a3;i.tag=1,i.pointerEvents=1,t.appendChild(i)}),r.update(this.nodeData),a.update(o),n.update(this.properties.innerLabels,t=>{t.pointerEvents=1})}updateInnerCircleSelection(){let{innerCircle:t}=this.properties,e=0,i=this.getInnerRadius();i>0&&(e=Math.ceil(2*Math.min(i,this.getOuterRadius())+1));let a=t?[{radius:e}]:[];this.innerCircleSelection.update(a)}async updateNodes(t){let e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.includes(!0);this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.highlightLabel.visible=i&&e?.series===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((t,{radius:e})=>{t.setProperties({fill:this.properties.innerCircle?.fill,opacity:this.properties.innerCircle?.fillOpacity,size:e})});let a=this.ctx.animationManager.isSkipped(),s=(t,e,i,s)=>{let r=this.getSectorFormat(e.datum,e.itemId,s);e.sectorFormat.fill=r.fill,e.sectorFormat.stroke=r.stroke,a&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(s||a)&&(t.fill=r.fill,t.stroke=r.stroke),t.strokeWidth=r.strokeWidth,t.fillOpacity=r.fillOpacity,t.strokeOpacity=r.strokeOpacity,t.lineDash=r.lineDash,t.lineDashOffset=r.lineDashOffset,t.cornerRadius=r.cornerRadius,t.fillShadow=this.properties.shadow;let n=Math.max((this.properties.sectorSpacing+(null!=r.stroke?r.strokeWidth:0))/2,0);t.inset=n,t.lineJoin=this.properties.sectorSpacing>=0||n>0?"miter":"round"};this.itemSelection.each((t,e,i)=>s(t,e,i,!1)),this.highlightSelection.each((t,i,a)=>{s(t,i,a,!0),t.visible=i.itemId===e?.itemId}),this.phantomSelection.each((t,e,i)=>s(t,e,i,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){let{calloutLine:t}=this.properties,e=t.length,i=t.strokeWidth,a=t.colors??this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((t,r)=>{let n=t.datum,{calloutLabel:o,outerRadius:l}=n;if(o?.text&&!o.hidden&&0!==l){t.visible=!0,t.strokeWidth=i,t.stroke=a[r%a.length],t.fill=void 0;let h=n.midCos*l,d=n.midSin*l,u=n.midCos*(l+e),c=n.midSin*(l+e);if((o.collisionTextAlign??0!==o.collisionOffsetY)&&null!=o.box){let t=o.box,e=u,i=c;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),c<t.y?i=t.y:c>t.y+t.height&&(i=t.y+t.height);let a=e-u,r=i-c,n=Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),l=n-s;l>0&&(u+=a*l/n,c+=r*l/n)}t.x1=h,t.y1=d,t.x2=u,t.y2=c}else t.visible=!1})}getLabelOverflow(t,e,i){let a=i.x-this.centerX,s=i.x+i.width-this.centerX,r=i.y-this.centerY,n=i.y+i.height-this.centerY,o=1;e.x+1<a?o=(e.x+e.width-a)/e.width:e.x+e.width-1>s&&(o=(s-e.x)/e.width);let l=e.y+1<r||e.y+e.height-1>n;return{textLength:1===o?t.length:Math.floor(t.length*o)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){let{surroundingRadius:e}=this;if(null==e)return!1;let i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],a=e**2;return i.some(t=>t.x**2+t.y**2>a)}computeCalloutLabelCollisionOffsets(){let{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:a,minSpacing:s}=e,r=t.convert(0),n=t=>!t.calloutLabel||0===t.outerRadius,o=this.calloutNodeData,l=o.filter(t=>!n(t));if(l.forEach(t=>{let e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)}),l.length<=1)return;let h=l.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),d=l.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),u=l.filter(t=>t.midSin<0&&t.calloutLabel?.textAlign==="center").sort((t,e)=>t.midCos-e.midCos),c=l.filter(t=>t.midSin>=0&&t.calloutLabel?.textAlign==="center").sort((t,e)=>t.midCos-e.midCos),p=t=>{let e=t.calloutLabel;if(null==e)return tI.zero.clone();let s=t.outerRadius+i.length+a,r=t.midCos*s,n=t.midSin*s+e.collisionOffsetY,o=e.collisionTextAlign??e.textAlign,l=e.textBaseline;return a3.computeBBox(e.text,r,n,{font:this.properties.calloutLabel,textAlign:o,textBaseline:l})},g=(t,e,i)=>{let a=p(t).grow(s/2),r=p(e).grow(s/2);if(a.x<r.x+r.width&&a.x+a.width>r.x&&("to-top"===i?a.y<r.y+r.height:a.y+a.height>r.y)){let t="to-top"===i?a.y-r.y-r.height:a.y+a.height-r.y;e.calloutLabel.collisionOffsetY=t}},y=t=>{let e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--)g(t[e+1],t[e],"to-top");for(let e=i+1;e<t.length;e++)g(t[e-1],t[e],"to-bottom")},m=t=>{let e=l.some(t=>0!==t.calloutLabel.collisionOffsetY),i=t.map(t=>p(t)),a=i.map(t=>t.clone().grow(s/2)),n=!1;for(let e=0;e<a.length&&!n;e++){let i=a[e];for(let s=e+1;s<t.length;s++){let t=a[s];if(i.collidesBBox(t)){n=!0;break}}}let h=o.map(t=>{let{startAngle:e,endAngle:i,outerRadius:a}=t;return{startAngle:e,endAngle:i,innerRadius:r,outerRadius:a}}),d=i.some(t=>h.some(e=>cP(t,e)));(n||e||d)&&t.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{let e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};y(h),y(d),m(u),m(c)}updateCalloutLabelNodes(t){let{radiusScale:e}=this,{calloutLabel:i,calloutLine:a}=this.properties,s=a.length,{offset:r,color:n}=i,o=new a3;this.calloutLabelSelection.selectByTag(1).forEach(a=>{let{datum:l}=a,h=l.calloutLabel,d=Math.max(0,e.convert(l.radius));if(!h?.text||0===d||h.hidden){a.visible=!1;return}let u=d+s+r,c=l.midCos*u,p=l.midSin*u+h.collisionOffsetY,g={textAlign:h.collisionTextAlign??h.textAlign,textBaseline:h.textBaseline};o.text=h.text,o.x=c,o.y=p,o.setFont(this.properties.calloutLabel),o.setAlign(g);let y=o.getBBox(),m=h.text,f=!0;if(i.avoidCollisions){let{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(h.text,y,t);m=h.text.length===e?h.text:`${h.text.substring(0,e)}\u2026`,f=!i}a.text=m,a.x=c,a.y=p,a.setFont(this.properties.calloutLabel),a.setAlign(g),a.fill=n,a.visible=f})}async computeLabelsBBox(t,e){let i;let{calloutLabel:a,calloutLine:s}=this.properties,r=s.length,{offset:n,maxCollisionOffset:o,minSpacing:l}=a;if(!a.avoidCollisions)return null;await this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let h=[],d=new a3,{title:u}=this.properties;if(u?.text&&u.enabled){let t=this.getTitleTranslationY();isFinite(t)&&(d.text=u.text,d.x=0,d.y=t,d.setFont(u),d.setAlign({textBaseline:"bottom",textAlign:"center"}),i=d.getBBox(),h.push(i))}return(this.calloutNodeData.forEach(a=>{let s=a.calloutLabel;if(!s||0===a.outerRadius)return null;let u=a.outerRadius+r+n,c=a.midCos*u,p=a.midSin*u+s.collisionOffsetY;d.text=s.text,d.x=c,d.y=p,d.setFont(this.properties.calloutLabel),d.setAlign({textAlign:s.collisionTextAlign??s.textAlign,textBaseline:s.textBaseline});let g=d.getBBox();if(s.box=g,Math.abs(s.collisionOffsetY)>o){s.hidden=!0;return}if(i){let t=e.y-this.centerY,a=new tI(i.x-l,t,i.width+2*l,i.y+i.height+l-t);if(g.collidesBBox(a)){s.hidden=!0;return}}if(t.hideWhenNecessary){let{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:a}=this.getLabelOverflow(s.text,g,e),r=s.text.length>2&&t<2;if(i||r||a){s.hidden=!0;return}}s.hidden=!1,h.push(g)}),0===h.length)?null:tI.merge(h)}updateSectorLabelNodes(){let{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:a,fontWeight:s,fontFamily:r,positionOffset:n,positionRatio:o,color:l}=this.properties.sectorLabel,h=(t,h)=>{let{sectorLabel:d,outerRadius:u}=h,c=!1;if(d&&0!==u){let p=e*(1-o)+u*o+n;t.fill=l,t.fontStyle=a,t.fontWeight=s,t.fontSize=i,t.fontFamily=r,t.text=d.text,t.x=h.midCos*p,t.y=h.midSin*p,t.textAlign="center",t.textBaseline="middle";let g=t.getBBox(),y=[[g.x,g.y],[g.x+g.width,g.y],[g.x+g.width,g.y+g.height],[g.x,g.y+g.height]],{startAngle:m,endAngle:f}=h,x={startAngle:m,endAngle:f,innerRadius:e,outerRadius:u};y.every(([t,e])=>cR(t,e,x))&&(c=!0)}t.visible=c};this.labelSelection.each(h),this.highlightLabelSelection.each(h)}updateInnerLabelNodes(){let t=[],e=[];this.innerLabelsSelection.each((i,a)=>{let{fontStyle:s,fontWeight:r,fontSize:n,fontFamily:o,color:l}=a;i.fontStyle=s,i.fontWeight=r,i.fontSize=n,i.fontFamily=o,i.text=a.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.getBBox()),e.push(a.spacing)});let i=t=>0===t?0:e[t],a=t=>t===e.length-1?0:e[t],s=t.reduce((t,e,s)=>t+e.height+i(s)+a(s),0),r=Math.max(...t.map(t=>t.width)),n=this.getInnerRadius(),o=Math.sqrt(Math.pow(r/2,2)+Math.pow(s/2,2))<=(n>0?n:this.getOuterRadius()),l=[];for(let e=0,r=-s/2;e<t.length;e++){let s=t[e].height+r+i(e);l.push(s),r=s+a(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=o})}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(t){let{angleKey:e,calloutLabelKey:i,sectorLabelKey:a,legendItemKey:s}=this.properties,{sectorLabel:r,calloutLabel:n,legendItem:o}=t;return s&&void 0!==o?o.text:i&&i!==e&&n?.text!==void 0?n.text:a&&a!==e&&r?.text!==void 0?r.text:void 0}pickNodeClosestDatum(t){return c2(this,t)}getTooltipHtml(t){if(!this.properties.isValid())return sN;let{datum:e,angleValue:i,sectorFormat:{fill:a},itemId:s}=t,r=dh(this.properties.title?.text),n=t0(i)?tf(i):String(i),o=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:r??o,content:r&&o?`${o}: ${n}`:n,backgroundColor:a},{datum:e,itemId:s,title:r,color:a,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(t){let{visible:e,processedData:i,dataModel:a}=this;if(!a||!i?.data.length||!this.properties.isValid()||"category"!==t)return[];let{angleKey:s,calloutLabelKey:r,sectorLabelKey:n,legendItemKey:o}=this.properties;if(!o&&(!r||r===s)&&(!n||n===s))return[];let{calloutLabelIdx:l,sectorLabelIdx:h,legendItemIdx:d}=this.getProcessedDataIndexes(a),u=this.properties.title?.showInLegend&&this.properties.title.text,c=[];for(let t=0;t<i.data.length;t++){let{datum:a,values:p}=i.data[t],g=[];u&&g.push(u);let y=this.getLabels(a,2*Math.PI,2*Math.PI,!1,null!=l?p[l]:void 0,null!=h?p[h]:void 0,null!=d?p[d]:void 0);if(o&&void 0!==y.legendItem?g.push(y.legendItem.text):r&&r!==s&&y.calloutLabel?.text!==void 0?g.push(y.calloutLabel?.text):n&&n!==s&&y.sectorLabel?.text!==void 0&&g.push(y.sectorLabel?.text),0===g.length)continue;let m=this.getSectorFormat(a,t,!1);c.push({legendType:"category",id:this.id,itemId:t,seriesId:this.id,enabled:e&&this.legendItemEnabled[t],label:{text:g.join(" - ")},symbols:[{marker:{fill:m.fill,stroke:m.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}],legendItemName:null!=o?a[o]:void 0})}return c}onLegendItemClick(t){let{enabled:e,itemId:i,series:a,legendItemName:s}=t;a.id===this.id?this.toggleSeriesItem(i,e):null!=s&&this.toggleOtherSeriesItems(s,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.legendItemEnabled[t]=e,this.nodeData[t]&&(this.nodeData[t].enabled=e),this.nodeDataRefresh=!0}setLegendState(t){this.legendItemEnabled=t,this.ctx.updateService.update(4)}toggleOtherSeriesItems(t,e){if(!this.properties.legendItemKey||!this.dataModel)return;let i=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");this.processedData?.data.forEach(({values:a},s)=>{a[i]===t&&this.toggleSeriesItem(s,e)})}animateEmptyUpdateReady(t){let{animationManager:e}=this.ctx,i=c0(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);ev(this.id,"nodes",e,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(t,e)=>this.getDatumId(e)),ev(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),dH(this,"callout",e,this.calloutLabelSelection),dH(this,"sector",e,this.labelSelection),dH(this,"highlight",e,this.highlightLabelSelection),dH(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:t,highlightSelection:e,phantomSelection:i,processedData:a,radiusScale:s,previousRadiusScale:r}=this,{animationManager:n}=this.ctx,o=a?.reduced?.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);let l=(o?.moved.size??0)===0,h=(a?.defs.keys.length??0)>0,d=a?.reduced?.animationValidation?.uniqueKeys??!0;l&&h&&d||this.ctx.animationManager.skipCurrentBatch();let u=c0(!1,this.properties.rotation,s,r);ev(this.id,"nodes",n,[t,e,i],u.nodes,(t,e)=>this.getDatumId(e),o),ev(this.id,"innerCircle",n,[this.innerCircleSelection],u.innerCircle),dH(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),dH(this,"sector",this.ctx.animationManager,this.labelSelection),dH(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),dH(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:t,highlightSelection:e,phantomSelection:i,radiusScale:a,previousRadiusScale:s}=this,{animationManager:r}=this.ctx,n=c0(!1,this.properties.rotation,a,s);ev(this.id,"nodes",r,[t,e,i],n.nodes,(t,e)=>this.getDatumId(e)),ev(this.id,"innerCircle",r,[this.innerCircleSelection],n.innerCircle),d$(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),d$(this,"sector",this.ctx.animationManager,this.labelSelection),d$(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),d$(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){let{calloutLabelKey:e,sectorLabelKey:i,legendItemKey:a}=this.properties;if(this.processedData?.reduced?.animationValidation?.uniqueKeys){if(a)return t[a];if(e)return t[e];if(i)return t[i]}}getDatumId(t){let{index:e}=t,i=this.getDatumIdFromData(t.datum);return null!=i?String(i):`${e}`}onDataChange(){let{data:t,seriesItemEnabled:e,legendItemEnabled:i}=this;this.seriesItemEnabled=t?.map((t,i)=>e[i]??!0)??[],this.legendItemEnabled=t?.map((t,e)=>i[e]??!0)??[]}};c5.className="DonutSeries",c5.type="donut";var c9=({takeColors:t,colorsCount:e})=>{let{fills:i,strokes:a}=t(e);return{fills:i,strokes:a,calloutLine:{colors:a}}},c6={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:t=>new c5(t),tooltipDefaults:{range:"exact"},themeTemplate:{series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:hI,color:hL,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:hI,color:hD,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:hI,color:hN,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:hk,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:12,fontFamily:hI,color:hD,spacing:2}}},paletteFactory:c9},c8=class extends sC{constructor(){super(...arguments),this.showInLegend=!1}};o([eQ(e0)],c8.prototype,"showInLegend",2);var c7=class extends sj{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};o([eQ(e9)],c7.prototype,"offset",2),o([eQ(e8)],c7.prototype,"minAngle",2),o([eQ(e9)],c7.prototype,"minSpacing",2),o([eQ(e9)],c7.prototype,"maxCollisionOffset",2),o([eQ(e0)],c7.prototype,"avoidCollisions",2);var pt=class extends sj{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};o([eQ(e4)],pt.prototype,"positionOffset",2),o([eQ(e6)],pt.prototype,"positionRatio",2);var pe=class extends eW{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};o([eQ(id,{optional:!0})],pe.prototype,"colors",2),o([eQ(e9)],pe.prototype,"length",2),o([eQ(e9)],pe.prototype,"strokeWidth",2);var pi=class extends lE{constructor(){super(...arguments),this.fills=Object.values(cV),this.strokes=Object.values(cW),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.title=new c8,this.shadow=new dK,this.calloutLabel=new c7,this.sectorLabel=new pt,this.calloutLine=new pe,this.tooltip=new d1}};o([eQ(e2)],pi.prototype,"angleKey",2),o([eQ(e2,{optional:!0})],pi.prototype,"angleName",2),o([eQ(e2,{optional:!0})],pi.prototype,"angleFilterKey",2),o([eQ(e2,{optional:!0})],pi.prototype,"radiusKey",2),o([eQ(e2,{optional:!0})],pi.prototype,"radiusName",2),o([eQ(e9,{optional:!0})],pi.prototype,"radiusMin",2),o([eQ(e9,{optional:!0})],pi.prototype,"radiusMax",2),o([eQ(e2,{optional:!0})],pi.prototype,"calloutLabelKey",2),o([eQ(e2,{optional:!0})],pi.prototype,"calloutLabelName",2),o([eQ(e2,{optional:!0})],pi.prototype,"sectorLabelKey",2),o([eQ(e2,{optional:!0})],pi.prototype,"sectorLabelName",2),o([eQ(e2,{optional:!0})],pi.prototype,"legendItemKey",2),o([eQ(id)],pi.prototype,"fills",2),o([eQ(id)],pi.prototype,"strokes",2),o([eQ(e6)],pi.prototype,"fillOpacity",2),o([eQ(e6)],pi.prototype,"strokeOpacity",2),o([eQ(ib)],pi.prototype,"lineDash",2),o([eQ(e9)],pi.prototype,"lineDashOffset",2),o([eQ(e9)],pi.prototype,"cornerRadius",2),o([eQ(e1,{optional:!0})],pi.prototype,"itemStyler",2),o([eQ(e8)],pi.prototype,"rotation",2),o([eQ(e4)],pi.prototype,"outerRadiusOffset",2),o([eQ(e6)],pi.prototype,"outerRadiusRatio",2),o([eQ(e9)],pi.prototype,"strokeWidth",2),o([eQ(e4)],pi.prototype,"sectorSpacing",2),o([eQ(eJ)],pi.prototype,"title",2),o([eQ(eJ)],pi.prototype,"shadow",2),o([eQ(eJ)],pi.prototype,"calloutLabel",2),o([eQ(eJ)],pi.prototype,"sectorLabel",2),o([eQ(eJ)],pi.prototype,"calloutLine",2),o([eQ(eJ)],pi.prototype,"tooltip",2);var pa=class extends o1{constructor(t,e,i,a){super(t,e,i,a),this.angleKey=a.properties.angleKey,this.radiusKey=a.properties.radiusKey,this.calloutLabelKey=a.properties.calloutLabelKey,this.sectorLabelKey=a.properties.sectorLabelKey}},ps=class extends c4{constructor(t){super({moduleCtx:t,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:c1,label:dQ}}),this.properties=new pi,this.phantomNodeData=void 0,this.previousRadiusScale=new lZ,this.radiusScale=new lZ,this.phantomGroup=this.contentGroup.appendChild(new ax),this.phantomSelection=aL.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new ax({name:"pieCalloutLabels"})),this.calloutLabelSelection=new aL(this.calloutLabelGroup,ax),this.backgroundGroup=this.rootGroup.appendChild(new sE({name:`${this.id}-background`,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ax({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new lp),this.seriesItemEnabled=[],this.legendItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=pa,this.angleScale=new lZ,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.phantomGroup.opacity=.2,this.phantomGroup.zIndexSubOrder=[()=>this._declarationOrder,0]}get calloutNodeData(){return this.phantomNodeData??this.nodeData}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}get visible(){return super.visible&&(0===this.seriesItemEnabled.length||this.seriesItemEnabled.includes(!0))}nodeFactory(){let t=new c_;return t.miterLimit=1e9,t}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}async processData(t){if(null==this.data||!this.properties.isValid())return;let{data:e}=this,{visible:i,seriesItemEnabled:a}=this,{angleKey:s,angleFilterKey:r,radiusKey:n,calloutLabelKey:o,sectorLabelKey:l,legendItemKey:h}=this.properties,d=!this.ctx.animationManager.isSkipped(),u=[],c=[];h?u.push(dN(h,"band",{id:"legendItemKey"})):o?u.push(dN(o,"band",{id:"calloutLabelKey"})):l&&u.push(dN(l,"band",{id:"sectorLabelKey"}));let p=this.radiusScale.type,g=this.radiusScale.type;for(let m of(n&&c.push(dA(n,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),dL(n,p,{id:"radiusRaw"}),dB("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),o&&c.push(dL(o,"band",{id:"calloutLabelValue"})),l&&c.push(dL(l,"band",{id:"sectorLabelValue"})),h&&c.push(dL(h,"band",{id:"legendItemValue"})),r&&c.push(dw(r,g,{id:"angleFilterValue",onlyPositive:!0}),dL(r,g,{id:"angleFilterRaw"}),dB("angleFilterValue",[0,1],0,0)),d&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&u.length>0&&c.push(dV(this.processedData)),c.push(dG()),e=e.map((t,e)=>i&&a[e]?t:{...t,[s]:0}),await this.requestDataModel(t,e,{props:[...u,dw(s,g,{id:"angleValue",onlyPositive:!0}),dL(s,g,{id:"angleRaw"}),dB("angleValue",[0,1],0,0),...c]}),this.processedData?.defs?.values??[])){let{id:t,missing:e,property:i}=m,a=oI(this,e);"angleRaw"!==t&&a>0&&y.warnOnce(`no value was found for the key '${String(i)}' on ${a} data element${a>1?"s":""}`)}this.animationState.transition("updateData")}async maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;let{nodeData:t=[],phantomNodeData:e}=await this.createNodeData()??{};this.nodeData=t,this.phantomNodeData=e,this.nodeDataRefresh=!1}getProcessedDataIndexes(t){let e=t.resolveProcessedDataIndexById(this,"angleValue"),i=t.resolveProcessedDataIndexById(this,"angleRaw"),a=null!=this.properties.angleFilterKey?t.resolveProcessedDataIndexById(this,"angleFilterValue"):void 0,s=null!=this.properties.angleFilterKey?t.resolveProcessedDataIndexById(this,"angleFilterRaw"):void 0,r=this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue"):void 0,n=this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusRaw"):void 0;return{angleIdx:e,angleRawIdx:i,angleFilterIdx:a,angleFilterRawIdx:s,radiusIdx:r,radiusRawIdx:n,calloutLabelIdx:this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue"):void 0,sectorLabelIdx:this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue"):void 0,legendItemIdx:this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue"):void 0}}async createNodeData(){let{id:t,processedData:e,dataModel:i,angleScale:a}=this,{rotation:s}=this.properties;if(!e||!i||"ungrouped"!==e.type)return;let{angleIdx:r,angleRawIdx:n,angleFilterIdx:o,angleFilterRawIdx:l,radiusIdx:h,radiusRawIdx:d,calloutLabelIdx:u,sectorLabelIdx:c,legendItemIdx:p}=this.getProcessedDataIndexes(i),g=null!=l&&e.data.some(({values:t})=>t[l]>t[n]),y=0,m=0,f=[],x=null!=l?[]:void 0;return e.data.forEach((t,e)=>{let{datum:i,values:M}=t,b=g?M[o]:M[r],v=null==l||g?1:Math.sqrt(M[l]/M[n]),I=a.convert(y)+aE(s);y=b,m+=b;let D=a.convert(y)+aE(s),S=Math.abs(D-I),N=I+S/2,L=M[n],A=(null!=h?M[h]??1:1)*v,w=null!=d?M[d]:void 0,C=null!=p?M[p]:void 0,T=this.getLabels(i,N,S,!0,null!=u?M[u]:void 0,null!=c?M[c]:void 0,C),k=this.getSectorFormat(i,e,!1),E={itemId:e,series:this,datum:i,index:e,angleValue:L,midAngle:N,midCos:Math.cos(N),midSin:Math.sin(N),startAngle:I,endAngle:D,radius:A,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(A),0),sectorFormat:k,radiusValue:w,legendItemValue:C,enabled:this.seriesItemEnabled[e],...T};f.push(E),null!=x&&x.push({...E,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)})}),this.zerosumOuterRing.visible=0===m,{itemId:t,nodeData:f,labelData:f,phantomNodeData:x}}getLabels(t,e,i,a,s,r,n){let{calloutLabel:o,sectorLabel:l,legendItemKey:h}=this.properties,d=!a||o.enabled?this.properties.calloutLabelKey:void 0,u=!a||l.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!u&&!h)return{};let c={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return d&&i>aE(o.minAngle)&&(p.calloutLabel={...this.getTextAlignment(e),text:this.getLabelText(o,{...c,value:s}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),u&&(p.sectorLabel={text:this.getLabelText(l,{...c,value:r})}),null!=h&&null!=n&&(p.legendItem={key:h,text:n}),p}getTextAlignment(t){let e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=tx(Math.floor((aT(t)- -.75*Math.PI)/(Math.PI/2)),e.length);return e[i]}getSectorFormat(t,e,i){let a;let{callbackCache:s}=this.ctx,{angleKey:r,radiusKey:n,calloutLabelKey:o,sectorLabelKey:l,legendItemKey:h,fills:d,strokes:u,itemStyler:c}=this.properties,p=u[e%u.length],{fill:g,fillOpacity:y,stroke:m,strokeWidth:f,strokeOpacity:x,lineDash:M,lineDashOffset:b,cornerRadius:v}=t8(i&&this.properties.highlightStyle.item,{fill:d.length>0?d[e%d.length]:void 0,stroke:p,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);return c&&(a=s.call(c,{datum:t,angleKey:r,radiusKey:n,calloutLabelKey:o,sectorLabelKey:l,legendItemKey:h,fill:g,strokeOpacity:x,stroke:m,strokeWidth:f,fillOpacity:y,lineDash:M,lineDashOffset:b,cornerRadius:v,highlighted:i,seriesId:this.id})),{fill:a?.fill??g,fillOpacity:a?.fillOpacity??y,stroke:a?.stroke??m,strokeWidth:a?.strokeWidth??f,strokeOpacity:a?.strokeOpacity??x,lineDash:a?.lineDash??M,lineDashOffset:a?.lineDashOffset??b,cornerRadius:a?.cornerRadius??v}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){let e=[0,this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e);let i=t=>({...t,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(t.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){let t=Math.max(0,this.radiusScale.range[1]);if(0===t)return NaN;let e=this.properties.title?.spacing??0,i=Math.max(0,-t);return-t-(2+e)-i}async update({seriesRect:t}){let{title:e}=this.properties,i={seriesRectWidth:t?.width,seriesRectHeight:t?.height},a=null!=se(this.nodeDataDependencies,i);if(a&&(this._nodeDataDependencies=i),await this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(a),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),e){let t=this.getTitleTranslationY();e.node.y=isFinite(t)?t:0;let i=e.node.getBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),await this.updateSelections(),await this.updateNodes(t)}updateTitleNodes(){let{oldTitle:t}=this,{title:e}=this.properties;t!==e&&(t&&this.labelGroup?.removeChild(t.node),e&&(e.node.textBaseline="bottom",this.labelGroup?.appendChild(e.node)),this.oldTitle=e)}updateNodeMidPoint(){let t=t=>{let e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}};this.nodeData.forEach(t),this.phantomNodeData?.forEach(t)}async updateSelections(){await this.updateGroupSelection()}async updateGroupSelection(){let{itemSelection:t,highlightSelection:e,phantomSelection:i,highlightLabelSelection:a,calloutLabelSelection:s,labelSelection:r}=this,n=this.nodeData.map(t=>({...t,sectorFormat:{...t.sectorFormat}})),o=(t,e)=>{t.update(e,void 0,t=>this.getDatumId(t)),this.ctx.animationManager.isSkipped()&&t.cleanup()};o(t,this.nodeData),o(e,n),o(i,this.phantomNodeData??[]),s.update(this.calloutNodeData,t=>{let e=new aK;e.tag=0,e.pointerEvents=1,t.appendChild(e);let i=new a3;i.tag=1,i.pointerEvents=1,t.appendChild(i)}),r.update(this.nodeData),a.update(n)}async updateNodes(t){let e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.includes(!0);this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&e?.series===this,this.highlightLabel.visible=i&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();let a=this.ctx.animationManager.isSkipped(),s=(t,e,i,s)=>{let r=this.getSectorFormat(e.datum,e.itemId,s);e.sectorFormat.fill=r.fill,e.sectorFormat.stroke=r.stroke,a&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(s||a)&&(t.fill=r.fill,t.stroke=r.stroke),t.strokeWidth=r.strokeWidth,t.fillOpacity=r.fillOpacity,t.strokeOpacity=r.strokeOpacity,t.lineDash=r.lineDash,t.lineDashOffset=r.lineDashOffset,t.cornerRadius=r.cornerRadius,t.fillShadow=this.properties.shadow;let n=Math.max((this.properties.sectorSpacing+(null!=r.stroke?r.strokeWidth:0))/2,0);t.inset=n,t.lineJoin=this.properties.sectorSpacing>=0||n>0?"miter":"round"};this.itemSelection.each((t,e,i)=>s(t,e,i,!1)),this.highlightSelection.each((t,i,a)=>{s(t,i,a,!0),t.visible=i.itemId===e?.itemId}),this.phantomSelection.each((t,e,i)=>s(t,e,i,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){let{calloutLine:t}=this.properties,e=t.length,i=t.strokeWidth,a=t.colors??this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((t,r)=>{let n=t.datum,{calloutLabel:o,outerRadius:l}=n;if(o?.text&&!o.hidden&&0!==l){t.visible=!0,t.strokeWidth=i,t.stroke=a[r%a.length],t.fill=void 0;let h=n.midCos*l,d=n.midSin*l,u=n.midCos*(l+e),c=n.midSin*(l+e);if((o.collisionTextAlign??0!==o.collisionOffsetY)&&null!=o.box){let t=o.box,e=u,i=c;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),c<t.y?i=t.y:c>t.y+t.height&&(i=t.y+t.height);let a=e-u,r=i-c,n=Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),l=n-s;l>0&&(u+=a*l/n,c+=r*l/n)}t.x1=h,t.y1=d,t.x2=u,t.y2=c}else t.visible=!1})}getLabelOverflow(t,e,i){let a=i.x-this.centerX,s=i.x+i.width-this.centerX,r=i.y-this.centerY,n=i.y+i.height-this.centerY,o=1;e.x+1<a?o=(e.x+e.width-a)/e.width:e.x+e.width-1>s&&(o=(s-e.x)/e.width);let l=e.y+1<r||e.y+e.height-1>n;return{textLength:1===o?t.length:Math.floor(t.length*o)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){let{surroundingRadius:e}=this;if(null==e)return!1;let i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],a=e**2;return i.some(t=>t.x**2+t.y**2>a)}computeCalloutLabelCollisionOffsets(){let{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:a,minSpacing:s}=e,r=t.convert(0),n=t=>!t.calloutLabel||0===t.outerRadius,o=this.calloutNodeData,l=o.filter(t=>!n(t));if(l.forEach(t=>{let e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)}),l.length<=1)return;let h=l.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),d=l.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),u=l.filter(t=>t.midSin<0&&t.calloutLabel?.textAlign==="center").sort((t,e)=>t.midCos-e.midCos),c=l.filter(t=>t.midSin>=0&&t.calloutLabel?.textAlign==="center").sort((t,e)=>t.midCos-e.midCos),p=t=>{let e=t.calloutLabel;if(null==e)return tI.zero.clone();let s=t.outerRadius+i.length+a,r=t.midCos*s,n=t.midSin*s+e.collisionOffsetY,o=e.collisionTextAlign??e.textAlign,l=e.textBaseline;return a3.computeBBox(e.text,r,n,{font:this.properties.calloutLabel,textAlign:o,textBaseline:l})},g=(t,e,i)=>{let a=p(t).grow(s/2),r=p(e).grow(s/2);if(a.x<r.x+r.width&&a.x+a.width>r.x&&("to-top"===i?a.y<r.y+r.height:a.y+a.height>r.y)){let t="to-top"===i?a.y-r.y-r.height:a.y+a.height-r.y;e.calloutLabel.collisionOffsetY=t}},y=t=>{let e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--)g(t[e+1],t[e],"to-top");for(let e=i+1;e<t.length;e++)g(t[e-1],t[e],"to-bottom")},m=t=>{let e=l.some(t=>0!==t.calloutLabel.collisionOffsetY),i=t.map(t=>p(t)),a=i.map(t=>t.clone().grow(s/2)),n=!1;for(let e=0;e<a.length&&!n;e++){let i=a[e];for(let s=e+1;s<t.length;s++){let t=a[s];if(i.collidesBBox(t)){n=!0;break}}}let h=o.map(t=>{let{startAngle:e,endAngle:i,outerRadius:a}=t;return{startAngle:e,endAngle:i,innerRadius:r,outerRadius:a}}),d=i.some(t=>h.some(e=>cP(t,e)));(n||e||d)&&t.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{let e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};y(h),y(d),m(u),m(c)}updateCalloutLabelNodes(t){let{radiusScale:e}=this,{calloutLabel:i,calloutLine:a}=this.properties,s=a.length,{offset:r,color:n}=i,o=new a3;this.calloutLabelSelection.selectByTag(1).forEach(a=>{let{datum:l}=a,h=l.calloutLabel,d=Math.max(0,e.convert(l.radius));if(!h?.text||0===d||h.hidden){a.visible=!1;return}let u=d+s+r,c=l.midCos*u,p=l.midSin*u+h.collisionOffsetY,g={textAlign:h.collisionTextAlign??h.textAlign,textBaseline:h.textBaseline};o.text=h.text,o.x=c,o.y=p,o.setFont(this.properties.calloutLabel),o.setAlign(g);let y=o.getBBox(),m=h.text,f=!0;if(i.avoidCollisions){let{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(h.text,y,t);m=h.text.length===e?h.text:`${h.text.substring(0,e)}\u2026`,f=!i}a.text=m,a.x=c,a.y=p,a.setFont(this.properties.calloutLabel),a.setAlign(g),a.fill=n,a.visible=f})}async computeLabelsBBox(t,e){let i;let{calloutLabel:a,calloutLine:s}=this.properties,r=s.length,{offset:n,maxCollisionOffset:o,minSpacing:l}=a;if(!a.avoidCollisions)return null;await this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let h=[],d=new a3,{title:u}=this.properties;if(u?.text&&u.enabled){let t=this.getTitleTranslationY();isFinite(t)&&(d.text=u.text,d.x=0,d.y=t,d.setFont(u),d.setAlign({textBaseline:"bottom",textAlign:"center"}),i=d.getBBox(),h.push(i))}return(this.calloutNodeData.forEach(a=>{let s=a.calloutLabel;if(!s||0===a.outerRadius)return null;let u=a.outerRadius+r+n,c=a.midCos*u,p=a.midSin*u+s.collisionOffsetY;d.text=s.text,d.x=c,d.y=p,d.setFont(this.properties.calloutLabel),d.setAlign({textAlign:s.collisionTextAlign??s.textAlign,textBaseline:s.textBaseline});let g=d.getBBox();if(s.box=g,Math.abs(s.collisionOffsetY)>o){s.hidden=!0;return}if(i){let t=e.y-this.centerY,a=new tI(i.x-l,t,i.width+2*l,i.y+i.height+l-t);if(g.collidesBBox(a)){s.hidden=!0;return}}if(t.hideWhenNecessary){let{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:a}=this.getLabelOverflow(s.text,g,e),r=s.text.length>2&&t<2;if(i||r||a){s.hidden=!0;return}}s.hidden=!1,h.push(g)}),0===h.length)?null:tI.merge(h)}updateSectorLabelNodes(){let{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:a,fontWeight:s,fontFamily:r,positionOffset:n,positionRatio:o,color:l}=this.properties.sectorLabel,h=e>0,d=1===this.seriesItemEnabled.filter(Boolean).length,u=(t,u)=>{let{sectorLabel:c,outerRadius:p,startAngle:g,endAngle:y}=u,m=!1;if(c&&0!==p){let f=e*(1-o)+p*o+n;t.fill=l,t.fontStyle=a,t.fontWeight=s,t.fontSize=i,t.fontFamily=r,t.text=c.text,!h&&d?(t.x=0,t.y=0):(t.x=u.midCos*f,t.y=u.midSin*f),t.textAlign="center",t.textBaseline="middle";let x=t.getBBox(),M=[[x.x,x.y],[x.x+x.width,x.y],[x.x+x.width,x.y+x.height],[x.x,x.y+x.height]],b={startAngle:g,endAngle:y,innerRadius:e,outerRadius:p};M.every(([t,e])=>cR(t,e,b))&&(m=!0)}t.visible=m};this.labelSelection.each(u),this.highlightLabelSelection.each(u)}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius()}getDatumLegendName(t){let{angleKey:e,calloutLabelKey:i,sectorLabelKey:a,legendItemKey:s}=this.properties,{sectorLabel:r,calloutLabel:n,legendItem:o}=t;return s&&void 0!==o?o.text:i&&i!==e&&n?.text!==void 0?n.text:a&&a!==e&&r?.text!==void 0?r.text:void 0}pickNodeClosestDatum(t){return c2(this,t)}getTooltipHtml(t){if(!this.properties.isValid())return sN;let{datum:e,angleValue:i,sectorFormat:{fill:a},itemId:s}=t,r=dh(this.properties.title?.text),n=t0(i)?tf(i):String(i),o=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:r??o,content:r&&o?`${o}: ${n}`:n,backgroundColor:a},{datum:e,itemId:s,title:r,color:a,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(t){let{visible:e,processedData:i,dataModel:a}=this;if(!a||!i?.data.length||"category"!==t)return[];let{angleKey:s,calloutLabelKey:r,sectorLabelKey:n,legendItemKey:o}=this.properties;if(!o&&(!r||r===s)&&(!n||n===s))return[];let{calloutLabelIdx:l,sectorLabelIdx:h,legendItemIdx:d}=this.getProcessedDataIndexes(a),u=this.properties.title?.showInLegend&&this.properties.title.text,c=[];for(let t=0;t<i.data.length;t++){let{datum:a,values:p}=i.data[t],g=[];u&&g.push(u);let y=this.getLabels(a,2*Math.PI,2*Math.PI,!1,null!=l?p[l]:void 0,null!=h?p[h]:void 0,null!=d?p[d]:void 0);if(o&&void 0!==y.legendItem?g.push(y.legendItem.text):r&&r!==s&&y.calloutLabel?.text!==void 0?g.push(y.calloutLabel?.text):n&&n!==s&&y.sectorLabel?.text!==void 0&&g.push(y.sectorLabel?.text),0===g.length)continue;let m=this.getSectorFormat(a,t,!1);c.push({legendType:"category",id:this.id,itemId:t,seriesId:this.id,enabled:e&&this.legendItemEnabled[t],label:{text:g.join(" - ")},symbols:[{marker:{fill:m.fill,stroke:m.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}],legendItemName:null!=o?a[o]:void 0})}return c}onLegendItemClick(t){let{enabled:e,itemId:i,series:a,legendItemName:s}=t;a.id===this.id?this.toggleSeriesItem(i,e):null!=s&&this.toggleOtherSeriesItems(s,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.legendItemEnabled[t]=e,this.nodeData[t]&&(this.nodeData[t].enabled=e),this.nodeDataRefresh=!0}setLegendState(t){this.legendItemEnabled=t,this.ctx.updateService.update(4)}toggleOtherSeriesItems(t,e){if(!this.properties.legendItemKey||!this.dataModel)return;let i=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");this.processedData?.data.forEach(({values:a},s)=>{a[i]===t&&this.toggleSeriesItem(s,e)})}animateEmptyUpdateReady(t){let{animationManager:e}=this.ctx,i=c0(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);ev(this.id,"nodes",e,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(t,e)=>this.getDatumId(e)),dH(this,"callout",e,this.calloutLabelSelection),dH(this,"sector",e,this.labelSelection),dH(this,"highlight",e,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){let{itemSelection:t,highlightSelection:e,phantomSelection:i,processedData:a,radiusScale:s,previousRadiusScale:r}=this,{animationManager:n}=this.ctx,o=a?.reduced?.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);let l=(o?.moved.size??0)===0,h=(a?.defs.keys.length??0)>0,d=a?.reduced?.animationValidation?.uniqueKeys??!0;l&&h&&d||this.ctx.animationManager.skipCurrentBatch();let u=c0(!1,this.properties.rotation,s,r);ev(this.id,"nodes",n,[t,e,i],u.nodes,(t,e)=>this.getDatumId(e),o),dH(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),dH(this,"sector",this.ctx.animationManager,this.labelSelection),dH(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:t,highlightSelection:e,phantomSelection:i,radiusScale:a,previousRadiusScale:s}=this,{animationManager:r}=this.ctx,n=c0(!1,this.properties.rotation,a,s);ev(this.id,"nodes",r,[t,e,i],n.nodes,(t,e)=>this.getDatumId(e)),d$(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),d$(this,"sector",this.ctx.animationManager,this.labelSelection),d$(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){let{calloutLabelKey:e,sectorLabelKey:i,legendItemKey:a}=this.properties;if(this.processedData?.reduced?.animationValidation?.uniqueKeys){if(a)return t[a];if(e)return t[e];if(i)return t[i]}}getDatumId(t){let{index:e}=t,i=this.getDatumIdFromData(t.datum);return null!=i?String(i):`${e}`}onDataChange(){let{data:t,seriesItemEnabled:e,legendItemEnabled:i}=this;this.seriesItemEnabled=t?.map((t,i)=>e[i]??!0)??[],this.legendItemEnabled=t?.map((t,e)=>i[e]??!0)??[]}};ps.className="PieSeries",ps.type="pie";var pr={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:t=>new ps(t),tooltipDefaults:{range:"exact"},themeTemplate:{series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:hI,color:hL,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:hI,color:hD,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:hI,color:hN,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:hk,xOffset:3,yOffset:3,blur:5}}},paletteFactory:c9},pn={add:function(t,e){return"number"==typeof e?{x:t.x+e,y:t.y+e}:{x:t.x+e.x,y:t.y+e.y}},angle:function(t,e=ph()){return Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)},apply:function(t,e){return t.x=e.x,t.y=e.y,t},equal:function(t,e){return t.x===e.x&&t.y===e.y},distance:function(t,e){let i=po(t,e);return Math.sqrt(i.x*i.x+i.y*i.y)},distanceSquared:function(t,e){let i=po(t,e);return i.x*i.x+i.y*i.y},from:function(t,e){if("number"==typeof t)return{x:t,y:e};if("regionOffsetX"in t)return{x:t.regionOffsetX,y:t.regionOffsetY};if("offsetWidth"in t)return{x:t.offsetWidth,y:t.offsetHeight};if("width"in t)return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y+t.height}];if("x1"in t)return[{x:t.x1,y:t.y1},{x:t.x2,y:t.y2}];throw Error(`Values can not be converted into a vector: [${t}] [${e}]`)},gradient:function(t,e,i){let a=e.x-t.x;return(null==i?e.y-t.y:i-e.y-(i-t.y))/a},intercept:function(t,e,i){return(null==i?t.y:i-t.y)-e*t.x},intersectAtX:function(t,e,i=0,a){let s=t===1/0?1/0:t*i+e;return{x:i,y:null==a?s:a-s}},intersectAtY:function(t,e,i=0,a){return{x:t===1/0?1/0:(i-e)/t,y:null==a?i:a-i}},length:pl,lengthSquared:function(t){return t.x*t.x+t.y*t.y},multiply:function(t,e){return"number"==typeof e?{x:t.x*e,y:t.y*e}:{x:t.x*e.x,y:t.y*e.y}},normalized:function(t){let e=pl(t);return{x:t.x/e,y:t.y/e}},origin:ph,required:function(t){return{x:t?.x??0,y:t?.y??0}},rotate:function(t,e,i=ph()){let a=pl(t);return{x:i.x+a*Math.cos(e),y:i.y+a*Math.sin(e)}},round:function(t){return{x:Math.round(t.x),y:Math.round(t.y)}},sub:po};function po(t,e){return"number"==typeof e?{x:t.x-e,y:t.y-e}:{x:t.x-e.x,y:t.y-e.y}}function pl(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function ph(){return{x:0,y:0}}var pd=class extends eW{constructor(t,e){super(),this.onChange=t,this.onButtonsChange=e,this.align="start",this.position="top",this.size="normal",this.buttonOverrides=new Map}buttonConfigurations(){let t=[...this.buttons??[]];return this.draggable&&t.unshift({icon:"drag-handle",tooltip:"toolbarAnnotationsDragHandle",value:"drag",id:"drag"}),t?.map(t=>{let e=t.id??t.value,i=this.buttonOverrides.get(e);return null!=i?{...t,...i}:t})??[]}buttonsChanged(t){this.onButtonsChange(this.buttonConfigurations(),t)}overrideButtonConfiguration(t,e){let i=this.buttonOverrides.get(t);for(let a in null==i&&(i=Object.create(null),this.buttonOverrides.set(t,i)),e){let t=e[a];null==t?delete i[a]:i[a]=t}this.buttonsChanged(!0)}};o([sc(t=>{t.onChange(t.enabled)}),eQ(e0)],pd.prototype,"enabled",2),o([sc(t=>{t.onChange(t.enabled)}),eQ(iE([...os]),{optional:!0})],pd.prototype,"align",2),o([sc(t=>{t.onChange(t.enabled)}),eQ(iE(ol),{optional:!0})],pd.prototype,"position",2),o([eQ(e0)],pd.prototype,"draggable",2),o([sc(t=>{t.onChange(t.enabled)}),eQ(iE(["small","normal"]),{optional:!0})],pd.prototype,"size",2),o([sc(t=>{for(let e of t.buttons??[])null!=e.icon&&h.includes(e.icon)&&y.warnOnce(`Icon '${e.icon}' is deprecated, use another icon instead.`),"toolbarAnnotationsColor"===e.ariaLabel&&y.warnOnce(`Aria label '${e.ariaLabel}' is deprecated, use 'toolbarAnnotationsLineColor' instead.`);t.buttonsChanged(!1)}),eQ(it,{optional:!0})],pd.prototype,"buttons",2);var pu="ag-charts-toolbar",pc={align:"ag-charts-toolbar__align",section:"ag-charts-toolbar__section",button:"ag-charts-toolbar__button",icon:"ag-charts-toolbar__icon",label:"ag-charts-toolbar__label"},pp={top:"ag-charts-toolbar--top",right:"ag-charts-toolbar--right",bottom:"ag-charts-toolbar--bottom",left:"ag-charts-toolbar--left",floating:"ag-charts-toolbar--floating","floating-top":"ag-charts-toolbar--floating-top","floating-bottom":"ag-charts-toolbar--floating-bottom",small:"ag-charts-toolbar--small",normal:"ag-charts-toolbar--normal",hidden:"ag-charts-toolbar--hidden",preventFlash:"ag-charts-toolbar--prevent-flash",floatingHidden:"ag-charts-toolbar--floating-hidden",align:{start:"ag-charts-toolbar__align--start",center:"ag-charts-toolbar__align--center",end:"ag-charts-toolbar__align--end"},button:{first:"ag-charts-toolbar__button--first",last:"ag-charts-toolbar__button--last",active:"ag-charts-toolbar__button--active",hiddenValue:"ag-charts-toolbar__button--hidden-value",hiddenToggled:"ag-charts-toolbar__button--hidden-toggled",fillVisible:"ag-charts-toolbar__button--fill-visible",strokeWidthVisible:"ag-charts-toolbar__button--stroke-width-visible",withTransition:"ag-charts-toolbar__button--with-transition",dragHandle:"ag-charts-toolbar__button--drag-handle",dragging:"ag-charts-toolbar__button--dragging"}},pg=class extends rA{constructor(t){for(let e of(super(),this.ctx=t,this.enabled=!0,this.seriesType=new pd(this.onGroupChanged.bind(this,"seriesType"),this.onGroupButtonsChanged.bind(this,"seriesType")),this.annotations=new pd(this.onGroupChanged.bind(this,"annotations"),this.onGroupButtonsChanged.bind(this,"annotations")),this.annotationOptions=new pd(this.onGroupChanged.bind(this,"annotationOptions"),this.onGroupButtonsChanged.bind(this,"annotationOptions")),this.ranges=new pd(this.onGroupChanged.bind(this,"ranges"),this.onGroupButtonsChanged.bind(this,"ranges")),this.zoom=new pd(this.onGroupChanged.bind(this,"zoom"),this.onGroupButtonsChanged.bind(this,"zoom")),this.dragState={client:{x:0,y:0},position:{x:0,y:0},detached:!1},this.horizontalSpacing=10,this.verticalSpacing=10,this.floatingDetectionRange=38,this.positions={top:new Set,left:new Set,right:new Set,bottom:new Set,floating:new Set,"floating-top":new Set,"floating-bottom":new Set},this.positionAlignments={top:{},left:{},right:{},bottom:{},floating:{},"floating-top":{},"floating-bottom":{}},this.groupCallers={seriesType:new Set,annotations:new Set,annotationOptions:new Set,ranges:new Set,zoom:new Set},this.groupButtons={seriesType:[],annotations:[],annotationOptions:[],ranges:[],zoom:[]},this.ariaToolbars=[{groups:["seriesType","annotations"],destroyFns:[],resetListeners:()=>{}},{groups:["annotationOptions"],destroyFns:[],resetListeners:()=>{}},{groups:["ranges"],destroyFns:[],resetListeners:()=>{}},{groups:["zoom"],destroyFns:[],resetListeners:()=>{}}],this.pendingButtonToggledEvents=[],this.groupProxied=new Map,this.hasNewLocale=!0,this.elements={},ol))this.elements[e]=t.domManager.addChild("canvas-overlay",`toolbar-${e}`),this.elements[e].role="presentation",this.renderToolbar(e);this.toggleVisibilities();let e=t.regionManager.getRegion("series");this.destroyFns.push(t.interactionManager.addListener("hover",this.onHover.bind(this),63),t.interactionManager.addListener("leave",this.onLeave.bind(this),63),e.addListener("drag-start",this.toggleNoPointerEvents.bind(this,!0),40),e.addListener("drag-end",this.toggleNoPointerEvents.bind(this,!1),63),t.toolbarManager.addListener("button-toggled",this.onButtonToggled.bind(this)),t.toolbarManager.addListener("button-updated",this.onButtonUpdated.bind(this)),t.toolbarManager.addListener("group-toggled",this.onGroupToggled.bind(this)),t.toolbarManager.addListener("group-updated",this.onGroupUpdated.bind(this)),t.toolbarManager.addListener("floating-anchor-changed",this.onFloatingAnchorChanged.bind(this)),t.toolbarManager.addListener("proxy-group-options",this.onProxyGroupOptions.bind(this)),t.layoutManager.registerElement(2,this.onLayoutStart.bind(this)),t.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),t.updateService.addListener("pre-dom-update",this.onPreDomUpdate.bind(this)),t.updateService.addListener("update-complete",this.onUpdateComplete.bind(this)),t.localeManager.addListener("locale-changed",()=>{this.hasNewLocale=!0}),()=>this.destroyElements())}destroyElements(){for(let t of(this.ctx.domManager.removeStyles(pu),Object.keys(this.elements)))this.ctx.domManager.removeChild("canvas-overlay",`toolbar-${t}`)}onHover(t){let{enabled:e,elements:i,floatingDetectionRange:a,ctx:{scene:s}}=this,{offsetY:r,sourceEvent:{target:n}}=t,{FloatingBottom:o,FloatingTop:l}=oo;if(!e)return;let h=i[o],d=i[l],u=r>h.offsetTop-a&&r<s.canvas.element.offsetHeight||n===h,c=d.offsetTop+d.offsetHeight+a,p=r>0&&r<c||n===d;this.translateFloatingElements(o,u),this.translateFloatingElements(l,p)}onLeave(t){let{enabled:e,ctx:{scene:i}}=this,{relatedElement:a,targetElement:s}=t,{FloatingBottom:r,FloatingTop:n}=oo;e&&s===i.canvas.element&&(or.some(t=>this.groupButtons[t].some(t=>t===a))||(this.translateFloatingElements(r,!1),this.translateFloatingElements(n,!1)))}toggleNoPointerEvents(t){this.groupButtons.annotationOptions.forEach(e=>e.classList.toggle("ag-charts-toolbar__no-pointer-events",t))}onGroupChanged(t){null==this[t]||this.groupProxied.has(t)||(this.createGroup(t),this.toggleVisibilities())}onGroupButtonsChanged(t,e,i){if(!(!this.enabled||this.groupProxied.has(t))){if(i)for(let e of this[t].buttonConfigurations())this.refreshButtonContent(t,e);else this.createGroupButtons(t,e);this.toggleVisibilities()}}onLayoutComplete(t){for(let t of ol)this.elements[t].classList.remove(pp.preventFlash);this.enabled&&this.refreshInnerLayout(t.series.rect)}toggleButtonsTransition(t){let e=pp.button.withTransition;for(let i of Object.values(this.groupButtons).flat())t&&!i.classList.contains(e)&&i.getBoundingClientRect(),i.classList.toggle(e,t)}onPreDomUpdate(){this.toggleButtonsTransition(!1)}onUpdateComplete(){this.toggleButtonsTransition(!0)}onButtonUpdated(t){let{type:e,group:i,id:a,...s}=t;this[i].overrideButtonConfiguration(a,s)}setButtonActive(t,e){t.classList.toggle(pp.button.active,e)}setButtonChecked(t,e){"switch"===t.role&&(t.ariaChecked=e.toString())}setButtonGroupFirstLast(t){let e=Array.from(t.childNodes??[]),i=(t,e,i)=>{let a=!e.classList.contains(pp.button.hiddenToggled);return e.classList.toggle(i,a&&t),!a&&t},a=!0;e.forEach(t=>a=i(a,t,pp.button.first));let s=!0;e.toReversed().forEach(t=>s=i(s,t,pp.button.last))}onButtonToggled(t){let{group:e,id:i,active:a,enabled:s,visible:r,checked:n}=t;if(0===this.groupButtons[e].length){this.pendingButtonToggledEvents.push(t);return}let o=this.groupButtons[e].find(t=>t.dataset.toolbarId===`${i}`);null!=o&&(o.ariaDisabled=`${!s}`,o.classList.toggle(pp.button.hiddenToggled,!r),this.setButtonActive(o,a),this.setButtonChecked(o,n),this.setButtonGroupFirstLast(o.parentNode))}onGroupToggled(t){let{caller:e,group:i,active:a,visible:s}=t;this.toggleGroup(e,i,a,s),this.toggleVisibilities()}onGroupUpdated(t){let{group:e}=t;for(let t of this.ariaToolbars)if(t.groups.includes(e)){t.resetListeners();return}}onFloatingAnchorChanged(t){let{elements:e,positions:i,horizontalSpacing:a,verticalSpacing:s}=this,{group:r,anchor:n}=t,o=e.floating;if(this.dragState.detached||o.classList.contains(pp.hidden)||(this.dragState.detached=!1,!i.floating.has(r)))return;let l=n.position??"above",{offsetWidth:h,offsetHeight:d}=o,u=n.y-d-s,c=n.x-h/2;"below"===l?u=n.y+s:"right"===l?(u=n.y-d/2,c=n.x+a):"above-left"===l&&(c=n.x);let p=new tI(c,u,h,d);this.positionGroup(o,r,p)}positionGroup(t,e,i){let{ctx:{domManager:a}}=this,s=a.getBoundingClientRect();i.x=td(0,i.x,s.width-i.width),i.y=td(0,i.y,s.height-i.height);let r=`${Math.floor(i.x)}px`,n=`${Math.floor(i.y)}px`;(t.style.getPropertyValue("left")!==r||t.style.getPropertyValue("top")!==n)&&(t.style.setProperty("left",r),t.style.setProperty("top",n),this.onGroupMoved(e,i))}onGroupMoved(t,e){let{groupButtons:i,ctx:{toolbarManager:a}}=this;for(let s of i[t]){if(s.classList.contains(pp.button.hiddenToggled))continue;let i=s.offsetParent;a.buttonMoved(t,s.dataset.toolbarId,new tI(s.offsetLeft+(i?.offsetLeft??0),s.offsetTop+(i?.offsetTop??0),s.offsetWidth,s.offsetHeight),e)}}buttonRect(t,e=this.ctx.domManager.getBoundingClientRect()){let i=t.getBoundingClientRect();return new tI(i.left-e.left,i.top-e.top,i.width,i.height)}onProxyGroupOptions(t){if(!this.enabled)return;let{caller:e,group:i,options:a}=t;this.groupProxied.set(i,a),this[i].set(a),this.toggleGroup(e,i,void 0,a.enabled),this.createGroup(i,a.enabled,a.position),a.enabled&&this.createGroupButtons(i,a.buttons)}createGroup(t,e,i){for(let a of(e??(e=this[t].enabled),i??(i=this[t].position),ol))e&&i===a?this.positions[a].add(t):this.positions[a].delete(t)}createGroupButtons(t,e=[]){let i,a;for(let e of this.groupButtons[t])e.remove();if(this.groupButtons[t]=[],0===e.length)return;let{align:s,position:r}=this[t],n=this.positionAlignments[r][s];if(!n)return;let o=e=>{let i=Array.from(n.children),a="data-group",s="data-section",r=i.find(i=>i.getAttribute(a)===t&&i.getAttribute(s)===(e??""));if(!r){(r=te("div")).role="presentation",r.setAttribute(a,t),r.setAttribute(s,e??"");let o=on[t],l=i.find(t=>on[t.getAttribute(a)]>o);null!=l?n.insertBefore(r,l):n.appendChild(r),this.destroyFns.push(()=>r.remove())}return r.classList.add(pc.section,pp[this[t].size]),r},l=e.at(0)?.section,h=o(l);for(let i of e){l!==i.section&&(this.setButtonGroupFirstLast(h),h=o(i.section)),l=i.section;let e=this.createButtonElement(t,i);h.appendChild(e),this.groupButtons[t].push(e)}this.setButtonGroupFirstLast(h),oh(r)&&(i=()=>this.translateFloatingElements(r,!0),a=()=>this.translateFloatingElements(r,!1)),this.createAriaToolbar(t,n,i,a,()=>{this.ctx.toolbarManager.cancel(t)})}createAriaToolbar(t,e,i,a,s){let r=this.computeAriaOrientation(this[t].position),n=this.getAriaToolbar(t);n.resetListeners=()=>{let t=n.groups.map(t=>this.groupButtons[t]).flat().filter(t=>!t.classList.contains(pp.button.hiddenToggled)&&!t.classList.contains(pp.button.dragHandle));n.destroyFns.forEach(t=>t()),n.destroyFns=r1({orientation:r,toolbar:e,buttons:t,onEscape:s,onFocus:i,onBlur:a})},n.resetListeners(),this.updateToolbarAriaLabel(t,e)}computeAriaOrientation(t){return({top:"horizontal",right:"vertical",bottom:"horizontal",left:"vertical",floating:"horizontal","floating-top":"horizontal","floating-bottom":"horizontal"})[t]}toggleGroup(t,e,i,a){if(!0===a?this.groupCallers[e].add(t):!1===a&&this.groupCallers[e].delete(t),null!=i)for(let t of this.groupButtons[e])this.setButtonActive(t,i)}processPendingEvents(){for(let t of(this.pendingButtonToggledEvents??[]).slice())this.onButtonToggled(t);this.pendingButtonToggledEvents=[]}onLayoutStart(t){this.enabled&&(this.refreshOuterLayout(t.layoutBox),this.refreshLocale())}refreshOuterLayout(t){let{elements:e,horizontalSpacing:i,verticalSpacing:a}=this;e.top.classList.contains(pp.hidden)||t.shrink(e.top.offsetHeight+a,"top"),e.right.classList.contains(pp.hidden)||t.shrink(e.right.offsetWidth+i,"right"),e.bottom.classList.contains(pp.hidden)||(t.shrink(e.bottom.offsetHeight+a,"bottom"),e.bottom.style.top=`${t.y+t.height+a}px`),e.left.classList.contains(pp.hidden)||t.shrink(e.left.offsetWidth+i,"left")}refreshLocale(){let{hasNewLocale:t}=this;if(t){for(let t of or){for(let e of this[t].buttonConfigurations())this.refreshButtonContent(t,e);this.updateToolbarAriaLabel(t)}this.hasNewLocale=!1}}refreshInnerLayout(t){let{elements:e,verticalSpacing:i}=this,{FloatingBottom:a,FloatingTop:s}=oo;e.top.style.top=`${t.y-e.top.offsetHeight-i}px`,e.top.style.left=`${t.x}px`,e.top.style.width=`${t.width}px`,e.bottom.style.left=`${t.x}px`,e.bottom.style.width=`${t.width}px`,e.right.style.top=`${t.y}px`,e.right.style.right="0px",e.right.style.height=`${t.height}px`,e.left.style.top=`${t.y}px`,e.left.style.left="0px",e.left.style.height=`${t.height}px`,e[s].style.top=`${t.y}px`,e[a].style.top=`${t.y+t.height-e[a].offsetHeight}px`}refreshButtonContent(t,e){let i=this.buttonId(e),a=this.groupProxied.get(t)?.buttons?.find(t=>this.buttonId(t)===i)??e,s=this.groupButtons[t].find(t=>t.getAttribute("data-toolbar-id")===i);null!=s&&this.updateButton(s,a)}toggleVisibilities(){if(null==this.elements)return;let t=t=>this[t].enabled&&this.groupCallers[t].size>0,e=t=>e=>{let i=this.buttonId(e);return null==i||i===t.dataset.toolbarId};for(let e of ol){let i=this.enabled&&Array.from(this.positions[e].values()).some(t);"floating"!==e||i||(this.dragState.detached=!1),this.elements[e].classList.toggle(pp.hidden,!i)}for(let i of or){if(null==this[i])continue;let a=t(i);for(let t of this.groupButtons[i]){let s=a&&this[i].buttonConfigurations().some(e(t));t.classList.toggle(pp.button.hiddenValue,!s)}}}translateFloatingElements(t,e){let{elements:i,verticalSpacing:a,positionAlignments:s}=this,r=i[t],n=Object.values(s[t]);r.classList.toggle(pp.floatingHidden,!e);let o="floating-bottom"===t?1:-1;for(let t of n)t.style.transform=e&&""!==t.style.transform?"translateY(0)":`translateY(${(r.offsetHeight+a)*o}px)`}renderToolbar(t="top"){let e=this.elements[t];for(let i of(e.classList.add(pu,pp[t],pp.preventFlash),oh(t)&&e.classList.add(pp.floatingHidden),os)){let a=te("div");a.role="presentation",a.classList.add(pc.align,pp.align[i]),e.appendChild(a),this.positionAlignments[t][i]=a}}createButtonElement(t,e){let i=te("button");return i.classList.add(pc.button),i.dataset.toolbarGroup=t,sx(i,"tabindex",-1),e.haspopup&&sM(i,{"aria-haspopup":!0,"aria-expanded":!1}),i.dataset.toolbarId=this.buttonId(e),i.addEventListener("click",r5(i,a=>this.onButtonPress(a,i,t,e.id,e.value))),"drag"===e.value&&(i.addEventListener("mousedown",r5(i,e=>this.onDragStart(e,i,t))),i.classList.add(pp.button.dragHandle)),"switch"===e.role&&sM(i,{role:e.role,"aria-checked":!1}),this.updateButton(i,e),this.destroyFns.push(()=>i.remove()),i}getAriaToolbar(t){for(let e of this.ariaToolbars)if(e.groups.includes(t))return e;throw Error(`AG Charts - cannot find aria-toolbar of '${t}'`)}updateToolbarAriaLabel(t,e){if(!e){let{align:i,position:a}=this[t];if(!(e=this.positionAlignments[a][i]))return}e.ariaLabel=this.ctx.localeManager.t({seriesType:"ariaLabelFinancialCharts",annotations:"ariaLabelFinancialCharts",annotationOptions:"ariaLabelAnnotationOptionsToolbar",ranges:"ariaLabelRangesToolbar",zoom:"ariaLabelZoomToolbar"}[t])}expandButtonConfig(t,e){return"switch"!==e.role||"true"!==t.ariaChecked||void 0===e.checkedOverrides?e:{icon:e.checkedOverrides.icon??e.icon,label:e.checkedOverrides.label??e.label,ariaLabel:e.checkedOverrides.ariaLabel??e.ariaLabel,tooltip:e.checkedOverrides.tooltip??e.tooltip}}updateButton(t,e){let{domManager:i,localeManager:a}=this.ctx,{icon:s,label:r,ariaLabel:n,tooltip:o}=this.expandButtonConfig(t,e);o&&(t.title=a.t(o));let l="";if(null!=s&&(l=`<span class="${i.getIconClassNames(s)} ${pc.icon}"></span>`),null!=r){let t=a.t(r);l=`${l}<span class="${pc.label}">${t}</span>`}t.innerHTML=l,t.classList.toggle(pp.button.fillVisible,null!=e.fill),t.style.setProperty("--fill",e.fill??null);let h=null!=e.strokeWidth;t.classList.toggle(pp.button.strokeWidthVisible,h),t.style.setProperty("--strokeWidth",h?`${e.strokeWidth}px`:null),sx(t,"aria-label",n?this.ctx.localeManager.t(n):void 0)}onButtonPress(t,e,i,a,s){this.ctx.toolbarManager.pressButton(i,this.buttonId({id:a,value:s}),s,this.buttonRect(e),t)}onDragStart(t,e,i){let a=this.elements.floating;t.preventDefault(),t.stopPropagation(),this.dragState={client:pn.from(t.clientX,t.clientY),position:pn.from(Number(a.style.getPropertyValue("left").replace("px","")),Number(a.style.getPropertyValue("top").replace("px",""))),detached:!0},e.classList.toggle(pp.button.dragging,!0);let s=t=>this.onDrag(t,i),r=tt();r.addEventListener("mousemove",s),r.addEventListener("mouseup",()=>{e.classList.toggle(pp.button.dragging,!1),r.removeEventListener("mousemove",s)},{once:!0}),this.ctx.toolbarManager.groupMoved(i)}onDrag(t,e){let{elements:i,dragState:a}=this,s=i.floating,{offsetWidth:r,offsetHeight:n}=s,o=pn.sub(pn.from(t.clientX,t.clientY),a.client),l=pn.add(a.position,o),h=new tI(l.x,l.y,r,n);this.positionGroup(s,e,h)}buttonId(t){let{id:e,value:i,label:a}=t;return null!=e?e:null!=i&&"object"!=typeof i?String(i):a??""}};o([sc(t=>{t.processPendingEvents(),t.toggleVisibilities()}),eQ(e0)],pg.prototype,"enabled",2);var py={type:"root",optionsKey:"toolbar",packageType:"community",chartTypes:["cartesian"],moduleFactory:t=>new pg(t),themeTemplate:{toolbar:{enabled:!0,seriesType:{enabled:!1,position:"left",align:"start",buttons:[{tooltip:"toolbarSeriesTypeDropdown",value:"type",haspopup:!0}]},annotations:{enabled:!0,position:"left",align:"start",buttons:[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu",section:"line-annotations",haspopup:!0},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu",section:"text-annotations",haspopup:!0},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu",section:"shape-annotations",haspopup:!0},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu",section:"measure-annotations",haspopup:!0},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear",section:"tools"}]},annotationOptions:{enabled:!0,position:"floating",align:"start",draggable:!0,buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color",haspopup:!0},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color",haspopup:!0},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color",haspopup:!0},{tooltip:"toolbarAnnotationsTextSize",value:"text-size",haspopup:!0},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width",haspopup:!0},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type",haspopup:!0},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings",haspopup:!0},{role:"switch",icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]},ranges:{enabled:!1,position:da,align:"start",buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:2592e6},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:7776e6},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:15552e6},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(t,e)=>[new Date(`${new Date(e).getFullYear()}-01-01`).getTime(),e],id:"year-to-date"},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:31536e6},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(t,e)=>[t,e],id:"all"}]},zoom:{enabled:!0,position:"top",align:"end",buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right"},{icon:"pan-start",tooltip:"toolbarZoomPanStart",value:"pan-start"},{icon:"pan-end",tooltip:"toolbarZoomPanEnd",value:"pan-end"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset"}]}}}},pm=class extends ls{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();let{nodes:t}=this.getOptions();this.series.forEach(e=>{("sankey"===e.type||"chord"===e.type)&&e.setChartNodes(t)})}performLayout(t){let{seriesRoot:e,annotationRoot:i,highlightRoot:a}=this,{layoutBox:s}=t,r=s.clone();for(let t of(s.shrink(this.seriesArea.padding.toJson()),this.seriesRect=s,this.animationRect=s,e.visible=this.series.some(t=>t.visible),[e,i,a]))t.translationX=Math.floor(s.x),t.translationY=Math.floor(s.y),t.setClipRect(r.clone());this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:r,paddedRect:s}})}};pm.className="FlowProportionChart",pm.type="flow-proportion";var pf=class extends rf{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}computeRange(){}getAxisLinePoints(){}};o([eQ(iE(["polygon","circle"],"a polar axis shape"))],pf.prototype,"shape",2),o([eQ(e6)],pf.prototype,"innerRadiusRatio",2);var px=class extends ls{getChartType(){return"gauge"}updateRadialGauge(t,e){let i,a;let s=this.axes.find(t=>"x"===t.direction);if(!(s instanceof pf))return;s.computeRange();let r=t.x,n=r+t.width,o=t.y,l=o+t.height,[h,d]=s.range,u=aC(d-h)>Math.PI,c=u||ak(1.5*Math.PI,h,d),p=u||ak(0*Math.PI,h,d),g=u||ak(.5*Math.PI,h,d),m=u||ak(1*Math.PI,h,d);i=m&&!p?"right":!m&&p?"left":"center",a=c&&!g?"bottom":!c&&g?"top":"middle";let f=cj({startAngle:h,endAngle:d,innerRadius:0,outerRadius:.5}),x=-(2*(f.x+f.width/2)),M=-(2*(f.y+f.height/2)),{minimumRadius:b=0,maximumRadius:v}=e,I=Math.max(.5*Math.min(t.width/f.width,t.height/f.height),0),D=Math.min(v??1/0,Math.max(I,b??0));for(let e=0;e<8;e+=1){let i=D<=b||7===e,a=t.x+t.width/2+x*D,h=t.y+t.height/2+M*D;s.translation.x=a,s.translation.y=h,s.gridLength=D,s.calculateLayout();let d=s.computeLabelsBBox({hideWhenNecessary:i},t);if(i)break;let u=0;if(null!=d){let t=d.x+a,e=t+d.width,i=d.y+h,s=i+d.height;u=Math.max(o-i,r-t,s-l,e-n,0)}if(u>0)D=Math.max(D-u,b);else break}s.translation.x=t.x+t.width/2+x*D,s.translation.y=t.y+t.height/2+M*D,e.centerX=t.width/2+x*D,e.centerY=t.height/2+M*D,e.radius=D,e.textAlign=i,e.verticalAlign=a,(0===D||D>I)&&y.warnOnce("There was insufficient space to display the Radial Gauge.")}updateLinearGauge(t,e){let i=this.axes.find(t=>"x"===t.direction),a=this.axes.find(t=>"y"===t.direction);if(!(i instanceof rb)||!(a instanceof rb))return t;let{horizontal:s,thickness:r}=e,n=0,o=0,l=new lZ;l.domain=[0,100],l.range=s?i.range:a.range;let h=l.ticks();s?n=e.computeInset("x",h):o=e.computeInset("y",h);let d=t.width-Math.abs(n),u=t.height-Math.abs(o),c=Math.max(s?d:r,0),p=Math.max(s?r:u,0),g=t.x+(d-c)/2+Math.max(n,0),m=t.y+(u-p)/2-Math.min(o,0);i.range=[0,c],i.gridLength=c,i.calculateLayout(),i.translation.x=g,i.translation.y=m+("bottom"===i.position?r:0),a.range=[0,p],a.gridLength=p,a.calculateLayout(),a.translation.x=g+("right"===a.position?r:0),a.translation.y=m,e.originX=g-t.x,e.originY=m-t.y,(0===c||0===p)&&y.warnOnce("There was insufficient space to display the Linear Gauge.")}performLayout(t){let{seriesRoot:e,annotationRoot:i,highlightRoot:a,series:s,seriesArea:r}=this,{layoutBox:n}=t,o=n.clone();n.shrink(r.padding.toJson());let l=this.series[0];for(let t of("radial-gauge"===l.type?this.updateRadialGauge(n,l):"linear-gauge"===l.type&&this.updateLinearGauge(n,l),this.axes.forEach(t=>t.update()),this.seriesRect=o.clone().translate(o.x-n.x,o.y-n.y),this.animationRect=n,e.visible=s.some(t=>t.visible),[e,i,a]))t.translationX=Math.floor(n.x),t.translationY=Math.floor(n.y);this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:e.visible,rect:o,paddedRect:n}})}getAriaLabel(){let t=[],e=this.getCaptionText();for(let i of(0!==e.length&&t.push(e),this.series))t.push(i.getCaptionText());let i=t.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};px.className="GaugeChart",px.type="gauge";var pM=class extends ls{constructor(t,e){super(t,e)}getChartType(){return"hierarchy"}performLayout(t){let{seriesRoot:e,annotationRoot:i,highlightRoot:a}=this,{layoutBox:s}=t,r=s.clone();for(let t of(s.shrink(this.seriesArea.padding.toJson()),this.seriesRect=s,this.animationRect=s,[e,i,a]))t.translationX=Math.floor(s.x),t.translationY=Math.floor(s.y);e.visible=this.series[0].visible,e.setClipRect(s.clone()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:r,paddedRect:s}})}getAriaLabel(){let t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}};pM.className="HierarchyChart",pM.type="hierarchy";var pb=class extends ls{constructor(t,e){super(t,e),this.padding=new rE(40),this.ctx.axisManager.axisGroup.zIndex=6}getChartType(){return"polar"}async performLayout(t){let{layoutBox:e}=t,i=e.clone();e.shrink(this.seriesArea.padding.toJson()),this.seriesRect=e,this.animationRect=e,await this.computeCircle(e),this.axes.forEach(t=>t.update()),this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:i,paddedRect:e}})}updateAxes(t,e,i){let a=this.axes.find(t=>"x"===t.direction),s=this.axes.find(t=>"y"===t.direction);if(!(a instanceof pf)||!(s instanceof pf))return;let r=a.scale,n=s.innerRadiusRatio;a.innerRadiusRatio=n,a.computeRange(),a.gridLength=i,s.gridAngles=r.ticks?.().map(t=>r.convert(t)),s.gridRange=a.range,s.range=[i,i*n],[a,s].forEach(i=>{i.translation.x=t,i.translation.y=e,i.calculateLayout()})}async computeCircle(t){let e=this.series.filter(pv),i=this.axes.filter(pI),a=(t,i,a)=>{this.updateAxes(t,i,a),e.forEach(e=>{e.centerX=t,e.centerY=i,e.radius=a});let s=e.filter(t=>"donut"===t.type||"pie"===t.type);if(s.length>1){let t=s.map(t=>{let e=t.getInnerRadius();return{series:t,innerRadius:e}}).sort((t,e)=>t.innerRadius-e.innerRadius);t.at(-1).series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},s=t.x+t.width/2,r=t.y+t.height/2,n=Math.max(0,Math.min(t.width,t.height)/2),o=n;a(s,r,o);let l=async({hideWhenNecessary:l=!1}={})=>{let h=[];for(let a of W(i,e)){let e=await a.computeLabelsBBox({hideWhenNecessary:l},t);e&&h.push(e)}if(0===h.length){a(s,r,n);return}let d=tI.merge(h),u=this.refineCircle(d,o,t);a(u.centerX,u.centerY,u.radius),o=u.radius};for(let a of(await l(),await l(),await l(),await l({hideWhenNecessary:!0}),await l({hideWhenNecessary:!0}),W(i,e)))await a.computeLabelsBBox({hideWhenNecessary:!0},t);return{radius:o,centerX:s,centerY:r}}refineCircle(t,e,i){let a=Math.max(0,-e-t.x),s=Math.max(0,-e-t.y),r=Math.max(0,t.x+t.width-e),n=Math.max(0,t.y+t.height-e);a=r=Math.max(a,r),s=n=Math.max(s,n);let o=Math.min(i.width-a-r,i.height-s-n)/2,l=Math.min(.5*i.width/2,.5*i.height/2);if(o<l){let t=a+r,e=s+n;if(2*(o=l)+e>i.height){let t=i.height-2*o;2*Math.min(s,n)>t?(s=t/2,n=t/2):s>n?s=t-n:n=t-s}if(2*o+t>i.width){let t=i.width-2*o;2*Math.min(a,r)>t?(a=t/2,r=t/2):a>r?a=t-r:r=t-a}}let h=a+2*o+r,d=s+2*o+n;return{centerX:i.x+(i.width-h)/2+a+o,centerY:i.y+(i.height-d)/2+s+o,radius:o}}};function pv(t){return t instanceof c4}function pI(t){return t instanceof pf}pb.className="PolarChart",pb.type="polar";var pD=class extends ls{constructor(t,e){super(t,e)}getChartType(){return"standalone"}performLayout(t){let{seriesRoot:e,annotationRoot:i,highlightRoot:a}=this,{layoutBox:s}=t,r=s.clone();for(let t of(s.shrink(this.seriesArea.padding.toJson()),this.seriesRect=s,this.animationRect=s,[e,i,a]))t.translationX=Math.floor(s.x),t.translationY=Math.floor(s.y);e.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:!0,rect:r,paddedRect:s}})}getAriaLabel(){let t=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t})}};pD.className="StandaloneChart",pD.type="standalone";var pS=Math.PI/180,pN=t=>t*pS,pL=t=>-Math.log(Math.tan(.25*Math.PI+t*pS*.5)),pA=t=>t/pS,pw=t=>(Math.atan(Math.exp(-t))-.25*Math.PI)/(.5*pS),pC=class t{constructor(e,i){this.domain=e,this.range=i,this.type="mercator",this.bounds=t.bounds(e)}static bounds(t){let[[e,i],[a,s]]=t,r=pN(e),n=pL(i),o=pN(a),l=pL(s);return new tI(Math.min(r,o),Math.min(n,l),Math.abs(o-r),Math.abs(l-n))}static fixedScale(){return new t([[pA(0),pw(0)],[pA(1),pw(1)]],[[0,0],[1,1]])}convert([t,e]){let[[i,a],[s,r]]=this.range,n=(s-i)/this.bounds.width,o=(r-a)/this.bounds.height;return[(pN(t)-this.bounds.x)*n+i,(pL(e)-this.bounds.y)*o+a]}invert([t,e]){let[[i,a],[s,r]]=this.range,n=(s-i)/this.bounds.width,o=(r-a)/this.bounds.height;return[pA((t-i)/n+this.bounds.x),pw((e-a)/o+this.bounds.y)]}};function pT(t){return"map-shape"===t.type||"map-line"===t.type||"map-marker"===t.type||"map-shape-background"===t.type||"map-line-background"===t.type}var pk=class extends ls{constructor(t,e){super(t,e),this.xAxis=new l_(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new l_(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();let{topology:t}=this.getOptions();this.series.forEach(e=>{pT(e)&&e.setChartTopology(t)})}performLayout(t){let e;let{seriesRoot:i,annotationRoot:a,highlightRoot:s}=this,{layoutBox:r}=t,n=r.clone();r.shrink(this.seriesArea.padding.toJson()),this.seriesRect=r,this.animationRect=r;let o=this.series.filter(pT),l=o.reduce((t,e)=>{if(!e.visible)return t;let i=e.topologyBounds;return null==i?t:null==t?i:(t.merge(i),t)},void 0);if(null!=l){let{lon0:t,lat0:i,lon1:a,lat1:s}=l,n=[[t,i],[a,s]],o=pC.bounds(n),{width:h,height:d}=r,u=Math.min(h/o.width,d/o.height),c=o.width*u,p=o.height*u,g=(h-c)/2,y=(d-p)/2,m=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),f=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),x=(g+c-g)/(m.max-m.min),M=g-x*m.min,b=(y+p-y)/(1-f.min-(1-f.max)),v=y-b*(1-f.max);e=new pC(n,[[M,v],[M+x,v+b]])}o.forEach(t=>{t.scale=e});let h=this.series.some(t=>t.visible);for(let t of(i.visible=h,[i,a,s]))t.translationX=Math.floor(r.x),t.translationY=Math.floor(r.y),t.setClipRect(r.clone());this.ctx.layoutManager.emitLayoutComplete(t,{series:{visible:h,rect:n,paddedRect:r}})}};pk.className="TopologyChart",pk.type="topology";var pE=Symbol("IGNORED_PROP");function pO(t,e){let i={};for(let a in e){let s=e[a];s!==pE&&Object.hasOwn(t,a)&&(i[a]=s)}return i}function pj(t,e){if(null==e)return t;let{targets:i,...a}=e;return null!=(t=t8(t,a)).targets&&null!=i&&(t.targets=t7(t.targets,i)),t}function pR(t,e){if(tQ(t))return e(t)}var pz=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],pP="range-area";function pB(t,e){return{fill:pR(e,e=>e.overrides?.[t]?.series?.fill),stroke:pR(e,e=>e.overrides?.[t]?.series?.stroke)}}var pG={line:{enabled:!1},title:{enabled:!1},label:{enabled:!1},crosshair:{enabled:!1,strokeOpacity:.25,lineDash:[0],label:{enabled:!1}}},pF={...pG,nice:!1},pU={bottom:{crosshair:{enabled:hv}}},pY={category:pU,number:pU,log:pU,time:pU},pZ={position:{type:"sparkline"}},p_={overrides:{common:{animation:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...pF,interval:{values:[0]}},log:{...pF},time:{...pF},category:{...pG,gridLine:{enabled:!1}}}},bar:{series:{sparklineMode:!0},tooltip:{range:"nearest"}},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},axes:pY,series:{strokeWidth:1,marker:{enabled:!1,size:3},tooltip:pZ}},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},axes:pY,series:{strokeWidth:1,fillOpacity:.4,tooltip:pZ}}}},pV={"price-volume":function(t,e,i){let{xKey:a,dateKey:s=a??"date",highKey:r="high",openKey:n="open",lowKey:o="low",closeKey:l="close",volumeKey:h="volume",chartType:d="candlestick",navigator:u=!1,volume:c=!0,rangeToolbar:p,rangeButtons:g=p??!0,statusBar:m=!0,annotations:f,toolbar:x=f??!0,zoom:M=!0,theme:b,data:v,...I}=t;null!=a&&y.warnOnce("Property [xKey] is deprecated, use [dateKey] instead."),null!=p&&y.warnOnce("Property [rangeToolbar] is deprecated, use [rangeButtons] instead."),null!=f&&y.warnOnce("Property [annotations] is deprecated, use [toolbar] instead.");let D=function(t,e,i,a,s,r,n){e===pP&&(y.warnOnce(`type '${e}' is deprecated, use 'hlc' chart type instead`),e="hlc");let o={xKey:i,openKey:r,closeKey:n,highKey:a,lowKey:s},l={xKey:i,yKey:n},h={pickOutsideVisibleMinorAxis:!0};switch(e??"candlestick"){case"ohlc":return[{type:"ohlc",focusPriority:0,...h,...o}];case"line":return[{type:"line",focusPriority:0,...h,...l,stroke:pR(t,t=>t.overrides?.line?.series?.stroke)??hF,marker:pR(t,t=>t.overrides?.line?.series?.marker)??{enabled:!1}}];case"step-line":return[{type:"line",focusPriority:0,...h,...l,stroke:pR(t,t=>t.overrides?.line?.series?.stroke)??hF,interpolation:pR(t,t=>t.overrides?.line?.series?.interpolation)??{type:"step"},marker:pR(t,t=>t.overrides?.line?.series?.marker)??{enabled:!1}}];case"hlc":{let e=pB(pP,t);return[{type:pP,focusPriority:0,...h,xKey:i,yHighKey:a,yLowKey:n,fill:e.fill??hB,stroke:e.stroke??hz,fillOpacity:pR(t,t=>t.overrides?.["range-area"]?.series?.fillOpacity)??.3,strokeWidth:pR(t,t=>t.overrides?.["range-area"]?.series?.strokeWidth)??2},{type:pP,focusPriority:0,...h,xKey:i,yHighKey:n,yLowKey:s,fill:e.fill??hG,stroke:e.stroke??hP,fillOpacity:pR(t,t=>t.overrides?.["range-area"]?.series?.fillOpacity)??.3,strokeWidth:pR(t,t=>t.overrides?.["range-area"]?.series?.strokeWidth)??2},{type:"line",...h,...l,stroke:pR(t,t=>t.overrides?.line?.series?.stroke)??hH,strokeWidth:pR(t,t=>t.overrides?.line?.series?.strokeWidth)??2,marker:pR(t,t=>t.overrides?.line?.series?.marker)??{enabled:!1}}]}case"high-low":{let e=pB("range-bar",t);return[{type:"range-bar",focusPriority:0,...h,xKey:i,yHighKey:a,yLowKey:s,fill:e.fill??hU,stroke:e.stroke??hF,tooltip:{range:"nearest"}}]}case"candlestick":return[{type:"candlestick",focusPriority:0,...h,...o}];case"hollow-candlestick":{let e=pR(t,t=>t.overrides?.candlestick?.series?.item);return[{type:"candlestick",focusPriority:0,...h,...o,item:{up:{fill:e?.up?.fill??"transparent"}}}]}default:return y.warnOnce(`unknown chart type: ${e}; expected one of: ${pz.join(", ")}`),[{type:"candlestick",focusPriority:0,...h,...o}]}}(b,d,s,r,o,n,l),S=function(t,e,i,a,s,r){if(!s)return[];let n=pR(t,t=>t.overrides?.bar?.series?.fill),o=n?{fill:n}:{itemStyler({datum:t}){let{up:s,down:r}=e().palette;return{fill:t[i]<t[a]?s?.fill:r?.fill}}};return[{type:"bar",xKey:"date",yKey:r,focusPriority:1,tooltip:{enabled:!1},highlight:{enabled:!1},fillOpacity:pR(t,t=>t.overrides?.bar?.series?.fillOpacity)??.5,...o}]}(b,i,n,l,c,h),N=c?{miniChart:{enabled:u,series:[{type:"line",xKey:s,yKey:h,marker:{enabled:!1}}]}}:null,L={navigator:{enabled:u,...N}},A=m?{statusBar:{enabled:!0,data:v,highKey:r,openKey:n,lowKey:o,closeKey:l,volumeKey:c?h:void 0}}:null,w=c?[{type:"number",position:"left",keys:[h],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"}}]:[];return{theme:{baseTheme:"string"==typeof b?b:"ag-financial",...t8("object"==typeof b?b:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...S,...D],axes:[{type:"number",position:"right",keys:[n,l,r,o],interval:{maxSpacing:pR(b,t=>t.overrides?.common?.axes?.number?.interval?.maxSpacing)??45},label:{format:pR(b,t=>t.overrides?.common?.axes?.number?.label?.format)??".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...w,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:v,annotations:{enabled:x,data:v,xKey:s,volumeKey:c?h:void 0},...L,...A,zoom:{enabled:M,enableIndependentAxes:!0},chartToolbar:{enabled:!0},toolbar:{seriesType:{enabled:x},annotationOptions:{enabled:x},annotations:{enabled:x},ranges:{enabled:g}},...I}},gauge:function(t,e){if("radial-gauge"===t.type)return function(t){let{animation:e,background:i,container:a,contextMenu:s,footnote:r,height:n,listeners:o,locale:l,minHeight:h,minWidth:d,padding:u,subtitle:c,theme:p,title:g,width:y,type:m,cursor:f,nodeClickRange:x,tooltip:M,value:b,scale:v={},startAngle:I,endAngle:D,highlightStyle:S,segmentation:N,bar:L,needle:A,targets:w,outerRadius:C,innerRadius:T,outerRadiusRatio:k,innerRadiusRatio:E,cornerRadius:O,cornerMode:j,label:R,secondaryLabel:z,spacing:P,...B}=t,{fills:G,fillMode:F,fill:U,fillOpacity:Y,stroke:Z,strokeWidth:_,strokeOpacity:V,lineDash:W,lineDashOffset:H,min:$=0,max:Q=1,interval:X={},label:K={},...J}=v,q=pO(t,{animation:e,background:i,container:a,contextMenu:s,footnote:r,height:n,listeners:o,locale:l,minHeight:h,minWidth:d,padding:u,subtitle:c,theme:p,title:g,width:y}),tt=pO(v,{fills:G,fillMode:F,fill:U,fillOpacity:Y,stroke:Z,strokeWidth:_,strokeOpacity:V,lineDash:W,lineDashOffset:H}),te=pO(t,{startAngle:pE,endAngle:pE,needle:null!=A?{enabled:!0,...A}:pE,scale:tt,type:m,cursor:f,nodeClickRange:x,listeners:o,tooltip:M,value:b,highlightStyle:S,segmentation:N,bar:L,targets:w,outerRadius:C,innerRadius:T,outerRadiusRatio:k,innerRadiusRatio:E,cornerRadius:O,cornerMode:j,label:R,secondaryLabel:z,spacing:P,...B});return{...q,series:[te],axes:[{type:"angle-number",min:$,max:Q,startAngle:I,endAngle:D,interval:X??{},label:K??{}},{type:"radius-number"}]}}(pj(t,e));if("linear-gauge"===t.type)return function(t){let e,i;let{animation:a,background:s,container:r,contextMenu:n,footnote:o,height:l,listeners:h,locale:d,minHeight:u,minWidth:c,padding:p,subtitle:g,theme:y,title:m,width:f,type:x,cursor:M,nodeClickRange:b,tooltip:v,value:I,scale:D={},direction:S="vertical",thickness:N,highlightStyle:L,segmentation:A,bar:w,targets:C,cornerRadius:T,cornerMode:k,label:E,...O}=t,{fills:j,fillMode:R,fill:z,fillOpacity:P,stroke:B,strokeWidth:G,strokeOpacity:F,lineDash:U,lineDashOffset:Y,min:Z=0,max:_=1,interval:V={},label:W={},...H}=D,$=pO(t,{animation:a,background:s,container:r,contextMenu:n,footnote:o,height:l,listeners:h,locale:d,minHeight:u,minWidth:c,padding:p,subtitle:g,theme:y,title:m,width:f}),Q=pO(D,{fills:j,fillMode:R,fill:z,fillOpacity:P,stroke:B,strokeWidth:G,strokeOpacity:F,lineDash:U,lineDashOffset:Y}),X=pO(t,{scale:Q,type:x,cursor:M,nodeClickRange:b,listeners:h,tooltip:v,value:I,direction:S,thickness:N,highlightStyle:L,segmentation:A,bar:w,targets:C,cornerRadius:T,cornerMode:k,label:E,...O}),{placement:K,...J}=W,q="horizontal"===S;q?(e="before"===K?"top":"bottom",i="left"):(e="after"===K?"right":"left",i="bottom");let tt={type:"number",position:e,min:Z,max:_,reverse:!q,interval:V,label:J,nice:!1},te={type:"number",position:i,min:0,max:1,label:{enabled:!1}};return{...$,series:[X],axes:q?[tt,te]:[te,tt]}}(pj(t,e));let{animation:i,background:a,container:s,contextMenu:r,footnote:n,height:o,listeners:l,locale:h,minHeight:d,minWidth:u,padding:c,subtitle:p,theme:g,title:y,width:m}=t;return pO(t,{animation:i,background:a,container:s,contextMenu:r,footnote:n,height:o,listeners:l,locale:h,minHeight:d,minWidth:u,padding:c,subtitle:p,theme:g,title:y,width:m})},sparkline:function(t){let{background:e,container:i,height:a,listeners:s,locale:r,minHeight:n,minWidth:o,padding:l,width:h,theme:d,data:u,xAxis:c,yAxis:p,...g}=t,y="bar"!==g.type||"horizontal"!==g.direction,m=pO(t,{background:e,container:i,height:a,listeners:s,locale:r,minHeight:n,minWidth:o,padding:l,width:h,data:u,xAxis:pE,yAxis:pE,theme:pE});return m.theme=function t(e,i){return"string"==typeof e?{...i,baseTheme:e}:null!=e?{...e,baseTheme:t(e.baseTheme,i)}:i}(d,p_),m.series=[g],m.axes=y?[{type:"number",...p,position:"left"},{type:"category",...c,position:"bottom"}]:[{type:"category",...c,position:"left"},{type:"number",...p,position:"bottom"}],m}};function pW(t,e){let i=[],a=o$(t),s=oU(t),r=s?oO.get(s):"unknown";for(let{type:e,chartTypes:a,optionsKey:s,optionsInnerKey:n,identifier:o}of ow)if("unknown"===r||a.includes(r)){if("root"===e||"legend"===e){let e=t[s];if(null==e)continue;n?e[n]&&(i.push(`${s}.${n}`),delete e[n]):(i.push(s),delete t[s])}else if("axis"===e){if(!("axes"in t)||!t.axes?.some(t=>t.type===o))continue;i.push(`axis[type=${o}]`),t.axes=t.axes.filter(t=>t.type!==o)}else if("axis-option"===e){if(!("axes"in t)||!t.axes?.some(t=>t[s]))continue;i.push(`axis.${s}`),t.axes.forEach(t=>{t[s]&&delete t[s]})}else if("series"===e){if(!t.series?.some(t=>t.type===o))continue;i.push(`series[type=${o}]`),t.series=t.series.filter(t=>t.type!==o)}else if("series-option"===e){if(!t.series?.some(t=>t[s]))continue;i.push(`series.${s}`),t.series.forEach(t=>{t[s]&&delete t[s]})}}if(i.length&&!e){a&&(i=["AgCharts.createGauge"]);let e="ag-charts-enterprise",s="https://ag-grid.com/charts/javascript/installation/";"integrated"===t.mode&&(e="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",s="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),y.warnOnce([`unable to use these enterprise features as '${e}' has not been loaded:`,"",...i,"",`See: ${s}`].join("\n"))}}var pH=Symbol("description"),p$=Symbol("required");function pQ(t,e,i){let a=tJ(i)?i:i[pH],s=a?`; expecting ${a}`:"",r=t?`Option \`${t}\``:"Value";return`${r} cannot be set to \`${function(t,e=1/0){switch(typeof t){case"undefined":return"undefined";case"number":if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";default:if((t=JSON.stringify(t)).length>e)return`${t.slice(0,e)}... (+${t.length-e} characters)`;return t}}(e)}\`${s}, ignoring.`}function pX(t,e){return Object.assign(e=>t(e),{[pH]:e})}pX(tZ,"an array"),pX(t_,"a boolean"),pX(t$,"a function"),pX(t0,"a number");var pK=pX(tQ,"an object"),pJ=pX(tJ,"a string"),pq=(t,e=!0)=>pX(i=>t0(i)&&(i>t||e&&i===t),`a number greater than ${e?"or equal to ":""}${t}`),p0=(t,e)=>pX(i=>t0(i)&&i>=t&&i<=e,`a number between ${t} and ${e} inclusive`);pq(0),pq(1),p0(0,1),p0(0,360);var p1=(t,e)=>pX(e=>tZ(e)&&e.every(t),e??`${t[pH]} array`);function p2(t){return t?.up||t?.down||t?.neutral?"user-full":t?.fills||t?.strokes?"user-indexed":"inbuilt"}var p4="white",p3={get cartesian(){return{seriesTypes:oO.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:oO.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:oO.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:oO.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:oO.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:oO.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:oO.gaugeTypes,commonOptions:[]}}},p5={"radial-gauge":!0,"linear-gauge":!0},p9=Object.values(p3).reduce((t,{commonOptions:e})=>t.concat(e),[]),p6=class t{static getAxisDefaults(t){return t8(t,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:hI,color:hD},label:{fontSize:12,fontFamily:hI,padding:5,color:hD,avoidCollisions:!0},line:{enabled:!0,width:1,stroke:hw},tick:{enabled:!1,width:1,stroke:hw},gridLine:{enabled:!0,style:[{stroke:hA,lineDash:[]}]},crossLines:{enabled:!1,fill:hC,stroke:hC,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:hI,padding:5,color:hD}},crosshair:{enabled:!0}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:hT},padding:{top:hO,right:hO,bottom:hO,left:hO},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:hI,color:hD,wrapping:"hyphenate",layoutStyle:hj,textAlign:hR},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:hI,color:hL,wrapping:"hyphenate",layoutStyle:hj,textAlign:hR},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:hI,color:"rgb(140, 140, 140)",wrapping:"hyphenate",layoutStyle:hj,textAlign:hR},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:hD,fontSize:12,fontFamily:hI}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:hD},inactiveStyle:{fill:hL},highlightStyle:{fill:hD},label:{color:hD}}},tooltip:{enabled:!0,darkTheme:hM,delay:0},overlays:{darkTheme:hM},listeners:{}}}constructor(t={}){let{overrides:e,palette:i}=si(t),a=this.createChartConfigPerChartType(this.getDefaults()),s={};e&&this.mergeOverrides(a,s,e);let{fills:r,strokes:n,...o}=this.getDefaultColors();this.palette=t8(i,{fills:Object.values(r),strokes:Object.values(n),...o}),this.paletteType=p2(i),this.config=Object.freeze(this.templateTheme(a)),this.presets=s}mergeOverrides(t,e,i){for(let{seriesTypes:e,commonOptions:a}of Object.values(p3)){let s={...i.common};for(let t of p9)a.includes(t)||delete s[t];if(s)for(let i of e)!0!==p5[i]&&(t[i]=t8(s,t[i]))}oO.seriesTypes.forEach(a=>{let s=i[a];!0===p5[a]?e[a]=s:t[a]=t8(s,t[a])})}createChartConfigPerChartType(t){for(let[e,{seriesTypes:i}]of Object.entries(p3)){let a=oR.get(e);for(let e of i)t[e]||(t[e]=si(a))}return t}getDefaults(){let e=(e,i)=>{let a={},s={axes:{},...oT.getThemeTemplates(),...this.getChartDefaults(),...oR.get(e)};for(let e of i){a[e]=t8(oz.getThemeTemplate(e),a[e]??si(s));let{axes:i}=a[e];for(let e of oA.keys())i[e]=t8(i[e],oA.getThemeTemplate(e),t.cartesianAxisDefault[e])}return a};return t8(e("cartesian",oO.cartesianTypes),e("polar",oO.polarTypes),e("hierarchy",oO.hierarchyTypes),e("topology",oO.topologyTypes),e("flow-proportion",oO.flowProportionTypes),e("standalone",oO.standaloneTypes),e("gauge",oO.gaugeTypes))}templateTheme(t){let e=si(t),i=this.getTemplateParameters();return ss(e,t=>{if(tZ(t))for(let e=0;e<t.length;e++){let a=t[e];i.has(a)&&(t[e]=i.get(a))}else for(let[e,a]of Object.entries(t))i.has(a)&&(t[e]=i.get(a))}),si(e)}getDefaultColors(){return{fills:cV,strokes:cW,up:{fill:cV.GREEN,stroke:cW.GREEN},down:{fill:cV.RED,stroke:cW.RED},neutral:{fill:cV.GRAY,stroke:cW.GRAY},altUp:{fill:cV.BLUE,stroke:cW.BLUE},altDown:{fill:cV.ORANGE,stroke:cW.ORANGE},altNeutral:{fill:cV.GRAY,stroke:cW.GRAY}}}getTemplateParameters(){let{isEnterprise:t}=sf,e=new Map;e.set(hM,!1),e.set(hv,t),e.set(hb,!t),e.set(hI,"Verdana, sans-serif"),e.set(hD,"rgb(70, 70, 70)"),e.set(hS,"white"),e.set(hL,"rgb(140, 140, 140)"),e.set(hA,"rgb(224,234,241)"),e.set(hw,"rgb(195, 195, 195)"),e.set(hC,"rgb(70, 70, 70)"),e.set(hN,p4),e.set(hT,p4),e.set(hk,"rgba(0, 0, 0, 0.5)"),e.set(hQ,[cV.ORANGE,cV.YELLOW,cV.GREEN]),e.set(hX,[cV.GREEN,cV.YELLOW,cV.RED]),e.set(hK,["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"]),e.set(hO,20),e.set(hj,"block"),e.set(hR,"center"),e.set(hJ,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),e.set(hq,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),e.set(h$,p4),e.set(h0,cV.BLUE),e.set(h1,cV.BLUE),e.set(h2,cV.BLUE),e.set(h4,p4),e.set(h3,"#fafafa"),e.set(h5,"#dddddd"),e.set(h9,"#000000"),e.set(h6,"#181d1f"),e.set(h8,"#e35c5c"),e.set(h7,"#e35c5c"),e.set(dt,"#fafafa"),e.set(de,"#dddddd"),e.set(di,"#000000"),e.set(da,"top"),e.set(ds,!1);let i=this.getDefaultColors();return e.set(hz,this.palette.up?.stroke??i.up.stroke),e.set(hB,this.palette.up?.fill??i.up.fill),e.set(hP,this.palette.down?.stroke??i.down.stroke),e.set(hG,this.palette.down?.fill??i.down.fill),e.set(hF,this.palette.neutral?.stroke??i.neutral.stroke),e.set(hU,this.palette.neutral?.fill??i.neutral.fill),e.set(hY,this.palette.altUp?.stroke??i.up.stroke),e.set(h_,this.palette.altUp?.fill??i.up.fill),e.set(hZ,this.palette.altDown?.stroke??i.down.stroke),e.set(hV,this.palette.altDown?.fill??i.down.fill),e.set(hW,this.palette.altNeutral?.fill??i.altNeutral.fill),e.set(hH,this.palette.altNeutral?.stroke??i.altNeutral.stroke),e}};p6.cartesianAxisDefault={number:p6.getAxisDefaults({line:{enabled:!1}}),log:p6.getAxisDefaults({base:10,line:{enabled:!1},interval:{minSpacing:NaN}}),category:p6.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:ds},crosshair:{enabled:!1}}),time:p6.getAxisDefaults({gridLine:{enabled:ds}}),"ordinal-time":p6.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:ds}}),"angle-category":p6.getAxisDefaults({gridLine:{enabled:ds}}),"angle-number":p6.getAxisDefaults({gridLine:{enabled:ds}}),"radius-category":p6.getAxisDefaults({line:{enabled:!1}}),"radius-number":p6.getAxisDefaults({line:{enabled:!1}}),"grouped-category":p6.getAxisDefaults({tick:{enabled:!0}})};var p8=p6,p7="#192232",gt={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},ge={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},gi=class extends p8{getDefaultColors(){return{fills:gt,strokes:ge,up:{fill:gt.GREEN,stroke:ge.GREEN},down:{fill:gt.RED,stroke:ge.RED},neutral:{fill:gt.GRAY,stroke:ge.GRAY},altUp:{fill:gt.BLUE,stroke:ge.BLUE},altDown:{fill:gt.ORANGE,stroke:ge.ORANGE},altNeutral:{fill:gt.GRAY,stroke:ge.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hM,!0),t.set(h$,p7),t.set(hD,"white"),t.set(hL,"#7D91A0"),t.set(hA,"#545A6E"),t.set(hC,"white"),t.set(hQ,[gt.ORANGE,gt.YELLOW,gt.GREEN]),t.set(hX,[gt.GREEN,gt.YELLOW,gt.RED]),t.set(hK,["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"]),t.set(hJ,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.set(hq,["#192834","#3b5164","#496275","#577287","#668399"]),t.set(hT,p7),t.set(hN,p7),t.set(h0,gt.BLUE),t.set(h1,"white"),t.set(h2,gt.BLUE),t.set(h4,p7),t.set(h3,"#28313e"),t.set(h5,"#4b525d"),t.set(h9,"#ffffff"),t.set(h6,"#ffffff"),t.set(dt,"#28313e"),t.set(de,"#4b525d"),t.set(di,"#ffffff"),t}constructor(t){super(t)}},ga={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},gs={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},gr=class extends gi{getDefaultColors(){return{fills:{...ga},strokes:{...gs},up:{fill:ga.GREEN,stroke:gs.GREEN},down:{fill:ga.RED,stroke:gs.RED},neutral:{fill:ga.BLUE,stroke:gs.BLUE},altUp:{fill:ga.GREEN,stroke:gs.GREEN},altDown:{fill:ga.RED,stroke:gs.RED},altNeutral:{fill:ga.GRAY,stroke:gs.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[ga.GREEN,ga.BLUE,ga.RED]),t.set(h0,ga.BLUE),t.set(h2,ga.BLUE),t.set(hA,"#343A4E"),t.set(hO,0),t.set(hj,"overlay"),t.set(hR,"left"),t.set(da,"bottom"),t.set(ds,!0),t}},gn={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},go={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},gl=class extends p8{getDefaultColors(){return{fills:{...gn},strokes:{...go},up:{fill:gn.GREEN,stroke:go.GREEN},down:{fill:gn.RED,stroke:go.RED},neutral:{fill:gn.BLUE,stroke:go.BLUE},altUp:{fill:gn.GREEN,stroke:go.GREEN},altDown:{fill:gn.RED,stroke:go.RED},altNeutral:{fill:gn.GRAY,stroke:go.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gn.GREEN,gn.BLUE,gn.RED]),t.set(h0,gn.BLUE),t.set(h2,gn.BLUE),t.set(hA,"#F2F3F3"),t.set(hO,0),t.set(hj,"overlay"),t.set(hR,"left"),t.set(da,"bottom"),t.set(ds,!0),t}},gh={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},gd={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},gu=class extends gi{getDefaultColors(){return{fills:gh,strokes:gd,up:{fill:gh.GREEN,stroke:gd.GREEN},down:{fill:gh.RED,stroke:gd.RED},neutral:{fill:gh.GRAY,stroke:gd.GRAY},altUp:{fill:gh.BLUE,stroke:gd.BLUE},altDown:{fill:gh.RED,stroke:gd.RED},altNeutral:{fill:gh.GRAY,stroke:gd.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gh.ORANGE,gh.YELLOW,gh.GREEN]),t.set(hK,["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"]),t.set(hX,[gh.GREEN,gh.YELLOW,gh.RED]),t.set(h0,gh.BLUE),t.set(h2,gh.BLUE),t}},gc={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},gp={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},gg=class extends p8{getDefaultColors(){return{fills:gc,strokes:gp,up:{fill:gc.GREEN,stroke:gp.GREEN},down:{fill:gc.RED,stroke:gp.RED},neutral:{fill:gc.GRAY,stroke:gp.GRAY},altUp:{fill:gc.BLUE,stroke:gp.BLUE},altDown:{fill:gc.RED,stroke:gp.RED},altNeutral:{fill:gc.GRAY,stroke:gp.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gc.ORANGE,gc.YELLOW,gc.GREEN]),t.set(hK,["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"]),t.set(hX,[gc.GREEN,gc.YELLOW,gc.RED]),t.set(h0,gc.BLUE),t.set(h2,gc.BLUE),t}},gy={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},gm={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},gf=class extends gi{getDefaultColors(){return{fills:gy,strokes:gm,up:{fill:gy.GREEN,stroke:gm.GREEN},down:{fill:gy.RED,stroke:gm.RED},neutral:{fill:gy.GRAY,stroke:gm.GRAY},altUp:{fill:gy.BLUE,stroke:gm.BLUE},altDown:{fill:gy.RED,stroke:gm.RED},altNeutral:{fill:gy.GRAY,stroke:gm.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gy.BLUE,gy.RED]),t.set(hK,[gy.BLUE,gy.PURPLE,gy.MAGENTA,gy.PINK,gy.RED,gy.ORANGE,gy.YELLOW,gy.GREEN]),t.set(hX,[gy.BLUE,gy.RED]),t.set(h0,gy.BLUE),t.set(h2,gy.BLUE),t}},gx={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},gM={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},gb=class extends p8{getDefaultColors(){return{fills:gx,strokes:gM,up:{fill:gx.GREEN,stroke:gM.GREEN},down:{fill:gx.RED,stroke:gM.RED},neutral:{fill:gx.GRAY,stroke:gM.GRAY},altUp:{fill:gx.BLUE,stroke:gM.BLUE},altDown:{fill:gx.RED,stroke:gM.RED},altNeutral:{fill:gx.GRAY,stroke:gM.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gx.BLUE,gx.RED]),t.set(hK,[gx.BLUE,gx.PURPLE,gx.MAGENTA,gx.PINK,gx.RED,gx.ORANGE,gx.YELLOW,gx.GREEN]),t.set(hX,[gx.BLUE,gx.RED]),t.set(h0,gx.BLUE),t.set(h2,gx.BLUE),t}},gv={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},gI={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},gD=class extends gi{getDefaultColors(){return{fills:{...gv,RED:gv.ORANGE},strokes:{...gI,RED:gI.ORANGE},up:{fill:gv.GREEN,stroke:gI.GREEN},down:{fill:gv.ORANGE,stroke:gI.ORANGE},neutral:{fill:gv.GRAY,stroke:gI.GRAY},altUp:{fill:gv.BLUE,stroke:gI.BLUE},altDown:{fill:gv.ORANGE,stroke:gI.ORANGE},altNeutral:{fill:gv.GRAY,stroke:gI.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gv.ORANGE,gv.YELLOW,gv.GREEN]),t.set(hX,[gv.GREEN,gv.YELLOW,gv.ORANGE]),t.set(h0,gv.BLUE),t.set(h2,gv.BLUE),t}},gS={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},gN={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},gL=class extends p8{getDefaultColors(){return{fills:{...gS,RED:gS.ORANGE},strokes:{...gN,RED:gN.ORANGE},up:{fill:gS.GREEN,stroke:gN.GREEN},down:{fill:gS.ORANGE,stroke:gN.ORANGE},neutral:{fill:gN.GRAY,stroke:gN.GRAY},altUp:{fill:gS.BLUE,stroke:gN.BLUE},altDown:{fill:gS.ORANGE,stroke:gN.ORANGE},altNeutral:{fill:gS.GRAY,stroke:gN.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gS.ORANGE,gS.YELLOW,gS.GREEN]),t.set(hX,[gS.GREEN,gS.YELLOW,gS.ORANGE]),t.set(h0,gS.BLUE),t.set(h2,gS.BLUE),t}},gA={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},gw={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},gC=class extends gi{getDefaultColors(){return{fills:gA,strokes:gw,up:{fill:gA.GREEN,stroke:gw.GREEN},down:{fill:gA.RED,stroke:gw.RED},neutral:{fill:gA.GRAY,stroke:gw.GRAY},altUp:{fill:gA.BLUE,stroke:gw.BLUE},altDown:{fill:gA.ORANGE,stroke:gw.ORANGE},altNeutral:{fill:gA.GRAY,stroke:gw.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gA.ORANGE,gA.YELLOW,gA.GREEN]),t.set(hK,["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"]),t.set(hX,[gA.GREEN,gA.YELLOW,gA.RED]),t.set(h0,gA.BLUE),t.set(h2,gA.BLUE),t}},gT={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},gk={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},gE=class extends p8{getDefaultColors(){return{fills:gT,strokes:gk,up:{fill:gT.GREEN,stroke:gk.GREEN},down:{fill:gT.RED,stroke:gk.RED},neutral:{fill:gT.GRAY,stroke:gk.GRAY},altUp:{fill:gT.BLUE,stroke:gk.BLUE},altDown:{fill:gT.ORANGE,stroke:gk.ORANGE},altNeutral:{fill:gT.GRAY,stroke:gk.GRAY}}}getTemplateParameters(){let t=super.getTemplateParameters();return t.set(hQ,[gT.ORANGE,gT.YELLOW,gT.GREEN]),t.set(hK,["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"]),t.set(hX,[gT.GREEN,gT.YELLOW,gT.RED]),t.set(h0,gT.BLUE),t.set(h2,gT.BLUE),t}},gO=()=>new p8,gj={"ag-default-dark":()=>new gi,"ag-sheets-dark":()=>new gD,"ag-polychroma-dark":()=>new gf,"ag-vivid-dark":()=>new gC,"ag-material-dark":()=>new gu,"ag-financial-dark":()=>new gr,null:gO,undefined:gO,"ag-default":gO,"ag-sheets":()=>new gL,"ag-polychroma":()=>new gb,"ag-vivid":()=>new gE,"ag-material":()=>new gg,"ag-financial":()=>new gl};function gR(t){if(t instanceof p8)return t;if(null==t||"string"==typeof t){let e=gj[t];return e?e():(y.warnOnce(`the theme [${t}] is invalid, using [ag-default] instead.`),gO())}if(function(t,e,i){let{errors:a}=function t(e,i,a=""){if(!tQ(e))return{valid:null,errors:[{path:a,value:e,message:pQ(a,e,"an object")}]};let s=new Set(Object.keys(e)),r=[],n={};function o(t){return tZ(i)?`${a}[${t}]`:a?`${a}.${t}`:t}for(let[l,h]of Object.entries(i)){s.delete(l);let i=e[l];if(h[p$]||void 0!==i){if(t$(h))h(i)?n[l]=i:r.push({key:l,path:a,value:i,message:pQ(o(l),i,h)});else{let e=t(i,h,o(l));n[l]=e.valid,r.push(...e.errors)}}}for(let t of s)r.push({key:t,path:a,unknown:!0,message:`Unknown option \`${o(t)}\`, ignoring.`});return{valid:n,errors:r}}(t,e,i);for(let{message:t}of a)y.warn(t);return 0===a.length}(t,gz,"theme")){let e=function(t){let e,i=t,a=[];for(;"object"==typeof i;)e??(e=i.palette),i.overrides&&a.push(i.overrides),i=i.baseTheme;return{baseTheme:i,overrides:t8(...a),palette:e}}(t);return new(e.baseTheme?gR(e.baseTheme):gO()).constructor(e)}return gO()}var gz={baseTheme:((...t)=>pX(e=>t.some(t=>t(e)),t.map(t=>t[pH]).filter(Boolean).join(" or ")))(pJ,pK),overrides:pK,palette:{fills:p1(pJ),strokes:p1(pJ),up:{fill:pJ,stroke:pJ},down:{fill:pJ,stroke:pJ},neutral:{fill:pJ,stroke:pJ}}},gP=new Set(["map-shape-background","map-line-background"]),gB=class{constructor(t,e,i,a){var s;this.debug=aN.create(!0,"opts"),this.optionMetadata=a??{},this.processedOverrides=e??{};let r={shallow:["data"]};this.userOptions=si(t,r);let n=si(t,r),{presetType:o}=this.optionMetadata;if(null!=o){let t=pV[o],e=n,i=n.type,a=null!=i?gR(n.theme).presets[i]:void 0;this.debug(">>> AgCharts.createOrUpdate() - applying preset",e),n=t?.(e,a,()=>this.activeTheme)??n}sf.isEnterprise||pW(n),this.activeTheme=gR(n.theme),o&&(n=this.activeTheme.templateTheme(n)),this.sanityCheckAndCleanup(n),this.defaultAxes=this.getDefaultAxes(n),this.specialOverrides=this.specialOverridesDefaults({...i});let l=this.optionsType(n),{axes:h={},annotations:{axesButtons:d=null,...u}={},series:c,...p}=this.getSeriesThemeConfig(l);this.processedOptions=si(t8(e,n,null!=d?{annotations:{axesButtons:d}}:{},p,this.defaultAxes),r),this.processAxesOptions(this.processedOptions,h),this.processSeriesOptions(this.processedOptions),this.processMiniChartSeriesOptions(this.processedOptions),this.annotationThemes=u,(oY(this.processedOptions)||function(t){let e=oU(t);return oZ(t)&&"pie"!==e&&"donut"!==e}(this.processedOptions))&&this.processedOptions.legend?.enabled==null&&((s=this.processedOptions).legend??(s.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions,n),sf.isEnterprise||pW(this.processedOptions,!0)}getOptions(){return this.processedOptions??{}}diffOptions(t){return se(t,this.processedOptions)}getSeriesThemeConfig(t){let e=si(this.activeTheme?.config[t]??{});return this.removeLeftoverSymbols(e),e}getDefaultAxes(t){let e=this.optionsType(t),i=t.series?.find(t=>(t.type??"line")===e)??{};return oz.cloneDefaultAxes(e,i)}optionsType(t){return t.series?.[0]?.type??"line"}sanityCheckAndCleanup(t){this.deprecationWarnings(t),this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t),this.removeDisabledOptions(t),this.removeLeftoverSymbols(t),t.series?.some(t=>"bullet"===t.type)&&null!=t.sync&&!1!==t.sync.enabled&&(y.warnOnce("bullet series cannot be synced, disabling synchronization."),delete t.sync)}processAxesOptions(t,e){"axes"in t&&(t.axes=t.axes.map(t=>{let{crossLines:i,...a}=t8(e[t.type]?.[t.position],e[t.type]);t.crossLines&&(t.crossLines=t7(t.crossLines,i));let s=a.gridLine?.style;t.gridLine?.style&&s?.length&&(t.gridLine.style=t.gridLine.style.map((t,e)=>null!=t.stroke||null!=t.lineDash?t8(t,s.at(e%s.length)):t));let{top:r,right:n,bottom:o,left:l,...h}=t8(t,a);return h}))}processSeriesOptions(t){let e=this.getTooltipPositionDefaults(t),i=tQ(t.theme)?p2(t.theme?.palette):"inbuilt",a={colourIndex:0,userPalette:i},s=t.series?.map(s=>{s.type??(s.type=this.getDefaultSeriesType(t));let{innerLabels:r,...n}=this.getSeriesThemeConfig(s.type).series??{},o=gP.has(s.type)?{colourIndex:0,userPalette:i}:a,l=this.getSeriesPalette(s.type,o),h=this.getTooltipRangeDefaults(t,s.type),d=t8(this.getSeriesGroupingOptions(s),s,e,h,n,l,{visible:!0});return d.innerLabels&&(d.innerLabels=t7(d.innerLabels,r)),this.activeTheme.templateTheme(d)});t.series=this.setSeriesGroupingOptions(s??[])}processMiniChartSeriesOptions(t){let e=t.navigator?.miniChart?.series;if(null==e)return;let i={colourIndex:0,userPalette:tQ(t.theme)?p2(t.theme.palette):"inbuilt"};e=e.map(t=>{t.type??(t.type="line");let{innerLabels:e,...a}=this.getSeriesThemeConfig(t.type).series??{},s=t8(this.getSeriesGroupingOptions(t),t,a,this.getSeriesPalette(t.type,i));return this.activeTheme.templateTheme(s)}),t.navigator.miniChart.series=this.setSeriesGroupingOptions(e)}getSeriesPalette(t,e){let i=oz.getPaletteFactory(t),{colourIndex:a,userPalette:s}=e,{fills:r=[],strokes:n=[]}=this.activeTheme.palette;return i?.({userPalette:s,colorsCount:Math.max(r.length,n.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),palette:this.activeTheme.palette,takeColors:t=>(e.colourIndex+=t,{fills:eE(r,t,a),strokes:eE(n,t,a)})})}getSeriesGroupingOptions(t){let e=oz.isGroupable(t.type),i=oz.isStackable(t.type),a=oz.isStackedByDefault(t.type);t.grouped&&!e&&y.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!i&&y.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:s,stacked:r}=t;return r??(r=(a||null!=t.stackGroup)&&!(e&&s)),s??(s=!0),{stacked:i&&r,grouped:e&&s&&!(i&&r)}}setSeriesGroupingOptions(t){let e=this.getSeriesGrouping(t);this.debug("setSeriesGroupingOptions() - series grouping: ",e);let i={},a=e.reduce((t,e)=>{var i;return"default"===e.groupType||(t[i=e.seriesType]??(t[i]=0),t[e.seriesType]+="stack"===e.groupType?1:e.series.length),t},{});return e.flatMap(t=>{var e;switch(i[e=t.seriesType]??(i[e]=0),t.groupType){case"stack":{let e=i[t.seriesType]++;return t.series.map((i,s)=>Object.assign(i,{seriesGrouping:{groupId:t.groupId,groupIndex:e,groupCount:a[t.seriesType],stackIndex:s,stackCount:t.series.length}}))}case"group":return t.series.map(e=>Object.assign(e,{seriesGrouping:{groupId:t.groupId,groupIndex:i[t.seriesType]++,groupCount:a[t.seriesType],stackIndex:0,stackCount:0}}))}return t.series}).map(({stacked:t,grouped:e,...i})=>i)}getSeriesGroupId(t){return[t.type,t.xKey,t.stacked?t.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){let e=new Map;return t.reduce((t,i)=>{let a=i.type;if(i.stacked||i.grouped){let s=this.getSeriesGroupId(i);if(!e.has(s)){let r={groupType:i.stacked?"stack":"group",seriesType:a,series:[],groupId:s};e.set(s,r),t.push(r)}e.get(s).series.push(i)}else t.push({groupType:"default",seriesType:a,series:[i],groupId:"__default__"});return t},[])}getDefaultSeriesType(t){if(oY(t))return"line";if(oZ(t))return"pie";if(o_(t))return"treemap";if(oV(t))return"map-shape";if(oW(t))return"sankey";if(oH(t))return"pyramid";if(o$(t))return"radial-gauge";throw Error("Invalid chart options type detected.")}getTooltipPositionDefaults(t){let e=t.tooltip?.position;if(!tK(e))return;let{type:i,xOffset:a,yOffset:s}=e,r={};return tJ(i)&&t4(d,i)&&(r.type=i),t0(a)&&(r.xOffset=a),t0(s)&&(r.yOffset=s),{tooltip:{position:r}}}getTooltipRangeDefaults(t,e){return{tooltip:{range:t.tooltip?.range??oz.getTooltipDefauls(e)?.range}}}deprecationWarnings(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,i])=>{t.series?.some(t=>null!=t[e])&&y.warnOnce(`Property [series.${e}] is deprecated, please use [series.${i}] and multiple series instead.`)})}axesTypeIntegrity(t){if("axes"in t){for(let{type:e}of t.axes??[])if(!(null!=e&&oA.has(e))){delete t.axes;let i=oA.publicKeys().join(", ");y.warnOnce(`unknown axis type: ${e}; expected one of: ${i}`)}}}seriesTypeIntegrity(t){t.series=t.series?.filter(({type:t})=>{if(null==t||null!=t&&oO.has(t)||ow.some(e=>"series"===e.type&&e.identifier===t))return!0;y.warnOnce(`unknown series type: ${t}; expected one of: ${oj.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(t){let e=t.series;if(e&&e.length>1&&e.some(t=>oz.isSolo(t.type))){let i=this.optionsType(t);if(oz.isSolo(i))y.warn(`series[0] of type '${i}' is incompatible with other series types. Only processing series[0]`),t.series=e.slice(0,1);else{let{solo:i,nonSolo:a}=ek(e,t=>oz.isSolo(t.type)?"solo":"nonSolo"),s=eT(i.map(t=>t.type)).join(", ");y.warn(`Unable to mix these series types with the lead series type: ${s}`),t.series=a}}}enableConfiguredOptions(t,e){ss(e,(t,e)=>{e&&"enabled"in e&&!e._enabledFromTheme&&null==t.enabled&&(e.enabled=!0)},{skip:["data","theme"]},t),ss(t,t=>{null!=t._enabledFromTheme&&delete t._enabledFromTheme},{skip:["data","theme"]})}removeDisabledOptions(t){ss(t,t=>{"enabled"in t&&!1===t.enabled&&Object.keys(t).forEach(e=>{"enabled"!==e&&delete t[e]})},{skip:["data","theme"]})}removeLeftoverSymbols(t){ss(t,t=>{if(t&&tQ(t))for(let[e,i]of Object.entries(t))t3(i)&&delete t[e]},{skip:["data"]})}specialOverridesDefaults(t){if(null!=t.window?tr(t.window):"undefined"!=typeof window?t.window=window:"undefined"!=typeof global&&(t.window=global.window),null!=t.document?ts(t.document):"undefined"!=typeof document?t.document=document:"undefined"!=typeof global&&(t.document=global.document),null==t.window)throw Error("AG Charts - unable to resolve global window");if(null==t.document)throw Error("AG Charts - unable to resolve global document");return t}},gG=aN.create(!0,"opts");function gF(t){if(oY(t))return"cartesian";if(oZ(t))return"polar";if(o_(t))return"hierarchy";if(oV(t))return"topology";if(oW(t))return"flow-proportion";if(oH(t))return"standalone";if(o$(t))return"gauge";throw Error(`AG Chart - unknown type of chart for options with type: ${t.type}`)}var gU=class{static licenseCheck(t){this.licenseChecked||(this.licenseManager=sf.licenseManager?.(t),this.licenseManager?.setLicenseKey(this.licenseKey,this.gridContext),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static setGridContext(t){this.gridContext=t}static getLicenseDetails(t){return sf.licenseManager?.({}).getLicenseDetails(t)}static getInstance(t){return gZ.getInstance(t)}static create(t,e){this.licenseCheck(t);let i=gZ.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,styles:null!=sf.styles?[["ag-charts-enterprise",sf.styles]]:[],optionsMetadata:e});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&sf.injectWatermark?.(i.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),i}static createFinancialChart(t){return this.create(t,{presetType:"price-volume"})}static createGauge(t){return this.create(t,{presetType:"gauge"})}static __createSparkline(t){return this.create(t,{presetType:"sparkline"})}};gU.licenseChecked=!1,gU.gridContext=!1;var gY=class t{static getInstance(t){let e=ls.getInstance(t);return e?lF.chartInstances.get(e):void 0}static initialiseModules(){t.initialised||(function(){for(let t of(rC.register(lq,hr,lY,hd,py,u3,cm,cI,cw,cE,c6,pr,cN),[l_,rv,lH,rL,lW]))oA.register(t.type,{moduleFactory:e=>new t(e),hidden:t===rL})}(),function(){for(let t of rC.modules){if("enterprise"===t.packageType&&!function(t){if("enterprise"!==t.packageType)throw Error("AG Charts - internal configuration error, only enterprise modules need verification.");let e=ow.find(e=>e.type===t.type&&e.optionsKey===t.optionsKey&&e.identifier===t.identifier&&t.chartTypes.every(t=>e.chartTypes.includes(t)));return e&&(e.useCount??(e.useCount=0),e.useCount++),null!=e}(t)&&y.errorOnce("Unexpected enterprise module registered: "+t.identifier),"root"===t.type&&t.themeTemplate)for(let e of t.chartTypes)oR.set(e,t.themeTemplate);if("series"===t.type){if(t.chartTypes.length>1)throw Error(`AG Charts - Module definition error: ${t.identifier}`);oz.register(t.identifier,t)}if("series-option"===t.type&&t.themeTemplate)for(let e of t.seriesTypes)oz.setThemeTemplate(e,t.themeTemplate);if("axis-option"===t.type&&t.themeTemplate)for(let e of t.axisTypes){let i=oA.getThemeTemplate(e),a=t8(t.themeTemplate,i);oA.setThemeTemplate(e,a)}"axis"===t.type&&oA.register(t.identifier,t),"legend"===t.type&&oT.register(t.identifier,t)}if(rC.hasEnterpriseModules()){let t=ow.filter(({useCount:t})=>null==t||0===t);t.length>0&&y.errorOnce("Enterprise modules expected but not registered: ",t)}}(),t.initialised=!0)}static createOrUpdate(e){let{proxy:i}=e,{userOptions:a,licenseManager:s,styles:r,processedOverrides:n=i?.chart.chartOptions.processedOverrides??{},specialOverrides:o=i?.chart.chartOptions.specialOverrides??{},optionsMetadata:l=i?.chart.chartOptions.optionMetadata??{}}=e,{presetType:h}=l;t.initialiseModules(),gG(">>> AgCharts.createOrUpdate() user options",a);let d=a;gU.optionsMutationFn&&gG(">>> AgCharts.createOrUpdate() MUTATED user options",d=gU.optionsMutationFn(d,h));let{overrideDevicePixelRatio:u,document:c,window:p,styleContainer:g,...y}=d,m=new gB(y,n,{...o,document:c,window:p,overrideDevicePixelRatio:u,styleContainer:g},l),f=i?.chart;return(null==f||gF(m.processedOptions)!==gF(f?.chartOptions.processedOptions))&&(f=t.createChartInstance(m,f),r?.forEach(([t,e])=>{f?.ctx.domManager.addStyles(t,e)})),null==i?i=new lF(f,t.callbackApi,s):i.chart=f,gG.check()&&"undefined"!=typeof window&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[f.id]=f),f.queuedUserOptions.push(a),f.requestFactoryUpdate(t=>{t.applyOptions(m);let e=t.queuedUserOptions.indexOf(a)+1;t.queuedUserOptions.splice(0,e)}),i}static updateUserDelta(e,i){ss(i=si(i,{shallow:["data"]}),t=>{if("object"==typeof t)for(let[e,i]of Object.entries(t))void 0===i&&Object.assign(t,{[e]:Symbol("UNSET")})},{skip:["data"]});let{chart:a}=e,s=a.getOptions(),r=t8(i,s);gG(">>> AgCharts.updateUserDelta() user delta",i),gG("AgCharts.updateUserDelta() - base options",s),t.createOrUpdate({userOptions:r,proxy:e})}static createChartInstance(e,i){let a=i?.destroy({keepTransferableResources:!0});return new(t.getChartByOptions(e.processedOptions))(e,a)}static getChartByOptions(t){if(oY(t))return lG;if(o_(t))return pM;if(oZ(t))return pb;if(oV(t))return pk;if(oW(t))return pm;if(oH(t))return pD;if(o$(t))return px;throw Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};gY.caretaker=new rH(r_),gY.initialised=!1,gY.callbackApi={caretaker:gY.caretaker,create:(t,e,i,a)=>gY.createOrUpdate({userOptions:t,processedOverrides:e,specialOverrides:i,optionsMetadata:a}),update:(t,e)=>gY.createOrUpdate({userOptions:t,proxy:e}),updateUserDelta:(t,e)=>gY.updateUserDelta(t,e)};var gZ=gY;n({},{Arc:()=>g_,ArrowDown:()=>gJ,ArrowUp:()=>gK,BBox:()=>tI,BandScale:()=>eV,Caption:()=>sC,ChangeDetectableProperties:()=>dX,Circle:()=>lp,ConicGradient:()=>gV,ContinuousScale:()=>eN,Diamond:()=>ly,DropShadow:()=>dK,ExtendedPath2D:()=>nc,Gradient:()=>aW,Group:()=>ax,HdpiCanvas:()=>nN,Image:()=>l0,Label:()=>sj,Layer:()=>sk,Line:()=>aK,LinearGradient:()=>aH,LinearScale:()=>lZ,Marker:()=>lc,Node:()=>tw,OrdinalTimeScale:()=>ai,Path:()=>ng,PointerEvents:()=>tL,RadialColumnShape:()=>gH,Rect:()=>lK,RedrawType:()=>tD,Rotatable:()=>ap,RotatableGroup:()=>ab,RotatableText:()=>a5,Scalable:()=>ag,ScalableGroup:()=>aM,Scene:()=>nj,SceneChangeDetection:()=>tS,ScenePathChangeDetection:()=>np,Sector:()=>c_,SectorBox:()=>cO,Selection:()=>aL,Shape:()=>aX,Square:()=>lM,SvgPath:()=>gQ,Text:()=>a3,Tooltip:()=>sw,Transformable:()=>am,TransformableText:()=>a9,Translatable:()=>ay,TranslatableGroup:()=>av,TranslatableLayer:()=>sE,Triangle:()=>lv,calculateDerivativeExtrema:()=>nd,calculateDerivativeExtremaXY:()=>nu,drawCorner:()=>l$,easing:()=>en,evaluateBezier:()=>no,getFont:()=>g0,getMarker:()=>lN,getRadialColumnWidth:()=>g$,motion:()=>gq,sectorBox:()=>cj,solveBezier:()=>nl,splitBezier:()=>nh,toRadians:()=>aE,toTooltipHtml:()=>sL});var g_=class extends ng{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return tg(aw(this.startAngle),aw(this.endAngle))}updatePath(){let t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?t.closePath():2!==this.type||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new tI(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){let i=this.getBBox();return 0!==this.type&&i.containsPoint(t,e)&&this.path.isPointInPath(t,e)}};g_.className="Arc",g_.defaultStyles={...aX.defaultStyles,lineWidth:1,fillStyle:null},o([np()],g_.prototype,"centerX",2),o([np()],g_.prototype,"centerY",2),o([np()],g_.prototype,"radius",2),o([np()],g_.prototype,"startAngle",2),o([np()],g_.prototype,"endAngle",2),o([np()],g_.prototype,"counterClockwise",2),o([np()],g_.prototype,"type",2);var gV=class extends aW{constructor(t,e,i=0,a){super(t,e,a),this.angle=i}createCanvasGradient(t,e){let{colorSpace:i,stops:a,angle:s}=this,r=aw(aE(s+90));if(!("createConicGradient"in t))return new aH(i,a,s).createCanvasGradient(t,e);let n=e.x+.5*e.width,o=e.y+.5*e.height;return t.createConicGradient(r,n,o)}};function gW(t,e,i){let a=Math.sqrt(t**2+e**2),s=Math.atan2(e,t)+i;return{x:Math.cos(s)*a,y:Math.sin(s)*a}}var gH=class extends ng{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(t){}computeBBox(){let{innerRadius:t,outerRadius:e,columnWidth:i}=this,a=this.getRotation(),s=-i/2,r=i/2,n=-e,o=-t,l=1/0,h=1/0,d=-1/0,u=-1/0;for(let t=0;t<4;t+=1){let{x:e,y:i}=gW(t%2==0?s:r,t<2?n:o,a);l=Math.min(e,l),h=Math.min(i,h),d=Math.max(e,d),u=Math.max(i,u)}return new tI(l,h,d-l,u-h)}getRotation(){let{startAngle:t,endAngle:e}=this,i=aR(t,e);return aw(t+i/2+Math.PI/2)}updatePath(){let{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){let{columnWidth:t,innerRadius:e,outerRadius:i,path:a}=this,s=-t/2,r=t/2,n=-i,o=-e,l=this.getRotation(),h=[[s,o],[s,n],[r,n],[r,o]].map(([t,e])=>gW(t,e,l));a.clear(!0),a.moveTo(h[0].x,h[0].y),a.lineTo(h[1].x,h[1].y),a.lineTo(h[2].x,h[2].y),a.lineTo(h[3].x,h[3].y),a.closePath()}updateBeveledPath(){let{columnWidth:t,path:e,outerRadius:i,innerRadius:a,axisInnerRadius:s,axisOuterRadius:r,isRadiusAxisReversed:n}=this,o=tg(a,s),l=Math.asin(t/2/a),h=this.getRotation(),d=(t,e)=>gW(t,e,h),u=(t,e)=>Math.sqrt(t**2+e**2),c=(t,e)=>e>t?0:Math.sqrt(t**2-e**2),p=(t,e,i)=>i?t<e:t>e,g=o&&!isNaN(l)&&l<Math.PI/6,y=-t/2,m=t/2,f=-i,x=-a*(g?Math.cos(l):1),M=p(r,u(a,t/2),!n);if(M){let t=c(r,a);y=-t,m=t}e.clear(!0);let b=d(y,x);e.moveTo(b.x,b.y);let v=tg(a,i),I=p(r,u(i,t/2),!n);if(v&&g)e.arc(0,0,a,aw(-l-Math.PI/2)+h,aw(l-Math.PI/2)+h,!1);else if(I){let a=-c(r,t/2),s=c(r,i);if(!M){let t=d(y,a);e.lineTo(t.x,t.y)}if(e.arc(0,0,r,Math.atan2(a,y)+h,Math.atan2(f,-s)+h,!1),!tg(s,0)){let t=d(s,f);e.lineTo(t.x,t.y)}e.arc(0,0,r,Math.atan2(f,s)+h,Math.atan2(a,m)+h,!1)}else{let t=d(y,f),i=d(m,f);e.lineTo(t.x,t.y),e.lineTo(i.x,i.y)}let D=d(m,x);if(e.lineTo(D.x,D.y),g)e.arc(0,0,a,aw(l-Math.PI/2)+h,aw(-l-Math.PI/2)+h,!0);else{let t=d(y,x);e.lineTo(t.x,t.y)}e.closePath()}};function g$(t,e,i,a,s){let r=aR(t,e),n=r*(1-a)/2;if(t+=n,e-=n,r<.001)return 2*i*s;if(r>=2*Math.PI){let i=t+r/2;t=i-Math.PI,e=i+Math.PI}let o=i*Math.cos(t),l=i*Math.sin(t),h=Math.floor(Math.sqrt((o-i*Math.cos(e))**2+(l-i*Math.sin(e))**2));return Math.max(1,Math.min(2*i*s,h))}gH.className="RadialColumnShape",o([np()],gH.prototype,"isBeveled",2),o([np()],gH.prototype,"columnWidth",2),o([np()],gH.prototype,"startAngle",2),o([np()],gH.prototype,"endAngle",2),o([np()],gH.prototype,"outerRadius",2),o([np()],gH.prototype,"innerRadius",2),o([np()],gH.prototype,"axisInnerRadius",2),o([np()],gH.prototype,"axisOuterRadius",2),o([np()],gH.prototype,"isRadiusAxisReversed",2);var gQ=class extends ng{constructor(t=""){super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=t}get d(){return this._d}set d(t){if(t!==this._d){for(let[e,i,a]of(this._d=t,this.commands.length=0,t.matchAll(/([A-Z])([0-9. ]*)/g))){let t=a.split(/\s+/g).map(Number);this.commands.push([i,t])}this.checkPathDirty()}}updatePath(){let{path:t,x:e,y:i}=this;t.clear();let a=e,s=i;for(let[r,n]of this.commands)switch(r){case"M":t.moveTo(e+n[0],i+n[1]),a=e+n[0];break;case"C":t.cubicCurveTo(e+n[0],i+n[1],e+n[2],i+n[3],e+n[4],i+n[5]),a=e+n[4],s=i+n[5];break;case"H":t.lineTo(e+n[0],s),a=i+n[0];break;case"L":t.lineTo(e+n[0],i+n[1]),a=e+n[0],s=i+n[1];break;case"V":t.lineTo(a,i+n[0]),s=i+n[0];break;case"Z":t.closePath();break;default:throw Error(`Could not translate command '${r}' with '${n.join(" ")}'`)}t.closePath()}};o([np()],gQ.prototype,"x",2),o([np()],gQ.prototype,"y",2);var gX=class t extends lc{updatePath(){let e=this.size/2;super.applyPath(e,t.moves)}};gX.className="ArrowUp",gX.moves=[{x:0,y:0,t:"move"},{x:1,y:1.2},{x:-.5,y:0},{x:0,y:.8},{x:-1,y:0},{x:0,y:-.8},{x:-.5,y:0}];var gK=gX,gJ=class extends lc{updatePath(){let t=this.size/2;super.applyPath(t,gK.moves.map(t=>({x:-1*t.x,y:-1*t.y})))}};gJ.className="ArrowDown";var gq={...U,...iU},g0=a1.toFontString;n({},{CARTESIAN_AXIS_TYPE:()=>hm,CARTESIAN_POSITION:()=>hy,ChartTheme:()=>p8,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>h2,DEFAULT_ANNOTATION_COLOR:()=>h0,DEFAULT_ANNOTATION_HANDLE_FILL:()=>h4,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>h9,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>h6,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>h8,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>h7,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>h3,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>h5,DEFAULT_AXIS_GRID_COLOUR:()=>hA,DEFAULT_AXIS_LINE_COLOUR:()=>hw,DEFAULT_BACKGROUND_COLOUR:()=>hT,DEFAULT_CAPTION_ALIGNMENT:()=>hR,DEFAULT_CAPTION_LAYOUT_STYLE:()=>hj,DEFAULT_COLOURS:()=>hE,DEFAULT_CROSS_LINES_COLOUR:()=>hC,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>hQ,DEFAULT_FONT_FAMILY:()=>hI,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>hK,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>hX,DEFAULT_GRIDLINE_ENABLED:()=>ds,DEFAULT_HIERARCHY_FILLS:()=>hJ,DEFAULT_HIERARCHY_STROKES:()=>hq,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>hN,DEFAULT_INVERTED_LABEL_COLOUR:()=>hS,DEFAULT_LABEL_COLOUR:()=>hD,DEFAULT_MUTED_LABEL_COLOUR:()=>hL,DEFAULT_PADDING:()=>hO,DEFAULT_POLAR_SERIES_STROKE:()=>h$,DEFAULT_SHADOW_COLOUR:()=>hk,DEFAULT_TEXTBOX_COLOR:()=>di,DEFAULT_TEXTBOX_FILL:()=>dt,DEFAULT_TEXTBOX_STROKE:()=>de,DEFAULT_TEXT_ANNOTATION_COLOR:()=>h1,DEFAULT_TOOLBAR_POSITION:()=>da,FONT_SIZE:()=>hp,FONT_WEIGHT:()=>hg,IS_COMMUNITY:()=>hb,IS_DARK_THEME:()=>hM,IS_ENTERPRISE:()=>hv,PALETTE_ALT_DOWN_FILL:()=>hV,PALETTE_ALT_DOWN_STROKE:()=>hZ,PALETTE_ALT_NEUTRAL_FILL:()=>hW,PALETTE_ALT_NEUTRAL_STROKE:()=>hH,PALETTE_ALT_UP_FILL:()=>h_,PALETTE_ALT_UP_STROKE:()=>hY,PALETTE_DOWN_FILL:()=>hG,PALETTE_DOWN_STROKE:()=>hP,PALETTE_NEUTRAL_FILL:()=>hU,PALETTE_NEUTRAL_STROKE:()=>hF,PALETTE_UP_FILL:()=>hB,PALETTE_UP_STROKE:()=>hz,POLAR_AXIS_SHAPE:()=>hx,POLAR_AXIS_TYPE:()=>hf,getChartTheme:()=>gR,markerPaletteFactory:()=>hc,singleSeriesPaletteFactory:()=>hu,swapAxisCondition:()=>u5,themes:()=>g1});var g1=et(gj,t=>t?.());function g2(){return(t,e)=>{let i=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");y.warnOnce(i)}}function g4(t,e){let i=g2(),a=e?.default;return tB((e,s,r)=>(r!==a&&i(s.toString(),t),r))}function g3(t,e){let i=g2();return tB((a,s,r)=>(r!==a[t]&&(i(s.toString(),`Use [${t}] instead.`),es(a,t,e?e(r):r)),tR),(e,a)=>(i(a.toString(),`Use [${t}] instead.`),ei(e,t)))}function g5(t,e,i){let a;if(!(t>e)){for(;e>=t;){let s=Math.floor((e+t)/2),r=i(s);null==r?e=s-1:(a=r,t=s+1)}return a}}n({},{BandScale:()=>eV,ColorScale:()=>aV,ContinuousScale:()=>eN,Invalidating:()=>eD,LinearScale:()=>lZ,OrdinalTimeScale:()=>ai,TimeScale:()=>at}),n({},{Color:()=>tE,Debug:()=>aN,Logger:()=>y,Padding:()=>rE,TimeInterval:()=>m,angleBetween:()=>aR,angleDiff:()=>aj,arcDistanceSquared:()=>aU,areArrayNumbersEqual:()=>a7,checkDatum:()=>sU,clamp:()=>td,clampArray:()=>tu,clockwiseAngle:()=>aP,clockwiseAngles:()=>aB,countFractionDigits:()=>tM,createId:()=>_,day:()=>N,deepClone:()=>si,displacePointFromVector:()=>az,extent:()=>eL,findMinMax:()=>tc,findRangeExtent:()=>tp,formatNormalizedPercentage:()=>tb,formatPercentage:()=>tv,friday:()=>E,generateUUID:()=>V,getAttribute:()=>sb,hour:()=>S,interpolateColor:()=>tj,interpolateNumber:()=>tO,isBetweenAngles:()=>ak,isContinuous:()=>sF,isDate:()=>tW,isDenseInterval:()=>i8,isEqual:()=>tg,isNegative:()=>ty,isNumber:()=>t0,isNumberEqual:()=>tg,isNumberObject:()=>sG,isString:()=>tJ,isStringObject:()=>sB,jsonApply:()=>sr,jsonDiff:()=>se,jsonWalk:()=>ss,lineDistanceSquared:()=>aF,millisecond:()=>x,minute:()=>I,mod:()=>tx,monday:()=>w,month:()=>j,normalisedExtentWithMetadata:()=>eA,normalizeAngle180:()=>aT,normalizeAngle360:()=>aw,normalizeAngle360Inclusive:()=>aC,range:()=>i6,resetIds:()=>Z,round:()=>tm,sanitizeHtml:()=>dh,saturday:()=>O,second:()=>b,setAttribute:()=>sx,setAttributes:()=>sM,setElementStyle:()=>sv,shallowClone:()=>sa,sunday:()=>A,thursday:()=>k,tickFormat:()=>i9,tickStep:()=>i3,ticks:()=>i2,toDegrees:()=>aO,toFixed:()=>tf,toRadians:()=>aE,transformIntegratedCategoryValue:()=>sY,tuesday:()=>C,utcDay:()=>B,utcHour:()=>P,utcMinute:()=>z,utcMonth:()=>G,utcYear:()=>F,wednesday:()=>T,year:()=>R}),n({},{AND:()=>eX,ARRAY:()=>it,ARRAY_OF:()=>ie,AbstractBarSeries:()=>u7,AbstractBarSeriesProperties:()=>u8,ActionOnSet:()=>su,Animation:()=>eM,AnimationManager:()=>nK,Axis:()=>rf,AxisInterval:()=>ri,AxisLabel:()=>ra,AxisTick:()=>rr,AxisTicks:()=>ya,BOOLEAN:()=>e0,BOOLEAN_ARRAY:()=>iu,Background:()=>lJ,BackgroundModule:()=>lq,BaseModuleInstance:()=>rA,BaseProperties:()=>eW,COLOR_STRING:()=>ih,COLOR_STRING_ARRAY:()=>id,CachedTextMeasurer:()=>a0,CachedTextMeasurerPool:()=>aq,CartesianAxis:()=>rb,CartesianSeries:()=>lP,CartesianSeriesNodeEvent:()=>lR,CartesianSeriesProperties:()=>lz,CategoryAxis:()=>rv,ChartAxisDirection:()=>iG,ChartEventManager:()=>nJ,ChartOptions:()=>gB,ChartUpdateType:()=>oy,ContextMenuRegistry:()=>nq,Cursor:()=>n1,CursorManager:()=>n2,DATE:()=>ir,DATE_ARRAY:()=>ig,DATE_OR_DATETIME_MS:()=>io,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>lO,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>lj,DEFAULT_TOOLTIP_CLASS:()=>sD,DEFAULT_TOOLTIP_DARK_CLASS:()=>sS,DEGREE:()=>e8,DIRECTION:()=>iw,DOMManager:()=>na,DRAG_INTERACTION_TYPES:()=>nY,DataController:()=>oL,DataModel:()=>oN,DataModelSeries:()=>lL,DataService:()=>nB,Default:()=>rt,Deprecated:()=>g4,DeprecatedAndRenamedTo:()=>g3,EMPTY_TOOLTIP_CONTENT:()=>sN,FONT_STYLE:()=>iI,FONT_WEIGHT:()=>iD,FUNCTION:()=>e1,GREATER_THAN:()=>is,GestureDetector:()=>n3,GroupedCategoryAxis:()=>rL,HierarchyNode:()=>g8,HierarchySeries:()=>g7,HierarchySeriesProperties:()=>yt,HighlightManager:()=>n5,HighlightProperties:()=>lT,HighlightStyle:()=>lk,INTERACTION_RANGE:()=>iT,INTERPOLATION_STEP_POSITION:()=>d4,INTERPOLATION_TYPE:()=>d2,InteractionManager:()=>nQ,InteractionState:()=>rU,InterpolationProperties:()=>d3,KeyNavManager:()=>n9,LABEL_PLACEMENT:()=>ik,LARGEST_KEY_INTERVAL:()=>dO,LESS_THAN:()=>ia,LINE_CAP:()=>im,LINE_DASH:()=>ib,LINE_JOIN:()=>ix,LINE_STYLE:()=>iM,LayoutElement:()=>rR,LayoutManager:()=>rz,LonLatBBox:()=>ye,MARKER_SHAPE:()=>dJ,MATCHING_CROSSLINE_TYPE:()=>sZ,MAX_SPACING:()=>ij,MIN_SPACING:()=>iO,MercatorScale:()=>pC,ModuleRegistry:()=>rw,Motion:()=>en,NAN:()=>e5,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>eb,NUMBER:()=>e4,NUMBER_ARRAY:()=>ic,NUMBER_OR_NAN:()=>e7,Navigator:()=>hh,NavigatorModule:()=>hd,NodeRegionBBoxProvider:()=>n8,OBJECT:()=>eJ,OBJECT_ARRAY:()=>iy,OR:()=>eK,OVERFLOW_STRATEGY:()=>iA,ObserveChanges:()=>sc,PHASE_METADATA:()=>em,PHASE_ORDER:()=>ey,PLACEMENT:()=>iC,PLAIN_OBJECT:()=>eq,POINTER_INTERACTION_TYPES:()=>nZ,POSITION:()=>iv,POSITION_TOP_COORDINATES:()=>sQ,POSITIVE_NUMBER:()=>e9,PolarAxis:()=>pf,PolarSeries:()=>c4,PropertiesArray:()=>eH,ProxyOnWrite:()=>sh,ProxyProperty:()=>sl,ProxyPropertyOnWrite:()=>sd,QUICK_TRANSITION:()=>.2,RATIO:()=>e6,REAL_NUMBER:()=>e3,REGIONS:()=>n6,RegionManager:()=>oa,RepeatType:()=>ef,SKIP_JS_BUILTINS:()=>ea,SMALLEST_KEY_INTERVAL:()=>dE,SORT_DOMAIN_GROUPS:()=>dj,STRING:()=>e2,STRING_ARRAY:()=>ip,Series:()=>o4,SeriesGroupingChangedEvent:()=>o2,SeriesItemHighlightStyle:()=>lA,SeriesMarker:()=>dq,SeriesNodeEvent:()=>o1,SeriesNodePickMode:()=>o0,SeriesProperties:()=>lE,SeriesTooltip:()=>d1,SimpleRegionBBoxProvider:()=>n7,SimpleTextMeasurer:()=>a2,StateMachine:()=>sy,TEXT_ALIGN:()=>iN,TEXT_WRAP:()=>iS,TICK_INTERVAL:()=>re,TOOLBAR_ALIGNMENTS:()=>os,TOOLBAR_GROUPS:()=>or,TOOLBAR_GROUP_ORDERING:()=>on,TOOLBAR_POSITIONS:()=>ol,TextUtils:()=>a1,TextWrapper:()=>sm,ToolbarManager:()=>od,ToolbarPosition:()=>oo,Tooltip:()=>sw,TooltipManager:()=>ou,TooltipPosition:()=>sA,UNION:()=>iE,UpdateService:()=>om,VERTICAL_ALIGN:()=>iL,Validate:()=>eQ,Vec2:()=>pn,Vec4:()=>g9,ZIndexMap:()=>sP,ZoomManager:()=>oc,__FORCE_MODULE_DETECTION:()=>ys,accumulateGroup:()=>dY,accumulateStack:()=>d_,accumulatedValue:()=>dM,accumulativeValueProperty:()=>dw,addHitTestersToQuadtree:()=>u9,adjustLabelPlacement:()=>cp,animationValidation:()=>dG,area:()=>dx,arraysEqual:()=>ew,backfillPathPointData:()=>uf,buildFormatter:()=>eF,buildResetPathFn:()=>uL,calculateDefaultTimeTickFormat:()=>eZ,calculateLabelChartPadding:()=>s$,calculateLabelTranslation:()=>sH,calculatePlacement:()=>sI,checkCrisp:()=>cs,circularSliceArray:()=>eE,clamp:()=>td,clampArray:()=>tu,collapsedStartingBarPosition:()=>cn,computeBarFocusBounds:()=>cd,computeMarkerFocusBounds:()=>up,convertValuesToScaleByDefs:()=>o3,countFractionDigits:()=>tM,createButton:()=>yr,createCheckbox:()=>yn,createDatumId:()=>dW,createDeprecationWarning:()=>g2,createElement:()=>te,createElementId:()=>th,createElementNS:()=>ti,createIcon:()=>yh,createSelect:()=>yo,createTextArea:()=>yl,dateToNumber:()=>eU,deconstructSelectionsOrNodes:()=>ex,deepClone:()=>si,deepMerge:()=>t6,defaultTimeTickFormat:()=>eY,determinePathStatus:()=>uF,diff:()=>dV,downloadUrl:()=>ta,enterpriseModule:()=>sf,excludesType:()=>t5,extent:()=>eL,extractDecoratedProperties:()=>tU,findMaxValue:()=>g5,findMinMax:()=>tc,findQuadtreeMatch:()=>u6,findRangeExtent:()=>tp,fixNumericExtent:()=>ov,focusCursorAtEnd:()=>to,formatNormalizedPercentage:()=>tb,formatPercentage:()=>tv,formatValue:()=>dn,fromToMotion:()=>ev,getDocument:()=>q,getLastFocus:()=>r6,getMissCount:()=>oI,getPath:()=>ei,getPathComponents:()=>oS,getRectConfig:()=>ca,getWindow:()=>tt,groupAccumulativeValueProperty:()=>dT,groupAverage:()=>df,groupBy:()=>ek,groupCount:()=>dm,groupStackValueProperty:()=>dk,groupSum:()=>dg,initMenuKeyNav:()=>r3,initRovingTabIndex:()=>r2,initToolbarKeyNav:()=>r1,isAnimatingFloatingPosition:()=>oh,isArray:()=>tZ,isBoolean:()=>t_,isButtonClickEvent:()=>r9,isDate:()=>tV,isDecoratedObject:()=>tG,isDefined:()=>tY,isEnumKey:()=>t2,isEnumValue:()=>t4,isEqual:()=>tg,isFiniteNumber:()=>t0,isFunction:()=>t$,isHtmlElement:()=>t1,isNegative:()=>ty,isNumber:()=>tq,isObject:()=>tQ,isObjectLike:()=>tX,isPlainObject:()=>tK,isProperties:()=>e$,isRegExp:()=>tH,isString:()=>tJ,isSymbol:()=>t3,isValidDate:()=>tW,jsonApply:()=>sr,jsonDiff:()=>se,jsonWalk:()=>ss,keyProperty:()=>dN,labelDirectionHandling:()=>s4,listDecoratedProperties:()=>tF,makeAccessibleClickListener:()=>r5,mapValues:()=>et,markerFadeInAnimation:()=>uo,markerPaletteFactory:()=>hc,markerScaleInAnimation:()=>ul,markerSwipeScaleInAnimation:()=>uh,mergeArrayDefaults:()=>t7,mergeDefaults:()=>t8,midpointStartingBarPosition:()=>co,minMax:()=>ug,mod:()=>tx,moduleRegistry:()=>rC,nearestSquared:()=>X,nearestSquaredInContainer:()=>K,normaliseGroupTo:()=>dz,normalisePropertyTo:()=>dB,normalisedExtentWithMetadata:()=>eA,objectEqualWith:()=>t9,pairCategoryData:()=>uG,pairContinuousData:()=>uB,partialAssign:()=>er,pathFadeInAnimation:()=>uS,pathFadeOutAnimation:()=>uN,pathRangePoints:()=>uj,pathRangePointsReverse:()=>uR,pathRanges:()=>uO,pathSwipeInAnimation:()=>uD,pickByMatchingAngle:()=>c2,pickNode:()=>o5,plotPath:()=>ub,predicateWithMessage:()=>iR,prepareAreaPathAnimation:()=>u2,prepareAxisAnimationContext:()=>ro,prepareAxisAnimationFunctions:()=>rd,prepareBarAnimationFunctions:()=>cl,prepareLinePathAnimation:()=>uZ,prepareLinePathAnimationFns:()=>uY,prepareLinePathPropertyAnimation:()=>uU,prepareMarkerAnimation:()=>uc,preparePieSeriesAnimationFunctions:()=>c0,range:()=>dy,rangedValueProperty:()=>dA,renderPartialPath:()=>uI,resetAxisGroupFn:()=>ru,resetAxisLabelSelectionFn:()=>rp,resetAxisLineSelectionFn:()=>rg,resetAxisSelectionFn:()=>rc,resetBarSelectionsFn:()=>ch,resetIds:()=>Z,resetLabelFn:()=>dQ,resetMarkerFn:()=>ud,resetMarkerPositionFn:()=>uu,resetMotion:()=>iY,resetPieSelectionsFn:()=>c1,round:()=>tm,scale:()=>uz,seriesLabelFadeInAnimation:()=>dH,seriesLabelFadeOutAnimation:()=>d$,setDocument:()=>ts,setElementBBox:()=>tn,setPath:()=>es,setWindow:()=>tr,shallowClone:()=>sa,singleSeriesPaletteFactory:()=>hu,sortBasedOnArray:()=>eO,splitPairData:()=>uv,staticFromToMotion:()=>eI,stopPageScrolling:()=>r8,stringify:()=>iB,sum:()=>dp,sumValues:()=>dc,toArray:()=>eC,toFixed:()=>tf,toTooltipHtml:()=>sL,trailingAccumulatedValue:()=>db,trailingAccumulatedValueProperty:()=>dC,unique:()=>eT,updateClipPath:()=>uA,updateLabelNode:()=>cu,updateRect:()=>ci,validateCrossLineValues:()=>s_,valueProperty:()=>dL,without:()=>ee});var g9={bottomCenter:function(t){return{x:(t.x1+t.x2)/2,y:Math.max(t.y1,t.y2)}},center:function(t){return{x:(t.x1+t.x2)/2,y:(t.y1+t.y2)/2}},clone:function(t){return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}},end:function(t){return{x:t.x2,y:t.y2}},from:function(t,e,i,a){if("number"==typeof t)return{x1:t,y1:e,x2:i,y2:a};if("width"in t)return{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height};throw Error(`Values can not be converted into a vector4: [${t}] [${e}] [${i}] [${a}]`)},height:function(t){return Math.abs(t.y2-t.y1)},round:function(t){return{x1:Math.round(t.x1),y1:Math.round(t.y1),x2:Math.round(t.x2),y2:Math.round(t.y2)}},start:function(t){return{x:t.x1,y:t.y1}},topCenter:function(t){return{x:(t.x1+t.x2)/2,y:Math.min(t.y1,t.y2)}},origin:function(){return{x1:0,y1:0,x2:0,y2:0}},width:function(t){return Math.abs(t.x2-t.x1)}},g6=class t{constructor(t,e,i,a,s,r,n,o,l,h,d){this.series=t,this.index=e,this.datum=i,this.size=a,this.colorValue=s,this.fill=r,this.stroke=n,this.sumSize=o,this.depth=l,this.parent=h,this.children=d,this.midPoint={x:0,y:0}}contains(t){let e=t;for(;null!=e&&e.index>=this.index;){if(e===this)return!0;e=e.parent}return!1}walk(e,i=t.Walk.PreOrder){i===t.Walk.PreOrder&&e(this),this.children.forEach(t=>{t.walk(e,i)}),i===t.Walk.PostOrder&&e(this)}*[Symbol.iterator](){for(let t of(yield this,this.children))yield*t}};g6.Walk={PreOrder:0,PostOrder:1};var g8=g6,g7=class extends o4{constructor(t){super({moduleCtx:t,pickModes:[1,0],contentGroupVirtual:!1}),this.rootNode=new g8(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.focusPath=[],this.animationState=new sy("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}async processData(){let t;let{childrenKey:e,sizeKey:i,colorKey:a,fills:s,strokes:r,colorRange:n}=this.properties,o=0,l=()=>o+=1,h=0,d=1/0,u=-1/0,c=Array((this.data?.length??0)+1).fill(void 0),p=(t,s)=>{let r=l(),n=null!=s.depth?s.depth+1:0,o=null!=e?t[e]:void 0,p=null==o||0===o.length,y=null!=i?t[i]:void 0,m=y=Number.isFinite(y)?Math.max(y,0):p?1:0;h=Math.max(h,n);let f=null!=a?t[a]:void 0;return"number"==typeof f&&(c[r]=f,d=Math.min(d,f),u=Math.max(u,f)),g(new g8(this,r,t,y,f,void 0,void 0,m,n,s,[]),o)},g=(t,e)=>(e?.forEach(e=>{let i=p(e,t);t.children.push(i),t.sumSize+=i.sumSize}),t),y=g(new g8(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),m=[d,u];null!=n&&Number.isFinite(d)&&Number.isFinite(u)&&((t=new aV).domain=m,t.range=n,t.update()),y.children.forEach((e,i)=>{e.walk(e=>{let a;let n=c[e.index];null!=n&&(a=t?.convert(n)),a??(a=s?.[i%s.length]),e.fill=a,e.stroke=null==t?r?.[i%r.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=y,this.maxDepth=h,this.colorDomain=m,this.focusPath=[{nodeDatum:this.rootNode,childIndex:0}]}async update({seriesRect:t}){await this.updateSelections(),await this.updateNodes();let e=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",e),this.animationState.transition("update",e)}resetAllAnimation(t){let e=this.animationResetFns?.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=e&&iY(t.datumSelections,e)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){let e=this.animationResetFns?.datum;null!=e&&iY([t],e)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){let{colorKey:e,colorName:i,colorRange:a,visible:s}=this.properties;return"gradient"===t&&null!=e&&null!=a?[{legendType:"gradient",enabled:s,seriesId:this.id,colorName:i,colorRange:a,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}pickFocus(t){if(0===this.rootNode.children.length)return;0===this.focusPath.length&&y.error("this.focusPath should not be empty");let{datumIndexDelta:e,otherIndexDelta:i}=t,{focusPath:a}=this,s=a.length-2;if(0!==i||1===a.length){let t=Math.max(0,s+i);if(void 0!==a[t+1])return a.length=t+2,this.computeFocusOutputs(a[t+1]);{let e=a[a.length-1];for(;e.nodeDatum.children.length>0&&(e.nodeDatum.depth??-1)<t;){let t={nodeDatum:e.nodeDatum.children[0],childIndex:0};a.push(t),e=t}return this.computeFocusOutputs(e)}}if(0===e)return this.computeFocusOutputs(a[a.length-1]);{let t=a[s+1].childIndex+e,i=a[s].nodeDatum,r=i?.children?.length;if(void 0!==r){let e=td(0,t,r-1),n={nodeDatum:i.children[e],childIndex:e};return a[s+1]=n,a.length=s+2,this.computeFocusOutputs(n)}}}getDatumAriaText(t,e){if(!(t instanceof g8)){y.error(`datum is not HierarchyNode: ${t}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(t.depth??-1)+1,count:t.children.length,description:e})}computeFocusOutputs({nodeDatum:t,childIndex:e}){let i=this.computeFocusBounds(t);if(i)return{datum:t,datumIndex:e,otherIndex:t.depth,bounds:i,showFocusBox:!0}}},yt=class extends lE{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(cV),this.strokes=Object.values(cW)}};o([eQ(e2)],yt.prototype,"childrenKey",2),o([eQ(e2,{optional:!0})],yt.prototype,"sizeKey",2),o([eQ(e2,{optional:!0})],yt.prototype,"colorKey",2),o([eQ(e2,{optional:!0})],yt.prototype,"colorName",2),o([eQ(id)],yt.prototype,"fills",2),o([eQ(id)],yt.prototype,"strokes",2),o([eQ(id,{optional:!0})],yt.prototype,"colorRange",2);var ye=class{constructor(t,e,i,a){this.lon0=t,this.lat0=e,this.lon1=i,this.lat1=a}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}},yi=class t{constructor(){this.id=_(this),this.axisGroup=new av({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=aL.select(this.axisGroup,a3),this.interval=new ri,this.label=new ra,this.scale=new lZ,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(t){t.appendChild(this.axisGroup)}calculateLayout(){this.scale.interval=this.interval.step;let t=[],e=this.generateTicks(),{translationX:i,translationY:a}=this;return this.labelSelection.update(e.ticks.map(t=>this.createLabelDatum(t)),void 0,t=>t.tickId),this.labelSelection.each((e,i)=>{e.setProperties(i),i.visible&&t.push(e.getBBox())}),this.axisGroup.setProperties({translationX:i,translationY:a}),tI.merge(t)}getLabelParams(t){let{padding:e}=this,{translate:i}=t;switch(this.position){case"top":case"bottom":return{x:i,y:e,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:e,y:i,textAlign:"start",textBaseline:"middle"}}}inRange(t,e=.001){let[i,a]=tc(this.scale.range);return t>=i-e&&t<=a+e}createLabelDatum(t){let{x:e,y:i,textBaseline:a,textAlign:s}=this.getLabelParams(t);return{visible:!!t.tickLabel,tickId:t.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:t.tickLabel,textAlign:s,textBaseline:a,x:e,y:i}}generateTicks(){let{minSpacing:e,maxSpacing:i}=this.interval,{maxTickCount:a,minTickCount:s,tickCount:r}=function(t,e,i,a,s){s=Math.max(s,t/(a+1)),isNaN(e)&&(e=s),isNaN(i)&&(i=t),e>i&&(e===s?e=i:i=e);let r=td(1,Math.floor(t/e),Math.min(Math.floor(t),100)),n=Math.min(r,Math.ceil(t/i)),o=td(n,a,r);return{minTickCount:n,maxTickCount:r,tickCount:o}}(tm(tp(this.scale.range),2),e,i,t.DefaultTickCount,t.DefaultMinSpacing);r&&(this.scale.tickCount=r,this.scale.minTickCount=s,this.scale.maxTickCount=a);let n=this.getTicksData();if("bottom"===this.position||"top"===this.position){let t=aq.getMeasurer({font:this.label}),e=this.scale.getDomain(),i=e[0]>e[1]?-1:1,a=-1/0*i;n.ticks=n.ticks.filter(e=>Math.sign(e.translate-a)===i&&(a=e.translate+t.textWidth(e.tickLabel,!0)*i,!0))}return n}getTicksData(){let t=[],e=this.scale.ticks(),i=e.reduce((t,e)=>Math.max(t,"number"==typeof e?tM(e):0),0),a=function(){let t=new Map;return e=>{let i=t.get(e);return i?(t.set(e,i+1),`${e}${i}`):(t.set(e,1),e)}}(),s=this.label.format?this.scale.tickFormat({ticks:e,specifier:this.label.format}):t=>tq(t)?t.toFixed(i):String(t);for(let r=0;r<e.length;r++){let n=e[r],o=this.scale.convert(n);if(!this.inRange(o))continue;let l=this.label.formatter?.({value:n,index:r,fractionDigits:i})??s(n),h=a(l);t.push({tick:n,tickId:h,tickLabel:l,translate:o})}return{rawTicks:e,fractionDigits:i,ticks:t}}};yi.DefaultTickCount=5,yi.DefaultMinSpacing=50;var ya=yi,ys=0;function yr(t,e){let i=te("button",yd("ag-charts-input ag-charts-button",e));return void 0!==t.label?i.append(t.label):(i.append(yh(t.icon)),i.ariaLabel=t.altText),i.addEventListener("click",t.onPress),sM(i,e),i}function yn(t,e){let i=te("input",yd("ag-charts-input ag-charts-checkbox",e));return i.type="checkbox",i.checked=t.checked,i.addEventListener("change",e=>t.onChange(i.checked,e)),i.addEventListener("keydown",t=>{r9(t)&&(t.preventDefault(),i.click())}),sM(i,e),i}function yo(t,e){let i=te("select",yd("ag-charts-input ag-charts-select",e));return i.append(...t.options.map(t=>{let e=te("option");return e.value=t.value,e.textContent=t.label,e})),sx(i,"data-preventdefault",!1),i.value=t.value,i.addEventListener("change",e=>t.onChange(i.value,e)),sM(i,e),i}function yl(t,e){let i=te("textarea",yd("ag-charts-input ag-charts-textarea",e));return i.value=t.value,i.addEventListener("input",e=>t.onChange(i.value,e)),sM(i,e),i}function yh(t){let e=te("span",`ag-charts-icon ag-charts-icon-${t}`);return sx(e,"aria-hidden",!0),e}function yd(t,e){return null==e?t:`${t} ${e.class}`}function yu(t,e){return{...t,container:e.current}}var yc=function(t,e){let i=(0,a.forwardRef)(function(e,i){let{options:s,style:r,className:n}=e,o=(0,a.useRef)(null),l=(0,a.useRef)();(0,a.useLayoutEffect)(()=>{let e=t(yu(s,o));return l.current=e,()=>{e.destroy()}},[]);let h=void 0===l.current;return(0,a.useEffect)(()=>{h||l.current?.update(yu(s,o))},[s]),(0,a.useImperativeHandle)(i,()=>l.current,[]),(0,a.useMemo)(()=>(0,a.createElement)("div",{ref:o,style:r,className:n}),[r,n])});return i.displayName=e,i}(t=>gU.create(t),"AgCharts")}};